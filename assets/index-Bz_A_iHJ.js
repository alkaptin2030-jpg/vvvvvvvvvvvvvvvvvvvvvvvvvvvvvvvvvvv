var Uj=Object.defineProperty;var d_=t=>{throw TypeError(t)};var $j=(t,e,n)=>e in t?Uj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var h_=(t,e,n)=>$j(t,typeof e!="symbol"?e+"":e,n),Fm=(t,e,n)=>e.has(t)||d_("Cannot "+n);var z=(t,e,n)=>(Fm(t,e,"read from private field"),n?n.call(t):e.get(t)),Ke=(t,e,n)=>e.has(t)?d_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ie=(t,e,n,r)=>(Fm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),sn=(t,e,n)=>(Fm(t,e,"access private method"),n);var Bd=(t,e,n,r)=>({set _(s){Ie(t,e,s,n)},get _(){return z(t,e,r)}});function Bj(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function NT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var IT={exports:{}},sp={},CT={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ed=Symbol.for("react.element"),zj=Symbol.for("react.portal"),Wj=Symbol.for("react.fragment"),Hj=Symbol.for("react.strict_mode"),qj=Symbol.for("react.profiler"),Kj=Symbol.for("react.provider"),Gj=Symbol.for("react.context"),Qj=Symbol.for("react.forward_ref"),Yj=Symbol.for("react.suspense"),Xj=Symbol.for("react.memo"),Jj=Symbol.for("react.lazy"),f_=Symbol.iterator;function Zj(t){return t===null||typeof t!="object"?null:(t=f_&&t[f_]||t["@@iterator"],typeof t=="function"?t:null)}var AT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},PT=Object.assign,RT={};function Yl(t,e,n){this.props=t,this.context=e,this.refs=RT,this.updater=n||AT}Yl.prototype.isReactComponent={};Yl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Yl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function kT(){}kT.prototype=Yl.prototype;function Uv(t,e,n){this.props=t,this.context=e,this.refs=RT,this.updater=n||AT}var $v=Uv.prototype=new kT;$v.constructor=Uv;PT($v,Yl.prototype);$v.isPureReactComponent=!0;var p_=Array.isArray,jT=Object.prototype.hasOwnProperty,Bv={current:null},DT={key:!0,ref:!0,__self:!0,__source:!0};function OT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)jT.call(e,r)&&!DT.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:ed,type:t,key:i,ref:o,props:s,_owner:Bv.current}}function eD(t,e){return{$$typeof:ed,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zv(t){return typeof t=="object"&&t!==null&&t.$$typeof===ed}function tD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var m_=/\/+/g;function Um(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tD(""+t.key):e.toString(36)}function bh(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ed:case zj:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Um(o,0):r,p_(s)?(n="",t!=null&&(n=t.replace(m_,"$&/")+"/"),bh(s,e,n,"",function(u){return u})):s!=null&&(zv(s)&&(s=eD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(m_,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",p_(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Um(i,l);o+=bh(i,e,n,c,s)}else if(c=Zj(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Um(i,l++),o+=bh(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zd(t,e,n){if(t==null)return t;var r=[],s=0;return bh(t,r,"","",function(i){return e.call(n,i,s++)}),r}function nD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cn={current:null},Eh={transition:null},rD={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:Eh,ReactCurrentOwner:Bv};function MT(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:zd,forEach:function(t,e,n){zd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zd(t,function(){e++}),e},toArray:function(t){return zd(t,function(e){return e})||[]},only:function(t){if(!zv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=Yl;Me.Fragment=Wj;Me.Profiler=qj;Me.PureComponent=Uv;Me.StrictMode=Hj;Me.Suspense=Yj;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rD;Me.act=MT;Me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=PT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Bv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)jT.call(e,c)&&!DT.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:ed,type:t.type,key:s,ref:i,props:r,_owner:o}};Me.createContext=function(t){return t={$$typeof:Gj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Kj,_context:t},t.Consumer=t};Me.createElement=OT;Me.createFactory=function(t){var e=OT.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:Qj,render:t}};Me.isValidElement=zv;Me.lazy=function(t){return{$$typeof:Jj,_payload:{_status:-1,_result:t},_init:nD}};Me.memo=function(t,e){return{$$typeof:Xj,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=Eh.transition;Eh.transition={};try{t()}finally{Eh.transition=e}};Me.unstable_act=MT;Me.useCallback=function(t,e){return Cn.current.useCallback(t,e)};Me.useContext=function(t){return Cn.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return Cn.current.useDeferredValue(t)};Me.useEffect=function(t,e){return Cn.current.useEffect(t,e)};Me.useId=function(){return Cn.current.useId()};Me.useImperativeHandle=function(t,e,n){return Cn.current.useImperativeHandle(t,e,n)};Me.useInsertionEffect=function(t,e){return Cn.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return Cn.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return Cn.current.useMemo(t,e)};Me.useReducer=function(t,e,n){return Cn.current.useReducer(t,e,n)};Me.useRef=function(t){return Cn.current.useRef(t)};Me.useState=function(t){return Cn.current.useState(t)};Me.useSyncExternalStore=function(t,e,n){return Cn.current.useSyncExternalStore(t,e,n)};Me.useTransition=function(){return Cn.current.useTransition()};Me.version="18.3.1";CT.exports=Me;var p=CT.exports;const J=NT(p),Wv=Bj({__proto__:null,default:J},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sD=p,iD=Symbol.for("react.element"),oD=Symbol.for("react.fragment"),aD=Object.prototype.hasOwnProperty,lD=sD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cD={key:!0,ref:!0,__self:!0,__source:!0};function LT(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)aD.call(e,r)&&!cD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:iD,type:t,key:i,ref:o,props:s,_owner:lD.current}}sp.Fragment=oD;sp.jsx=LT;sp.jsxs=LT;IT.exports=sp;var a=IT.exports,VT={exports:{}},ar={},FT={exports:{}},UT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,L){var $=V.length;V.push(L);e:for(;0<$;){var ie=$-1>>>1,Z=V[ie];if(0<s(Z,L))V[ie]=L,V[$]=Z,$=ie;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var L=V[0],$=V.pop();if($!==L){V[0]=$;e:for(var ie=0,Z=V.length,le=Z>>>1;ie<le;){var he=2*(ie+1)-1,Oe=V[he],De=he+1,X=V[De];if(0>s(Oe,$))De<Z&&0>s(X,Oe)?(V[ie]=X,V[De]=$,ie=De):(V[ie]=Oe,V[he]=$,ie=he);else if(De<Z&&0>s(X,$))V[ie]=X,V[De]=$,ie=De;else break e}}return L}function s(V,L){var $=V.sortIndex-L.sortIndex;return $!==0?$:V.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,m=3,g=!1,T=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(V){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=V)r(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(u)}}function I(V){if(v=!1,w(V),!T)if(n(c)!==null)T=!0,G(k);else{var L=n(u);L!==null&&Q(I,L.startTime-V)}}function k(V,L){T=!1,v&&(v=!1,_(S),S=-1),g=!0;var $=m;try{for(w(L),f=n(c);f!==null&&(!(f.expirationTime>L)||V&&!j());){var ie=f.callback;if(typeof ie=="function"){f.callback=null,m=f.priorityLevel;var Z=ie(f.expirationTime<=L);L=t.unstable_now(),typeof Z=="function"?f.callback=Z:f===n(c)&&r(c),w(L)}else r(c);f=n(c)}if(f!==null)var le=!0;else{var he=n(u);he!==null&&Q(I,he.startTime-L),le=!1}return le}finally{f=null,m=$,g=!1}}var O=!1,N=null,S=-1,C=5,A=-1;function j(){return!(t.unstable_now()-A<C)}function D(){if(N!==null){var V=t.unstable_now();A=V;var L=!0;try{L=N(!0,V)}finally{L?R():(O=!1,N=null)}}else O=!1}var R;if(typeof b=="function")R=function(){b(D)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,q=K.port2;K.port1.onmessage=D,R=function(){q.postMessage(null)}}else R=function(){x(D,0)};function G(V){N=V,O||(O=!0,R())}function Q(V,L){S=x(function(){V(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,G(k))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var $=m;m=L;try{return V()}finally{m=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,L){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var $=m;m=V;try{return L()}finally{m=$}},t.unstable_scheduleCallback=function(V,L,$){var ie=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?ie+$:ie):$=ie,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=$+Z,V={id:h++,callback:L,priorityLevel:V,startTime:$,expirationTime:Z,sortIndex:-1},$>ie?(V.sortIndex=$,e(u,V),n(c)===null&&V===n(u)&&(v?(_(S),S=-1):v=!0,Q(I,$-ie))):(V.sortIndex=Z,e(c,V),T||g||(T=!0,G(k))),V},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(V){var L=m;return function(){var $=m;m=L;try{return V.apply(this,arguments)}finally{m=$}}}})(UT);FT.exports=UT;var uD=FT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dD=p,ir=uD;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $T=new Set,gu={};function Ea(t,e){Pl(t,e),Pl(t+"Capture",e)}function Pl(t,e){for(gu[t]=e,t=0;t<e.length;t++)$T.add(e[t])}var si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kg=Object.prototype.hasOwnProperty,hD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g_={},y_={};function fD(t){return Kg.call(y_,t)?!0:Kg.call(g_,t)?!1:hD.test(t)?y_[t]=!0:(g_[t]=!0,!1)}function pD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mD(t,e,n,r){if(e===null||typeof e>"u"||pD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function An(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jt[t]=new An(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jt[e]=new An(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jt[t]=new An(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jt[t]=new An(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jt[t]=new An(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jt[t]=new An(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jt[t]=new An(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jt[t]=new An(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jt[t]=new An(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hv=/[\-:]([a-z])/g;function qv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hv,qv);Jt[e]=new An(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hv,qv);Jt[e]=new An(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hv,qv);Jt[e]=new An(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jt[t]=new An(t,1,!1,t.toLowerCase(),null,!1,!1)});Jt.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jt[t]=new An(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kv(t,e,n,r){var s=Jt.hasOwnProperty(e)?Jt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mD(e,n,s,r)&&(n=null),r||s===null?fD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var gi=dD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wd=Symbol.for("react.element"),qa=Symbol.for("react.portal"),Ka=Symbol.for("react.fragment"),Gv=Symbol.for("react.strict_mode"),Gg=Symbol.for("react.profiler"),BT=Symbol.for("react.provider"),zT=Symbol.for("react.context"),Qv=Symbol.for("react.forward_ref"),Qg=Symbol.for("react.suspense"),Yg=Symbol.for("react.suspense_list"),Yv=Symbol.for("react.memo"),Ri=Symbol.for("react.lazy"),WT=Symbol.for("react.offscreen"),v_=Symbol.iterator;function Cc(t){return t===null||typeof t!="object"?null:(t=v_&&t[v_]||t["@@iterator"],typeof t=="function"?t:null)}var vt=Object.assign,$m;function Vc(t){if($m===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);$m=e&&e[1]||""}return`
`+$m+t}var Bm=!1;function zm(t,e){if(!t||Bm)return"";Bm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Bm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vc(t):""}function gD(t){switch(t.tag){case 5:return Vc(t.type);case 16:return Vc("Lazy");case 13:return Vc("Suspense");case 19:return Vc("SuspenseList");case 0:case 2:case 15:return t=zm(t.type,!1),t;case 11:return t=zm(t.type.render,!1),t;case 1:return t=zm(t.type,!0),t;default:return""}}function Xg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ka:return"Fragment";case qa:return"Portal";case Gg:return"Profiler";case Gv:return"StrictMode";case Qg:return"Suspense";case Yg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zT:return(t.displayName||"Context")+".Consumer";case BT:return(t._context.displayName||"Context")+".Provider";case Qv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Yv:return e=t.displayName||null,e!==null?e:Xg(t.type)||"Memo";case Ri:e=t._payload,t=t._init;try{return Xg(t(e))}catch{}}return null}function yD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Xg(e);case 8:return e===Gv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function uo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function HT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vD(t){var e=HT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hd(t){t._valueTracker||(t._valueTracker=vD(t))}function qT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=HT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Qh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Jg(t,e){var n=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function x_(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=uo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function KT(t,e){e=e.checked,e!=null&&Kv(t,"checked",e,!1)}function Zg(t,e){KT(t,e);var n=uo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ey(t,e.type,n):e.hasOwnProperty("defaultValue")&&ey(t,e.type,uo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function w_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ey(t,e,n){(e!=="number"||Qh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Fc=Array.isArray;function al(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+uo(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function ty(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function __(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Fc(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:uo(n)}}function GT(t,e){var n=uo(e.value),r=uo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function b_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function QT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ny(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?QT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qd,YT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qd=qd||document.createElement("div"),qd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xD=["Webkit","ms","Moz","O"];Object.keys(Xc).forEach(function(t){xD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xc[e]=Xc[t]})});function XT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xc.hasOwnProperty(t)&&Xc[t]?(""+e).trim():e+"px"}function JT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=XT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var wD=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ry(t,e){if(e){if(wD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function sy(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iy=null;function Xv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oy=null,ll=null,cl=null;function E_(t){if(t=rd(t)){if(typeof oy!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=cp(e),oy(t.stateNode,t.type,e))}}function ZT(t){ll?cl?cl.push(t):cl=[t]:ll=t}function eS(){if(ll){var t=ll,e=cl;if(cl=ll=null,E_(t),e)for(t=0;t<e.length;t++)E_(e[t])}}function tS(t,e){return t(e)}function nS(){}var Wm=!1;function rS(t,e,n){if(Wm)return t(e,n);Wm=!0;try{return tS(t,e,n)}finally{Wm=!1,(ll!==null||cl!==null)&&(nS(),eS())}}function vu(t,e){var n=t.stateNode;if(n===null)return null;var r=cp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var ay=!1;if(si)try{var Ac={};Object.defineProperty(Ac,"passive",{get:function(){ay=!0}}),window.addEventListener("test",Ac,Ac),window.removeEventListener("test",Ac,Ac)}catch{ay=!1}function _D(t,e,n,r,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Jc=!1,Yh=null,Xh=!1,ly=null,bD={onError:function(t){Jc=!0,Yh=t}};function ED(t,e,n,r,s,i,o,l,c){Jc=!1,Yh=null,_D.apply(bD,arguments)}function TD(t,e,n,r,s,i,o,l,c){if(ED.apply(this,arguments),Jc){if(Jc){var u=Yh;Jc=!1,Yh=null}else throw Error(Y(198));Xh||(Xh=!0,ly=u)}}function Ta(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function sS(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function T_(t){if(Ta(t)!==t)throw Error(Y(188))}function SD(t){var e=t.alternate;if(!e){if(e=Ta(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return T_(s),t;if(i===r)return T_(s),e;i=i.sibling}throw Error(Y(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function iS(t){return t=SD(t),t!==null?oS(t):null}function oS(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=oS(t);if(e!==null)return e;t=t.sibling}return null}var aS=ir.unstable_scheduleCallback,S_=ir.unstable_cancelCallback,ND=ir.unstable_shouldYield,ID=ir.unstable_requestPaint,St=ir.unstable_now,CD=ir.unstable_getCurrentPriorityLevel,Jv=ir.unstable_ImmediatePriority,lS=ir.unstable_UserBlockingPriority,Jh=ir.unstable_NormalPriority,AD=ir.unstable_LowPriority,cS=ir.unstable_IdlePriority,ip=null,xs=null;function PD(t){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(ip,t,void 0,(t.current.flags&128)===128)}catch{}}var Br=Math.clz32?Math.clz32:jD,RD=Math.log,kD=Math.LN2;function jD(t){return t>>>=0,t===0?32:31-(RD(t)/kD|0)|0}var Kd=64,Gd=4194304;function Uc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Uc(l):(i&=o,i!==0&&(r=Uc(i)))}else o=n&~s,o!==0?r=Uc(o):i!==0&&(r=Uc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Br(e),s=1<<n,r|=t[n],e&=~s;return r}function DD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Br(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=DD(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function cy(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function uS(){var t=Kd;return Kd<<=1,!(Kd&4194240)&&(Kd=64),t}function Hm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function td(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Br(e),t[e]=n}function MD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Br(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Zv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Br(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Je=0;function dS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var hS,e0,fS,pS,mS,uy=!1,Qd=[],Qi=null,Yi=null,Xi=null,xu=new Map,wu=new Map,ji=[],LD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function N_(t,e){switch(t){case"focusin":case"focusout":Qi=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":xu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wu.delete(e.pointerId)}}function Pc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=rd(e),e!==null&&e0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function VD(t,e,n,r,s){switch(e){case"focusin":return Qi=Pc(Qi,t,e,n,r,s),!0;case"dragenter":return Yi=Pc(Yi,t,e,n,r,s),!0;case"mouseover":return Xi=Pc(Xi,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xu.set(i,Pc(xu.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,wu.set(i,Pc(wu.get(i)||null,t,e,n,r,s)),!0}return!1}function gS(t){var e=Wo(t.target);if(e!==null){var n=Ta(e);if(n!==null){if(e=n.tag,e===13){if(e=sS(n),e!==null){t.blockedOn=e,mS(t.priority,function(){fS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Th(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=dy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);iy=r,n.target.dispatchEvent(r),iy=null}else return e=rd(n),e!==null&&e0(e),t.blockedOn=n,!1;e.shift()}return!0}function I_(t,e,n){Th(t)&&n.delete(e)}function FD(){uy=!1,Qi!==null&&Th(Qi)&&(Qi=null),Yi!==null&&Th(Yi)&&(Yi=null),Xi!==null&&Th(Xi)&&(Xi=null),xu.forEach(I_),wu.forEach(I_)}function Rc(t,e){t.blockedOn===e&&(t.blockedOn=null,uy||(uy=!0,ir.unstable_scheduleCallback(ir.unstable_NormalPriority,FD)))}function _u(t){function e(s){return Rc(s,t)}if(0<Qd.length){Rc(Qd[0],t);for(var n=1;n<Qd.length;n++){var r=Qd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qi!==null&&Rc(Qi,t),Yi!==null&&Rc(Yi,t),Xi!==null&&Rc(Xi,t),xu.forEach(e),wu.forEach(e),n=0;n<ji.length;n++)r=ji[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ji.length&&(n=ji[0],n.blockedOn===null);)gS(n),n.blockedOn===null&&ji.shift()}var ul=gi.ReactCurrentBatchConfig,ef=!0;function UD(t,e,n,r){var s=Je,i=ul.transition;ul.transition=null;try{Je=1,t0(t,e,n,r)}finally{Je=s,ul.transition=i}}function $D(t,e,n,r){var s=Je,i=ul.transition;ul.transition=null;try{Je=4,t0(t,e,n,r)}finally{Je=s,ul.transition=i}}function t0(t,e,n,r){if(ef){var s=dy(t,e,n,r);if(s===null)tg(t,e,r,tf,n),N_(t,r);else if(VD(s,t,e,n,r))r.stopPropagation();else if(N_(t,r),e&4&&-1<LD.indexOf(t)){for(;s!==null;){var i=rd(s);if(i!==null&&hS(i),i=dy(t,e,n,r),i===null&&tg(t,e,r,tf,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else tg(t,e,r,null,n)}}var tf=null;function dy(t,e,n,r){if(tf=null,t=Xv(r),t=Wo(t),t!==null)if(e=Ta(t),e===null)t=null;else if(n=e.tag,n===13){if(t=sS(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tf=t,null}function yS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CD()){case Jv:return 1;case lS:return 4;case Jh:case AD:return 16;case cS:return 536870912;default:return 16}default:return 16}}var Wi=null,n0=null,Sh=null;function vS(){if(Sh)return Sh;var t,e=n0,n=e.length,r,s="value"in Wi?Wi.value:Wi.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Sh=s.slice(t,1<r?1-r:void 0)}function Nh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yd(){return!0}function C_(){return!1}function lr(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Yd:C_,this.isPropagationStopped=C_,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yd)},persist:function(){},isPersistent:Yd}),e}var Xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},r0=lr(Xl),nd=vt({},Xl,{view:0,detail:0}),BD=lr(nd),qm,Km,kc,op=vt({},nd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:s0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==kc&&(kc&&t.type==="mousemove"?(qm=t.screenX-kc.screenX,Km=t.screenY-kc.screenY):Km=qm=0,kc=t),qm)},movementY:function(t){return"movementY"in t?t.movementY:Km}}),A_=lr(op),zD=vt({},op,{dataTransfer:0}),WD=lr(zD),HD=vt({},nd,{relatedTarget:0}),Gm=lr(HD),qD=vt({},Xl,{animationName:0,elapsedTime:0,pseudoElement:0}),KD=lr(qD),GD=vt({},Xl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),QD=lr(GD),YD=vt({},Xl,{data:0}),P_=lr(YD),XD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ZD[t])?!!e[t]:!1}function s0(){return eO}var tO=vt({},nd,{key:function(t){if(t.key){var e=XD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Nh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:s0,charCode:function(t){return t.type==="keypress"?Nh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nO=lr(tO),rO=vt({},op,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R_=lr(rO),sO=vt({},nd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:s0}),iO=lr(sO),oO=vt({},Xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),aO=lr(oO),lO=vt({},op,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cO=lr(lO),uO=[9,13,27,32],i0=si&&"CompositionEvent"in window,Zc=null;si&&"documentMode"in document&&(Zc=document.documentMode);var dO=si&&"TextEvent"in window&&!Zc,xS=si&&(!i0||Zc&&8<Zc&&11>=Zc),k_=" ",j_=!1;function wS(t,e){switch(t){case"keyup":return uO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _S(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ga=!1;function hO(t,e){switch(t){case"compositionend":return _S(e);case"keypress":return e.which!==32?null:(j_=!0,k_);case"textInput":return t=e.data,t===k_&&j_?null:t;default:return null}}function fO(t,e){if(Ga)return t==="compositionend"||!i0&&wS(t,e)?(t=vS(),Sh=n0=Wi=null,Ga=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return xS&&e.locale!=="ko"?null:e.data;default:return null}}var pO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function D_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pO[t.type]:e==="textarea"}function bS(t,e,n,r){ZT(r),e=nf(e,"onChange"),0<e.length&&(n=new r0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var eu=null,bu=null;function mO(t){jS(t,0)}function ap(t){var e=Xa(t);if(qT(e))return t}function gO(t,e){if(t==="change")return e}var ES=!1;if(si){var Qm;if(si){var Ym="oninput"in document;if(!Ym){var O_=document.createElement("div");O_.setAttribute("oninput","return;"),Ym=typeof O_.oninput=="function"}Qm=Ym}else Qm=!1;ES=Qm&&(!document.documentMode||9<document.documentMode)}function M_(){eu&&(eu.detachEvent("onpropertychange",TS),bu=eu=null)}function TS(t){if(t.propertyName==="value"&&ap(bu)){var e=[];bS(e,bu,t,Xv(t)),rS(mO,e)}}function yO(t,e,n){t==="focusin"?(M_(),eu=e,bu=n,eu.attachEvent("onpropertychange",TS)):t==="focusout"&&M_()}function vO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ap(bu)}function xO(t,e){if(t==="click")return ap(e)}function wO(t,e){if(t==="input"||t==="change")return ap(e)}function _O(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Kr=typeof Object.is=="function"?Object.is:_O;function Eu(t,e){if(Kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Kg.call(e,s)||!Kr(t[s],e[s]))return!1}return!0}function L_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function V_(t,e){var n=L_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=L_(n)}}function SS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?SS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function NS(){for(var t=window,e=Qh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Qh(t.document)}return e}function o0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bO(t){var e=NS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&SS(n.ownerDocument.documentElement,n)){if(r!==null&&o0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=V_(n,i);var o=V_(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EO=si&&"documentMode"in document&&11>=document.documentMode,Qa=null,hy=null,tu=null,fy=!1;function F_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fy||Qa==null||Qa!==Qh(r)||(r=Qa,"selectionStart"in r&&o0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),tu&&Eu(tu,r)||(tu=r,r=nf(hy,"onSelect"),0<r.length&&(e=new r0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Qa)))}function Xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ya={animationend:Xd("Animation","AnimationEnd"),animationiteration:Xd("Animation","AnimationIteration"),animationstart:Xd("Animation","AnimationStart"),transitionend:Xd("Transition","TransitionEnd")},Xm={},IS={};si&&(IS=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function lp(t){if(Xm[t])return Xm[t];if(!Ya[t])return t;var e=Ya[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IS)return Xm[t]=e[n];return t}var CS=lp("animationend"),AS=lp("animationiteration"),PS=lp("animationstart"),RS=lp("transitionend"),kS=new Map,U_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function To(t,e){kS.set(t,e),Ea(e,[t])}for(var Jm=0;Jm<U_.length;Jm++){var Zm=U_[Jm],TO=Zm.toLowerCase(),SO=Zm[0].toUpperCase()+Zm.slice(1);To(TO,"on"+SO)}To(CS,"onAnimationEnd");To(AS,"onAnimationIteration");To(PS,"onAnimationStart");To("dblclick","onDoubleClick");To("focusin","onFocus");To("focusout","onBlur");To(RS,"onTransitionEnd");Pl("onMouseEnter",["mouseout","mouseover"]);Pl("onMouseLeave",["mouseout","mouseover"]);Pl("onPointerEnter",["pointerout","pointerover"]);Pl("onPointerLeave",["pointerout","pointerover"]);Ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ea("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NO=new Set("cancel close invalid load scroll toggle".split(" ").concat($c));function $_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,TD(r,e,void 0,t),t.currentTarget=null}function jS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;$_(s,l,u),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;$_(s,l,u),i=c}}}if(Xh)throw t=ly,Xh=!1,ly=null,t}function at(t,e){var n=e[vy];n===void 0&&(n=e[vy]=new Set);var r=t+"__bubble";n.has(r)||(DS(e,t,2,!1),n.add(r))}function eg(t,e,n){var r=0;e&&(r|=4),DS(n,t,r,e)}var Jd="_reactListening"+Math.random().toString(36).slice(2);function Tu(t){if(!t[Jd]){t[Jd]=!0,$T.forEach(function(n){n!=="selectionchange"&&(NO.has(n)||eg(n,!1,t),eg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jd]||(e[Jd]=!0,eg("selectionchange",!1,e))}}function DS(t,e,n,r){switch(yS(e)){case 1:var s=UD;break;case 4:s=$D;break;default:s=t0}n=s.bind(null,e,n,t),s=void 0,!ay||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function tg(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Wo(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}rS(function(){var u=i,h=Xv(n),f=[];e:{var m=kS.get(t);if(m!==void 0){var g=r0,T=t;switch(t){case"keypress":if(Nh(n)===0)break e;case"keydown":case"keyup":g=nO;break;case"focusin":T="focus",g=Gm;break;case"focusout":T="blur",g=Gm;break;case"beforeblur":case"afterblur":g=Gm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=A_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=WD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=iO;break;case CS:case AS:case PS:g=KD;break;case RS:g=aO;break;case"scroll":g=BD;break;case"wheel":g=cO;break;case"copy":case"cut":case"paste":g=QD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=R_}var v=(e&4)!==0,x=!v&&t==="scroll",_=v?m!==null?m+"Capture":null:m;v=[];for(var b=u,w;b!==null;){w=b;var I=w.stateNode;if(w.tag===5&&I!==null&&(w=I,_!==null&&(I=vu(b,_),I!=null&&v.push(Su(b,I,w)))),x)break;b=b.return}0<v.length&&(m=new g(m,T,null,n,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==iy&&(T=n.relatedTarget||n.fromElement)&&(Wo(T)||T[ii]))break e;if((g||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,g?(T=n.relatedTarget||n.toElement,g=u,T=T?Wo(T):null,T!==null&&(x=Ta(T),T!==x||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=u),g!==T)){if(v=A_,I="onMouseLeave",_="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(v=R_,I="onPointerLeave",_="onPointerEnter",b="pointer"),x=g==null?m:Xa(g),w=T==null?m:Xa(T),m=new v(I,b+"leave",g,n,h),m.target=x,m.relatedTarget=w,I=null,Wo(h)===u&&(v=new v(_,b+"enter",T,n,h),v.target=w,v.relatedTarget=x,I=v),x=I,g&&T)t:{for(v=g,_=T,b=0,w=v;w;w=Ma(w))b++;for(w=0,I=_;I;I=Ma(I))w++;for(;0<b-w;)v=Ma(v),b--;for(;0<w-b;)_=Ma(_),w--;for(;b--;){if(v===_||_!==null&&v===_.alternate)break t;v=Ma(v),_=Ma(_)}v=null}else v=null;g!==null&&B_(f,m,g,v,!1),T!==null&&x!==null&&B_(f,x,T,v,!0)}}e:{if(m=u?Xa(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var k=gO;else if(D_(m))if(ES)k=wO;else{k=vO;var O=yO}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(k=xO);if(k&&(k=k(t,u))){bS(f,k,n,h);break e}O&&O(t,m,u),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&ey(m,"number",m.value)}switch(O=u?Xa(u):window,t){case"focusin":(D_(O)||O.contentEditable==="true")&&(Qa=O,hy=u,tu=null);break;case"focusout":tu=hy=Qa=null;break;case"mousedown":fy=!0;break;case"contextmenu":case"mouseup":case"dragend":fy=!1,F_(f,n,h);break;case"selectionchange":if(EO)break;case"keydown":case"keyup":F_(f,n,h)}var N;if(i0)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ga?wS(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(xS&&n.locale!=="ko"&&(Ga||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ga&&(N=vS()):(Wi=h,n0="value"in Wi?Wi.value:Wi.textContent,Ga=!0)),O=nf(u,S),0<O.length&&(S=new P_(S,t,null,n,h),f.push({event:S,listeners:O}),N?S.data=N:(N=_S(n),N!==null&&(S.data=N)))),(N=dO?hO(t,n):fO(t,n))&&(u=nf(u,"onBeforeInput"),0<u.length&&(h=new P_("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=N))}jS(f,e)})}function Su(t,e,n){return{instance:t,listener:e,currentTarget:n}}function nf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=vu(t,n),i!=null&&r.unshift(Su(t,i,s)),i=vu(t,e),i!=null&&r.push(Su(t,i,s))),t=t.return}return r}function Ma(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function B_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=vu(n,i),c!=null&&o.unshift(Su(n,c,l))):s||(c=vu(n,i),c!=null&&o.push(Su(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var IO=/\r\n?/g,CO=/\u0000|\uFFFD/g;function z_(t){return(typeof t=="string"?t:""+t).replace(IO,`
`).replace(CO,"")}function Zd(t,e,n){if(e=z_(e),z_(t)!==e&&n)throw Error(Y(425))}function rf(){}var py=null,my=null;function gy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yy=typeof setTimeout=="function"?setTimeout:void 0,AO=typeof clearTimeout=="function"?clearTimeout:void 0,W_=typeof Promise=="function"?Promise:void 0,PO=typeof queueMicrotask=="function"?queueMicrotask:typeof W_<"u"?function(t){return W_.resolve(null).then(t).catch(RO)}:yy;function RO(t){setTimeout(function(){throw t})}function ng(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_u(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_u(e)}function Ji(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function H_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jl=Math.random().toString(36).slice(2),ps="__reactFiber$"+Jl,Nu="__reactProps$"+Jl,ii="__reactContainer$"+Jl,vy="__reactEvents$"+Jl,kO="__reactListeners$"+Jl,jO="__reactHandles$"+Jl;function Wo(t){var e=t[ps];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ii]||n[ps]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=H_(t);t!==null;){if(n=t[ps])return n;t=H_(t)}return e}t=n,n=t.parentNode}return null}function rd(t){return t=t[ps]||t[ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function cp(t){return t[Nu]||null}var xy=[],Ja=-1;function So(t){return{current:t}}function lt(t){0>Ja||(t.current=xy[Ja],xy[Ja]=null,Ja--)}function st(t,e){Ja++,xy[Ja]=t.current,t.current=e}var ho={},mn=So(ho),Un=So(!1),sa=ho;function Rl(t,e){var n=t.type.contextTypes;if(!n)return ho;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function $n(t){return t=t.childContextTypes,t!=null}function sf(){lt(Un),lt(mn)}function q_(t,e,n){if(mn.current!==ho)throw Error(Y(168));st(mn,e),st(Un,n)}function OS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(Y(108,yD(t)||"Unknown",s));return vt({},n,r)}function of(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ho,sa=mn.current,st(mn,t),st(Un,Un.current),!0}function K_(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=OS(t,e,sa),r.__reactInternalMemoizedMergedChildContext=t,lt(Un),lt(mn),st(mn,t)):lt(Un),st(Un,n)}var qs=null,up=!1,rg=!1;function MS(t){qs===null?qs=[t]:qs.push(t)}function DO(t){up=!0,MS(t)}function No(){if(!rg&&qs!==null){rg=!0;var t=0,e=Je;try{var n=qs;for(Je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qs=null,up=!1}catch(s){throw qs!==null&&(qs=qs.slice(t+1)),aS(Jv,No),s}finally{Je=e,rg=!1}}return null}var Za=[],el=0,af=null,lf=0,fr=[],pr=0,ia=null,Qs=1,Ys="";function $o(t,e){Za[el++]=lf,Za[el++]=af,af=t,lf=e}function LS(t,e,n){fr[pr++]=Qs,fr[pr++]=Ys,fr[pr++]=ia,ia=t;var r=Qs;t=Ys;var s=32-Br(r)-1;r&=~(1<<s),n+=1;var i=32-Br(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Qs=1<<32-Br(e)+s|n<<s|r,Ys=i+t}else Qs=1<<i|n<<s|r,Ys=t}function a0(t){t.return!==null&&($o(t,1),LS(t,1,0))}function l0(t){for(;t===af;)af=Za[--el],Za[el]=null,lf=Za[--el],Za[el]=null;for(;t===ia;)ia=fr[--pr],fr[pr]=null,Ys=fr[--pr],fr[pr]=null,Qs=fr[--pr],fr[pr]=null}var nr=null,er=null,ht=!1,Lr=null;function VS(t,e){var n=mr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function G_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nr=t,er=Ji(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nr=t,er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ia!==null?{id:Qs,overflow:Ys}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nr=t,er=null,!0):!1;default:return!1}}function wy(t){return(t.mode&1)!==0&&(t.flags&128)===0}function _y(t){if(ht){var e=er;if(e){var n=e;if(!G_(t,e)){if(wy(t))throw Error(Y(418));e=Ji(n.nextSibling);var r=nr;e&&G_(t,e)?VS(r,n):(t.flags=t.flags&-4097|2,ht=!1,nr=t)}}else{if(wy(t))throw Error(Y(418));t.flags=t.flags&-4097|2,ht=!1,nr=t}}}function Q_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nr=t}function eh(t){if(t!==nr)return!1;if(!ht)return Q_(t),ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!gy(t.type,t.memoizedProps)),e&&(e=er)){if(wy(t))throw FS(),Error(Y(418));for(;e;)VS(t,e),e=Ji(e.nextSibling)}if(Q_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){er=Ji(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}er=null}}else er=nr?Ji(t.stateNode.nextSibling):null;return!0}function FS(){for(var t=er;t;)t=Ji(t.nextSibling)}function kl(){er=nr=null,ht=!1}function c0(t){Lr===null?Lr=[t]:Lr.push(t)}var OO=gi.ReactCurrentBatchConfig;function jc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function th(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Y_(t){var e=t._init;return e(t._payload)}function US(t){function e(_,b){if(t){var w=_.deletions;w===null?(_.deletions=[b],_.flags|=16):w.push(b)}}function n(_,b){if(!t)return null;for(;b!==null;)e(_,b),b=b.sibling;return null}function r(_,b){for(_=new Map;b!==null;)b.key!==null?_.set(b.key,b):_.set(b.index,b),b=b.sibling;return _}function s(_,b){return _=no(_,b),_.index=0,_.sibling=null,_}function i(_,b,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<b?(_.flags|=2,b):w):(_.flags|=2,b)):(_.flags|=1048576,b)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,b,w,I){return b===null||b.tag!==6?(b=ug(w,_.mode,I),b.return=_,b):(b=s(b,w),b.return=_,b)}function c(_,b,w,I){var k=w.type;return k===Ka?h(_,b,w.props.children,I,w.key):b!==null&&(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ri&&Y_(k)===b.type)?(I=s(b,w.props),I.ref=jc(_,b,w),I.return=_,I):(I=jh(w.type,w.key,w.props,null,_.mode,I),I.ref=jc(_,b,w),I.return=_,I)}function u(_,b,w,I){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=dg(w,_.mode,I),b.return=_,b):(b=s(b,w.children||[]),b.return=_,b)}function h(_,b,w,I,k){return b===null||b.tag!==7?(b=na(w,_.mode,I,k),b.return=_,b):(b=s(b,w),b.return=_,b)}function f(_,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=ug(""+b,_.mode,w),b.return=_,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Wd:return w=jh(b.type,b.key,b.props,null,_.mode,w),w.ref=jc(_,null,b),w.return=_,w;case qa:return b=dg(b,_.mode,w),b.return=_,b;case Ri:var I=b._init;return f(_,I(b._payload),w)}if(Fc(b)||Cc(b))return b=na(b,_.mode,w,null),b.return=_,b;th(_,b)}return null}function m(_,b,w,I){var k=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:l(_,b,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Wd:return w.key===k?c(_,b,w,I):null;case qa:return w.key===k?u(_,b,w,I):null;case Ri:return k=w._init,m(_,b,k(w._payload),I)}if(Fc(w)||Cc(w))return k!==null?null:h(_,b,w,I,null);th(_,w)}return null}function g(_,b,w,I,k){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(w)||null,l(b,_,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Wd:return _=_.get(I.key===null?w:I.key)||null,c(b,_,I,k);case qa:return _=_.get(I.key===null?w:I.key)||null,u(b,_,I,k);case Ri:var O=I._init;return g(_,b,w,O(I._payload),k)}if(Fc(I)||Cc(I))return _=_.get(w)||null,h(b,_,I,k,null);th(b,I)}return null}function T(_,b,w,I){for(var k=null,O=null,N=b,S=b=0,C=null;N!==null&&S<w.length;S++){N.index>S?(C=N,N=null):C=N.sibling;var A=m(_,N,w[S],I);if(A===null){N===null&&(N=C);break}t&&N&&A.alternate===null&&e(_,N),b=i(A,b,S),O===null?k=A:O.sibling=A,O=A,N=C}if(S===w.length)return n(_,N),ht&&$o(_,S),k;if(N===null){for(;S<w.length;S++)N=f(_,w[S],I),N!==null&&(b=i(N,b,S),O===null?k=N:O.sibling=N,O=N);return ht&&$o(_,S),k}for(N=r(_,N);S<w.length;S++)C=g(N,_,S,w[S],I),C!==null&&(t&&C.alternate!==null&&N.delete(C.key===null?S:C.key),b=i(C,b,S),O===null?k=C:O.sibling=C,O=C);return t&&N.forEach(function(j){return e(_,j)}),ht&&$o(_,S),k}function v(_,b,w,I){var k=Cc(w);if(typeof k!="function")throw Error(Y(150));if(w=k.call(w),w==null)throw Error(Y(151));for(var O=k=null,N=b,S=b=0,C=null,A=w.next();N!==null&&!A.done;S++,A=w.next()){N.index>S?(C=N,N=null):C=N.sibling;var j=m(_,N,A.value,I);if(j===null){N===null&&(N=C);break}t&&N&&j.alternate===null&&e(_,N),b=i(j,b,S),O===null?k=j:O.sibling=j,O=j,N=C}if(A.done)return n(_,N),ht&&$o(_,S),k;if(N===null){for(;!A.done;S++,A=w.next())A=f(_,A.value,I),A!==null&&(b=i(A,b,S),O===null?k=A:O.sibling=A,O=A);return ht&&$o(_,S),k}for(N=r(_,N);!A.done;S++,A=w.next())A=g(N,_,S,A.value,I),A!==null&&(t&&A.alternate!==null&&N.delete(A.key===null?S:A.key),b=i(A,b,S),O===null?k=A:O.sibling=A,O=A);return t&&N.forEach(function(D){return e(_,D)}),ht&&$o(_,S),k}function x(_,b,w,I){if(typeof w=="object"&&w!==null&&w.type===Ka&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Wd:e:{for(var k=w.key,O=b;O!==null;){if(O.key===k){if(k=w.type,k===Ka){if(O.tag===7){n(_,O.sibling),b=s(O,w.props.children),b.return=_,_=b;break e}}else if(O.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ri&&Y_(k)===O.type){n(_,O.sibling),b=s(O,w.props),b.ref=jc(_,O,w),b.return=_,_=b;break e}n(_,O);break}else e(_,O);O=O.sibling}w.type===Ka?(b=na(w.props.children,_.mode,I,w.key),b.return=_,_=b):(I=jh(w.type,w.key,w.props,null,_.mode,I),I.ref=jc(_,b,w),I.return=_,_=I)}return o(_);case qa:e:{for(O=w.key;b!==null;){if(b.key===O)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){n(_,b.sibling),b=s(b,w.children||[]),b.return=_,_=b;break e}else{n(_,b);break}else e(_,b);b=b.sibling}b=dg(w,_.mode,I),b.return=_,_=b}return o(_);case Ri:return O=w._init,x(_,b,O(w._payload),I)}if(Fc(w))return T(_,b,w,I);if(Cc(w))return v(_,b,w,I);th(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(n(_,b.sibling),b=s(b,w),b.return=_,_=b):(n(_,b),b=ug(w,_.mode,I),b.return=_,_=b),o(_)):n(_,b)}return x}var jl=US(!0),$S=US(!1),cf=So(null),uf=null,tl=null,u0=null;function d0(){u0=tl=uf=null}function h0(t){var e=cf.current;lt(cf),t._currentValue=e}function by(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function dl(t,e){uf=t,u0=tl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vn=!0),t.firstContext=null)}function xr(t){var e=t._currentValue;if(u0!==t)if(t={context:t,memoizedValue:e,next:null},tl===null){if(uf===null)throw Error(Y(308));tl=t,uf.dependencies={lanes:0,firstContext:t}}else tl=tl.next=t;return e}var Ho=null;function f0(t){Ho===null?Ho=[t]:Ho.push(t)}function BS(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,f0(e)):(n.next=s.next,s.next=n),e.interleaved=n,oi(t,r)}function oi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ki=!1;function p0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ei(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Zi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,oi(t,n)}return s=r.interleaved,s===null?(e.next=e,f0(r)):(e.next=s.next,s.next=e),r.interleaved=e,oi(t,n)}function Ih(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zv(t,n)}}function X_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function df(t,e,n,r){var s=t.updateQueue;ki=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=u=c=null,l=i;do{var m=l.lane,g=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,v=l;switch(m=e,g=n,v.tag){case 1:if(T=v.payload,typeof T=="function"){f=T.call(g,f,m);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=v.payload,m=typeof T=="function"?T.call(g,f,m):T,m==null)break e;f=vt({},f,m);break e;case 2:ki=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);aa|=o,t.lanes=o,t.memoizedState=f}}function J_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Y(191,s));s.call(r)}}}var sd={},ws=So(sd),Iu=So(sd),Cu=So(sd);function qo(t){if(t===sd)throw Error(Y(174));return t}function m0(t,e){switch(st(Cu,e),st(Iu,t),st(ws,sd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ny(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ny(e,t)}lt(ws),st(ws,e)}function Dl(){lt(ws),lt(Iu),lt(Cu)}function WS(t){qo(Cu.current);var e=qo(ws.current),n=ny(e,t.type);e!==n&&(st(Iu,t),st(ws,n))}function g0(t){Iu.current===t&&(lt(ws),lt(Iu))}var ft=So(0);function hf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sg=[];function y0(){for(var t=0;t<sg.length;t++)sg[t]._workInProgressVersionPrimary=null;sg.length=0}var Ch=gi.ReactCurrentDispatcher,ig=gi.ReactCurrentBatchConfig,oa=0,yt=null,Ot=null,$t=null,ff=!1,nu=!1,Au=0,MO=0;function on(){throw Error(Y(321))}function v0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Kr(t[n],e[n]))return!1;return!0}function x0(t,e,n,r,s,i){if(oa=i,yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ch.current=t===null||t.memoizedState===null?UO:$O,t=n(r,s),nu){i=0;do{if(nu=!1,Au=0,25<=i)throw Error(Y(301));i+=1,$t=Ot=null,e.updateQueue=null,Ch.current=BO,t=n(r,s)}while(nu)}if(Ch.current=pf,e=Ot!==null&&Ot.next!==null,oa=0,$t=Ot=yt=null,ff=!1,e)throw Error(Y(300));return t}function w0(){var t=Au!==0;return Au=0,t}function ls(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $t===null?yt.memoizedState=$t=t:$t=$t.next=t,$t}function wr(){if(Ot===null){var t=yt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=$t===null?yt.memoizedState:$t.next;if(e!==null)$t=e,Ot=t;else{if(t===null)throw Error(Y(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},$t===null?yt.memoizedState=$t=t:$t=$t.next=t}return $t}function Pu(t,e){return typeof e=="function"?e(t):e}function og(t){var e=wr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=Ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((oa&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,yt.lanes|=h,aa|=h}u=u.next}while(u!==null&&u!==i);c===null?o=r:c.next=l,Kr(r,e.memoizedState)||(Vn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,yt.lanes|=i,aa|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ag(t){var e=wr(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Kr(i,e.memoizedState)||(Vn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function HS(){}function qS(t,e){var n=yt,r=wr(),s=e(),i=!Kr(r.memoizedState,s);if(i&&(r.memoizedState=s,Vn=!0),r=r.queue,_0(QS.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$t!==null&&$t.memoizedState.tag&1){if(n.flags|=2048,Ru(9,GS.bind(null,n,r,s,e),void 0,null),zt===null)throw Error(Y(349));oa&30||KS(n,e,s)}return s}function KS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function GS(t,e,n,r){e.value=n,e.getSnapshot=r,YS(e)&&XS(t)}function QS(t,e,n){return n(function(){YS(e)&&XS(t)})}function YS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Kr(t,n)}catch{return!0}}function XS(t){var e=oi(t,1);e!==null&&zr(e,t,1,-1)}function Z_(t){var e=ls();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pu,lastRenderedState:t},e.queue=t,t=t.dispatch=FO.bind(null,yt,t),[e.memoizedState,t]}function Ru(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function JS(){return wr().memoizedState}function Ah(t,e,n,r){var s=ls();yt.flags|=t,s.memoizedState=Ru(1|e,n,void 0,r===void 0?null:r)}function dp(t,e,n,r){var s=wr();r=r===void 0?null:r;var i=void 0;if(Ot!==null){var o=Ot.memoizedState;if(i=o.destroy,r!==null&&v0(r,o.deps)){s.memoizedState=Ru(e,n,i,r);return}}yt.flags|=t,s.memoizedState=Ru(1|e,n,i,r)}function e1(t,e){return Ah(8390656,8,t,e)}function _0(t,e){return dp(2048,8,t,e)}function ZS(t,e){return dp(4,2,t,e)}function eN(t,e){return dp(4,4,t,e)}function tN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nN(t,e,n){return n=n!=null?n.concat([t]):null,dp(4,4,tN.bind(null,e,t),n)}function b0(){}function rN(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&v0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function sN(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&v0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function iN(t,e,n){return oa&21?(Kr(n,e)||(n=uS(),yt.lanes|=n,aa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vn=!0),t.memoizedState=n)}function LO(t,e){var n=Je;Je=n!==0&&4>n?n:4,t(!0);var r=ig.transition;ig.transition={};try{t(!1),e()}finally{Je=n,ig.transition=r}}function oN(){return wr().memoizedState}function VO(t,e,n){var r=to(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aN(t))lN(e,n);else if(n=BS(t,e,n,r),n!==null){var s=Nn();zr(n,t,r,s),cN(n,e,r)}}function FO(t,e,n){var r=to(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aN(t))lN(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Kr(l,o)){var c=e.interleaved;c===null?(s.next=s,f0(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=BS(t,e,s,r),n!==null&&(s=Nn(),zr(n,t,r,s),cN(n,e,r))}}function aN(t){var e=t.alternate;return t===yt||e!==null&&e===yt}function lN(t,e){nu=ff=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function cN(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zv(t,n)}}var pf={readContext:xr,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},UO={readContext:xr,useCallback:function(t,e){return ls().memoizedState=[t,e===void 0?null:e],t},useContext:xr,useEffect:e1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ah(4194308,4,tN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ah(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ah(4,2,t,e)},useMemo:function(t,e){var n=ls();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ls();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=VO.bind(null,yt,t),[r.memoizedState,t]},useRef:function(t){var e=ls();return t={current:t},e.memoizedState=t},useState:Z_,useDebugValue:b0,useDeferredValue:function(t){return ls().memoizedState=t},useTransition:function(){var t=Z_(!1),e=t[0];return t=LO.bind(null,t[1]),ls().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=yt,s=ls();if(ht){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),zt===null)throw Error(Y(349));oa&30||KS(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,e1(QS.bind(null,r,i,t),[t]),r.flags|=2048,Ru(9,GS.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ls(),e=zt.identifierPrefix;if(ht){var n=Ys,r=Qs;n=(r&~(1<<32-Br(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Au++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=MO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$O={readContext:xr,useCallback:rN,useContext:xr,useEffect:_0,useImperativeHandle:nN,useInsertionEffect:ZS,useLayoutEffect:eN,useMemo:sN,useReducer:og,useRef:JS,useState:function(){return og(Pu)},useDebugValue:b0,useDeferredValue:function(t){var e=wr();return iN(e,Ot.memoizedState,t)},useTransition:function(){var t=og(Pu)[0],e=wr().memoizedState;return[t,e]},useMutableSource:HS,useSyncExternalStore:qS,useId:oN,unstable_isNewReconciler:!1},BO={readContext:xr,useCallback:rN,useContext:xr,useEffect:_0,useImperativeHandle:nN,useInsertionEffect:ZS,useLayoutEffect:eN,useMemo:sN,useReducer:ag,useRef:JS,useState:function(){return ag(Pu)},useDebugValue:b0,useDeferredValue:function(t){var e=wr();return Ot===null?e.memoizedState=t:iN(e,Ot.memoizedState,t)},useTransition:function(){var t=ag(Pu)[0],e=wr().memoizedState;return[t,e]},useMutableSource:HS,useSyncExternalStore:qS,useId:oN,unstable_isNewReconciler:!1};function kr(t,e){if(t&&t.defaultProps){e=vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ey(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hp={isMounted:function(t){return(t=t._reactInternals)?Ta(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nn(),s=to(t),i=ei(r,s);i.payload=e,n!=null&&(i.callback=n),e=Zi(t,i,s),e!==null&&(zr(e,t,s,r),Ih(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nn(),s=to(t),i=ei(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Zi(t,i,s),e!==null&&(zr(e,t,s,r),Ih(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nn(),r=to(t),s=ei(n,r);s.tag=2,e!=null&&(s.callback=e),e=Zi(t,s,r),e!==null&&(zr(e,t,r,n),Ih(e,t,r))}};function t1(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Eu(n,r)||!Eu(s,i):!0}function uN(t,e,n){var r=!1,s=ho,i=e.contextType;return typeof i=="object"&&i!==null?i=xr(i):(s=$n(e)?sa:mn.current,r=e.contextTypes,i=(r=r!=null)?Rl(t,s):ho),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function n1(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hp.enqueueReplaceState(e,e.state,null)}function Ty(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},p0(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=xr(i):(i=$n(e)?sa:mn.current,s.context=Rl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ey(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&hp.enqueueReplaceState(s,s.state,null),df(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ol(t,e){try{var n="",r=e;do n+=gD(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function lg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Sy(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zO=typeof WeakMap=="function"?WeakMap:Map;function dN(t,e,n){n=ei(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gf||(gf=!0,Oy=r),Sy(t,e)},n}function hN(t,e,n){n=ei(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Sy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Sy(t,e),typeof r!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function r1(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zO;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=rM.bind(null,t,e,n),e.then(t,t))}function s1(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function i1(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ei(-1,1),e.tag=2,Zi(n,e,1))),n.lanes|=1),t)}var WO=gi.ReactCurrentOwner,Vn=!1;function wn(t,e,n,r){e.child=t===null?$S(e,null,n,r):jl(e,t.child,n,r)}function o1(t,e,n,r,s){n=n.render;var i=e.ref;return dl(e,s),r=x0(t,e,n,r,i,s),n=w0(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ai(t,e,s)):(ht&&n&&a0(e),e.flags|=1,wn(t,e,r,s),e.child)}function a1(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!P0(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,fN(t,e,i,r,s)):(t=jh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Eu,n(o,r)&&t.ref===e.ref)return ai(t,e,s)}return e.flags|=1,t=no(i,r),t.ref=e.ref,t.return=e,e.child=t}function fN(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Eu(i,r)&&t.ref===e.ref)if(Vn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Vn=!0);else return e.lanes=t.lanes,ai(t,e,s)}return Ny(t,e,n,r,s)}function pN(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(rl,Xn),Xn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,st(rl,Xn),Xn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,st(rl,Xn),Xn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,st(rl,Xn),Xn|=r;return wn(t,e,s,n),e.child}function mN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ny(t,e,n,r,s){var i=$n(n)?sa:mn.current;return i=Rl(e,i),dl(e,s),n=x0(t,e,n,r,i,s),r=w0(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ai(t,e,s)):(ht&&r&&a0(e),e.flags|=1,wn(t,e,n,s),e.child)}function l1(t,e,n,r,s){if($n(n)){var i=!0;of(e)}else i=!1;if(dl(e,s),e.stateNode===null)Ph(t,e),uN(e,n,r),Ty(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=xr(u):(u=$n(n)?sa:mn.current,u=Rl(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&n1(e,o,r,u),ki=!1;var m=e.memoizedState;o.state=m,df(e,r,o,s),c=e.memoizedState,l!==r||m!==c||Un.current||ki?(typeof h=="function"&&(Ey(e,n,h,r),c=e.memoizedState),(l=ki||t1(e,n,l,r,m,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,zS(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:kr(e.type,l),o.props=u,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=xr(c):(c=$n(n)?sa:mn.current,c=Rl(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&n1(e,o,r,c),ki=!1,m=e.memoizedState,o.state=m,df(e,r,o,s);var T=e.memoizedState;l!==f||m!==T||Un.current||ki?(typeof g=="function"&&(Ey(e,n,g,r),T=e.memoizedState),(u=ki||t1(e,n,u,r,m,T,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Iy(t,e,n,r,i,s)}function Iy(t,e,n,r,s,i){mN(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&K_(e,n,!1),ai(t,e,i);r=e.stateNode,WO.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=jl(e,t.child,null,i),e.child=jl(e,null,l,i)):wn(t,e,l,i),e.memoizedState=r.state,s&&K_(e,n,!0),e.child}function gN(t){var e=t.stateNode;e.pendingContext?q_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&q_(t,e.context,!1),m0(t,e.containerInfo)}function c1(t,e,n,r,s){return kl(),c0(s),e.flags|=256,wn(t,e,n,r),e.child}var Cy={dehydrated:null,treeContext:null,retryLane:0};function Ay(t){return{baseLanes:t,cachePool:null,transitions:null}}function yN(t,e,n){var r=e.pendingProps,s=ft.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),st(ft,s&1),t===null)return _y(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=mp(o,r,0,null),t=na(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ay(n),e.memoizedState=Cy,t):E0(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return HO(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=no(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=no(l,i):(i=na(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Ay(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Cy,r}return i=t.child,t=i.sibling,r=no(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function E0(t,e){return e=mp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nh(t,e,n,r){return r!==null&&c0(r),jl(e,t.child,null,n),t=E0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HO(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=lg(Error(Y(422))),nh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=mp({mode:"visible",children:r.children},s,0,null),i=na(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&jl(e,t.child,null,o),e.child.memoizedState=Ay(o),e.memoizedState=Cy,i);if(!(e.mode&1))return nh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(Y(419)),r=lg(i,r,void 0),nh(t,e,o,r)}if(l=(o&t.childLanes)!==0,Vn||l){if(r=zt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,oi(t,s),zr(r,t,s,-1))}return A0(),r=lg(Error(Y(421))),nh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=sM.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,er=Ji(s.nextSibling),nr=e,ht=!0,Lr=null,t!==null&&(fr[pr++]=Qs,fr[pr++]=Ys,fr[pr++]=ia,Qs=t.id,Ys=t.overflow,ia=e),e=E0(e,r.children),e.flags|=4096,e)}function u1(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),by(t.return,e,n)}function cg(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function vN(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wn(t,e,r.children,n),r=ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&u1(t,n,e);else if(t.tag===19)u1(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(st(ft,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&hf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),cg(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&hf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}cg(e,!0,n,null,i);break;case"together":cg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ph(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),aa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=no(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=no(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qO(t,e,n){switch(e.tag){case 3:gN(e),kl();break;case 5:WS(e);break;case 1:$n(e.type)&&of(e);break;case 4:m0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;st(cf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(st(ft,ft.current&1),e.flags|=128,null):n&e.child.childLanes?yN(t,e,n):(st(ft,ft.current&1),t=ai(t,e,n),t!==null?t.sibling:null);st(ft,ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vN(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),st(ft,ft.current),r)break;return null;case 22:case 23:return e.lanes=0,pN(t,e,n)}return ai(t,e,n)}var xN,Py,wN,_N;xN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Py=function(){};wN=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,qo(ws.current);var i=null;switch(n){case"input":s=Jg(t,s),r=Jg(t,r),i=[];break;case"select":s=vt({},s,{value:void 0}),r=vt({},r,{value:void 0}),i=[];break;case"textarea":s=ty(t,s),r=ty(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rf)}ry(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gu.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gu.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&at("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};_N=function(t,e,n,r){n!==r&&(e.flags|=4)};function Dc(t,e){if(!ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function an(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KO(t,e,n){var r=e.pendingProps;switch(l0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(e),null;case 1:return $n(e.type)&&sf(),an(e),null;case 3:return r=e.stateNode,Dl(),lt(Un),lt(mn),y0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(eh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Lr!==null&&(Vy(Lr),Lr=null))),Py(t,e),an(e),null;case 5:g0(e);var s=qo(Cu.current);if(n=e.type,t!==null&&e.stateNode!=null)wN(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return an(e),null}if(t=qo(ws.current),eh(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ps]=e,r[Nu]=i,t=(e.mode&1)!==0,n){case"dialog":at("cancel",r),at("close",r);break;case"iframe":case"object":case"embed":at("load",r);break;case"video":case"audio":for(s=0;s<$c.length;s++)at($c[s],r);break;case"source":at("error",r);break;case"img":case"image":case"link":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"input":x_(r,i),at("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},at("invalid",r);break;case"textarea":__(r,i),at("invalid",r)}ry(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Zd(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Zd(r.textContent,l,t),s=["children",""+l]):gu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&at("scroll",r)}switch(n){case"input":Hd(r),w_(r,i,!0);break;case"textarea":Hd(r),b_(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=rf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=QT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ps]=e,t[Nu]=r,xN(t,e,!1,!1),e.stateNode=t;e:{switch(o=sy(n,r),n){case"dialog":at("cancel",t),at("close",t),s=r;break;case"iframe":case"object":case"embed":at("load",t),s=r;break;case"video":case"audio":for(s=0;s<$c.length;s++)at($c[s],t);s=r;break;case"source":at("error",t),s=r;break;case"img":case"image":case"link":at("error",t),at("load",t),s=r;break;case"details":at("toggle",t),s=r;break;case"input":x_(t,r),s=Jg(t,r),at("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=vt({},r,{value:void 0}),at("invalid",t);break;case"textarea":__(t,r),s=ty(t,r),at("invalid",t);break;default:s=r}ry(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?JT(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&YT(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&yu(t,c):typeof c=="number"&&yu(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(gu.hasOwnProperty(i)?c!=null&&i==="onScroll"&&at("scroll",t):c!=null&&Kv(t,i,c,o))}switch(n){case"input":Hd(t),w_(t,r,!1);break;case"textarea":Hd(t),b_(t);break;case"option":r.value!=null&&t.setAttribute("value",""+uo(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?al(t,!!r.multiple,i,!1):r.defaultValue!=null&&al(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=rf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return an(e),null;case 6:if(t&&e.stateNode!=null)_N(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=qo(Cu.current),qo(ws.current),eh(e)){if(r=e.stateNode,n=e.memoizedProps,r[ps]=e,(i=r.nodeValue!==n)&&(t=nr,t!==null))switch(t.tag){case 3:Zd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ps]=e,e.stateNode=r}return an(e),null;case 13:if(lt(ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ht&&er!==null&&e.mode&1&&!(e.flags&128))FS(),kl(),e.flags|=98560,i=!1;else if(i=eh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[ps]=e}else kl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;an(e),i=!1}else Lr!==null&&(Vy(Lr),Lr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ft.current&1?Mt===0&&(Mt=3):A0())),e.updateQueue!==null&&(e.flags|=4),an(e),null);case 4:return Dl(),Py(t,e),t===null&&Tu(e.stateNode.containerInfo),an(e),null;case 10:return h0(e.type._context),an(e),null;case 17:return $n(e.type)&&sf(),an(e),null;case 19:if(lt(ft),i=e.memoizedState,i===null)return an(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Dc(i,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=hf(t),o!==null){for(e.flags|=128,Dc(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return st(ft,ft.current&1|2),e.child}t=t.sibling}i.tail!==null&&St()>Ml&&(e.flags|=128,r=!0,Dc(i,!1),e.lanes=4194304)}else{if(!r)if(t=hf(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Dc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ht)return an(e),null}else 2*St()-i.renderingStartTime>Ml&&n!==1073741824&&(e.flags|=128,r=!0,Dc(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=St(),e.sibling=null,n=ft.current,st(ft,r?n&1|2:n&1),e):(an(e),null);case 22:case 23:return C0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xn&1073741824&&(an(e),e.subtreeFlags&6&&(e.flags|=8192)):an(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function GO(t,e){switch(l0(e),e.tag){case 1:return $n(e.type)&&sf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Dl(),lt(Un),lt(mn),y0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return g0(e),null;case 13:if(lt(ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));kl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(ft),null;case 4:return Dl(),null;case 10:return h0(e.type._context),null;case 22:case 23:return C0(),null;case 24:return null;default:return null}}var rh=!1,hn=!1,QO=typeof WeakSet=="function"?WeakSet:Set,ae=null;function nl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(t,e,r)}else n.current=null}function Ry(t,e,n){try{n()}catch(r){bt(t,e,r)}}var d1=!1;function YO(t,e){if(py=ef,t=NS(),o0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,m=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++u===s&&(l=o),m===i&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(my={focusedElem:t,selectionRange:n},ef=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var v=T.memoizedProps,x=T.memoizedState,_=e.stateNode,b=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:kr(e.type,v),x);_.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(I){bt(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return T=d1,d1=!1,T}function ru(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ry(e,n,i)}s=s.next}while(s!==r)}}function fp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ky(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bN(t){var e=t.alternate;e!==null&&(t.alternate=null,bN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ps],delete e[Nu],delete e[vy],delete e[kO],delete e[jO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function EN(t){return t.tag===5||t.tag===3||t.tag===4}function h1(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||EN(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rf));else if(r!==4&&(t=t.child,t!==null))for(jy(t,e,n),t=t.sibling;t!==null;)jy(t,e,n),t=t.sibling}function Dy(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Dy(t,e,n),t=t.sibling;t!==null;)Dy(t,e,n),t=t.sibling}var Kt=null,Mr=!1;function Si(t,e,n){for(n=n.child;n!==null;)TN(t,e,n),n=n.sibling}function TN(t,e,n){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(ip,n)}catch{}switch(n.tag){case 5:hn||nl(n,e);case 6:var r=Kt,s=Mr;Kt=null,Si(t,e,n),Kt=r,Mr=s,Kt!==null&&(Mr?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(Mr?(t=Kt,n=n.stateNode,t.nodeType===8?ng(t.parentNode,n):t.nodeType===1&&ng(t,n),_u(t)):ng(Kt,n.stateNode));break;case 4:r=Kt,s=Mr,Kt=n.stateNode.containerInfo,Mr=!0,Si(t,e,n),Kt=r,Mr=s;break;case 0:case 11:case 14:case 15:if(!hn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ry(n,e,o),s=s.next}while(s!==r)}Si(t,e,n);break;case 1:if(!hn&&(nl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){bt(n,e,l)}Si(t,e,n);break;case 21:Si(t,e,n);break;case 22:n.mode&1?(hn=(r=hn)||n.memoizedState!==null,Si(t,e,n),hn=r):Si(t,e,n);break;default:Si(t,e,n)}}function f1(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QO),e.forEach(function(r){var s=iM.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Cr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Kt=l.stateNode,Mr=!1;break e;case 3:Kt=l.stateNode.containerInfo,Mr=!0;break e;case 4:Kt=l.stateNode.containerInfo,Mr=!0;break e}l=l.return}if(Kt===null)throw Error(Y(160));TN(i,o,s),Kt=null,Mr=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){bt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SN(e,t),e=e.sibling}function SN(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cr(e,t),as(t),r&4){try{ru(3,t,t.return),fp(3,t)}catch(v){bt(t,t.return,v)}try{ru(5,t,t.return)}catch(v){bt(t,t.return,v)}}break;case 1:Cr(e,t),as(t),r&512&&n!==null&&nl(n,n.return);break;case 5:if(Cr(e,t),as(t),r&512&&n!==null&&nl(n,n.return),t.flags&32){var s=t.stateNode;try{yu(s,"")}catch(v){bt(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&KT(s,i),sy(l,o);var u=sy(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?JT(s,f):h==="dangerouslySetInnerHTML"?YT(s,f):h==="children"?yu(s,f):Kv(s,h,f,u)}switch(l){case"input":Zg(s,i);break;case"textarea":GT(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var g=i.value;g!=null?al(s,!!i.multiple,g,!1):m!==!!i.multiple&&(i.defaultValue!=null?al(s,!!i.multiple,i.defaultValue,!0):al(s,!!i.multiple,i.multiple?[]:"",!1))}s[Nu]=i}catch(v){bt(t,t.return,v)}}break;case 6:if(Cr(e,t),as(t),r&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){bt(t,t.return,v)}}break;case 3:if(Cr(e,t),as(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_u(e.containerInfo)}catch(v){bt(t,t.return,v)}break;case 4:Cr(e,t),as(t);break;case 13:Cr(e,t),as(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(N0=St())),r&4&&f1(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(hn=(u=hn)||h,Cr(e,t),hn=u):Cr(e,t),as(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(f=ae=h;ae!==null;){switch(m=ae,g=m.child,m.tag){case 0:case 11:case 14:case 15:ru(4,m,m.return);break;case 1:nl(m,m.return);var T=m.stateNode;if(typeof T.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(v){bt(r,n,v)}}break;case 5:nl(m,m.return);break;case 22:if(m.memoizedState!==null){m1(f);continue}}g!==null?(g.return=m,ae=g):m1(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=XT("display",o))}catch(v){bt(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){bt(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Cr(e,t),as(t),r&4&&f1(t);break;case 21:break;default:Cr(e,t),as(t)}}function as(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(EN(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(yu(s,""),r.flags&=-33);var i=h1(t);Dy(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=h1(t);jy(t,l,o);break;default:throw Error(Y(161))}}catch(c){bt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XO(t,e,n){ae=t,NN(t)}function NN(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var s=ae,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||rh;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||hn;l=rh;var u=hn;if(rh=o,(hn=c)&&!u)for(ae=s;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?g1(s):c!==null?(c.return=o,ae=c):g1(s);for(;i!==null;)ae=i,NN(i),i=i.sibling;ae=s,rh=l,hn=u}p1(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ae=i):p1(t)}}function p1(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||fp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!hn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:kr(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&J_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}J_(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&_u(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}hn||e.flags&512&&ky(e)}catch(m){bt(e,e.return,m)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function m1(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function g1(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{fp(4,e)}catch(c){bt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){bt(e,s,c)}}var i=e.return;try{ky(e)}catch(c){bt(e,i,c)}break;case 5:var o=e.return;try{ky(e)}catch(c){bt(e,o,c)}}}catch(c){bt(e,e.return,c)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var JO=Math.ceil,mf=gi.ReactCurrentDispatcher,T0=gi.ReactCurrentOwner,gr=gi.ReactCurrentBatchConfig,We=0,zt=null,At=null,Yt=0,Xn=0,rl=So(0),Mt=0,ku=null,aa=0,pp=0,S0=0,su=null,On=null,N0=0,Ml=1/0,Hs=null,gf=!1,Oy=null,eo=null,sh=!1,Hi=null,yf=0,iu=0,My=null,Rh=-1,kh=0;function Nn(){return We&6?St():Rh!==-1?Rh:Rh=St()}function to(t){return t.mode&1?We&2&&Yt!==0?Yt&-Yt:OO.transition!==null?(kh===0&&(kh=uS()),kh):(t=Je,t!==0||(t=window.event,t=t===void 0?16:yS(t.type)),t):1}function zr(t,e,n,r){if(50<iu)throw iu=0,My=null,Error(Y(185));td(t,n,r),(!(We&2)||t!==zt)&&(t===zt&&(!(We&2)&&(pp|=n),Mt===4&&Di(t,Yt)),Bn(t,r),n===1&&We===0&&!(e.mode&1)&&(Ml=St()+500,up&&No()))}function Bn(t,e){var n=t.callbackNode;OD(t,e);var r=Zh(t,t===zt?Yt:0);if(r===0)n!==null&&S_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&S_(n),e===1)t.tag===0?DO(y1.bind(null,t)):MS(y1.bind(null,t)),PO(function(){!(We&6)&&No()}),n=null;else{switch(dS(r)){case 1:n=Jv;break;case 4:n=lS;break;case 16:n=Jh;break;case 536870912:n=cS;break;default:n=Jh}n=DN(n,IN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function IN(t,e){if(Rh=-1,kh=0,We&6)throw Error(Y(327));var n=t.callbackNode;if(hl()&&t.callbackNode!==n)return null;var r=Zh(t,t===zt?Yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vf(t,r);else{e=r;var s=We;We|=2;var i=AN();(zt!==t||Yt!==e)&&(Hs=null,Ml=St()+500,ta(t,e));do try{tM();break}catch(l){CN(t,l)}while(!0);d0(),mf.current=i,We=s,At!==null?e=0:(zt=null,Yt=0,e=Mt)}if(e!==0){if(e===2&&(s=cy(t),s!==0&&(r=s,e=Ly(t,s))),e===1)throw n=ku,ta(t,0),Di(t,r),Bn(t,St()),n;if(e===6)Di(t,r);else{if(s=t.current.alternate,!(r&30)&&!ZO(s)&&(e=vf(t,r),e===2&&(i=cy(t),i!==0&&(r=i,e=Ly(t,i))),e===1))throw n=ku,ta(t,0),Di(t,r),Bn(t,St()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:Bo(t,On,Hs);break;case 3:if(Di(t,r),(r&130023424)===r&&(e=N0+500-St(),10<e)){if(Zh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Nn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=yy(Bo.bind(null,t,On,Hs),e);break}Bo(t,On,Hs);break;case 4:if(Di(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Br(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JO(r/1960))-r,10<r){t.timeoutHandle=yy(Bo.bind(null,t,On,Hs),r);break}Bo(t,On,Hs);break;case 5:Bo(t,On,Hs);break;default:throw Error(Y(329))}}}return Bn(t,St()),t.callbackNode===n?IN.bind(null,t):null}function Ly(t,e){var n=su;return t.current.memoizedState.isDehydrated&&(ta(t,e).flags|=256),t=vf(t,e),t!==2&&(e=On,On=n,e!==null&&Vy(e)),t}function Vy(t){On===null?On=t:On.push.apply(On,t)}function ZO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Kr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Di(t,e){for(e&=~S0,e&=~pp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Br(e),r=1<<n;t[n]=-1,e&=~r}}function y1(t){if(We&6)throw Error(Y(327));hl();var e=Zh(t,0);if(!(e&1))return Bn(t,St()),null;var n=vf(t,e);if(t.tag!==0&&n===2){var r=cy(t);r!==0&&(e=r,n=Ly(t,r))}if(n===1)throw n=ku,ta(t,0),Di(t,e),Bn(t,St()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bo(t,On,Hs),Bn(t,St()),null}function I0(t,e){var n=We;We|=1;try{return t(e)}finally{We=n,We===0&&(Ml=St()+500,up&&No())}}function la(t){Hi!==null&&Hi.tag===0&&!(We&6)&&hl();var e=We;We|=1;var n=gr.transition,r=Je;try{if(gr.transition=null,Je=1,t)return t()}finally{Je=r,gr.transition=n,We=e,!(We&6)&&No()}}function C0(){Xn=rl.current,lt(rl)}function ta(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AO(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(l0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sf();break;case 3:Dl(),lt(Un),lt(mn),y0();break;case 5:g0(r);break;case 4:Dl();break;case 13:lt(ft);break;case 19:lt(ft);break;case 10:h0(r.type._context);break;case 22:case 23:C0()}n=n.return}if(zt=t,At=t=no(t.current,null),Yt=Xn=e,Mt=0,ku=null,S0=pp=aa=0,On=su=null,Ho!==null){for(e=0;e<Ho.length;e++)if(n=Ho[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ho=null}return t}function CN(t,e){do{var n=At;try{if(d0(),Ch.current=pf,ff){for(var r=yt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ff=!1}if(oa=0,$t=Ot=yt=null,nu=!1,Au=0,T0.current=null,n===null||n.return===null){Mt=1,ku=e,At=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Yt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=s1(o);if(g!==null){g.flags&=-257,i1(g,o,l,i,e),g.mode&1&&r1(i,u,e),e=g,c=u;var T=e.updateQueue;if(T===null){var v=new Set;v.add(c),e.updateQueue=v}else T.add(c);break e}else{if(!(e&1)){r1(i,u,e),A0();break e}c=Error(Y(426))}}else if(ht&&l.mode&1){var x=s1(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),i1(x,o,l,i,e),c0(Ol(c,l));break e}}i=c=Ol(c,l),Mt!==4&&(Mt=2),su===null?su=[i]:su.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=dN(i,c,e);X_(i,_);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(eo===null||!eo.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var I=hN(i,l,e);X_(i,I);break e}}i=i.return}while(i!==null)}RN(n)}catch(k){e=k,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function AN(){var t=mf.current;return mf.current=pf,t===null?pf:t}function A0(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),zt===null||!(aa&268435455)&&!(pp&268435455)||Di(zt,Yt)}function vf(t,e){var n=We;We|=2;var r=AN();(zt!==t||Yt!==e)&&(Hs=null,ta(t,e));do try{eM();break}catch(s){CN(t,s)}while(!0);if(d0(),We=n,mf.current=r,At!==null)throw Error(Y(261));return zt=null,Yt=0,Mt}function eM(){for(;At!==null;)PN(At)}function tM(){for(;At!==null&&!ND();)PN(At)}function PN(t){var e=jN(t.alternate,t,Xn);t.memoizedProps=t.pendingProps,e===null?RN(t):At=e,T0.current=null}function RN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GO(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,At=null;return}}else if(n=KO(n,e,Xn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Mt===0&&(Mt=5)}function Bo(t,e,n){var r=Je,s=gr.transition;try{gr.transition=null,Je=1,nM(t,e,n,r)}finally{gr.transition=s,Je=r}return null}function nM(t,e,n,r){do hl();while(Hi!==null);if(We&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(MD(t,i),t===zt&&(At=zt=null,Yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sh||(sh=!0,DN(Jh,function(){return hl(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=gr.transition,gr.transition=null;var o=Je;Je=1;var l=We;We|=4,T0.current=null,YO(t,n),SN(n,t),bO(my),ef=!!py,my=py=null,t.current=n,XO(n),ID(),We=l,Je=o,gr.transition=i}else t.current=n;if(sh&&(sh=!1,Hi=t,yf=s),i=t.pendingLanes,i===0&&(eo=null),PD(n.stateNode),Bn(t,St()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(gf)throw gf=!1,t=Oy,Oy=null,t;return yf&1&&t.tag!==0&&hl(),i=t.pendingLanes,i&1?t===My?iu++:(iu=0,My=t):iu=0,No(),null}function hl(){if(Hi!==null){var t=dS(yf),e=gr.transition,n=Je;try{if(gr.transition=null,Je=16>t?16:t,Hi===null)var r=!1;else{if(t=Hi,Hi=null,yf=0,We&6)throw Error(Y(331));var s=We;for(We|=4,ae=t.current;ae!==null;){var i=ae,o=i.child;if(ae.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ae=u;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:ru(8,h,i)}var f=h.child;if(f!==null)f.return=h,ae=f;else for(;ae!==null;){h=ae;var m=h.sibling,g=h.return;if(bN(h),h===u){ae=null;break}if(m!==null){m.return=g,ae=m;break}ae=g}}}var T=i.alternate;if(T!==null){var v=T.child;if(v!==null){T.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}ae=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ae=o;else e:for(;ae!==null;){if(i=ae,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ru(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,ae=_;break e}ae=i.return}}var b=t.current;for(ae=b;ae!==null;){o=ae;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ae=w;else e:for(o=b;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:fp(9,l)}}catch(k){bt(l,l.return,k)}if(l===o){ae=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,ae=I;break e}ae=l.return}}if(We=s,No(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(ip,t)}catch{}r=!0}return r}finally{Je=n,gr.transition=e}}return!1}function v1(t,e,n){e=Ol(n,e),e=dN(t,e,1),t=Zi(t,e,1),e=Nn(),t!==null&&(td(t,1,e),Bn(t,e))}function bt(t,e,n){if(t.tag===3)v1(t,t,n);else for(;e!==null;){if(e.tag===3){v1(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(eo===null||!eo.has(r))){t=Ol(n,t),t=hN(e,t,1),e=Zi(e,t,1),t=Nn(),e!==null&&(td(e,1,t),Bn(e,t));break}}e=e.return}}function rM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nn(),t.pingedLanes|=t.suspendedLanes&n,zt===t&&(Yt&n)===n&&(Mt===4||Mt===3&&(Yt&130023424)===Yt&&500>St()-N0?ta(t,0):S0|=n),Bn(t,e)}function kN(t,e){e===0&&(t.mode&1?(e=Gd,Gd<<=1,!(Gd&130023424)&&(Gd=4194304)):e=1);var n=Nn();t=oi(t,e),t!==null&&(td(t,e,n),Bn(t,n))}function sM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),kN(t,n)}function iM(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),kN(t,n)}var jN;jN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Un.current)Vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vn=!1,qO(t,e,n);Vn=!!(t.flags&131072)}else Vn=!1,ht&&e.flags&1048576&&LS(e,lf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ph(t,e),t=e.pendingProps;var s=Rl(e,mn.current);dl(e,n),s=x0(null,e,r,t,s,n);var i=w0();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$n(r)?(i=!0,of(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,p0(e),s.updater=hp,e.stateNode=s,s._reactInternals=e,Ty(e,r,t,n),e=Iy(null,e,r,!0,i,n)):(e.tag=0,ht&&i&&a0(e),wn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ph(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=aM(r),t=kr(r,t),s){case 0:e=Ny(null,e,r,t,n);break e;case 1:e=l1(null,e,r,t,n);break e;case 11:e=o1(null,e,r,t,n);break e;case 14:e=a1(null,e,r,kr(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kr(r,s),Ny(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kr(r,s),l1(t,e,r,s,n);case 3:e:{if(gN(e),t===null)throw Error(Y(387));r=e.pendingProps,i=e.memoizedState,s=i.element,zS(t,e),df(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ol(Error(Y(423)),e),e=c1(t,e,r,n,s);break e}else if(r!==s){s=Ol(Error(Y(424)),e),e=c1(t,e,r,n,s);break e}else for(er=Ji(e.stateNode.containerInfo.firstChild),nr=e,ht=!0,Lr=null,n=$S(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(kl(),r===s){e=ai(t,e,n);break e}wn(t,e,r,n)}e=e.child}return e;case 5:return WS(e),t===null&&_y(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,gy(r,s)?o=null:i!==null&&gy(r,i)&&(e.flags|=32),mN(t,e),wn(t,e,o,n),e.child;case 6:return t===null&&_y(e),null;case 13:return yN(t,e,n);case 4:return m0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=jl(e,null,r,n):wn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kr(r,s),o1(t,e,r,s,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,st(cf,r._currentValue),r._currentValue=o,i!==null)if(Kr(i.value,o)){if(i.children===s.children&&!Un.current){e=ai(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=ei(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),by(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),by(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,dl(e,n),s=xr(s),r=r(s),e.flags|=1,wn(t,e,r,n),e.child;case 14:return r=e.type,s=kr(r,e.pendingProps),s=kr(r.type,s),a1(t,e,r,s,n);case 15:return fN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:kr(r,s),Ph(t,e),e.tag=1,$n(r)?(t=!0,of(e)):t=!1,dl(e,n),uN(e,r,s),Ty(e,r,s,n),Iy(null,e,r,!0,t,n);case 19:return vN(t,e,n);case 22:return pN(t,e,n)}throw Error(Y(156,e.tag))};function DN(t,e){return aS(t,e)}function oM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,e,n,r){return new oM(t,e,n,r)}function P0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aM(t){if(typeof t=="function")return P0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qv)return 11;if(t===Yv)return 14}return 2}function no(t,e){var n=t.alternate;return n===null?(n=mr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")P0(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ka:return na(n.children,s,i,e);case Gv:o=8,s|=8;break;case Gg:return t=mr(12,n,e,s|2),t.elementType=Gg,t.lanes=i,t;case Qg:return t=mr(13,n,e,s),t.elementType=Qg,t.lanes=i,t;case Yg:return t=mr(19,n,e,s),t.elementType=Yg,t.lanes=i,t;case WT:return mp(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case BT:o=10;break e;case zT:o=9;break e;case Qv:o=11;break e;case Yv:o=14;break e;case Ri:o=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=mr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function na(t,e,n,r){return t=mr(7,t,r,e),t.lanes=n,t}function mp(t,e,n,r){return t=mr(22,t,r,e),t.elementType=WT,t.lanes=n,t.stateNode={isHidden:!1},t}function ug(t,e,n){return t=mr(6,t,null,e),t.lanes=n,t}function dg(t,e,n){return e=mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lM(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hm(0),this.expirationTimes=Hm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function R0(t,e,n,r,s,i,o,l,c){return t=new lM(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=mr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},p0(i),t}function cM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function ON(t){if(!t)return ho;t=t._reactInternals;e:{if(Ta(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($n(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if($n(n))return OS(t,n,e)}return e}function MN(t,e,n,r,s,i,o,l,c){return t=R0(n,r,!0,t,s,i,o,l,c),t.context=ON(null),n=t.current,r=Nn(),s=to(n),i=ei(r,s),i.callback=e??null,Zi(n,i,s),t.current.lanes=s,td(t,s,r),Bn(t,r),t}function gp(t,e,n,r){var s=e.current,i=Nn(),o=to(s);return n=ON(n),e.context===null?e.context=n:e.pendingContext=n,e=ei(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Zi(s,e,o),t!==null&&(zr(t,s,o,i),Ih(t,s,o)),o}function xf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function x1(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function k0(t,e){x1(t,e),(t=t.alternate)&&x1(t,e)}function uM(){return null}var LN=typeof reportError=="function"?reportError:function(t){console.error(t)};function j0(t){this._internalRoot=t}yp.prototype.render=j0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));gp(t,e,null,null)};yp.prototype.unmount=j0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;la(function(){gp(null,t,null,null)}),e[ii]=null}};function yp(t){this._internalRoot=t}yp.prototype.unstable_scheduleHydration=function(t){if(t){var e=pS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ji.length&&e!==0&&e<ji[n].priority;n++);ji.splice(n,0,t),n===0&&gS(t)}};function D0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function w1(){}function dM(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=xf(o);i.call(u)}}var o=MN(e,r,t,0,null,!1,!1,"",w1);return t._reactRootContainer=o,t[ii]=o.current,Tu(t.nodeType===8?t.parentNode:t),la(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=xf(c);l.call(u)}}var c=R0(t,0,!1,null,null,!1,!1,"",w1);return t._reactRootContainer=c,t[ii]=c.current,Tu(t.nodeType===8?t.parentNode:t),la(function(){gp(e,c,n,r)}),c}function xp(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=xf(o);l.call(c)}}gp(e,o,t,s)}else o=dM(n,e,t,s,r);return xf(o)}hS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Uc(e.pendingLanes);n!==0&&(Zv(e,n|1),Bn(e,St()),!(We&6)&&(Ml=St()+500,No()))}break;case 13:la(function(){var r=oi(t,1);if(r!==null){var s=Nn();zr(r,t,1,s)}}),k0(t,1)}};e0=function(t){if(t.tag===13){var e=oi(t,134217728);if(e!==null){var n=Nn();zr(e,t,134217728,n)}k0(t,134217728)}};fS=function(t){if(t.tag===13){var e=to(t),n=oi(t,e);if(n!==null){var r=Nn();zr(n,t,e,r)}k0(t,e)}};pS=function(){return Je};mS=function(t,e){var n=Je;try{return Je=t,e()}finally{Je=n}};oy=function(t,e,n){switch(e){case"input":if(Zg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=cp(r);if(!s)throw Error(Y(90));qT(r),Zg(r,s)}}}break;case"textarea":GT(t,n);break;case"select":e=n.value,e!=null&&al(t,!!n.multiple,e,!1)}};tS=I0;nS=la;var hM={usingClientEntryPoint:!1,Events:[rd,Xa,cp,ZT,eS,I0]},Oc={findFiberByHostInstance:Wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fM={bundleType:Oc.bundleType,version:Oc.version,rendererPackageName:Oc.rendererPackageName,rendererConfig:Oc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iS(t),t===null?null:t.stateNode},findFiberByHostInstance:Oc.findFiberByHostInstance||uM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{ip=ih.inject(fM),xs=ih}catch{}}ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hM;ar.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D0(e))throw Error(Y(200));return cM(t,e,null,n)};ar.createRoot=function(t,e){if(!D0(t))throw Error(Y(299));var n=!1,r="",s=LN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=R0(t,1,!1,null,null,n,!1,r,s),t[ii]=e.current,Tu(t.nodeType===8?t.parentNode:t),new j0(e)};ar.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=iS(e),t=t===null?null:t.stateNode,t};ar.flushSync=function(t){return la(t)};ar.hydrate=function(t,e,n){if(!vp(e))throw Error(Y(200));return xp(null,t,e,!0,n)};ar.hydrateRoot=function(t,e,n){if(!D0(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=LN;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=MN(e,null,t,1,n??null,s,!1,i,o),t[ii]=e.current,Tu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new yp(e)};ar.render=function(t,e,n){if(!vp(e))throw Error(Y(200));return xp(null,t,e,!1,n)};ar.unmountComponentAtNode=function(t){if(!vp(t))throw Error(Y(40));return t._reactRootContainer?(la(function(){xp(null,null,t,!1,function(){t._reactRootContainer=null,t[ii]=null})}),!0):!1};ar.unstable_batchedUpdates=I0;ar.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vp(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return xp(t,e,n,!1,r)};ar.version="18.3.1-next-f1338f8080-20240426";function VN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(VN)}catch(t){console.error(t)}}VN(),VT.exports=ar;var Sa=VT.exports;const FN=NT(Sa);var UN,_1=Sa;UN=_1.createRoot,_1.hydrateRoot;const pM=1,mM=1e6;let hg=0;function gM(){return hg=(hg+1)%Number.MAX_SAFE_INTEGER,hg.toString()}const fg=new Map,b1=t=>{if(fg.has(t))return;const e=setTimeout(()=>{fg.delete(t),ou({type:"REMOVE_TOAST",toastId:t})},mM);fg.set(t,e)},yM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,pM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?b1(n):t.toasts.forEach(r=>{b1(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Dh=[];let Oh={toasts:[]};function ou(t){Oh=yM(Oh,t),Dh.forEach(e=>{e(Oh)})}function vM({...t}){const e=gM(),n=s=>ou({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>ou({type:"DISMISS_TOAST",toastId:e});return ou({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function en(){const[t,e]=p.useState(Oh);return p.useEffect(()=>(Dh.push(e),()=>{const n=Dh.indexOf(e);n>-1&&Dh.splice(n,1)}),[t]),{...t,toast:vM,dismiss:n=>ou({type:"DISMISS_TOAST",toastId:n})}}function re(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function E1(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function wp(...t){return e=>{let n=!1;const r=t.map(s=>{const i=E1(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():E1(t[s],null)}}}}function Ge(...t){return p.useCallback(wp(...t),t)}function xM(t,e){const n=p.createContext(e),r=i=>{const{children:o,...l}=i,c=p.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function Jr(t,e=[]){let n=[];function r(i,o){const l=p.createContext(o),c=n.length;n=[...n,o];const u=f=>{var _;const{scope:m,children:g,...T}=f,v=((_=m==null?void 0:m[t])==null?void 0:_[c])||l,x=p.useMemo(()=>T,Object.values(T));return a.jsx(v.Provider,{value:x,children:g})};u.displayName=i+"Provider";function h(f,m){var v;const g=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,T=p.useContext(g);if(T)return T;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,h]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,wM(s,...e)]}function wM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(i)[`__scope${u}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function ca(t){const e=bM(t),n=p.forwardRef((r,s)=>{const{children:i,...o}=r,l=p.Children.toArray(i),c=l.find(TM);if(c){const u=c.props.children,h=l.map(f=>f===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:f);return a.jsx(e,{...o,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var _M=ca("Slot");function bM(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const o=NM(s),l=SM(i,s.props);return s.type!==p.Fragment&&(l.ref=r?wp(r,o):o),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $N=Symbol("radix.slottable");function EM(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=$N,e}function TM(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$N}function SM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{const c=i(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function NM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function _p(t){const e=t+"CollectionProvider",[n,r]=Jr(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:x,children:_}=v,b=J.useRef(null),w=J.useRef(new Map).current;return a.jsx(s,{scope:x,itemMap:w,collectionRef:b,children:_})};o.displayName=e;const l=t+"CollectionSlot",c=ca(l),u=J.forwardRef((v,x)=>{const{scope:_,children:b}=v,w=i(l,_),I=Ge(x,w.collectionRef);return a.jsx(c,{ref:I,children:b})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=ca(h),g=J.forwardRef((v,x)=>{const{scope:_,children:b,...w}=v,I=J.useRef(null),k=Ge(x,I),O=i(h,_);return J.useEffect(()=>(O.itemMap.set(I,{ref:I,...w}),()=>void O.itemMap.delete(I))),a.jsx(m,{[f]:"",ref:k,children:b})});g.displayName=h;function T(v){const x=i(t+"CollectionConsumer",v);return J.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(x.itemMap.values()).sort((O,N)=>w.indexOf(O.ref.current)-w.indexOf(N.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},T,r]}var IM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=IM.reduce((t,e)=>{const n=ca(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function O0(t,e){t&&Sa.flushSync(()=>t.dispatchEvent(e))}function Wn(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function CM(t,e=globalThis==null?void 0:globalThis.document){const n=Wn(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var AM="DismissableLayer",Fy="dismissableLayer.update",PM="dismissableLayer.pointerDownOutside",RM="dismissableLayer.focusOutside",T1,BN=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Zl=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,u=p.useContext(BN),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),T=Ge(e,N=>f(N)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(x),b=h?v.indexOf(h):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,I=b>=_,k=jM(N=>{const S=N.target,C=[...u.branches].some(A=>A.contains(S));!I||C||(s==null||s(N),o==null||o(N),N.defaultPrevented||l==null||l())},m),O=DM(N=>{const S=N.target;[...u.branches].some(A=>A.contains(S))||(i==null||i(N),o==null||o(N),N.defaultPrevented||l==null||l())},m);return CM(N=>{b===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&l&&(N.preventDefault(),l()))},m),p.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(T1=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),S1(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=T1)}},[h,m,n,u]),p.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),S1())},[h,u]),p.useEffect(()=>{const N=()=>g({});return document.addEventListener(Fy,N),()=>document.removeEventListener(Fy,N)},[]),a.jsx(xe.div,{...c,ref:T,style:{pointerEvents:w?I?"auto":"none":void 0,...t.style},onFocusCapture:re(t.onFocusCapture,O.onFocusCapture),onBlurCapture:re(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:re(t.onPointerDownCapture,k.onPointerDownCapture)})});Zl.displayName=AM;var kM="DismissableLayerBranch",zN=p.forwardRef((t,e)=>{const n=p.useContext(BN),r=p.useRef(null),s=Ge(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(xe.div,{...t,ref:s})});zN.displayName=kM;function jM(t,e=globalThis==null?void 0:globalThis.document){const n=Wn(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){WN(PM,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function DM(t,e=globalThis==null?void 0:globalThis.document){const n=Wn(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&WN(RM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function S1(){const t=new CustomEvent(Fy);document.dispatchEvent(t)}function WN(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?O0(s,i):s.dispatchEvent(i)}var OM=Zl,MM=zN,Zt=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},LM="Portal",id=p.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=p.useState(!1);Zt(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?FN.createPortal(a.jsx(xe.div,{...r,ref:e}),o):null});id.displayName=LM;function VM(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Zr=t=>{const{present:e,children:n}=t,r=FM(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Ge(r.ref,UM(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};Zr.displayName="Presence";function FM(t){const[e,n]=p.useState(),r=p.useRef(null),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=VM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=oh(r.current);i.current=l==="mounted"?u:"none"},[l]),Zt(()=>{const u=r.current,h=s.current;if(h!==t){const m=i.current,g=oh(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),Zt(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const v=oh(r.current).includes(g.animationName);if(g.target===e&&v&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},m=g=>{g.target===e&&(i.current=oh(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function oh(t){return(t==null?void 0:t.animationName)||"none"}function UM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var $M=Wv[" useInsertionEffect ".trim().toString()]||Zt;function ua({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,i,o]=BM({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=p.useRef(t!==void 0);p.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const u=p.useCallback(h=>{var f;if(l){const m=zM(h)?h(t):h;m!==t&&((f=o.current)==null||f.call(o,m))}else i(h)},[l,t,i,o]);return[c,u]}function BM({defaultProp:t,onChange:e}){const[n,r]=p.useState(t),s=p.useRef(n),i=p.useRef(e);return $M(()=>{i.current=e},[e]),p.useEffect(()=>{var o;s.current!==n&&((o=i.current)==null||o.call(i,n),s.current=n)},[n,s]),[n,r,i]}function zM(t){return typeof t=="function"}var HN=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),WM="VisuallyHidden",bp=p.forwardRef((t,e)=>a.jsx(xe.span,{...t,ref:e,style:{...HN,...t.style}}));bp.displayName=WM;var HM=bp,M0="ToastProvider",[L0,qM,KM]=_p("Toast"),[qN,SG]=Jr("Toast",[KM]),[GM,Ep]=qN(M0),KN=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=p.useState(null),[u,h]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${M0}\`. Expected non-empty \`string\`.`),a.jsx(L0.Provider,{scope:e,children:a.jsx(GM,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>h(g=>g+1),[]),onToastRemove:p.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};KN.displayName=M0;var GN="ToastViewport",QM=["F8"],Uy="toast.viewportPause",$y="toast.viewportResume",QN=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=QM,label:s="Notifications ({hotkey})",...i}=t,o=Ep(GN,n),l=qM(n),c=p.useRef(null),u=p.useRef(null),h=p.useRef(null),f=p.useRef(null),m=Ge(e,f,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=o.toastCount>0;p.useEffect(()=>{const x=_=>{var w;r.length!==0&&r.every(I=>_[I]||_.code===I)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),p.useEffect(()=>{const x=c.current,_=f.current;if(T&&x&&_){const b=()=>{if(!o.isClosePausedRef.current){const O=new CustomEvent(Uy);_.dispatchEvent(O),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const O=new CustomEvent($y);_.dispatchEvent(O),o.isClosePausedRef.current=!1}},I=O=>{!x.contains(O.relatedTarget)&&w()},k=()=>{x.contains(document.activeElement)||w()};return x.addEventListener("focusin",b),x.addEventListener("focusout",I),x.addEventListener("pointermove",b),x.addEventListener("pointerleave",k),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{x.removeEventListener("focusin",b),x.removeEventListener("focusout",I),x.removeEventListener("pointermove",b),x.removeEventListener("pointerleave",k),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[T,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const b=l().map(w=>{const I=w.ref.current,k=[I,...l4(I)];return x==="forwards"?k:k.reverse()});return(x==="forwards"?b.reverse():b).flat()},[l]);return p.useEffect(()=>{const x=f.current;if(x){const _=b=>{var k,O,N;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const S=document.activeElement,C=b.shiftKey;if(b.target===x&&C){(k=u.current)==null||k.focus();return}const D=v({tabbingDirection:C?"backwards":"forwards"}),R=D.findIndex(K=>K===S);pg(D.slice(R+1))?b.preventDefault():C?(O=u.current)==null||O.focus():(N=h.current)==null||N.focus()}};return x.addEventListener("keydown",_),()=>x.removeEventListener("keydown",_)}},[l,v]),a.jsxs(MM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&a.jsx(By,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});pg(x)}}),a.jsx(L0.Slot,{scope:n,children:a.jsx(xe.ol,{tabIndex:-1,...i,ref:m})}),T&&a.jsx(By,{ref:h,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});pg(x)}})]})});QN.displayName=GN;var YN="ToastFocusProxy",By=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=Ep(YN,n);return a.jsx(bp,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});By.displayName=YN;var od="Toast",YM="toast.swipeStart",XM="toast.swipeMove",JM="toast.swipeCancel",ZM="toast.swipeEnd",XN=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l,c]=ua({prop:r,defaultProp:s??!0,onChange:i,caller:od});return a.jsx(Zr,{present:n||l,children:a.jsx(n4,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:Wn(t.onPause),onResume:Wn(t.onResume),onSwipeStart:re(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:re(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:re(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:re(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});XN.displayName=od;var[e4,t4]=qN(od,{onClose(){}}),n4=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:g,...T}=t,v=Ep(od,n),[x,_]=p.useState(null),b=Ge(e,K=>_(K)),w=p.useRef(null),I=p.useRef(null),k=s||v.duration,O=p.useRef(0),N=p.useRef(k),S=p.useRef(0),{onToastAdd:C,onToastRemove:A}=v,j=Wn(()=>{var q;(x==null?void 0:x.contains(document.activeElement))&&((q=v.viewport)==null||q.focus()),o()}),D=p.useCallback(K=>{!K||K===1/0||(window.clearTimeout(S.current),O.current=new Date().getTime(),S.current=window.setTimeout(j,K))},[j]);p.useEffect(()=>{const K=v.viewport;if(K){const q=()=>{D(N.current),u==null||u()},G=()=>{const Q=new Date().getTime()-O.current;N.current=N.current-Q,window.clearTimeout(S.current),c==null||c()};return K.addEventListener(Uy,G),K.addEventListener($y,q),()=>{K.removeEventListener(Uy,G),K.removeEventListener($y,q)}}},[v.viewport,k,c,u,D]),p.useEffect(()=>{i&&!v.isClosePausedRef.current&&D(k)},[i,k,v.isClosePausedRef,D]),p.useEffect(()=>(C(),()=>A()),[C,A]);const R=p.useMemo(()=>x?sI(x):null,[x]);return v.viewport?a.jsxs(a.Fragment,{children:[R&&a.jsx(r4,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:R}),a.jsx(e4,{scope:n,onClose:j,children:Sa.createPortal(a.jsx(L0.ItemSlot,{scope:n,children:a.jsx(OM,{asChild:!0,onEscapeKeyDown:re(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||j(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(xe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...T,ref:b,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:re(t.onKeyDown,K=>{K.key==="Escape"&&(l==null||l(K.nativeEvent),K.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:re(t.onPointerDown,K=>{K.button===0&&(w.current={x:K.clientX,y:K.clientY})}),onPointerMove:re(t.onPointerMove,K=>{if(!w.current)return;const q=K.clientX-w.current.x,G=K.clientY-w.current.y,Q=!!I.current,V=["left","right"].includes(v.swipeDirection),L=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,$=V?L(0,q):0,ie=V?0:L(0,G),Z=K.pointerType==="touch"?10:2,le={x:$,y:ie},he={originalEvent:K,delta:le};Q?(I.current=le,ah(XM,f,he,{discrete:!1})):N1(le,v.swipeDirection,Z)?(I.current=le,ah(YM,h,he,{discrete:!1}),K.target.setPointerCapture(K.pointerId)):(Math.abs(q)>Z||Math.abs(G)>Z)&&(w.current=null)}),onPointerUp:re(t.onPointerUp,K=>{const q=I.current,G=K.target;if(G.hasPointerCapture(K.pointerId)&&G.releasePointerCapture(K.pointerId),I.current=null,w.current=null,q){const Q=K.currentTarget,V={originalEvent:K,delta:q};N1(q,v.swipeDirection,v.swipeThreshold)?ah(ZM,g,V,{discrete:!0}):ah(JM,m,V,{discrete:!0}),Q.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),r4=t=>{const{__scopeToast:e,children:n,...r}=t,s=Ep(od,e),[i,o]=p.useState(!1),[l,c]=p.useState(!1);return o4(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(id,{asChild:!0,children:a.jsx(bp,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},s4="ToastTitle",JN=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(xe.div,{...r,ref:e})});JN.displayName=s4;var i4="ToastDescription",ZN=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(xe.div,{...r,ref:e})});ZN.displayName=i4;var eI="ToastAction",tI=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(rI,{altText:n,asChild:!0,children:a.jsx(V0,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${eI}\`. Expected non-empty \`string\`.`),null)});tI.displayName=eI;var nI="ToastClose",V0=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=t4(nI,n);return a.jsx(rI,{asChild:!0,children:a.jsx(xe.button,{type:"button",...r,ref:e,onClick:re(t.onClick,s.onClose)})})});V0.displayName=nI;var rI=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function sI(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),a4(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...sI(r))}}),e}function ah(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?O0(s,i):s.dispatchEvent(i)}var N1=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function o4(t=()=>{}){const e=Wn(t);Zt(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function a4(t){return t.nodeType===t.ELEMENT_NODE}function l4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function pg(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var c4=KN,iI=QN,oI=XN,aI=JN,lI=ZN,cI=tI,uI=V0;function dI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=dI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function hI(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=dI(t))&&(r&&(r+=" "),r+=e);return r}const I1=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,C1=hI,ad=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return C1(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=i==null?void 0:i[u];if(h===null)return null;const m=I1(h)||I1(f);return s[u][m]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,m]=h;return m===void 0||(u[f]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:m,...g}=h;return Object.entries(g).every(T=>{let[v,x]=T;return Array.isArray(x)?x.includes({...i,...l}[v]):{...i,...l}[v]===x})?[...u,f,m]:u},[]);return C1(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var d4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...d4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:fI("lucide",s),...l},[...o.map(([u,h])=>p.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=(t,e)=>{const n=p.forwardRef(({className:r,...s},i)=>p.createElement(h4,{ref:i,iconNode:e,className:fI(`lucide-${u4(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mg=de("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=de("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gg=de("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=de("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=de("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f4=de("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=de("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=de("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=de("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=de("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wf=de("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=de("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=de("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=de("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=de("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ll=de("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=de("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=de("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vl=de("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=de("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=de("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=de("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v4=de("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x4=de("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=de("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=de("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=de("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=de("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gI=de("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=de("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=de("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=de("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T4=de("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=de("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=de("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=de("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N4=de("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=de("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=de("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const li=de("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fl=de("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=de("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A1=de("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=de("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=de("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=de("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=de("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=de("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=de("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P1=de("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=de("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=de("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ld=de("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yg=de("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=de("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ju=de("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),z0="-",D4=t=>{const e=M4(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(z0);return l[0]===""&&l.length!==1&&l.shift(),vI(l,e)||O4(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},vI=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?vI(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(z0);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},R1=/^\[(.+)\]$/,O4=t=>{if(R1.test(t)){const e=R1.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},M4=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return V4(Object.entries(t.classGroups),n).forEach(([i,o])=>{Hy(o,r,i,e)}),r},Hy=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:k1(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(L4(s)){Hy(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Hy(o,k1(e,i),n,r)})})},k1=(t,e)=>{let n=t;return e.split(z0).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},L4=t=>t.isThemeGetter,V4=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,F4=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},xI="!",U4=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let x=0;x<l.length;x++){let _=l[x];if(u===0){if(_===s&&(r||l.slice(x,x+i)===e)){c.push(l.slice(h,x)),h=x+i;continue}if(_==="/"){f=x;continue}}_==="["?u++:_==="]"&&u--}const m=c.length===0?l:l.substring(h),g=m.startsWith(xI),T=g?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:T,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},$4=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},B4=t=>({cache:F4(t.cacheSize),parseClassName:U4(t),...D4(t)}),z4=/\s+/,W4=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(z4);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:g}=n(u);let T=!!g,v=r(T?m.substring(0,g):m);if(!v){if(!T){l=u+(l.length>0?" "+l:l);continue}if(v=r(m),!v){l=u+(l.length>0?" "+l:l);continue}T=!1}const x=$4(h).join(":"),_=f?x+xI:x,b=_+v;if(i.includes(b))continue;i.push(b);const w=s(v,T);for(let I=0;I<w.length;++I){const k=w[I];i.push(_+k)}l=u+(l.length>0?" "+l:l)}return l};function H4(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=wI(e))&&(r&&(r+=" "),r+=n);return r}const wI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=wI(t[r]))&&(n&&(n+=" "),n+=e);return n};function q4(t,...e){let n,r,s,i=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=B4(u),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=W4(c,n);return s(c,h),h}return function(){return i(H4.apply(null,arguments))}}const ot=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},_I=/^\[(?:([a-z-]+):)?(.+)\]$/i,K4=/^\d+\/\d+$/,G4=new Set(["px","full","screen"]),Q4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Y4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,X4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,J4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Z4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zs=t=>pl(t)||G4.has(t)||K4.test(t),Ni=t=>tc(t,"length",aL),pl=t=>!!t&&!Number.isNaN(Number(t)),vg=t=>tc(t,"number",pl),Mc=t=>!!t&&Number.isInteger(Number(t)),eL=t=>t.endsWith("%")&&pl(t.slice(0,-1)),Re=t=>_I.test(t),Ii=t=>Q4.test(t),tL=new Set(["length","size","percentage"]),nL=t=>tc(t,tL,bI),rL=t=>tc(t,"position",bI),sL=new Set(["image","url"]),iL=t=>tc(t,sL,cL),oL=t=>tc(t,"",lL),Lc=()=>!0,tc=(t,e,n)=>{const r=_I.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},aL=t=>Y4.test(t)&&!X4.test(t),bI=()=>!1,lL=t=>J4.test(t),cL=t=>Z4.test(t),uL=()=>{const t=ot("colors"),e=ot("spacing"),n=ot("blur"),r=ot("brightness"),s=ot("borderColor"),i=ot("borderRadius"),o=ot("borderSpacing"),l=ot("borderWidth"),c=ot("contrast"),u=ot("grayscale"),h=ot("hueRotate"),f=ot("invert"),m=ot("gap"),g=ot("gradientColorStops"),T=ot("gradientColorStopPositions"),v=ot("inset"),x=ot("margin"),_=ot("opacity"),b=ot("padding"),w=ot("saturate"),I=ot("scale"),k=ot("sepia"),O=ot("skew"),N=ot("space"),S=ot("translate"),C=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",Re,e],D=()=>[Re,e],R=()=>["",zs,Ni],K=()=>["auto",pl,Re],q=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],Q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],V=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",Re],$=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ie=()=>[pl,Re];return{cacheSize:500,separator:":",theme:{colors:[Lc],spacing:[zs,Ni],blur:["none","",Ii,Re],brightness:ie(),borderColor:[t],borderRadius:["none","","full",Ii,Re],borderSpacing:D(),borderWidth:R(),contrast:ie(),grayscale:L(),hueRotate:ie(),invert:L(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[eL,Ni],inset:j(),margin:j(),opacity:ie(),padding:D(),saturate:ie(),scale:ie(),sepia:L(),skew:ie(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",Re]}],container:["container"],columns:[{columns:[Ii]}],"break-after":[{"break-after":$()}],"break-before":[{"break-before":$()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...q(),Re]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Mc,Re]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Re]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Mc,Re]}],"grid-cols":[{"grid-cols":[Lc]}],"col-start-end":[{col:["auto",{span:["full",Mc,Re]},Re]}],"col-start":[{"col-start":K()}],"col-end":[{"col-end":K()}],"grid-rows":[{"grid-rows":[Lc]}],"row-start-end":[{row:["auto",{span:[Mc,Re]},Re]}],"row-start":[{"row-start":K()}],"row-end":[{"row-end":K()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Re]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Re]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...V()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...V(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...V(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Re,e]}],"min-w":[{"min-w":[Re,e,"min","max","fit"]}],"max-w":[{"max-w":[Re,e,"none","full","min","max","fit","prose",{screen:[Ii]},Ii]}],h:[{h:[Re,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Re,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Re,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Re,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Ii,Ni]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vg]}],"font-family":[{font:[Lc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Re]}],"line-clamp":[{"line-clamp":["none",pl,vg]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",zs,Re]}],"list-image":[{"list-image":["none",Re]}],"list-style-type":[{list:["none","disc","decimal",Re]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",zs,Ni]}],"underline-offset":[{"underline-offset":["auto",zs,Re]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Re]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Re]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...q(),rL]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nL]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},iL]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:G()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[zs,Re]}],"outline-w":[{outline:[zs,Ni]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[zs,Ni]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Ii,oL]}],"shadow-color":[{shadow:[Lc]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ii,Re]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Re]}],duration:[{duration:ie()}],ease:[{ease:["linear","in","out","in-out",Re]}],delay:[{delay:ie()}],animate:[{animate:["none","spin","ping","pulse","bounce",Re]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[I]}],"scale-x":[{"scale-x":[I]}],"scale-y":[{"scale-y":[I]}],rotate:[{rotate:[Mc,Re]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[O]}],"skew-y":[{"skew-y":[O]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Re]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Re]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Re]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[zs,Ni,vg]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},dL=q4(uL);function be(...t){return dL(hI(t))}const hL=c4,EI=p.forwardRef(({className:t,...e},n)=>a.jsx(iI,{ref:n,className:be("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));EI.displayName=iI.displayName;const fL=ad("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),TI=p.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(oI,{ref:r,className:be(fL({variant:e}),t),...n}));TI.displayName=oI.displayName;const pL=p.forwardRef(({className:t,...e},n)=>a.jsx(cI,{ref:n,className:be("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));pL.displayName=cI.displayName;const SI=p.forwardRef(({className:t,...e},n)=>a.jsx(uI,{ref:n,className:be("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(ju,{className:"h-4 w-4"})}));SI.displayName=uI.displayName;const NI=p.forwardRef(({className:t,...e},n)=>a.jsx(aI,{ref:n,className:be("text-sm font-semibold",t),...e}));NI.displayName=aI.displayName;const II=p.forwardRef(({className:t,...e},n)=>a.jsx(lI,{ref:n,className:be("text-sm opacity-90",t),...e}));II.displayName=lI.displayName;function mL(){const{toasts:t}=en();return a.jsxs(hL,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(TI,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(NI,{children:n}),r&&a.jsx(II,{children:r})]}),s,a.jsx(SI,{})]},e)}),a.jsx(EI,{})]})}var j1=["light","dark"],gL="(prefers-color-scheme: dark)",yL=p.createContext(void 0),vL={setTheme:t=>{},themes:[]},xL=()=>{var t;return(t=p.useContext(yL))!=null?t:vL};p.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:i,value:o,attrs:l,nonce:c})=>{let u=i==="system",h=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(T=>`'${T}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?j1.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",m=(T,v=!1,x=!0)=>{let _=o?o[T]:T,b=v?T+"|| ''":`'${_}'`,w="";return s&&x&&!v&&j1.includes(T)&&(w+=`d.style.colorScheme = '${T}';`),n==="class"?v||_?w+=`c.add(${b})`:w+="null":_&&(w+=`d[s](n,${b})`),w},g=t?`!function(){${h}${m(t)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${gL}',m=window.matchMedia(t);if(m.media!==t||m.matches){${m("dark")}}else{${m("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}${u?"":"else{"+m(i,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${m(o?"x[e]":"e",!0)}}else{${m(i,!1,!1)};}${f}}catch(t){}}();`;return p.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var wL=t=>{switch(t){case"success":return EL;case"info":return SL;case"warning":return TL;case"error":return NL;default:return null}},_L=Array(12).fill(0),bL=({visible:t,className:e})=>J.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},J.createElement("div",{className:"sonner-spinner"},_L.map((n,r)=>J.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),EL=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),TL=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),SL=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),NL=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},J.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),IL=J.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},J.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),J.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),CL=()=>{let[t,e]=J.useState(document.hidden);return J.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},qy=1,AL=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,i=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:qy++,o=this.toasts.find(c=>c.id===i),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...e,id:i,title:r}),{...c,...e,id:i,dismissible:l,title:r}):c):this.addToast({title:r,...s,dismissible:l,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),i=r!==void 0,o,l=s.then(async u=>{if(o=["resolve",u],J.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(RL(u)&&!u.ok){i=!1;let h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description;this.create({id:r,type:"error",message:h,description:f})}else if(n.success!==void 0){i=!1;let h=typeof n.success=="function"?await n.success(u):n.success,f=typeof n.description=="function"?await n.description(u):n.description;this.create({id:r,type:"success",message:h,description:f})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){i=!1;let h=typeof n.error=="function"?await n.error(u):n.error,f=typeof n.description=="function"?await n.description(u):n.description;this.create({id:r,type:"error",message:h,description:f})}}).finally(()=>{var u;i&&(this.dismiss(r),r=void 0),(u=n.finally)==null||u.call(n)}),c=()=>new Promise((u,h)=>l.then(()=>o[0]==="reject"?h(o[1]):u(o[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||qy++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},kn=new AL,PL=(t,e)=>{let n=(e==null?void 0:e.id)||qy++;return kn.addToast({title:t,...e,id:n}),n},RL=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",kL=PL,jL=()=>kn.toasts,DL=()=>kn.getActiveToasts(),jn=Object.assign(kL,{success:kn.success,info:kn.info,warning:kn.warning,error:kn.error,custom:kn.custom,message:kn.message,promise:kn.promise,dismiss:kn.dismiss,loading:kn.loading},{getHistory:jL,getToasts:DL});function OL(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}OL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function lh(t){return t.label!==void 0}var ML=3,LL="32px",VL="16px",D1=4e3,FL=356,UL=14,$L=20,BL=200;function Ar(...t){return t.filter(Boolean).join(" ")}function zL(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var WL=t=>{var e,n,r,s,i,o,l,c,u,h,f;let{invert:m,toast:g,unstyled:T,interacting:v,setHeights:x,visibleToasts:_,heights:b,index:w,toasts:I,expanded:k,removeToast:O,defaultRichColors:N,closeButton:S,style:C,cancelButtonStyle:A,actionButtonStyle:j,className:D="",descriptionClassName:R="",duration:K,position:q,gap:G,loadingIcon:Q,expandByDefault:V,classNames:L,icons:$,closeButtonAriaLabel:ie="Close toast",pauseWhenPageIsHidden:Z}=t,[le,he]=J.useState(null),[Oe,De]=J.useState(null),[X,Ce]=J.useState(!1),[me,_e]=J.useState(!1),[Pe,ke]=J.useState(!1),[He,Ft]=J.useState(!1),[Hn,qn]=J.useState(!1),[Er,Fs]=J.useState(0),[Tr,xi]=J.useState(0),ts=J.useRef(g.duration||K||D1),ns=J.useRef(null),yn=J.useRef(null),Sr=w===0,wi=w+1<=_,$e=g.type,ut=g.dismissible!==!1,Nr=g.className||"",Oo=g.descriptionClassName||"",ur=J.useMemo(()=>b.findIndex(ge=>ge.toastId===g.id)||0,[b,g.id]),gc=J.useMemo(()=>{var ge;return(ge=g.closeButton)!=null?ge:S},[g.closeButton,S]),Kn=J.useMemo(()=>g.duration||K||D1,[g.duration,K]),rs=J.useRef(0),Gn=J.useRef(0),ss=J.useRef(0),dr=J.useRef(null),[yc,_i]=q.split("-"),is=J.useMemo(()=>b.reduce((ge,je,ze)=>ze>=ur?ge:ge+je.height,0),[b,ur]),Mo=CL(),os=g.invert||m,Us=$e==="loading";Gn.current=J.useMemo(()=>ur*G+is,[ur,is]),J.useEffect(()=>{ts.current=Kn},[Kn]),J.useEffect(()=>{Ce(!0)},[]),J.useEffect(()=>{let ge=yn.current;if(ge){let je=ge.getBoundingClientRect().height;return xi(je),x(ze=>[{toastId:g.id,height:je,position:g.position},...ze]),()=>x(ze=>ze.filter(jt=>jt.toastId!==g.id))}},[x,g.id]),J.useLayoutEffect(()=>{if(!X)return;let ge=yn.current,je=ge.style.height;ge.style.height="auto";let ze=ge.getBoundingClientRect().height;ge.style.height=je,xi(ze),x(jt=>jt.find(It=>It.toastId===g.id)?jt.map(It=>It.toastId===g.id?{...It,height:ze}:It):[{toastId:g.id,height:ze,position:g.position},...jt])},[X,g.title,g.description,x,g.id]);let Ht=J.useCallback(()=>{_e(!0),Fs(Gn.current),x(ge=>ge.filter(je=>je.toastId!==g.id)),setTimeout(()=>{O(g)},BL)},[g,O,x,Gn]);J.useEffect(()=>{if(g.promise&&$e==="loading"||g.duration===1/0||g.type==="loading")return;let ge;return k||v||Z&&Mo?(()=>{if(ss.current<rs.current){let je=new Date().getTime()-rs.current;ts.current=ts.current-je}ss.current=new Date().getTime()})():ts.current!==1/0&&(rs.current=new Date().getTime(),ge=setTimeout(()=>{var je;(je=g.onAutoClose)==null||je.call(g,g),Ht()},ts.current)),()=>clearTimeout(ge)},[k,v,g,$e,Z,Mo,Ht]),J.useEffect(()=>{g.delete&&Ht()},[Ht,g.delete]);function vn(){var ge,je,ze;return $!=null&&$.loading?J.createElement("div",{className:Ar(L==null?void 0:L.loader,(ge=g==null?void 0:g.classNames)==null?void 0:ge.loader,"sonner-loader"),"data-visible":$e==="loading"},$.loading):Q?J.createElement("div",{className:Ar(L==null?void 0:L.loader,(je=g==null?void 0:g.classNames)==null?void 0:je.loader,"sonner-loader"),"data-visible":$e==="loading"},Q):J.createElement(bL,{className:Ar(L==null?void 0:L.loader,(ze=g==null?void 0:g.classNames)==null?void 0:ze.loader),visible:$e==="loading"})}return J.createElement("li",{tabIndex:0,ref:yn,className:Ar(D,Nr,L==null?void 0:L.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[$e],(n=g==null?void 0:g.classNames)==null?void 0:n[$e]),"data-sonner-toast":"","data-rich-colors":(r=g.richColors)!=null?r:N,"data-styled":!(g.jsx||g.unstyled||T),"data-mounted":X,"data-promise":!!g.promise,"data-swiped":Hn,"data-removed":me,"data-visible":wi,"data-y-position":yc,"data-x-position":_i,"data-index":w,"data-front":Sr,"data-swiping":Pe,"data-dismissible":ut,"data-type":$e,"data-invert":os,"data-swipe-out":He,"data-swipe-direction":Oe,"data-expanded":!!(k||V&&X),style:{"--index":w,"--toasts-before":w,"--z-index":I.length-w,"--offset":`${me?Er:Gn.current}px`,"--initial-height":V?"auto":`${Tr}px`,...C,...g.style},onDragEnd:()=>{ke(!1),he(null),dr.current=null},onPointerDown:ge=>{Us||!ut||(ns.current=new Date,Fs(Gn.current),ge.target.setPointerCapture(ge.pointerId),ge.target.tagName!=="BUTTON"&&(ke(!0),dr.current={x:ge.clientX,y:ge.clientY}))},onPointerUp:()=>{var ge,je,ze,jt;if(He||!ut)return;dr.current=null;let It=Number(((ge=yn.current)==null?void 0:ge.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ze=Number(((je=yn.current)==null?void 0:je.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Qn=new Date().getTime()-((ze=ns.current)==null?void 0:ze.getTime()),Dt=le==="x"?It:Ze,tn=Math.abs(Dt)/Qn;if(Math.abs(Dt)>=$L||tn>.11){Fs(Gn.current),(jt=g.onDismiss)==null||jt.call(g,g),De(le==="x"?It>0?"right":"left":Ze>0?"down":"up"),Ht(),Ft(!0),qn(!1);return}ke(!1),he(null)},onPointerMove:ge=>{var je,ze,jt,It;if(!dr.current||!ut||((je=window.getSelection())==null?void 0:je.toString().length)>0)return;let Ze=ge.clientY-dr.current.y,Qn=ge.clientX-dr.current.x,Dt=(ze=t.swipeDirections)!=null?ze:zL(q);!le&&(Math.abs(Qn)>1||Math.abs(Ze)>1)&&he(Math.abs(Qn)>Math.abs(Ze)?"x":"y");let tn={x:0,y:0};le==="y"?(Dt.includes("top")||Dt.includes("bottom"))&&(Dt.includes("top")&&Ze<0||Dt.includes("bottom")&&Ze>0)&&(tn.y=Ze):le==="x"&&(Dt.includes("left")||Dt.includes("right"))&&(Dt.includes("left")&&Qn<0||Dt.includes("right")&&Qn>0)&&(tn.x=Qn),(Math.abs(tn.x)>0||Math.abs(tn.y)>0)&&qn(!0),(jt=yn.current)==null||jt.style.setProperty("--swipe-amount-x",`${tn.x}px`),(It=yn.current)==null||It.style.setProperty("--swipe-amount-y",`${tn.y}px`)}},gc&&!g.jsx?J.createElement("button",{"aria-label":ie,"data-disabled":Us,"data-close-button":!0,onClick:Us||!ut?()=>{}:()=>{var ge;Ht(),(ge=g.onDismiss)==null||ge.call(g,g)},className:Ar(L==null?void 0:L.closeButton,(s=g==null?void 0:g.classNames)==null?void 0:s.closeButton)},(i=$==null?void 0:$.close)!=null?i:IL):null,g.jsx||p.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:J.createElement(J.Fragment,null,$e||g.icon||g.promise?J.createElement("div",{"data-icon":"",className:Ar(L==null?void 0:L.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||vn():null,g.type!=="loading"?g.icon||($==null?void 0:$[$e])||wL($e):null):null,J.createElement("div",{"data-content":"",className:Ar(L==null?void 0:L.content,(l=g==null?void 0:g.classNames)==null?void 0:l.content)},J.createElement("div",{"data-title":"",className:Ar(L==null?void 0:L.title,(c=g==null?void 0:g.classNames)==null?void 0:c.title)},typeof g.title=="function"?g.title():g.title),g.description?J.createElement("div",{"data-description":"",className:Ar(R,Oo,L==null?void 0:L.description,(u=g==null?void 0:g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),p.isValidElement(g.cancel)?g.cancel:g.cancel&&lh(g.cancel)?J.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||A,onClick:ge=>{var je,ze;lh(g.cancel)&&ut&&((ze=(je=g.cancel).onClick)==null||ze.call(je,ge),Ht())},className:Ar(L==null?void 0:L.cancelButton,(h=g==null?void 0:g.classNames)==null?void 0:h.cancelButton)},g.cancel.label):null,p.isValidElement(g.action)?g.action:g.action&&lh(g.action)?J.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||j,onClick:ge=>{var je,ze;lh(g.action)&&((ze=(je=g.action).onClick)==null||ze.call(je,ge),!ge.defaultPrevented&&Ht())},className:Ar(L==null?void 0:L.actionButton,(f=g==null?void 0:g.classNames)==null?void 0:f.actionButton)},g.action.label):null))};function O1(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function HL(t,e){let n={};return[t,e].forEach((r,s)=>{let i=s===1,o=i?"--mobile-offset":"--offset",l=i?VL:LL;function c(u){["top","right","bottom","left"].forEach(h=>{n[`${o}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var qL=p.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:c,mobileOffset:u,theme:h="light",richColors:f,duration:m,style:g,visibleToasts:T=ML,toastOptions:v,dir:x=O1(),gap:_=UL,loadingIcon:b,icons:w,containerAriaLabel:I="Notifications",pauseWhenPageIsHidden:k}=t,[O,N]=J.useState([]),S=J.useMemo(()=>Array.from(new Set([r].concat(O.filter(Z=>Z.position).map(Z=>Z.position)))),[O,r]),[C,A]=J.useState([]),[j,D]=J.useState(!1),[R,K]=J.useState(!1),[q,G]=J.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Q=J.useRef(null),V=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=J.useRef(null),$=J.useRef(!1),ie=J.useCallback(Z=>{N(le=>{var he;return(he=le.find(Oe=>Oe.id===Z.id))!=null&&he.delete||kn.dismiss(Z.id),le.filter(({id:Oe})=>Oe!==Z.id)})},[]);return J.useEffect(()=>kn.subscribe(Z=>{if(Z.dismiss){N(le=>le.map(he=>he.id===Z.id?{...he,delete:!0}:he));return}setTimeout(()=>{FN.flushSync(()=>{N(le=>{let he=le.findIndex(Oe=>Oe.id===Z.id);return he!==-1?[...le.slice(0,he),{...le[he],...Z},...le.slice(he+1)]:[Z,...le]})})})}),[]),J.useEffect(()=>{if(h!=="system"){G(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?G("dark"):G("light")),typeof window>"u")return;let Z=window.matchMedia("(prefers-color-scheme: dark)");try{Z.addEventListener("change",({matches:le})=>{G(le?"dark":"light")})}catch{Z.addListener(({matches:he})=>{try{G(he?"dark":"light")}catch(Oe){console.error(Oe)}})}},[h]),J.useEffect(()=>{O.length<=1&&D(!1)},[O]),J.useEffect(()=>{let Z=le=>{var he,Oe;s.every(De=>le[De]||le.code===De)&&(D(!0),(he=Q.current)==null||he.focus()),le.code==="Escape"&&(document.activeElement===Q.current||(Oe=Q.current)!=null&&Oe.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",Z),()=>document.removeEventListener("keydown",Z)},[s]),J.useEffect(()=>{if(Q.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,$.current=!1)}},[Q.current]),J.createElement("section",{ref:e,"aria-label":`${I} ${V}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((Z,le)=>{var he;let[Oe,De]=Z.split("-");return O.length?J.createElement("ol",{key:Z,dir:x==="auto"?O1():x,tabIndex:-1,ref:Q,className:l,"data-sonner-toaster":!0,"data-theme":q,"data-y-position":Oe,"data-lifted":j&&O.length>1&&!i,"data-x-position":De,style:{"--front-toast-height":`${((he=C[0])==null?void 0:he.height)||0}px`,"--width":`${FL}px`,"--gap":`${_}px`,...g,...HL(c,u)},onBlur:X=>{$.current&&!X.currentTarget.contains(X.relatedTarget)&&($.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||$.current||($.current=!0,L.current=X.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{R||D(!1)},onDragEnd:()=>D(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||K(!0)},onPointerUp:()=>K(!1)},O.filter(X=>!X.position&&le===0||X.position===Z).map((X,Ce)=>{var me,_e;return J.createElement(WL,{key:X.id,icons:w,index:Ce,toast:X,defaultRichColors:f,duration:(me=v==null?void 0:v.duration)!=null?me:m,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:n,visibleToasts:T,closeButton:(_e=v==null?void 0:v.closeButton)!=null?_e:o,interacting:R,position:Z,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:ie,toasts:O.filter(Pe=>Pe.position==X.position),heights:C.filter(Pe=>Pe.position==X.position),setHeights:A,expandByDefault:i,gap:_,loadingIcon:b,expanded:j,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const KL=({...t})=>{const{theme:e="system"}=xL();return a.jsx(qL,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var GL=Wv[" useId ".trim().toString()]||(()=>{}),QL=0;function bs(t){const[e,n]=p.useState(GL());return Zt(()=>{n(r=>r??String(QL++))},[t]),e?`radix-${e}`:""}const YL=["top","right","bottom","left"],fo=Math.min,Jn=Math.max,_f=Math.round,ch=Math.floor,Es=t=>({x:t,y:t}),XL={left:"right",right:"left",bottom:"top",top:"bottom"},JL={start:"end",end:"start"};function Ky(t,e,n){return Jn(t,fo(e,n))}function ci(t,e){return typeof t=="function"?t(e):t}function ui(t){return t.split("-")[0]}function nc(t){return t.split("-")[1]}function W0(t){return t==="x"?"y":"x"}function H0(t){return t==="y"?"height":"width"}const ZL=new Set(["top","bottom"]);function vs(t){return ZL.has(ui(t))?"y":"x"}function q0(t){return W0(vs(t))}function eV(t,e,n){n===void 0&&(n=!1);const r=nc(t),s=q0(t),i=H0(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=bf(o)),[o,bf(o)]}function tV(t){const e=bf(t);return[Gy(t),e,Gy(e)]}function Gy(t){return t.replace(/start|end/g,e=>JL[e])}const M1=["left","right"],L1=["right","left"],nV=["top","bottom"],rV=["bottom","top"];function sV(t,e,n){switch(t){case"top":case"bottom":return n?e?L1:M1:e?M1:L1;case"left":case"right":return e?nV:rV;default:return[]}}function iV(t,e,n,r){const s=nc(t);let i=sV(ui(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Gy)))),i}function bf(t){return t.replace(/left|right|bottom|top/g,e=>XL[e])}function oV(t){return{top:0,right:0,bottom:0,left:0,...t}}function CI(t){return typeof t!="number"?oV(t):{top:t,right:t,bottom:t,left:t}}function Ef(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function V1(t,e,n){let{reference:r,floating:s}=t;const i=vs(e),o=q0(e),l=H0(o),c=ui(e),u=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(nc(e)){case"start":g[o]-=m*(n&&u?-1:1);break;case"end":g[o]+=m*(n&&u?-1:1);break}return g}const aV=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=V1(u,r,c),m=r,g={},T=0;for(let v=0;v<l.length;v++){const{name:x,fn:_}=l[v],{x:b,y:w,data:I,reset:k}=await _({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});h=b??h,f=w??f,g={...g,[x]:{...g[x],...I}},k&&T<=50&&(T++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):k.rects),{x:h,y:f}=V1(u,m,c)),v=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:g}};async function Du(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:g=0}=ci(e,t),T=CI(g),x=l[m?f==="floating"?"reference":"floating":f],_=Ef(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(x)))==null||n?x:x.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),b=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),I=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},k=Ef(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(_.top-k.top+T.top)/I.y,bottom:(k.bottom-_.bottom+T.bottom)/I.y,left:(_.left-k.left+T.left)/I.x,right:(k.right-_.right+T.right)/I.x}}const lV=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=ci(t,e)||{};if(u==null)return{};const f=CI(h),m={x:n,y:r},g=q0(s),T=H0(g),v=await o.getDimensions(u),x=g==="y",_=x?"top":"left",b=x?"bottom":"right",w=x?"clientHeight":"clientWidth",I=i.reference[T]+i.reference[g]-m[g]-i.floating[T],k=m[g]-i.reference[g],O=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let N=O?O[w]:0;(!N||!await(o.isElement==null?void 0:o.isElement(O)))&&(N=l.floating[w]||i.floating[T]);const S=I/2-k/2,C=N/2-v[T]/2-1,A=fo(f[_],C),j=fo(f[b],C),D=A,R=N-v[T]-j,K=N/2-v[T]/2+S,q=Ky(D,K,R),G=!c.arrow&&nc(s)!=null&&K!==q&&i.reference[T]/2-(K<D?A:j)-v[T]/2<0,Q=G?K<D?K-D:K-R:0;return{[g]:m[g]+Q,data:{[g]:q,centerOffset:K-q-Q,...G&&{alignmentOffset:Q}},reset:G}}}),cV=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:v=!0,...x}=ci(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const _=ui(s),b=vs(l),w=ui(l)===l,I=await(c.isRTL==null?void 0:c.isRTL(u.floating)),k=m||(w||!v?[bf(l)]:tV(l)),O=T!=="none";!m&&O&&k.push(...iV(l,v,T,I));const N=[l,...k],S=await Du(e,x),C=[];let A=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&C.push(S[_]),f){const K=eV(s,o,I);C.push(S[K[0]],S[K[1]])}if(A=[...A,{placement:s,overflows:C}],!C.every(K=>K<=0)){var j,D;const K=(((j=i.flip)==null?void 0:j.index)||0)+1,q=N[K];if(q&&(!(f==="alignment"?b!==vs(q):!1)||A.every(V=>V.overflows[0]>0&&vs(V.placement)===b)))return{data:{index:K,overflows:A},reset:{placement:q}};let G=(D=A.filter(Q=>Q.overflows[0]<=0).sort((Q,V)=>Q.overflows[1]-V.overflows[1])[0])==null?void 0:D.placement;if(!G)switch(g){case"bestFit":{var R;const Q=(R=A.filter(V=>{if(O){const L=vs(V.placement);return L===b||L==="y"}return!0}).map(V=>[V.placement,V.overflows.filter(L=>L>0).reduce((L,$)=>L+$,0)]).sort((V,L)=>V[1]-L[1])[0])==null?void 0:R[0];Q&&(G=Q);break}case"initialPlacement":G=l;break}if(s!==G)return{reset:{placement:G}}}return{}}}};function F1(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function U1(t){return YL.some(e=>t[e]>=0)}const uV=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=ci(t,e);switch(r){case"referenceHidden":{const i=await Du(e,{...s,elementContext:"reference"}),o=F1(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:U1(o)}}}case"escaped":{const i=await Du(e,{...s,altBoundary:!0}),o=F1(i,n.floating);return{data:{escapedOffsets:o,escaped:U1(o)}}}default:return{}}}}},AI=new Set(["left","top"]);async function dV(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ui(n),l=nc(n),c=vs(n)==="y",u=AI.has(o)?-1:1,h=i&&c?-1:1,f=ci(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:T}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof T=="number"&&(g=l==="end"?T*-1:T),c?{x:g*h,y:m*u}:{x:m*u,y:g*h}}const hV=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await dV(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},fV=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:x=>{let{x:_,y:b}=x;return{x:_,y:b}}},...c}=ci(t,e),u={x:n,y:r},h=await Du(e,c),f=vs(ui(s)),m=W0(f);let g=u[m],T=u[f];if(i){const x=m==="y"?"top":"left",_=m==="y"?"bottom":"right",b=g+h[x],w=g-h[_];g=Ky(b,g,w)}if(o){const x=f==="y"?"top":"left",_=f==="y"?"bottom":"right",b=T+h[x],w=T-h[_];T=Ky(b,T,w)}const v=l.fn({...e,[m]:g,[f]:T});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[f]:o}}}}}},pV=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=ci(t,e),h={x:n,y:r},f=vs(s),m=W0(f);let g=h[m],T=h[f];const v=ci(l,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=m==="y"?"height":"width",I=i.reference[m]-i.floating[w]+x.mainAxis,k=i.reference[m]+i.reference[w]-x.mainAxis;g<I?g=I:g>k&&(g=k)}if(u){var _,b;const w=m==="y"?"width":"height",I=AI.has(ui(s)),k=i.reference[f]-i.floating[w]+(I&&((_=o.offset)==null?void 0:_[f])||0)+(I?0:x.crossAxis),O=i.reference[f]+i.reference[w]+(I?0:((b=o.offset)==null?void 0:b[f])||0)-(I?x.crossAxis:0);T<k?T=k:T>O&&(T=O)}return{[m]:g,[f]:T}}}},mV=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...u}=ci(t,e),h=await Du(e,u),f=ui(s),m=nc(s),g=vs(s)==="y",{width:T,height:v}=i.floating;let x,_;f==="top"||f==="bottom"?(x=f,_=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,x=m==="end"?"top":"bottom");const b=v-h.top-h.bottom,w=T-h.left-h.right,I=fo(v-h[x],b),k=fo(T-h[_],w),O=!e.middlewareData.shift;let N=I,S=k;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=w),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=b),O&&!m){const A=Jn(h.left,0),j=Jn(h.right,0),D=Jn(h.top,0),R=Jn(h.bottom,0);g?S=T-2*(A!==0||j!==0?A+j:Jn(h.left,h.right)):N=v-2*(D!==0||R!==0?D+R:Jn(h.top,h.bottom))}await c({...e,availableWidth:S,availableHeight:N});const C=await o.getDimensions(l.floating);return T!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function Sp(){return typeof window<"u"}function rc(t){return PI(t)?(t.nodeName||"").toLowerCase():"#document"}function rr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Os(t){var e;return(e=(PI(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function PI(t){return Sp()?t instanceof Node||t instanceof rr(t).Node:!1}function Gr(t){return Sp()?t instanceof Element||t instanceof rr(t).Element:!1}function As(t){return Sp()?t instanceof HTMLElement||t instanceof rr(t).HTMLElement:!1}function $1(t){return!Sp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof rr(t).ShadowRoot}const gV=new Set(["inline","contents"]);function cd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Qr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!gV.has(s)}const yV=new Set(["table","td","th"]);function vV(t){return yV.has(rc(t))}const xV=[":popover-open",":modal"];function Np(t){return xV.some(e=>{try{return t.matches(e)}catch{return!1}})}const wV=["transform","translate","scale","rotate","perspective"],_V=["transform","translate","scale","rotate","perspective","filter"],bV=["paint","layout","strict","content"];function K0(t){const e=G0(),n=Gr(t)?Qr(t):t;return wV.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||_V.some(r=>(n.willChange||"").includes(r))||bV.some(r=>(n.contain||"").includes(r))}function EV(t){let e=po(t);for(;As(e)&&!Ul(e);){if(K0(e))return e;if(Np(e))return null;e=po(e)}return null}function G0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const TV=new Set(["html","body","#document"]);function Ul(t){return TV.has(rc(t))}function Qr(t){return rr(t).getComputedStyle(t)}function Ip(t){return Gr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function po(t){if(rc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||$1(t)&&t.host||Os(t);return $1(e)?e.host:e}function RI(t){const e=po(t);return Ul(e)?t.ownerDocument?t.ownerDocument.body:t.body:As(e)&&cd(e)?e:RI(e)}function Ou(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=RI(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=rr(s);if(i){const l=Qy(o);return e.concat(o,o.visualViewport||[],cd(s)?s:[],l&&n?Ou(l):[])}return e.concat(s,Ou(s,[],n))}function Qy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function kI(t){const e=Qr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=As(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=_f(n)!==i||_f(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function Q0(t){return Gr(t)?t:t.contextElement}function ml(t){const e=Q0(t);if(!As(e))return Es(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=kI(e);let o=(i?_f(n.width):n.width)/r,l=(i?_f(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const SV=Es(0);function jI(t){const e=rr(t);return!G0()||!e.visualViewport?SV:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function NV(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==rr(t)?!1:e}function da(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=Q0(t);let o=Es(1);e&&(r?Gr(r)&&(o=ml(r)):o=ml(t));const l=NV(i,n,r)?jI(i):Es(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=rr(i),g=r&&Gr(r)?rr(r):r;let T=m,v=Qy(T);for(;v&&r&&g!==T;){const x=ml(v),_=v.getBoundingClientRect(),b=Qr(v),w=_.left+(v.clientLeft+parseFloat(b.paddingLeft))*x.x,I=_.top+(v.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,h*=x.x,f*=x.y,c+=w,u+=I,T=rr(v),v=Qy(T)}}return Ef({width:h,height:f,x:c,y:u})}function Y0(t,e){const n=Ip(t).scrollLeft;return e?e.left+n:da(Os(t)).left+n}function DI(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Y0(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function IV(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=Os(r),l=e?Np(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},u=Es(1);const h=Es(0),f=As(r);if((f||!f&&!i)&&((rc(r)!=="body"||cd(o))&&(c=Ip(r)),As(r))){const g=da(r);u=ml(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const m=o&&!f&&!i?DI(o,c,!0):Es(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+m.x,y:n.y*u.y-c.scrollTop*u.y+h.y+m.y}}function CV(t){return Array.from(t.getClientRects())}function AV(t){const e=Os(t),n=Ip(t),r=t.ownerDocument.body,s=Jn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=Jn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Y0(t);const l=-n.scrollTop;return Qr(r).direction==="rtl"&&(o+=Jn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function PV(t,e){const n=rr(t),r=Os(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const u=G0();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const RV=new Set(["absolute","fixed"]);function kV(t,e){const n=da(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=As(t)?ml(t):Es(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,u=r*i.y;return{width:o,height:l,x:c,y:u}}function B1(t,e,n){let r;if(e==="viewport")r=PV(t,n);else if(e==="document")r=AV(Os(t));else if(Gr(e))r=kV(e,n);else{const s=jI(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Ef(r)}function OI(t,e){const n=po(t);return n===e||!Gr(n)||Ul(n)?!1:Qr(n).position==="fixed"||OI(n,e)}function jV(t,e){const n=e.get(t);if(n)return n;let r=Ou(t,[],!1).filter(l=>Gr(l)&&rc(l)!=="body"),s=null;const i=Qr(t).position==="fixed";let o=i?po(t):t;for(;Gr(o)&&!Ul(o);){const l=Qr(o),c=K0(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&RV.has(s.position)||cd(o)&&!c&&OI(t,o))?r=r.filter(h=>h!==o):s=l,o=po(o)}return e.set(t,r),r}function DV(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Np(e)?[]:jV(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=B1(e,h,s);return u.top=Jn(f.top,u.top),u.right=fo(f.right,u.right),u.bottom=fo(f.bottom,u.bottom),u.left=Jn(f.left,u.left),u},B1(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function OV(t){const{width:e,height:n}=kI(t);return{width:e,height:n}}function MV(t,e,n){const r=As(e),s=Os(e),i=n==="fixed",o=da(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=Es(0);function u(){c.x=Y0(s)}if(r||!r&&!i)if((rc(e)!=="body"||cd(s))&&(l=Ip(e)),r){const g=da(e,!0,i,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&u();i&&!r&&s&&u();const h=s&&!r&&!i?DI(s,l):Es(0),f=o.left+l.scrollLeft-c.x-h.x,m=o.top+l.scrollTop-c.y-h.y;return{x:f,y:m,width:o.width,height:o.height}}function xg(t){return Qr(t).position==="static"}function z1(t,e){if(!As(t)||Qr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Os(t)===n&&(n=n.ownerDocument.body),n}function MI(t,e){const n=rr(t);if(Np(t))return n;if(!As(t)){let s=po(t);for(;s&&!Ul(s);){if(Gr(s)&&!xg(s))return s;s=po(s)}return n}let r=z1(t,e);for(;r&&vV(r)&&xg(r);)r=z1(r,e);return r&&Ul(r)&&xg(r)&&!K0(r)?n:r||EV(t)||n}const LV=async function(t){const e=this.getOffsetParent||MI,n=this.getDimensions,r=await n(t.floating);return{reference:MV(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function VV(t){return Qr(t).direction==="rtl"}const FV={convertOffsetParentRelativeRectToViewportRelativeRect:IV,getDocumentElement:Os,getClippingRect:DV,getOffsetParent:MI,getElementRects:LV,getClientRects:CV,getDimensions:OV,getScale:ml,isElement:Gr,isRTL:VV};function LI(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function UV(t,e){let n=null,r;const s=Os(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const u=t.getBoundingClientRect(),{left:h,top:f,width:m,height:g}=u;if(l||e(),!m||!g)return;const T=ch(f),v=ch(s.clientWidth-(h+m)),x=ch(s.clientHeight-(f+g)),_=ch(h),w={rootMargin:-T+"px "+-v+"px "+-x+"px "+-_+"px",threshold:Jn(0,fo(1,c))||1};let I=!0;function k(O){const N=O[0].intersectionRatio;if(N!==c){if(!I)return o();N?o(!1,N):r=setTimeout(()=>{o(!1,1e-7)},1e3)}N===1&&!LI(u,t.getBoundingClientRect())&&o(),I=!1}try{n=new IntersectionObserver(k,{...w,root:s.ownerDocument})}catch{n=new IntersectionObserver(k,w)}n.observe(t)}return o(!0),i}function $V(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Q0(t),h=s||i?[...u?Ou(u):[],...Ou(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),i&&_.addEventListener("resize",n)});const f=u&&l?UV(u,n):null;let m=-1,g=null;o&&(g=new ResizeObserver(_=>{let[b]=_;b&&b.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let T,v=c?da(t):null;c&&x();function x(){const _=da(t);v&&!LI(v,_)&&n(),v=_,T=requestAnimationFrame(x)}return n(),()=>{var _;h.forEach(b=>{s&&b.removeEventListener("scroll",n),i&&b.removeEventListener("resize",n)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,c&&cancelAnimationFrame(T)}}const BV=hV,zV=fV,WV=cV,HV=mV,qV=uV,W1=lV,KV=pV,GV=(t,e,n)=>{const r=new Map,s={platform:FV,...n},i={...s.platform,_c:r};return aV(t,e,{...s,platform:i})};var QV=typeof document<"u",YV=function(){},Mh=QV?p.useLayoutEffect:YV;function Tf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Tf(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Tf(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function VI(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function H1(t,e){const n=VI(t);return Math.round(e*n)/n}function wg(t){const e=p.useRef(t);return Mh(()=>{e.current=t}),e}function XV(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=p.useState(r);Tf(m,r)||g(r);const[T,v]=p.useState(null),[x,_]=p.useState(null),b=p.useCallback(V=>{V!==O.current&&(O.current=V,v(V))},[]),w=p.useCallback(V=>{V!==N.current&&(N.current=V,_(V))},[]),I=i||T,k=o||x,O=p.useRef(null),N=p.useRef(null),S=p.useRef(h),C=c!=null,A=wg(c),j=wg(s),D=wg(u),R=p.useCallback(()=>{if(!O.current||!N.current)return;const V={placement:e,strategy:n,middleware:m};j.current&&(V.platform=j.current),GV(O.current,N.current,V).then(L=>{const $={...L,isPositioned:D.current!==!1};K.current&&!Tf(S.current,$)&&(S.current=$,Sa.flushSync(()=>{f($)}))})},[m,e,n,j,D]);Mh(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(V=>({...V,isPositioned:!1})))},[u]);const K=p.useRef(!1);Mh(()=>(K.current=!0,()=>{K.current=!1}),[]),Mh(()=>{if(I&&(O.current=I),k&&(N.current=k),I&&k){if(A.current)return A.current(I,k,R);R()}},[I,k,R,A,C]);const q=p.useMemo(()=>({reference:O,floating:N,setReference:b,setFloating:w}),[b,w]),G=p.useMemo(()=>({reference:I,floating:k}),[I,k]),Q=p.useMemo(()=>{const V={position:n,left:0,top:0};if(!G.floating)return V;const L=H1(G.floating,h.x),$=H1(G.floating,h.y);return l?{...V,transform:"translate("+L+"px, "+$+"px)",...VI(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:$}},[n,l,G.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:R,refs:q,elements:G,floatingStyles:Q}),[h,R,q,G,Q])}const JV=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?W1({element:r.current,padding:s}).fn(n):{}:r?W1({element:r,padding:s}).fn(n):{}}}},ZV=(t,e)=>({...BV(t),options:[t,e]}),e5=(t,e)=>({...zV(t),options:[t,e]}),t5=(t,e)=>({...KV(t),options:[t,e]}),n5=(t,e)=>({...WV(t),options:[t,e]}),r5=(t,e)=>({...HV(t),options:[t,e]}),s5=(t,e)=>({...qV(t),options:[t,e]}),i5=(t,e)=>({...JV(t),options:[t,e]});var o5="Arrow",FI=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(xe.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});FI.displayName=o5;var a5=FI;function l5(t){const[e,n]=p.useState(void 0);return Zt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var X0="Popper",[UI,sc]=Jr(X0),[c5,$I]=UI(X0),BI=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return a.jsx(c5,{scope:e,anchor:r,onAnchorChange:s,children:n})};BI.displayName=X0;var zI="PopperAnchor",WI=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=$I(zI,n),o=p.useRef(null),l=Ge(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(xe.div,{...s,ref:l})});WI.displayName=zI;var J0="PopperContent",[u5,d5]=UI(J0),HI=p.forwardRef((t,e)=>{var X,Ce,me,_e,Pe,ke;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:T,...v}=t,x=$I(J0,n),[_,b]=p.useState(null),w=Ge(e,He=>b(He)),[I,k]=p.useState(null),O=l5(I),N=(O==null?void 0:O.width)??0,S=(O==null?void 0:O.height)??0,C=r+(i!=="center"?"-"+i:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},j=Array.isArray(u)?u:[u],D=j.length>0,R={padding:A,boundary:j.filter(f5),altBoundary:D},{refs:K,floatingStyles:q,placement:G,isPositioned:Q,middlewareData:V}=XV({strategy:"fixed",placement:C,whileElementsMounted:(...He)=>$V(...He,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[ZV({mainAxis:s+S,alignmentAxis:o}),c&&e5({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?t5():void 0,...R}),c&&n5({...R}),r5({...R,apply:({elements:He,rects:Ft,availableWidth:Hn,availableHeight:qn})=>{const{width:Er,height:Fs}=Ft.reference,Tr=He.floating.style;Tr.setProperty("--radix-popper-available-width",`${Hn}px`),Tr.setProperty("--radix-popper-available-height",`${qn}px`),Tr.setProperty("--radix-popper-anchor-width",`${Er}px`),Tr.setProperty("--radix-popper-anchor-height",`${Fs}px`)}}),I&&i5({element:I,padding:l}),p5({arrowWidth:N,arrowHeight:S}),m&&s5({strategy:"referenceHidden",...R})]}),[L,$]=GI(G),ie=Wn(T);Zt(()=>{Q&&(ie==null||ie())},[Q,ie]);const Z=(X=V.arrow)==null?void 0:X.x,le=(Ce=V.arrow)==null?void 0:Ce.y,he=((me=V.arrow)==null?void 0:me.centerOffset)!==0,[Oe,De]=p.useState();return Zt(()=>{_&&De(window.getComputedStyle(_).zIndex)},[_]),a.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...q,transform:Q?q.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Oe,"--radix-popper-transform-origin":[(_e=V.transformOrigin)==null?void 0:_e.x,(Pe=V.transformOrigin)==null?void 0:Pe.y].join(" "),...((ke=V.hide)==null?void 0:ke.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(u5,{scope:n,placedSide:L,onArrowChange:k,arrowX:Z,arrowY:le,shouldHideArrow:he,children:a.jsx(xe.div,{"data-side":L,"data-align":$,...v,ref:w,style:{...v.style,animation:Q?void 0:"none"}})})})});HI.displayName=J0;var qI="PopperArrow",h5={top:"bottom",right:"left",bottom:"top",left:"right"},KI=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=d5(qI,r),o=h5[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(a5,{...s,ref:n,style:{...s.style,display:"block"}})})});KI.displayName=qI;function f5(t){return t!==null}var p5=t=>({name:"transformOrigin",options:t,fn(e){var x,_,b;const{placement:n,rects:r,middlewareData:s}=e,o=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=GI(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,g=(((b=s.arrow)==null?void 0:b.y)??0)+c/2;let T="",v="";return u==="bottom"?(T=o?f:`${m}px`,v=`${-c}px`):u==="top"?(T=o?f:`${m}px`,v=`${r.floating.height+c}px`):u==="right"?(T=`${-c}px`,v=o?f:`${g}px`):u==="left"&&(T=`${r.floating.width+c}px`,v=o?f:`${g}px`),{data:{x:T,y:v}}}});function GI(t){const[e,n="center"]=t.split("-");return[e,n]}var QI=BI,Z0=WI,ex=HI,tx=KI,[Cp,IG]=Jr("Tooltip",[sc]),nx=sc(),YI="TooltipProvider",m5=700,q1="tooltip.open",[g5,XI]=Cp(YI),JI=t=>{const{__scopeTooltip:e,delayDuration:n=m5,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(g5,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:i})};JI.displayName=YI;var ZI="Tooltip",[CG,Ap]=Cp(ZI),Yy="TooltipTrigger",y5=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ap(Yy,n),i=XI(Yy,n),o=nx(n),l=p.useRef(null),c=Ge(e,l,s.onTriggerChange),u=p.useRef(!1),h=p.useRef(!1),f=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(Z0,{asChild:!0,...o,children:a.jsx(xe.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:re(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:re(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:re(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:re(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:re(t.onBlur,s.onClose),onClick:re(t.onClick,s.onClose)})})});y5.displayName=Yy;var v5="TooltipPortal",[AG,x5]=Cp(v5,{forceMount:void 0}),$l="TooltipContent",eC=p.forwardRef((t,e)=>{const n=x5($l,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Ap($l,t.__scopeTooltip);return a.jsx(Zr,{present:r||o.open,children:o.disableHoverableContent?a.jsx(tC,{side:s,...i,ref:e}):a.jsx(w5,{side:s,...i,ref:e})})}),w5=p.forwardRef((t,e)=>{const n=Ap($l,t.__scopeTooltip),r=XI($l,t.__scopeTooltip),s=p.useRef(null),i=Ge(e,s),[o,l]=p.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,m=p.useCallback(()=>{l(null),f(!1)},[f]),g=p.useCallback((T,v)=>{const x=T.currentTarget,_={x:T.clientX,y:T.clientY},b=S5(_,x.getBoundingClientRect()),w=N5(_,b),I=I5(v.getBoundingClientRect()),k=A5([...w,...I]);l(k),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&h){const T=x=>g(x,h),v=x=>g(x,c);return c.addEventListener("pointerleave",T),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",T),h.removeEventListener("pointerleave",v)}}},[c,h,g,m]),p.useEffect(()=>{if(o){const T=v=>{const x=v.target,_={x:v.clientX,y:v.clientY},b=(c==null?void 0:c.contains(x))||(h==null?void 0:h.contains(x)),w=!C5(_,o);b?m():w&&(m(),u())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[c,h,o,u,m]),a.jsx(tC,{...t,ref:i})}),[_5,b5]=Cp(ZI,{isInside:!1}),E5=EM("TooltipContent"),tC=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Ap($l,n),u=nx(n),{onClose:h}=c;return p.useEffect(()=>(document.addEventListener(q1,h),()=>document.removeEventListener(q1,h)),[h]),p.useEffect(()=>{if(c.trigger){const f=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(Zl,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(ex,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(E5,{children:r}),a.jsx(_5,{scope:n,isInside:!0,children:a.jsx(HM,{id:c.contentId,role:"tooltip",children:s||r})})]})})});eC.displayName=$l;var nC="TooltipArrow",T5=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=nx(n);return b5(nC,n).isInside?null:a.jsx(tx,{...s,...r,ref:e})});T5.displayName=nC;function S5(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function N5(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function I5(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function C5(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,h=l.y,f=c.x,m=c.y;h>r!=m>r&&n<(f-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function A5(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),P5(e)}function P5(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var R5=JI,rC=eC;const k5=R5,j5=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(rC,{ref:r,sideOffset:e,className:be("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));j5.displayName=rC.displayName;var Pp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Rp=typeof window>"u"||"Deno"in globalThis;function jr(){}function D5(t,e){return typeof t=="function"?t(e):t}function O5(t){return typeof t=="number"&&t>=0&&t!==1/0}function M5(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Xy(t,e){return typeof t=="function"?t(e):t}function L5(t,e){return typeof t=="function"?t(e):t}function K1(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==rx(o,e.options))return!1}else if(!Lu(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function G1(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(Mu(e.options.mutationKey)!==Mu(i))return!1}else if(!Lu(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function rx(t,e){return((e==null?void 0:e.queryKeyHashFn)||Mu)(t)}function Mu(t){return JSON.stringify(t,(e,n)=>Jy(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Lu(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>Lu(t[n],e[n])):!1}function sC(t,e){if(t===e)return t;const n=Q1(t)&&Q1(e);if(n||Jy(t)&&Jy(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{},c=new Set(r);let u=0;for(let h=0;h<o;h++){const f=n?h:i[h];(!n&&c.has(f)||n)&&t[f]===void 0&&e[f]===void 0?(l[f]=void 0,u++):(l[f]=sC(t[f],e[f]),l[f]===t[f]&&t[f]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function Q1(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Jy(t){if(!Y1(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Y1(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Y1(t){return Object.prototype.toString.call(t)==="[object Object]"}function V5(t){return new Promise(e=>{setTimeout(e,t)})}function F5(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?sC(t,e):e}function U5(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function $5(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var sx=Symbol();function iC(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===sx?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Qo,Fi,bl,vT,B5=(vT=class extends Pp{constructor(){super();Ke(this,Qo);Ke(this,Fi);Ke(this,bl);Ie(this,bl,e=>{if(!Rp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){z(this,Fi)||this.setEventListener(z(this,bl))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,Fi))==null||e.call(this),Ie(this,Fi,void 0))}setEventListener(e){var n;Ie(this,bl,e),(n=z(this,Fi))==null||n.call(this),Ie(this,Fi,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){z(this,Qo)!==e&&(Ie(this,Qo,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof z(this,Qo)=="boolean"?z(this,Qo):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Qo=new WeakMap,Fi=new WeakMap,bl=new WeakMap,vT),oC=new B5,El,Ui,Tl,xT,z5=(xT=class extends Pp{constructor(){super();Ke(this,El,!0);Ke(this,Ui);Ke(this,Tl);Ie(this,Tl,e=>{if(!Rp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){z(this,Ui)||this.setEventListener(z(this,Tl))}onUnsubscribe(){var e;this.hasListeners()||((e=z(this,Ui))==null||e.call(this),Ie(this,Ui,void 0))}setEventListener(e){var n;Ie(this,Tl,e),(n=z(this,Ui))==null||n.call(this),Ie(this,Ui,e(this.setOnline.bind(this)))}setOnline(e){z(this,El)!==e&&(Ie(this,El,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return z(this,El)}},El=new WeakMap,Ui=new WeakMap,Tl=new WeakMap,xT),Sf=new z5;function W5(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function H5(t){return Math.min(1e3*2**t,3e4)}function aC(t){return(t??"online")==="online"?Sf.isOnline():!0}var lC=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function _g(t){return t instanceof lC}function cC(t){let e=!1,n=0,r=!1,s;const i=W5(),o=v=>{var x;r||(m(new lC(v)),(x=t.abort)==null||x.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>oC.isFocused()&&(t.networkMode==="always"||Sf.isOnline())&&t.canRun(),h=()=>aC(t.networkMode)&&t.canRun(),f=v=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,v),s==null||s(),i.resolve(v))},m=v=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,v),s==null||s(),i.reject(v))},g=()=>new Promise(v=>{var x;s=_=>{(r||u())&&v(_)},(x=t.onPause)==null||x.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),T=()=>{if(r)return;let v;const x=n===0?t.initialPromise:void 0;try{v=x??t.fn()}catch(_){v=Promise.reject(_)}Promise.resolve(v).then(f).catch(_=>{var O;if(r)return;const b=t.retry??(Rp?0:3),w=t.retryDelay??H5,I=typeof w=="function"?w(n,_):w,k=b===!0||typeof b=="number"&&n<b||typeof b=="function"&&b(n,_);if(e||!k){m(_);return}n++,(O=t.onFail)==null||O.call(t,n,_),V5(I).then(()=>u()?void 0:g()).then(()=>{e?m(_):T()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?T():g().then(T),i)}}var q5=t=>setTimeout(t,0);function K5(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=q5;const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var _n=K5(),Yo,wT,uC=(wT=class{constructor(){Ke(this,Yo)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),O5(this.gcTime)&&Ie(this,Yo,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Rp?1/0:5*60*1e3))}clearGcTimeout(){z(this,Yo)&&(clearTimeout(z(this,Yo)),Ie(this,Yo,void 0))}},Yo=new WeakMap,wT),Sl,Xo,hr,Jo,un,Ju,Zo,Dr,Ws,_T,G5=(_T=class extends uC{constructor(n){super();Ke(this,Dr);Ke(this,Sl);Ke(this,Xo);Ke(this,hr);Ke(this,Jo);Ke(this,un);Ke(this,Ju);Ke(this,Zo);Ie(this,Zo,!1),Ie(this,Ju,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ie(this,Jo,n.client),Ie(this,hr,z(this,Jo).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ie(this,Sl,Y5(this.options)),this.state=n.state??z(this,Sl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=z(this,un))==null?void 0:n.promise}setOptions(n){this.options={...z(this,Ju),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&z(this,hr).remove(this)}setData(n,r){const s=F5(this.state.data,n,this.options);return sn(this,Dr,Ws).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){sn(this,Dr,Ws).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=z(this,un))==null?void 0:s.promise;return(i=z(this,un))==null||i.cancel(n),r?r.then(jr).catch(jr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(z(this,Sl))}isActive(){return this.observers.some(n=>L5(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===sx||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Xy(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!M5(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=z(this,un))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=z(this,un))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),z(this,hr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(z(this,un)&&(z(this,Zo)?z(this,un).cancel({revert:!0}):z(this,un).cancelRetry()),this.scheduleGc()),z(this,hr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||sn(this,Dr,Ws).call(this,{type:"invalidate"})}fetch(n,r){var h,f,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(z(this,un))return z(this,un).continueRetry(),z(this,un).promise}if(n&&this.setOptions(n),!this.options.queryFn){const g=this.observers.find(T=>T.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,i=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(Ie(this,Zo,!0),s.signal)})},o=()=>{const g=iC(this.options,r),v=(()=>{const x={client:z(this,Jo),queryKey:this.queryKey,meta:this.meta};return i(x),x})();return Ie(this,Zo,!1),this.options.persister?this.options.persister(g,v,this):g(v)},c=(()=>{const g={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:z(this,Jo),state:this.state,fetchFn:o};return i(g),g})();(h=this.options.behavior)==null||h.onFetch(c,this),Ie(this,Xo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=c.fetchOptions)==null?void 0:f.meta))&&sn(this,Dr,Ws).call(this,{type:"fetch",meta:(m=c.fetchOptions)==null?void 0:m.meta});const u=g=>{var T,v,x,_;_g(g)&&g.silent||sn(this,Dr,Ws).call(this,{type:"error",error:g}),_g(g)||((v=(T=z(this,hr).config).onError)==null||v.call(T,g,this),(_=(x=z(this,hr).config).onSettled)==null||_.call(x,this.state.data,g,this)),this.scheduleGc()};return Ie(this,un,cC({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:g=>{var T,v,x,_;if(g===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(b){u(b);return}(v=(T=z(this,hr).config).onSuccess)==null||v.call(T,g,this),(_=(x=z(this,hr).config).onSettled)==null||_.call(x,g,this.state.error,this),this.scheduleGc()},onError:u,onFail:(g,T)=>{sn(this,Dr,Ws).call(this,{type:"failed",failureCount:g,error:T})},onPause:()=>{sn(this,Dr,Ws).call(this,{type:"pause"})},onContinue:()=>{sn(this,Dr,Ws).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),z(this,un).start()}},Sl=new WeakMap,Xo=new WeakMap,hr=new WeakMap,Jo=new WeakMap,un=new WeakMap,Ju=new WeakMap,Zo=new WeakMap,Dr=new WeakSet,Ws=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...Q5(s.data,this.options),fetchMeta:n.meta??null};case"success":return Ie(this,Xo,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return _g(i)&&i.revert&&z(this,Xo)?{...z(this,Xo),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),_n.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),z(this,hr).notify({query:this,type:"updated",action:n})})},_T);function Q5(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:aC(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Y5(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var us,bT,X5=(bT=class extends Pp{constructor(e={}){super();Ke(this,us);this.config=e,Ie(this,us,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??rx(s,n);let o=this.get(i);return o||(o=new G5({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){z(this,us).has(e.queryHash)||(z(this,us).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=z(this,us).get(e.queryHash);n&&(e.destroy(),n===e&&z(this,us).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){_n.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return z(this,us).get(e)}getAll(){return[...z(this,us).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>K1(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>K1(e,r)):n}notify(e){_n.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){_n.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){_n.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},us=new WeakMap,bT),ds,xn,ea,hs,Ai,ET,J5=(ET=class extends uC{constructor(n){super();Ke(this,hs);Ke(this,ds);Ke(this,xn);Ke(this,ea);this.mutationId=n.mutationId,Ie(this,xn,n.mutationCache),Ie(this,ds,[]),this.state=n.state||Z5(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){z(this,ds).includes(n)||(z(this,ds).push(n),this.clearGcTimeout(),z(this,xn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ie(this,ds,z(this,ds).filter(r=>r!==n)),this.scheduleGc(),z(this,xn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){z(this,ds).length||(this.state.status==="pending"?this.scheduleGc():z(this,xn).remove(this))}continue(){var n;return((n=z(this,ea))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,l,c,u,h,f,m,g,T,v,x,_,b,w,I,k,O,N,S,C;const r=()=>{sn(this,hs,Ai).call(this,{type:"continue"})};Ie(this,ea,cC({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(A,j)=>{sn(this,hs,Ai).call(this,{type:"failed",failureCount:A,error:j})},onPause:()=>{sn(this,hs,Ai).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>z(this,xn).canRun(this)}));const s=this.state.status==="pending",i=!z(this,ea).canStart();try{if(s)r();else{sn(this,hs,Ai).call(this,{type:"pending",variables:n,isPaused:i}),await((l=(o=z(this,xn).config).onMutate)==null?void 0:l.call(o,n,this));const j=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));j!==this.state.context&&sn(this,hs,Ai).call(this,{type:"pending",context:j,variables:n,isPaused:i})}const A=await z(this,ea).start();return await((f=(h=z(this,xn).config).onSuccess)==null?void 0:f.call(h,A,n,this.state.context,this)),await((g=(m=this.options).onSuccess)==null?void 0:g.call(m,A,n,this.state.context)),await((v=(T=z(this,xn).config).onSettled)==null?void 0:v.call(T,A,null,this.state.variables,this.state.context,this)),await((_=(x=this.options).onSettled)==null?void 0:_.call(x,A,null,n,this.state.context)),sn(this,hs,Ai).call(this,{type:"success",data:A}),A}catch(A){try{throw await((w=(b=z(this,xn).config).onError)==null?void 0:w.call(b,A,n,this.state.context,this)),await((k=(I=this.options).onError)==null?void 0:k.call(I,A,n,this.state.context)),await((N=(O=z(this,xn).config).onSettled)==null?void 0:N.call(O,void 0,A,this.state.variables,this.state.context,this)),await((C=(S=this.options).onSettled)==null?void 0:C.call(S,void 0,A,n,this.state.context)),A}finally{sn(this,hs,Ai).call(this,{type:"error",error:A})}}finally{z(this,xn).runNext(this)}}},ds=new WeakMap,xn=new WeakMap,ea=new WeakMap,hs=new WeakSet,Ai=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),_n.batch(()=>{z(this,ds).forEach(s=>{s.onMutationUpdate(n)}),z(this,xn).notify({mutation:this,type:"updated",action:n})})},ET);function Z5(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ks,Or,Zu,TT,eF=(TT=class extends Pp{constructor(e={}){super();Ke(this,Ks);Ke(this,Or);Ke(this,Zu);this.config=e,Ie(this,Ks,new Set),Ie(this,Or,new Map),Ie(this,Zu,0)}build(e,n,r){const s=new J5({mutationCache:this,mutationId:++Bd(this,Zu)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){z(this,Ks).add(e);const n=uh(e);if(typeof n=="string"){const r=z(this,Or).get(n);r?r.push(e):z(this,Or).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(z(this,Ks).delete(e)){const n=uh(e);if(typeof n=="string"){const r=z(this,Or).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&z(this,Or).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=uh(e);if(typeof n=="string"){const r=z(this,Or).get(n),s=r==null?void 0:r.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=uh(e);if(typeof n=="string"){const s=(r=z(this,Or).get(n))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_n.batch(()=>{z(this,Ks).forEach(e=>{this.notify({type:"removed",mutation:e})}),z(this,Ks).clear(),z(this,Or).clear()})}getAll(){return Array.from(z(this,Ks))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>G1(n,r))}findAll(e={}){return this.getAll().filter(n=>G1(e,n))}notify(e){_n.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return _n.batch(()=>Promise.all(e.map(n=>n.continue().catch(jr))))}},Ks=new WeakMap,Or=new WeakMap,Zu=new WeakMap,TT);function uh(t){var e;return(e=t.options.scope)==null?void 0:e.id}function X1(t){return{onFetch:(e,n)=>{var h,f,m,g,T;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],o=((T=e.state.data)==null?void 0:T.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const x=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},_=iC(e.options,e.fetchOptions),b=async(w,I,k)=>{if(v)return Promise.reject();if(I==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const j={client:e.client,queryKey:e.queryKey,pageParam:I,direction:k?"backward":"forward",meta:e.options.meta};return x(j),j})(),S=await _(N),{maxPages:C}=e.options,A=k?$5:U5;return{pages:A(w.pages,S,C),pageParams:A(w.pageParams,I,C)}};if(s&&i.length){const w=s==="backward",I=w?tF:J1,k={pages:i,pageParams:o},O=I(r,k);l=await b(k,O,w)}else{const w=t??i.length;do{const I=c===0?o[0]??r.initialPageParam:J1(r,l);if(c>0&&I==null)break;l=await b(l,I),c++}while(c<w)}return l};e.options.persister?e.fetchFn=()=>{var v,x;return(x=(v=e.options).persister)==null?void 0:x.call(v,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function J1(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function tF(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var _t,$i,Bi,Nl,Il,zi,Cl,Al,ST,nF=(ST=class{constructor(t={}){Ke(this,_t);Ke(this,$i);Ke(this,Bi);Ke(this,Nl);Ke(this,Il);Ke(this,zi);Ke(this,Cl);Ke(this,Al);Ie(this,_t,t.queryCache||new X5),Ie(this,$i,t.mutationCache||new eF),Ie(this,Bi,t.defaultOptions||{}),Ie(this,Nl,new Map),Ie(this,Il,new Map),Ie(this,zi,0)}mount(){Bd(this,zi)._++,z(this,zi)===1&&(Ie(this,Cl,oC.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,_t).onFocus())})),Ie(this,Al,Sf.subscribe(async t=>{t&&(await this.resumePausedMutations(),z(this,_t).onOnline())})))}unmount(){var t,e;Bd(this,zi)._--,z(this,zi)===0&&((t=z(this,Cl))==null||t.call(this),Ie(this,Cl,void 0),(e=z(this,Al))==null||e.call(this),Ie(this,Al,void 0))}isFetching(t){return z(this,_t).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return z(this,$i).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,_t).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=z(this,_t).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Xy(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return z(this,_t).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=z(this,_t).get(r.queryHash),i=s==null?void 0:s.state.data,o=D5(e,i);if(o!==void 0)return z(this,_t).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return _n.batch(()=>z(this,_t).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=z(this,_t).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=z(this,_t);_n.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=z(this,_t);return _n.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=_n.batch(()=>z(this,_t).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(jr).catch(jr)}invalidateQueries(t,e={}){return _n.batch(()=>(z(this,_t).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=_n.batch(()=>z(this,_t).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(jr)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(jr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=z(this,_t).build(this,e);return n.isStaleByTime(Xy(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(jr).catch(jr)}fetchInfiniteQuery(t){return t.behavior=X1(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(jr).catch(jr)}ensureInfiniteQueryData(t){return t.behavior=X1(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Sf.isOnline()?z(this,$i).resumePausedMutations():Promise.resolve()}getQueryCache(){return z(this,_t)}getMutationCache(){return z(this,$i)}getDefaultOptions(){return z(this,Bi)}setDefaultOptions(t){Ie(this,Bi,t)}setQueryDefaults(t,e){z(this,Nl).set(Mu(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...z(this,Nl).values()],n={};return e.forEach(r=>{Lu(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){z(this,Il).set(Mu(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...z(this,Il).values()],n={};return e.forEach(r=>{Lu(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...z(this,Bi).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=rx(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===sx&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...z(this,Bi).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){z(this,_t).clear(),z(this,$i).clear()}},_t=new WeakMap,$i=new WeakMap,Bi=new WeakMap,Nl=new WeakMap,Il=new WeakMap,zi=new WeakMap,Cl=new WeakMap,Al=new WeakMap,ST),rF=p.createContext(void 0),sF=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(rF.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vu(){return Vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vu.apply(this,arguments)}var qi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qi||(qi={}));const Z1="popstate";function iF(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Zy("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Nf(s)}return aF(e,n,null,t)}function Nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dC(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oF(){return Math.random().toString(36).substr(2,8)}function eb(t,e){return{usr:t.state,key:t.key,idx:e}}function Zy(t,e,n,r){return n===void 0&&(n=null),Vu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ic(e):e,{state:n,key:e&&e.key||r||oF()})}function Nf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ic(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function aF(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=qi.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(Vu({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=qi.Pop;let x=h(),_=x==null?null:x-u;u=x,c&&c({action:l,location:v.location,delta:_})}function m(x,_){l=qi.Push;let b=Zy(v.location,x,_);u=h()+1;let w=eb(b,u),I=v.createHref(b);try{o.pushState(w,"",I)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(I)}i&&c&&c({action:l,location:v.location,delta:1})}function g(x,_){l=qi.Replace;let b=Zy(v.location,x,_);u=h();let w=eb(b,u),I=v.createHref(b);o.replaceState(w,"",I),i&&c&&c({action:l,location:v.location,delta:0})}function T(x){let _=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof x=="string"?x:Nf(x);return b=b.replace(/ $/,"%20"),Nt(_,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,_)}let v={get action(){return l},get location(){return t(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Z1,f),c=x,()=>{s.removeEventListener(Z1,f),c=null}},createHref(x){return e(s,x)},createURL:T,encodeLocation(x){let _=T(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:g,go(x){return o.go(x)}};return v}var tb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(tb||(tb={}));function lF(t,e,n){return n===void 0&&(n="/"),cF(t,e,n,!1)}function cF(t,e,n,r){let s=typeof e=="string"?ic(e):e,i=ix(s.pathname||"/",n);if(i==null)return null;let o=hC(t);uF(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=_F(i);l=xF(o[c],u,r)}return l}function hC(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Nt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=so([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),hC(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:yF(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of fC(i.path))s(i,o,c)}),e}function fC(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=fC(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function uF(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:vF(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dF=/^:[\w-]+$/,hF=3,fF=2,pF=1,mF=10,gF=-2,nb=t=>t==="*";function yF(t,e){let n=t.split("/"),r=n.length;return n.some(nb)&&(r+=gF),e&&(r+=fF),n.filter(s=>!nb(s)).reduce((s,i)=>s+(dF.test(i)?hF:i===""?pF:mF),r)}function vF(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function xF(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=rb({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),m=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=rb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:so([i,f.pathname]),pathnameBase:SF(so([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=so([i,f.pathnameBase]))}return o}function rb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=wF(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:m,isOptional:g}=h;if(m==="*"){let v=l[f]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const T=l[f];return g&&!T?u[m]=void 0:u[m]=(T||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function wF(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dC(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function _F(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dC(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ix(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function bF(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ic(t):t;return{pathname:n?n.startsWith("/")?n:EF(n,e):e,search:NF(r),hash:IF(s)}}function EF(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function bg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TF(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ox(t,e){let n=TF(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ax(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ic(t):(s=Vu({},t),Nt(!s.pathname||!s.pathname.includes("?"),bg("?","pathname","search",s)),Nt(!s.pathname||!s.pathname.includes("#"),bg("#","pathname","hash",s)),Nt(!s.search||!s.search.includes("#"),bg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let c=bF(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const so=t=>t.join("/").replace(/\/\/+/g,"/"),SF=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NF=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IF=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function CF(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const pC=["post","put","patch","delete"];new Set(pC);const AF=["get",...pC];new Set(AF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fu(){return Fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fu.apply(this,arguments)}const lx=p.createContext(null),PF=p.createContext(null),Io=p.createContext(null),kp=p.createContext(null),Co=p.createContext({outlet:null,matches:[],isDataRoute:!1}),mC=p.createContext(null);function RF(t,e){let{relative:n}=e===void 0?{}:e;oc()||Nt(!1);let{basename:r,navigator:s}=p.useContext(Io),{hash:i,pathname:o,search:l}=yC(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:so([r,o])),s.createHref({pathname:c,search:l,hash:i})}function oc(){return p.useContext(kp)!=null}function Na(){return oc()||Nt(!1),p.useContext(kp).location}function gC(t){p.useContext(Io).static||p.useLayoutEffect(t)}function cr(){let{isDataRoute:t}=p.useContext(Co);return t?WF():kF()}function kF(){oc()||Nt(!1);let t=p.useContext(lx),{basename:e,future:n,navigator:r}=p.useContext(Io),{matches:s}=p.useContext(Co),{pathname:i}=Na(),o=JSON.stringify(ox(s,n.v7_relativeSplatPath)),l=p.useRef(!1);return gC(()=>{l.current=!0}),p.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=ax(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:so([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function yC(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=p.useContext(Io),{matches:s}=p.useContext(Co),{pathname:i}=Na(),o=JSON.stringify(ox(s,r.v7_relativeSplatPath));return p.useMemo(()=>ax(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function jF(t,e){return DF(t,e)}function DF(t,e,n,r){oc()||Nt(!1);let{navigator:s}=p.useContext(Io),{matches:i}=p.useContext(Co),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Na(),h;if(e){var f;let x=typeof e=="string"?ic(e):e;c==="/"||(f=x.pathname)!=null&&f.startsWith(c)||Nt(!1),h=x}else h=u;let m=h.pathname||"/",g=m;if(c!=="/"){let x=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let T=lF(t,{pathname:g}),v=FF(T&&T.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:so([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:so([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r);return e&&v?p.createElement(kp.Provider,{value:{location:Fu({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:qi.Pop}},v):v}function OF(){let t=zF(),e=CF(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},e),n?p.createElement("pre",{style:s},n):null,null)}const MF=p.createElement(OF,null);class LF extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?p.createElement(Co.Provider,{value:this.props.routeContext},p.createElement(mC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VF(t){let{routeContext:e,match:n,children:r}=t,s=p.useContext(lx);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),p.createElement(Co.Provider,{value:e},r)}function FF(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||Nt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:m,errors:g}=n,T=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||T){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let g,T=!1,v=null,x=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,v=f.route.errorElement||MF,c&&(u<0&&m===0?(T=!0,x=null):u===m&&(T=!0,x=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),b=()=>{let w;return g?w=v:T?w=x:f.route.Component?w=p.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=h,p.createElement(VF,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?p.createElement(LF,{location:n.location,revalidation:n.revalidation,component:v,error:g,children:b(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):b()},null)}var vC=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vC||{}),If=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(If||{});function UF(t){let e=p.useContext(lx);return e||Nt(!1),e}function $F(t){let e=p.useContext(PF);return e||Nt(!1),e}function BF(t){let e=p.useContext(Co);return e||Nt(!1),e}function xC(t){let e=BF(),n=e.matches[e.matches.length-1];return n.route.id||Nt(!1),n.route.id}function zF(){var t;let e=p.useContext(mC),n=$F(If.UseRouteError),r=xC(If.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function WF(){let{router:t}=UF(vC.UseNavigateStable),e=xC(If.UseNavigateStable),n=p.useRef(!1);return gC(()=>{n.current=!0}),p.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Fu({fromRouteId:e},i)))},[t,e])}function HF(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function wC(t){let{to:e,replace:n,state:r,relative:s}=t;oc()||Nt(!1);let{future:i,static:o}=p.useContext(Io),{matches:l}=p.useContext(Co),{pathname:c}=Na(),u=cr(),h=ax(e,ox(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return p.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function cn(t){Nt(!1)}function qF(t){let{basename:e="/",children:n=null,location:r,navigationType:s=qi.Pop,navigator:i,static:o=!1,future:l}=t;oc()&&Nt(!1);let c=e.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:c,navigator:i,static:o,future:Fu({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=ic(r));let{pathname:h="/",search:f="",hash:m="",state:g=null,key:T="default"}=r,v=p.useMemo(()=>{let x=ix(h,c);return x==null?null:{location:{pathname:x,search:f,hash:m,state:g,key:T},navigationType:s}},[c,h,f,m,g,T,s]);return v==null?null:p.createElement(Io.Provider,{value:u},p.createElement(kp.Provider,{children:n,value:v}))}function _C(t){let{children:e,location:n}=t;return jF(ev(e),n)}new Promise(()=>{});function ev(t,e){e===void 0&&(e=[]);let n=[];return p.Children.forEach(t,(r,s)=>{if(!p.isValidElement(r))return;let i=[...e,s];if(r.type===p.Fragment){n.push.apply(n,ev(r.props.children,i));return}r.type!==cn&&Nt(!1),!r.props.index||!r.props.children||Nt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ev(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tv(){return tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tv.apply(this,arguments)}function KF(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function GF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function QF(t,e){return t.button===0&&(!e||e==="_self")&&!GF(t)}function nv(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function YF(t,e){let n=nv(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const XF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JF="6";try{window.__reactRouterVersion=JF}catch{}const ZF="startTransition",sb=Wv[ZF];function e3(t){let{basename:e,children:n,future:r,window:s}=t,i=p.useRef();i.current==null&&(i.current=iF({window:s,v5Compat:!0}));let o=i.current,[l,c]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=p.useCallback(f=>{u&&sb?sb(()=>c(f)):c(f)},[c,u]);return p.useLayoutEffect(()=>o.listen(h),[o,h]),p.useEffect(()=>HF(r),[r]),p.createElement(qF,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const t3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",n3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ms=p.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,m=KF(e,XF),{basename:g}=p.useContext(Io),T,v=!1;if(typeof u=="string"&&n3.test(u)&&(T=u,t3))try{let w=new URL(window.location.href),I=u.startsWith("//")?new URL(w.protocol+u):new URL(u),k=ix(I.pathname,g);I.origin===w.origin&&k!=null?u=k+I.search+I.hash:v=!0}catch{}let x=RF(u,{relative:s}),_=r3(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function b(w){r&&r(w),w.defaultPrevented||_(w)}return p.createElement("a",tv({},m,{href:T||x,onClick:v||i?r:b,ref:n,target:c}))});var ib;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ib||(ib={}));var ob;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ob||(ob={}));function r3(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=cr(),u=Na(),h=yC(t,{relative:o});return p.useCallback(f=>{if(QF(f,n)){f.preventDefault();let m=r!==void 0?r:Nf(u)===Nf(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,h,r,s,n,t,i,o,l])}function bC(t){let e=p.useRef(nv(t)),n=p.useRef(!1),r=Na(),s=p.useMemo(()=>YF(r.search,n.current?null:e.current),[r.search]),i=cr(),o=p.useCallback((l,c)=>{const u=nv(typeof l=="function"?l(s):l);n.current=!0,i("?"+u,c)},[i,s]);return[s,o]}const s3=()=>{};var ab={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},i3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},TC={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(m=64)),r.push(n[h],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(EC(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):i3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||u==null||f==null)throw new o3;const m=i<<2|l>>4;if(r.push(m),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const T=u<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class o3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a3=function(t){const e=EC(t);return TC.encodeByteArray(e,!0)},Cf=function(t){return a3(t).replace(/\./g,"")},SC=function(t){try{return TC.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3=()=>l3().__FIREBASE_DEFAULTS__,u3=()=>{if(typeof process>"u"||typeof ab>"u")return;const t=ab.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},d3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&SC(t[1]);return e&&JSON.parse(e)},jp=()=>{try{return s3()||c3()||u3()||d3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NC=t=>{var e,n;return(n=(e=jp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},cx=t=>{const e=NC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},IC=()=>{var t;return(t=jp())==null?void 0:t.config},CC=t=>{var e;return(e=jp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Dp(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Cf(JSON.stringify(n)),Cf(JSON.stringify(o)),""].join(".")}const lu={};function f3(){const t={prod:[],emulator:[]};for(const e of Object.keys(lu))lu[e]?t.emulator.push(e):t.prod.push(e);return t}function p3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let lb=!1;function Op(t,e){if(typeof window>"u"||typeof document>"u"||!Ao(window.location.host)||lu[t]===e||lu[t]||lb)return;lu[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=f3().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{lb=!0,o()},m}function h(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=p3(r),g=n("text"),T=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),x=document.getElementById(v)||document.createElement("a"),_=n("preprendIcon"),b=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;l(w),h(x,v);const I=u();c(b,_),w.append(b,T,x,I),document.body.appendChild(w)}i?(T.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function g3(){var e;const t=(e=jp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function y3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function v3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function x3(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w3(){return!g3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function RC(){try{return typeof indexedDB=="object"}catch{return!1}}function kC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function _3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="FirebaseError";class br extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=b3,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ia.prototype.create)}}class Ia{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?E3(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new br(s,l,r)}}function E3(t,e){return t.replace(T3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const T3=/\{\$([^}]+)}/g;function S3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(cb(i)&&cb(o)){if(!mo(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function cb(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function zc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Wc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function N3(t,e){const n=new I3(t,e);return n.subscribe.bind(n)}class I3{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");C3(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Eg),s.error===void 0&&(s.error=Eg),s.complete===void 0&&(s.complete=Eg);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function C3(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Eg(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3=1e3,P3=2,R3=4*60*60*1e3,k3=.5;function ub(t,e=A3,n=P3){const r=e*Math.pow(n,t),s=Math.round(k3*r*(Math.random()-.5)*2);return Math.min(R3,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new h3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O3(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:D3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D3(t){return t===zo?void 0:t}function O3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new j3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ve||(Ve={}));const L3={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},V3=Ve.INFO,F3={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},U3=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=F3[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mp{constructor(e){this.name=e,this._logLevel=V3,this._logHandler=U3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const $3=(t,e)=>e.some(n=>t instanceof n);let db,hb;function B3(){return db||(db=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function z3(){return hb||(hb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jC=new WeakMap,rv=new WeakMap,DC=new WeakMap,Tg=new WeakMap,ux=new WeakMap;function W3(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(io(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jC.set(n,t)}).catch(()=>{}),ux.set(e,t),e}function H3(t){if(rv.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});rv.set(t,e)}let sv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||DC.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return io(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function q3(t){sv=t(sv)}function K3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Sg(this),e,...n);return DC.set(r,e.sort?e.sort():[e]),io(r)}:z3().includes(t)?function(...e){return t.apply(Sg(this),e),io(jC.get(this))}:function(...e){return io(t.apply(Sg(this),e))}}function G3(t){return typeof t=="function"?K3(t):(t instanceof IDBTransaction&&H3(t),$3(t,B3())?new Proxy(t,sv):t)}function io(t){if(t instanceof IDBRequest)return W3(t);if(Tg.has(t))return Tg.get(t);const e=G3(t);return e!==t&&(Tg.set(t,e),ux.set(e,t)),e}const Sg=t=>ux.get(t);function OC(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=io(o);return r&&o.addEventListener("upgradeneeded",c=>{r(io(o.result),c.oldVersion,c.newVersion,io(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Q3=["get","getKey","getAll","getAllKeys","count"],Y3=["put","add","delete","clear"],Ng=new Map;function fb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ng.get(e))return Ng.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Y3.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Q3.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Ng.set(e,i),i}q3(t=>({...t,get:(e,n,r)=>fb(e,n)||t.get(e,n,r),has:(e,n)=>!!fb(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(J3(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function J3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const iv="@firebase/app",pb="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new Mp("@firebase/app"),Z3="@firebase/app-compat",e6="@firebase/analytics-compat",t6="@firebase/analytics",n6="@firebase/app-check-compat",r6="@firebase/app-check",s6="@firebase/auth",i6="@firebase/auth-compat",o6="@firebase/database",a6="@firebase/data-connect",l6="@firebase/database-compat",c6="@firebase/functions",u6="@firebase/functions-compat",d6="@firebase/installations",h6="@firebase/installations-compat",f6="@firebase/messaging",p6="@firebase/messaging-compat",m6="@firebase/performance",g6="@firebase/performance-compat",y6="@firebase/remote-config",v6="@firebase/remote-config-compat",x6="@firebase/storage",w6="@firebase/storage-compat",_6="@firebase/firestore",b6="@firebase/ai",E6="@firebase/firestore-compat",T6="firebase",S6="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="[DEFAULT]",N6={[iv]:"fire-core",[Z3]:"fire-core-compat",[t6]:"fire-analytics",[e6]:"fire-analytics-compat",[r6]:"fire-app-check",[n6]:"fire-app-check-compat",[s6]:"fire-auth",[i6]:"fire-auth-compat",[o6]:"fire-rtdb",[a6]:"fire-data-connect",[l6]:"fire-rtdb-compat",[c6]:"fire-fn",[u6]:"fire-fn-compat",[d6]:"fire-iid",[h6]:"fire-iid-compat",[f6]:"fire-fcm",[p6]:"fire-fcm-compat",[m6]:"fire-perf",[g6]:"fire-perf-compat",[y6]:"fire-rc",[v6]:"fire-rc-compat",[x6]:"fire-gcs",[w6]:"fire-gcs-compat",[_6]:"fire-fst",[E6]:"fire-fst-compat",[b6]:"fire-vertex","fire-js":"fire-js",[T6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new Map,I6=new Map,av=new Map;function mb(t,e){try{t.container.addComponent(e)}catch(n){di.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _r(t){const e=t.name;if(av.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;av.set(e,t);for(const n of Uu.values())mb(n,t);for(const n of I6.values())mb(n,t);return!0}function yi(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new Ia("app","Firebase",C6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=S6;function dx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ov,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw oo.create("bad-app-name",{appName:String(s)});if(n||(n=IC()),!n)throw oo.create("no-options");const i=Uu.get(s);if(i){if(mo(n,i.options)&&mo(r,i.config))return i;throw oo.create("duplicate-app",{appName:s})}const o=new M3(s);for(const c of av.values())o.addComponent(c);const l=new A6(n,r,o);return Uu.set(s,l),l}function dd(t=ov){const e=Uu.get(t);if(!e&&t===ov&&IC())return dx();if(!e)throw oo.create("no-app",{appName:t});return e}function gb(){return Array.from(Uu.values())}function pn(t,e,n){let r=N6[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(o.join(" "));return}_r(new or(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P6="firebase-heartbeat-database",R6=1,$u="firebase-heartbeat-store";let Ig=null;function MC(){return Ig||(Ig=OC(P6,R6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($u)}catch(n){console.warn(n)}}}}).catch(t=>{throw oo.create("idb-open",{originalErrorMessage:t.message})})),Ig}async function k6(t){try{const n=(await MC()).transaction($u),r=await n.objectStore($u).get(LC(t));return await n.done,r}catch(e){if(e instanceof br)di.warn(e.message);else{const n=oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});di.warn(n.message)}}}async function yb(t,e){try{const r=(await MC()).transaction($u,"readwrite");await r.objectStore($u).put(e,LC(t)),await r.done}catch(n){if(n instanceof br)di.warn(n.message);else{const r=oo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});di.warn(r.message)}}}function LC(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6=1024,D6=30;class O6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new L6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vb();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>D6){const o=V6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){di.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vb(),{heartbeatsToSend:r,unsentEntries:s}=M6(this._heartbeatsCache.heartbeats),i=Cf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return di.warn(n),""}}}function vb(){return new Date().toISOString().substring(0,10)}function M6(t,e=j6){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),xb(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),xb(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class L6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return RC()?kC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await k6(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return yb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function xb(t){return Cf(JSON.stringify({version:2,heartbeats:t})).length}function V6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(t){_r(new or("platform-logger",e=>new X3(e),"PRIVATE")),_r(new or("heartbeat",e=>new O6(e),"PRIVATE")),pn(iv,pb,t),pn(iv,pb,"esm2020"),pn("fire-js","")}F6("");var U6="firebase",$6="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn(U6,$6,"app");function VC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const B6=VC,FC=new Ia("auth","Firebase",VC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Mp("@firebase/auth");function z6(t,...e){Af.logLevel<=Ve.WARN&&Af.warn(`Auth (${Ca}): ${t}`,...e)}function Lh(t,...e){Af.logLevel<=Ve.ERROR&&Af.error(`Auth (${Ca}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,...e){throw hx(t,...e)}function Ts(t,...e){return hx(t,...e)}function UC(t,e,n){const r={...B6(),[e]:n};return new Ia("auth","Firebase",r).create(e,{appName:t.name})}function ti(t){return UC(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FC.create(t,...e)}function ye(t,e,...n){if(!t)throw hx(e,...n)}function Xs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lh(e),new Error(e)}function hi(t,e){t||Xs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function W6(){return wb()==="http:"||wb()==="https:"}function wb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(W6()||PC()||"connection"in navigator)?navigator.onLine:!0}function q6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n){this.shortDelay=e,this.longDelay=n,hi(n>e,"Short delay should be less than long delay!"),this.isMobile=m3()||v3()}get(){return H6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(t,e){hi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Q6=new hd(3e4,6e4);function vi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ms(t,e,n,r,s={}){return BC(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ud({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...i};return y3()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Ao(t.emulatorConfig.host)&&(u.credentials="include"),$C.fetch()(await zC(t,t.config.apiHost,n,l),u)})}async function BC(t,e,n){t._canInitEmulator=!1;const r={...K6,...e};try{const s=new X6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw dh(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw dh(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw dh(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw dh(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw UC(t,h,u);Yr(t,h)}}catch(s){if(s instanceof br)throw s;Yr(t,"network-request-failed",{message:String(s)})}}async function fd(t,e,n,r,s={}){const i=await Ms(t,e,n,r,s);return"mfaPendingCredential"in i&&Yr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function zC(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?fx(t.config,s):`${t.config.apiScheme}://${s}`;return G6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Y6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class X6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ts(this.auth,"network-request-failed")),Q6.get())})}}function dh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ts(t,e,r);return s.customData._tokenResponse=n,s}function _b(t){return t!==void 0&&t.enterprise!==void 0}class J6{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Y6(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Z6(t,e){return Ms(t,"GET","/v2/recaptchaConfig",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(t,e){return Ms(t,"POST","/v1/accounts:delete",e)}async function Pf(t,e){return Ms(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tU(t,e=!1){const n=ct(t),r=await n.getIdToken(e),s=px(r);ye(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:cu(Cg(s.auth_time)),issuedAtTime:cu(Cg(s.iat)),expirationTime:cu(Cg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Cg(t){return Number(t)*1e3}function px(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lh("JWT malformed, contained fewer than 3 sections"),null;try{const s=SC(n);return s?JSON.parse(s):(Lh("Failed to decode base64 JWT payload"),null)}catch(s){return Lh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function bb(t){const e=px(t);return ye(e,"internal-error"),ye(typeof e.exp<"u","internal-error"),ye(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof br&&nU(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nU({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rf(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Bl(t,Pf(e,{idToken:n}));ye(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?WC(s.providerUserInfo):[],o=iU(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new cv(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function sU(t){const e=ct(t);await Rf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iU(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function WC(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oU(t,e){const n=await BC(t,{},async()=>{const r=ud({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await zC(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Ao(t.emulatorConfig.host)&&(c.credentials="include"),$C.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aU(t,e){return Ms(t,"POST","/v2/accounts:revokeToken",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ye(e.idToken,"internal-error"),ye(typeof e.idToken<"u","internal-error"),ye(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ye(e.length!==0,"internal-error");const n=bb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ye(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await oU(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new gl;return r&&(ye(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ye(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ye(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new gl,this.toJSON())}_performRefresh(){return Xs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(t,e){ye(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fr{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new rU(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cv(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Bl(this,this.stsTokenManager.getToken(this.auth,e));return ye(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tU(this,e)}reload(){return sU(this)}_assign(e){this!==e&&(ye(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(ti(this.auth));const e=await this.getIdToken();return await Bl(this,eU(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:g,providerData:T,stsTokenManager:v}=n;ye(f&&v,e,"internal-error");const x=gl.fromJSON(this.name,v);ye(typeof f=="string",e,"internal-error"),Ci(r,e.name),Ci(s,e.name),ye(typeof m=="boolean",e,"internal-error"),ye(typeof g=="boolean",e,"internal-error"),Ci(i,e.name),Ci(o,e.name),Ci(l,e.name),Ci(c,e.name),Ci(u,e.name),Ci(h,e.name);const _=new Fr({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:x,createdAt:u,lastLoginAt:h});return T&&Array.isArray(T)&&(_.providerData=T.map(b=>({...b}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new gl;s.updateFromServerResponse(n);const i=new Fr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Rf(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ye(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?WC(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new gl;l.updateFromIdToken(r);const c=new Fr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new cv(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=new Map;function Js(t){hi(t instanceof Function,"Expected a class definition");let e=Eb.get(t);return e?(hi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Eb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}HC.type="NONE";const Tb=HC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(t,e,n){return`firebase:${t}:${e}:${n}`}class yl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Vh(this.userKey,s.apiKey,i),this.fullPersistenceKey=Vh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Pf(this.auth,{idToken:e}).catch(()=>{});return n?Fr._fromGetAccountInfoResponse(this.auth,n,e):null}return Fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new yl(Js(Tb),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Js(Tb);const o=Vh(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const m=await Pf(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Fr._fromGetAccountInfoResponse(e,m,h)}else f=Fr._fromJSON(e,h);u!==i&&(l=f),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new yl(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new yl(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(QC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XC(e))return"Blackberry";if(JC(e))return"Webos";if(KC(e))return"Safari";if((e.includes("chrome/")||GC(e))&&!e.includes("edge/"))return"Chrome";if(YC(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qC(t=gn()){return/firefox\//i.test(t)}function KC(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GC(t=gn()){return/crios\//i.test(t)}function QC(t=gn()){return/iemobile/i.test(t)}function YC(t=gn()){return/android/i.test(t)}function XC(t=gn()){return/blackberry/i.test(t)}function JC(t=gn()){return/webos/i.test(t)}function mx(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lU(t=gn()){var e;return mx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function cU(){return x3()&&document.documentMode===10}function ZC(t=gn()){return mx(t)||YC(t)||JC(t)||XC(t)||/windows phone/i.test(t)||QC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t,e=[]){let n;switch(t){case"Browser":n=Sb(gn());break;case"Worker":n=`${Sb(gn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ca}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dU(t,e={}){return Ms(t,"GET","/v2/passwordPolicy",vi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU=6;class fU{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hU,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nb(this),this.idTokenSubscription=new Nb(this),this.beforeStateQueue=new uU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Js(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await yl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Pf(this,{idToken:e}),r=await Fr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ye(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rf(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=q6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(ti(this));const n=e?ct(e):null;return n&&ye(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ye(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(ti(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(ti(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dU(this),n=new fU(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ia("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await aU(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Js(e)||this._popupRedirectResolver;ye(n,this,"argument-error"),this.redirectPersistenceManager=await yl.create(this,[Js(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ye(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=eA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&z6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Po(t){return ct(t)}class Nb{constructor(e){this.auth=e,this.observer=null,this.addObserver=N3(n=>this.observer=n)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mU(t){Lp=t}function tA(t){return Lp.loadJS(t)}function gU(){return Lp.recaptchaEnterpriseScript}function yU(){return Lp.gapiScript}function vU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class xU{constructor(){this.enterprise=new wU}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wU{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const _U="recaptcha-enterprise",nA="NO_RECAPTCHA";class bU{constructor(e){this.type=_U,this.auth=Po(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{Z6(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new J6(c);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;_b(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(nA)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new xU().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&_b(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=gU();c.length!==0&&(c+=l),tA(c).then(()=>{s(l,i,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function Ib(t,e,n,r=!1,s=!1){const i=new bU(t);let o;if(s)o=nA;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function kf(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Ib(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ib(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EU(t,e){const n=yi(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(mo(i,e??{}))return s;Yr(s,"already-initialized")}return n.initialize({options:e})}function TU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Js);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SU(t,e,n){const r=Po(t);ye(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=rA(e),{host:o,port:l}=NU(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ye(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ye(mo(u,r.config.emulator)&&mo(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Ao(o)?(Dp(`${i}//${o}${c}`),Op("Auth",!0)):IU()}function rA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function NU(t){const e=rA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Cb(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Cb(o)}}}function Cb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function IU(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xs("not implemented")}_getIdTokenResponse(e){return Xs("not implemented")}_linkToIdToken(e,n){return Xs("not implemented")}_getReauthenticationResolver(e){return Xs("not implemented")}}async function CU(t,e){return Ms(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(t,e){return fd(t,"POST","/v1/accounts:signInWithPassword",vi(t,e))}async function PU(t,e){return Ms(t,"POST","/v1/accounts:sendOobCode",vi(t,e))}async function RU(t,e){return PU(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kU(t,e){return fd(t,"POST","/v1/accounts:signInWithEmailLink",vi(t,e))}async function jU(t,e){return fd(t,"POST","/v1/accounts:signInWithEmailLink",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu extends gx{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Bu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Bu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kf(e,n,"signInWithPassword",AU);case"emailLink":return kU(e,{email:this._email,oobCode:this._password});default:Yr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kf(e,r,"signUpPassword",CU);case"emailLink":return jU(e,{idToken:n,email:this._email,oobCode:this._password});default:Yr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(t,e){return fd(t,"POST","/v1/accounts:signInWithIdp",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU="http://localhost";class ha extends gx{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ha(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Yr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ha(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return vl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,vl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vl(e,n)}buildRequest(){const e={requestUri:DU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ud(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MU(t){const e=zc(Wc(t)).link,n=e?zc(Wc(e)).deep_link_id:null,r=zc(Wc(t)).deep_link_id;return(r?zc(Wc(r)).link:null)||r||n||e||t}class yx{constructor(e){const n=zc(Wc(e)),r=n.apiKey??null,s=n.oobCode??null,i=OU(n.mode??null);ye(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=MU(e);try{return new yx(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(){this.providerId=ac.PROVIDER_ID}static credential(e,n){return Bu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=yx.parseLink(n);return ye(r,"argument-error"),Bu._fromEmailAndCode(e,r.code,r.tenantId)}}ac.PROVIDER_ID="password";ac.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ac.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pd extends sA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends pd{constructor(){super("facebook.com")}static credential(e){return ha._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Oi.credential(e.oauthAccessToken)}catch{return null}}}Oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends pd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ha._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Mi.credential(n,r)}catch{return null}}}Mi.GOOGLE_SIGN_IN_METHOD="google.com";Mi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li extends pd{constructor(){super("github.com")}static credential(e){return ha._fromParams({providerId:Li.PROVIDER_ID,signInMethod:Li.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Li.credentialFromTaggedObject(e)}static credentialFromError(e){return Li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Li.credential(e.oauthAccessToken)}catch{return null}}}Li.GITHUB_SIGN_IN_METHOD="github.com";Li.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends pd{constructor(){super("twitter.com")}static credential(e,n){return ha._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Vi.credential(n,r)}catch{return null}}}Vi.TWITTER_SIGN_IN_METHOD="twitter.com";Vi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LU(t,e){return fd(t,"POST","/v1/accounts:signUp",vi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Fr._fromIdTokenResponse(e,r,s),o=Ab(r);return new fa({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Ab(r);return new fa({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Ab(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends br{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,jf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new jf(e,n,r,s)}}function iA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?jf._fromErrorAndOperation(t,i,e,r):i})}async function VU(t,e,n=!1){const r=await Bl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FU(t,e,n=!1){const{auth:r}=t;if(Mn(r.app))return Promise.reject(ti(r));const s="reauthenticate";try{const i=await Bl(t,iA(r,s,e,t),n);ye(i.idToken,r,"internal-error");const o=px(i.idToken);ye(o,r,"internal-error");const{sub:l}=o;return ye(t.uid===l,r,"user-mismatch"),fa._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Yr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(t,e,n=!1){if(Mn(t.app))return Promise.reject(ti(t));const r="signIn",s=await iA(t,r,e),i=await fa._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function UU(t,e){return oA(Po(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aA(t){const e=Po(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function $U(t,e,n){const r=Po(t);await kf(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",RU)}async function lA(t,e,n){if(Mn(t.app))return Promise.reject(ti(t));const r=Po(t),o=await kf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",LU).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&aA(t),c}),l=await fa._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function vx(t,e,n){return Mn(t.app)?Promise.reject(ti(t)):UU(ct(t),ac.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&aA(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BU(t,e){return Ms(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pb(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ct(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Bl(r,BU(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function zU(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function WU(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function cA(t,e,n,r){return ct(t).onAuthStateChanged(e,n,r)}function uA(t){return ct(t).signOut()}const Df="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Df,"1"),this.storage.removeItem(Df),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HU=1e3,qU=10;class hA extends dA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ZC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);cU()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,qU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},HU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}hA.type="LOCAL";const KU=hA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA extends dA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}fA.type="SESSION";const pA=fA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Vp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,i)),c=await GU(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=xx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(){return window}function YU(t){Ss().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(){return typeof Ss().WorkerGlobalScope<"u"&&typeof Ss().importScripts=="function"}async function XU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function JU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function ZU(){return mA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="firebaseLocalStorageDb",e$=1,Of="firebaseLocalStorage",yA="fbase_key";class md{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fp(t,e){return t.transaction([Of],e?"readwrite":"readonly").objectStore(Of)}function t$(){const t=indexedDB.deleteDatabase(gA);return new md(t).toPromise()}function uv(){const t=indexedDB.open(gA,e$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Of,{keyPath:yA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Of)?e(r):(r.close(),await t$(),e(await uv()))})})}async function Rb(t,e,n){const r=Fp(t,!0).put({[yA]:e,value:n});return new md(r).toPromise()}async function n$(t,e){const n=Fp(t,!1).get(e),r=await new md(n).toPromise();return r===void 0?null:r.value}function kb(t,e){const n=Fp(t,!0).delete(e);return new md(n).toPromise()}const r$=800,s$=3;class vA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await uv(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>s$)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vp._getInstance(ZU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await XU(),!this.activeServiceWorker)return;this.sender=new QU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||JU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await uv();return await Rb(e,Df,"1"),await kb(e,Df),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Rb(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>n$(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>kb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Fp(s,!1).getAll();return new md(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),r$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vA.type="LOCAL";const i$=vA;new hd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(t,e){return e?Js(e):(ye(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx extends gx{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return vl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function a$(t){return oA(t.auth,new wx(t),t.bypassAuthState)}function l$(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),FU(n,new wx(t),t.bypassAuthState)}async function c$(t){const{auth:e,user:n}=t;return ye(n,e,"internal-error"),VU(n,new wx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return a$;case"linkViaPopup":case"linkViaRedirect":return c$;case"reauthViaPopup":case"reauthViaRedirect":return l$;default:Yr(this.auth,"internal-error")}}resolve(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=new hd(2e3,1e4);class sl extends xA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,sl.currentPopupAction&&sl.currentPopupAction.cancel(),sl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ye(e,this.auth,"internal-error"),e}async onExecution(){hi(this.filter.length===1,"Popup operations only handle one event");const e=xx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ts(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ts(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,sl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ts(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,u$.get())};e()}}sl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d$="pendingRedirect",Fh=new Map;class h$ extends xA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const r=await f$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function f$(t,e){const n=g$(e),r=m$(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function p$(t,e){Fh.set(t._key(),e)}function m$(t){return Js(t._redirectPersistence)}function g$(t){return Vh(d$,t.config.apiKey,t.name)}async function y$(t,e,n=!1){if(Mn(t.app))return Promise.reject(ti(t));const r=Po(t),s=o$(r,e),o=await new h$(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$=10*60*1e3;class x${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!w$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!wA(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ts(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=v$&&this.cachedEventUids.clear(),this.cachedEventUids.has(jb(e))}saveEventToCache(e){this.cachedEventUids.add(jb(e)),this.lastProcessedEventTime=Date.now()}}function jb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function wA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function w$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _$(t,e={}){return Ms(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,E$=/^https?/;async function T$(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _$(t);for(const n of e)try{if(S$(n))return}catch{}Yr(t,"unauthorized-domain")}function S$(t){const e=lv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!E$.test(n))return!1;if(b$.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$=new hd(3e4,6e4);function Db(){const t=Ss().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function I$(t){return new Promise((e,n)=>{var s,i,o;function r(){Db(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Db(),n(Ts(t,"network-request-failed"))},timeout:N$.get()})}if((i=(s=Ss().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Ss().gapi)!=null&&o.load)r();else{const l=vU("iframefcb");return Ss()[l]=()=>{gapi.load?r():n(Ts(t,"network-request-failed"))},tA(`${yU()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Uh=null,e})}let Uh=null;function C$(t){return Uh=Uh||I$(t),Uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A$=new hd(5e3,15e3),P$="__/auth/iframe",R$="emulator/auth/iframe",k$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},j$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function D$(t){const e=t.config;ye(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fx(e,R$):`https://${t.config.authDomain}/${P$}`,r={apiKey:e.apiKey,appName:t.name,v:Ca},s=j$.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ud(r).slice(1)}`}async function O$(t){const e=await C$(t),n=Ss().gapi;return ye(n,t,"internal-error"),e.open({where:document.body,url:D$(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:k$,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Ts(t,"network-request-failed"),l=Ss().setTimeout(()=>{i(o)},A$.get());function c(){Ss().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L$=500,V$=600,F$="_blank",U$="http://localhost";class Ob{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $$(t,e,n,r=L$,s=V$){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...M$,width:r.toString(),height:s.toString(),top:i,left:o},u=gn().toLowerCase();n&&(l=GC(u)?F$:n),qC(u)&&(e=e||U$,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[g,T])=>`${m}${g}=${T},`,"");if(lU(u)&&l!=="_self")return B$(e||"",l),new Ob(null);const f=window.open(e||"",l,h);ye(f,t,"popup-blocked");try{f.focus()}catch{}return new Ob(f)}function B$(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$="__/auth/handler",W$="emulator/auth/handler",H$=encodeURIComponent("fac");async function Mb(t,e,n,r,s,i){ye(t.config.authDomain,t,"auth-domain-config-required"),ye(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ca,eventId:s};if(e instanceof sA){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",S3(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof pd){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${H$}=${encodeURIComponent(c)}`:"";return`${q$(t)}?${ud(l).slice(1)}${u}`}function q$({config:t}){return t.emulator?fx(t,W$):`https://${t.authDomain}/${z$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag="webStorageSupport";class K${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pA,this._completeRedirectFn=y$,this._overrideRedirectResult=p$}async _openPopup(e,n,r,s){var o;hi((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Mb(e,n,r,lv(),s);return $$(e,i,xx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Mb(e,n,r,lv(),s);return YU(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(hi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await O$(e),r=new x$(e);return n.register("authEvent",s=>(ye(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ag,{type:Ag},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Ag];i!==void 0&&n(!!i),Yr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=T$(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ZC()||KC()||mx()}}const G$=K$;var Lb="@firebase/auth",Vb="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function X$(t){_r(new or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ye(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eA(t)},u=new pU(r,s,i,c);return TU(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_r(new or("auth-internal",e=>{const n=Po(e.getProvider("auth").getImmediate());return(r=>new Q$(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pn(Lb,Vb,Y$(t)),pn(Lb,Vb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J$=5*60,Z$=CC("authIdTokenMaxAge")||J$;let Fb=null;const e9=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Z$)return;const s=n==null?void 0:n.token;Fb!==s&&(Fb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function _A(t=dd()){const e=yi(t,"auth");if(e.isInitialized())return e.getImmediate();const n=EU(t,{popupRedirectResolver:G$,persistence:[i$,KU,pA]}),r=CC("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=e9(i.toString());WU(n,o,()=>o(n.currentUser)),zU(n,l=>o(l))}}const s=NC("auth");return s&&SU(n,`http://${s}`),n}function t9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}mU({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Ts("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",t9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});X$("Browser");var Ub=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ao,bA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function C(){}C.prototype=S.prototype,N.D=S.prototype,N.prototype=new C,N.prototype.constructor=N,N.C=function(A,j,D){for(var R=Array(arguments.length-2),K=2;K<arguments.length;K++)R[K-2]=arguments[K];return S.prototype[j].apply(A,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,S,C){C||(C=0);var A=Array(16);if(typeof S=="string")for(var j=0;16>j;++j)A[j]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(j=0;16>j;++j)A[j]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=N.g[0],C=N.g[1],j=N.g[2];var D=N.g[3],R=S+(D^C&(j^D))+A[0]+3614090360&4294967295;S=C+(R<<7&4294967295|R>>>25),R=D+(j^S&(C^j))+A[1]+3905402710&4294967295,D=S+(R<<12&4294967295|R>>>20),R=j+(C^D&(S^C))+A[2]+606105819&4294967295,j=D+(R<<17&4294967295|R>>>15),R=C+(S^j&(D^S))+A[3]+3250441966&4294967295,C=j+(R<<22&4294967295|R>>>10),R=S+(D^C&(j^D))+A[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=D+(j^S&(C^j))+A[5]+1200080426&4294967295,D=S+(R<<12&4294967295|R>>>20),R=j+(C^D&(S^C))+A[6]+2821735955&4294967295,j=D+(R<<17&4294967295|R>>>15),R=C+(S^j&(D^S))+A[7]+4249261313&4294967295,C=j+(R<<22&4294967295|R>>>10),R=S+(D^C&(j^D))+A[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=D+(j^S&(C^j))+A[9]+2336552879&4294967295,D=S+(R<<12&4294967295|R>>>20),R=j+(C^D&(S^C))+A[10]+4294925233&4294967295,j=D+(R<<17&4294967295|R>>>15),R=C+(S^j&(D^S))+A[11]+2304563134&4294967295,C=j+(R<<22&4294967295|R>>>10),R=S+(D^C&(j^D))+A[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=D+(j^S&(C^j))+A[13]+4254626195&4294967295,D=S+(R<<12&4294967295|R>>>20),R=j+(C^D&(S^C))+A[14]+2792965006&4294967295,j=D+(R<<17&4294967295|R>>>15),R=C+(S^j&(D^S))+A[15]+1236535329&4294967295,C=j+(R<<22&4294967295|R>>>10),R=S+(j^D&(C^j))+A[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=D+(C^j&(S^C))+A[6]+3225465664&4294967295,D=S+(R<<9&4294967295|R>>>23),R=j+(S^C&(D^S))+A[11]+643717713&4294967295,j=D+(R<<14&4294967295|R>>>18),R=C+(D^S&(j^D))+A[0]+3921069994&4294967295,C=j+(R<<20&4294967295|R>>>12),R=S+(j^D&(C^j))+A[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=D+(C^j&(S^C))+A[10]+38016083&4294967295,D=S+(R<<9&4294967295|R>>>23),R=j+(S^C&(D^S))+A[15]+3634488961&4294967295,j=D+(R<<14&4294967295|R>>>18),R=C+(D^S&(j^D))+A[4]+3889429448&4294967295,C=j+(R<<20&4294967295|R>>>12),R=S+(j^D&(C^j))+A[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=D+(C^j&(S^C))+A[14]+3275163606&4294967295,D=S+(R<<9&4294967295|R>>>23),R=j+(S^C&(D^S))+A[3]+4107603335&4294967295,j=D+(R<<14&4294967295|R>>>18),R=C+(D^S&(j^D))+A[8]+1163531501&4294967295,C=j+(R<<20&4294967295|R>>>12),R=S+(j^D&(C^j))+A[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=D+(C^j&(S^C))+A[2]+4243563512&4294967295,D=S+(R<<9&4294967295|R>>>23),R=j+(S^C&(D^S))+A[7]+1735328473&4294967295,j=D+(R<<14&4294967295|R>>>18),R=C+(D^S&(j^D))+A[12]+2368359562&4294967295,C=j+(R<<20&4294967295|R>>>12),R=S+(C^j^D)+A[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=D+(S^C^j)+A[8]+2272392833&4294967295,D=S+(R<<11&4294967295|R>>>21),R=j+(D^S^C)+A[11]+1839030562&4294967295,j=D+(R<<16&4294967295|R>>>16),R=C+(j^D^S)+A[14]+4259657740&4294967295,C=j+(R<<23&4294967295|R>>>9),R=S+(C^j^D)+A[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=D+(S^C^j)+A[4]+1272893353&4294967295,D=S+(R<<11&4294967295|R>>>21),R=j+(D^S^C)+A[7]+4139469664&4294967295,j=D+(R<<16&4294967295|R>>>16),R=C+(j^D^S)+A[10]+3200236656&4294967295,C=j+(R<<23&4294967295|R>>>9),R=S+(C^j^D)+A[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=D+(S^C^j)+A[0]+3936430074&4294967295,D=S+(R<<11&4294967295|R>>>21),R=j+(D^S^C)+A[3]+3572445317&4294967295,j=D+(R<<16&4294967295|R>>>16),R=C+(j^D^S)+A[6]+76029189&4294967295,C=j+(R<<23&4294967295|R>>>9),R=S+(C^j^D)+A[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=D+(S^C^j)+A[12]+3873151461&4294967295,D=S+(R<<11&4294967295|R>>>21),R=j+(D^S^C)+A[15]+530742520&4294967295,j=D+(R<<16&4294967295|R>>>16),R=C+(j^D^S)+A[2]+3299628645&4294967295,C=j+(R<<23&4294967295|R>>>9),R=S+(j^(C|~D))+A[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=D+(C^(S|~j))+A[7]+1126891415&4294967295,D=S+(R<<10&4294967295|R>>>22),R=j+(S^(D|~C))+A[14]+2878612391&4294967295,j=D+(R<<15&4294967295|R>>>17),R=C+(D^(j|~S))+A[5]+4237533241&4294967295,C=j+(R<<21&4294967295|R>>>11),R=S+(j^(C|~D))+A[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=D+(C^(S|~j))+A[3]+2399980690&4294967295,D=S+(R<<10&4294967295|R>>>22),R=j+(S^(D|~C))+A[10]+4293915773&4294967295,j=D+(R<<15&4294967295|R>>>17),R=C+(D^(j|~S))+A[1]+2240044497&4294967295,C=j+(R<<21&4294967295|R>>>11),R=S+(j^(C|~D))+A[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=D+(C^(S|~j))+A[15]+4264355552&4294967295,D=S+(R<<10&4294967295|R>>>22),R=j+(S^(D|~C))+A[6]+2734768916&4294967295,j=D+(R<<15&4294967295|R>>>17),R=C+(D^(j|~S))+A[13]+1309151649&4294967295,C=j+(R<<21&4294967295|R>>>11),R=S+(j^(C|~D))+A[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=D+(C^(S|~j))+A[11]+3174756917&4294967295,D=S+(R<<10&4294967295|R>>>22),R=j+(S^(D|~C))+A[2]+718787259&4294967295,j=D+(R<<15&4294967295|R>>>17),R=C+(D^(j|~S))+A[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(j+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+j&4294967295,N.g[3]=N.g[3]+D&4294967295}r.prototype.u=function(N,S){S===void 0&&(S=N.length);for(var C=S-this.blockSize,A=this.B,j=this.h,D=0;D<S;){if(j==0)for(;D<=C;)s(this,N,D),D+=this.blockSize;if(typeof N=="string"){for(;D<S;)if(A[j++]=N.charCodeAt(D++),j==this.blockSize){s(this,A),j=0;break}}else for(;D<S;)if(A[j++]=N[D++],j==this.blockSize){s(this,A),j=0;break}}this.h=j,this.o+=S},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;var C=8*this.o;for(S=N.length-8;S<N.length;++S)N[S]=C&255,C/=256;for(this.u(N),N=Array(16),S=C=0;4>S;++S)for(var A=0;32>A;A+=8)N[C++]=this.g[S]>>>A&255;return N};function i(N,S){var C=l;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=S(N)}function o(N,S){this.h=S;for(var C=[],A=!0,j=N.length-1;0<=j;j--){var D=N[j]|0;A&&D==S||(C[j]=D,A=!1)}this.g=C}var l={};function c(N){return-128<=N&&128>N?i(N,function(S){return new o([S|0],0>S?-1:0)}):new o([N|0],0>N?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return f;if(0>N)return x(u(-N));for(var S=[],C=1,A=0;N>=C;A++)S[A]=N/C|0,C*=4294967296;return new o(S,0)}function h(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return x(h(N.substring(1),S));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(S,8)),A=f,j=0;j<N.length;j+=8){var D=Math.min(8,N.length-j),R=parseInt(N.substring(j,j+D),S);8>D?(D=u(Math.pow(S,D)),A=A.j(D).add(u(R))):(A=A.j(C),A=A.add(u(R)))}return A}var f=c(0),m=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(v(this))return-x(this).m();for(var N=0,S=1,C=0;C<this.g.length;C++){var A=this.i(C);N+=(0<=A?A:4294967296+A)*S,S*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(T(this))return"0";if(v(this))return"-"+x(this).toString(N);for(var S=u(Math.pow(N,6)),C=this,A="";;){var j=I(C,S).g;C=_(C,j.j(S));var D=((0<C.g.length?C.g[0]:C.h)>>>0).toString(N);if(C=j,T(C))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function T(N){if(N.h!=0)return!1;for(var S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function v(N){return N.h==-1}t.l=function(N){return N=_(this,N),v(N)?-1:T(N)?0:1};function x(N){for(var S=N.g.length,C=[],A=0;A<S;A++)C[A]=~N.g[A];return new o(C,~N.h).add(m)}t.abs=function(){return v(this)?x(this):this},t.add=function(N){for(var S=Math.max(this.g.length,N.g.length),C=[],A=0,j=0;j<=S;j++){var D=A+(this.i(j)&65535)+(N.i(j)&65535),R=(D>>>16)+(this.i(j)>>>16)+(N.i(j)>>>16);A=R>>>16,D&=65535,R&=65535,C[j]=R<<16|D}return new o(C,C[C.length-1]&-2147483648?-1:0)};function _(N,S){return N.add(x(S))}t.j=function(N){if(T(this)||T(N))return f;if(v(this))return v(N)?x(this).j(x(N)):x(x(this).j(N));if(v(N))return x(this.j(x(N)));if(0>this.l(g)&&0>N.l(g))return u(this.m()*N.m());for(var S=this.g.length+N.g.length,C=[],A=0;A<2*S;A++)C[A]=0;for(A=0;A<this.g.length;A++)for(var j=0;j<N.g.length;j++){var D=this.i(A)>>>16,R=this.i(A)&65535,K=N.i(j)>>>16,q=N.i(j)&65535;C[2*A+2*j]+=R*q,b(C,2*A+2*j),C[2*A+2*j+1]+=D*q,b(C,2*A+2*j+1),C[2*A+2*j+1]+=R*K,b(C,2*A+2*j+1),C[2*A+2*j+2]+=D*K,b(C,2*A+2*j+2)}for(A=0;A<S;A++)C[A]=C[2*A+1]<<16|C[2*A];for(A=S;A<2*S;A++)C[A]=0;return new o(C,0)};function b(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function w(N,S){this.g=N,this.h=S}function I(N,S){if(T(S))throw Error("division by zero");if(T(N))return new w(f,f);if(v(N))return S=I(x(N),S),new w(x(S.g),x(S.h));if(v(S))return S=I(N,x(S)),new w(x(S.g),S.h);if(30<N.g.length){if(v(N)||v(S))throw Error("slowDivide_ only works with positive integers.");for(var C=m,A=S;0>=A.l(N);)C=k(C),A=k(A);var j=O(C,1),D=O(A,1);for(A=O(A,2),C=O(C,2);!T(A);){var R=D.add(A);0>=R.l(N)&&(j=j.add(C),D=R),A=O(A,1),C=O(C,1)}return S=_(N,j.j(S)),new w(j,S)}for(j=f;0<=N.l(S);){for(C=Math.max(1,Math.floor(N.m()/S.m())),A=Math.ceil(Math.log(C)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=u(C),R=D.j(S);v(R)||0<R.l(N);)C-=A,D=u(C),R=D.j(S);T(D)&&(D=m),j=j.add(D),N=_(N,R)}return new w(j,N)}t.A=function(N){return I(this,N).h},t.and=function(N){for(var S=Math.max(this.g.length,N.g.length),C=[],A=0;A<S;A++)C[A]=this.i(A)&N.i(A);return new o(C,this.h&N.h)},t.or=function(N){for(var S=Math.max(this.g.length,N.g.length),C=[],A=0;A<S;A++)C[A]=this.i(A)|N.i(A);return new o(C,this.h|N.h)},t.xor=function(N){for(var S=Math.max(this.g.length,N.g.length),C=[],A=0;A<S;A++)C[A]=this.i(A)^N.i(A);return new o(C,this.h^N.h)};function k(N){for(var S=N.g.length+1,C=[],A=0;A<S;A++)C[A]=N.i(A)<<1|N.i(A-1)>>>31;return new o(C,N.h)}function O(N,S){var C=S>>5;S%=32;for(var A=N.g.length-C,j=[],D=0;D<A;D++)j[D]=0<S?N.i(D+C)>>>S|N.i(D+C+1)<<32-S:N.i(D+C);return new o(j,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,ao=o}).apply(typeof Ub<"u"?Ub:typeof self<"u"?self:typeof window<"u"?window:{});var hh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EA,Hc,TA,$h,dv,SA,NA,IA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,E){return d==Array.prototype||d==Object.prototype||(d[y]=E.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof hh=="object"&&hh];for(var y=0;y<d.length;++y){var E=d[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var E=r;d=d.split(".");for(var P=0;P<d.length-1;P++){var F=d[P];if(!(F in E))break e;E=E[F]}d=d[d.length-1],P=E[d],y=y(P),y!=P&&y!=null&&e(E,d,{configurable:!0,writable:!0,value:y})}}function i(d,y){d instanceof String&&(d+="");var E=0,P=!1,F={next:function(){if(!P&&E<d.length){var U=E++;return{value:y(U,d[U]),done:!1}}return P=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(d){return d||function(){return i(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function u(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function h(d,y,E){return d.call.apply(d.bind,arguments)}function f(d,y,E){if(!d)throw Error();if(2<arguments.length){var P=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,P),d.apply(y,F)}}return function(){return d.apply(y,arguments)}}function m(d,y,E){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function g(d,y){var E=Array.prototype.slice.call(arguments,1);return function(){var P=E.slice();return P.push.apply(P,arguments),d.apply(this,P)}}function T(d,y){function E(){}E.prototype=y.prototype,d.aa=y.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(P,F,U){for(var ee=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)ee[nt-2]=arguments[nt];return y.prototype[F].apply(P,ee)}}function v(d){const y=d.length;if(0<y){const E=Array(y);for(let P=0;P<y;P++)E[P]=d[P];return E}return[]}function x(d,y){for(let E=1;E<arguments.length;E++){const P=arguments[E];if(c(P)){const F=d.length||0,U=P.length||0;d.length=F+U;for(let ee=0;ee<U;ee++)d[F+ee]=P[ee]}else d.push(P)}}class _{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function b(d){return/^[\s\xa0]*$/.test(d)}function w(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function I(d){return I[" "](d),d}I[" "]=function(){};var k=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function O(d,y,E){for(const P in d)y.call(E,d[P],P,d)}function N(d,y){for(const E in d)y.call(void 0,d[E],E,d)}function S(d){const y={};for(const E in d)y[E]=d[E];return y}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,y){let E,P;for(let F=1;F<arguments.length;F++){P=arguments[F];for(E in P)d[E]=P[E];for(let U=0;U<C.length;U++)E=C[U],Object.prototype.hasOwnProperty.call(P,E)&&(d[E]=P[E])}}function j(d){var y=1;d=d.split(":");const E=[];for(;0<y&&d.length;)E.push(d.shift()),y--;return d.length&&E.push(d.join(":")),E}function D(d){l.setTimeout(()=>{throw d},0)}function R(){var d=L;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class K{constructor(){this.h=this.g=null}add(y,E){const P=q.get();P.set(y,E),this.h?this.h.next=P:this.g=P,this.h=P}}var q=new _(()=>new G,d=>d.reset());class G{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,V=!1,L=new K,$=()=>{const d=l.Promise.resolve(void 0);Q=()=>{d.then(ie)}};var ie=()=>{for(var d;d=R();){try{d.h.call(d.g)}catch(E){D(E)}var y=q;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}V=!1};function Z(){this.s=this.s,this.C=this.C}Z.prototype.s=!1,Z.prototype.ma=function(){this.s||(this.s=!0,this.N())},Z.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,y),l.removeEventListener("test",E,y)}catch{}return d}();function Oe(d,y){if(le.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,P=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(k){e:{try{I(y.nodeName);var F=!0;break e}catch{}F=!1}F||(y=null)}}else E=="mouseover"?y=d.fromElement:E=="mouseout"&&(y=d.toElement);this.relatedTarget=y,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:De[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Oe.aa.h.call(this)}}T(Oe,le);var De={2:"touch",3:"pen",4:"mouse"};Oe.prototype.h=function(){Oe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),Ce=0;function me(d,y,E,P,F){this.listener=d,this.proxy=null,this.src=y,this.type=E,this.capture=!!P,this.ha=F,this.key=++Ce,this.da=this.fa=!1}function _e(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Pe(d){this.src=d,this.g={},this.h=0}Pe.prototype.add=function(d,y,E,P,F){var U=d.toString();d=this.g[U],d||(d=this.g[U]=[],this.h++);var ee=He(d,y,P,F);return-1<ee?(y=d[ee],E||(y.fa=!1)):(y=new me(y,this.src,U,!!P,F),y.fa=E,d.push(y)),y};function ke(d,y){var E=y.type;if(E in d.g){var P=d.g[E],F=Array.prototype.indexOf.call(P,y,void 0),U;(U=0<=F)&&Array.prototype.splice.call(P,F,1),U&&(_e(y),d.g[E].length==0&&(delete d.g[E],d.h--))}}function He(d,y,E,P){for(var F=0;F<d.length;++F){var U=d[F];if(!U.da&&U.listener==y&&U.capture==!!E&&U.ha==P)return F}return-1}var Ft="closure_lm_"+(1e6*Math.random()|0),Hn={};function qn(d,y,E,P,F){if(Array.isArray(y)){for(var U=0;U<y.length;U++)qn(d,y[U],E,P,F);return null}return E=wi(E),d&&d[X]?d.K(y,E,u(P)?!!P.capture:!!P,F):Er(d,y,E,!1,P,F)}function Er(d,y,E,P,F,U){if(!y)throw Error("Invalid event type");var ee=u(F)?!!F.capture:!!F,nt=yn(d);if(nt||(d[Ft]=nt=new Pe(d)),E=nt.add(y,E,P,ee,U),E.proxy)return E;if(P=Fs(),E.proxy=P,P.src=d,P.listener=E,d.addEventListener)he||(F=ee),F===void 0&&(F=!1),d.addEventListener(y.toString(),P,F);else if(d.attachEvent)d.attachEvent(ts(y.toString()),P);else if(d.addListener&&d.removeListener)d.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Fs(){function d(E){return y.call(d.src,d.listener,E)}const y=ns;return d}function Tr(d,y,E,P,F){if(Array.isArray(y))for(var U=0;U<y.length;U++)Tr(d,y[U],E,P,F);else P=u(P)?!!P.capture:!!P,E=wi(E),d&&d[X]?(d=d.i,y=String(y).toString(),y in d.g&&(U=d.g[y],E=He(U,E,P,F),-1<E&&(_e(U[E]),Array.prototype.splice.call(U,E,1),U.length==0&&(delete d.g[y],d.h--)))):d&&(d=yn(d))&&(y=d.g[y.toString()],d=-1,y&&(d=He(y,E,P,F)),(E=-1<d?y[d]:null)&&xi(E))}function xi(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[X])ke(y.i,d);else{var E=d.type,P=d.proxy;y.removeEventListener?y.removeEventListener(E,P,d.capture):y.detachEvent?y.detachEvent(ts(E),P):y.addListener&&y.removeListener&&y.removeListener(P),(E=yn(y))?(ke(E,d),E.h==0&&(E.src=null,y[Ft]=null)):_e(d)}}}function ts(d){return d in Hn?Hn[d]:Hn[d]="on"+d}function ns(d,y){if(d.da)d=!0;else{y=new Oe(y,this);var E=d.listener,P=d.ha||d.src;d.fa&&xi(d),d=E.call(P,y)}return d}function yn(d){return d=d[Ft],d instanceof Pe?d:null}var Sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function wi(d){return typeof d=="function"?d:(d[Sr]||(d[Sr]=function(y){return d.handleEvent(y)}),d[Sr])}function $e(){Z.call(this),this.i=new Pe(this),this.M=this,this.F=null}T($e,Z),$e.prototype[X]=!0,$e.prototype.removeEventListener=function(d,y,E,P){Tr(this,d,y,E,P)};function ut(d,y){var E,P=d.F;if(P)for(E=[];P;P=P.F)E.push(P);if(d=d.M,P=y.type||y,typeof y=="string")y=new le(y,d);else if(y instanceof le)y.target=y.target||d;else{var F=y;y=new le(P,d),A(y,F)}if(F=!0,E)for(var U=E.length-1;0<=U;U--){var ee=y.g=E[U];F=Nr(ee,P,!0,y)&&F}if(ee=y.g=d,F=Nr(ee,P,!0,y)&&F,F=Nr(ee,P,!1,y)&&F,E)for(U=0;U<E.length;U++)ee=y.g=E[U],F=Nr(ee,P,!1,y)&&F}$e.prototype.N=function(){if($e.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var E=d.g[y],P=0;P<E.length;P++)_e(E[P]);delete d.g[y],d.h--}}this.F=null},$e.prototype.K=function(d,y,E,P){return this.i.add(String(d),y,!1,E,P)},$e.prototype.L=function(d,y,E,P){return this.i.add(String(d),y,!0,E,P)};function Nr(d,y,E,P){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var F=!0,U=0;U<y.length;++U){var ee=y[U];if(ee&&!ee.da&&ee.capture==E){var nt=ee.listener,qt=ee.ha||ee.src;ee.fa&&ke(d.i,ee),F=nt.call(qt,P)!==!1&&F}}return F&&!P.defaultPrevented}function Oo(d,y,E){if(typeof d=="function")E&&(d=m(d,E));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:l.setTimeout(d,y||0)}function ur(d){d.g=Oo(()=>{d.g=null,d.i&&(d.i=!1,ur(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class gc extends Z{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ur(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Kn(d){Z.call(this),this.h=d,this.g={}}T(Kn,Z);var rs=[];function Gn(d){O(d.g,function(y,E){this.g.hasOwnProperty(E)&&xi(y)},d),d.g={}}Kn.prototype.N=function(){Kn.aa.N.call(this),Gn(this)},Kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ss=l.JSON.stringify,dr=l.JSON.parse,yc=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function _i(){}_i.prototype.h=null;function is(d){return d.h||(d.h=d.i())}function Mo(){}var os={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Us(){le.call(this,"d")}T(Us,le);function Ht(){le.call(this,"c")}T(Ht,le);var vn={},ge=null;function je(){return ge=ge||new $e}vn.La="serverreachability";function ze(d){le.call(this,vn.La,d)}T(ze,le);function jt(d){const y=je();ut(y,new ze(y))}vn.STAT_EVENT="statevent";function It(d,y){le.call(this,vn.STAT_EVENT,d),this.stat=y}T(It,le);function Ze(d){const y=je();ut(y,new It(y,d))}vn.Ma="timingevent";function Qn(d,y){le.call(this,vn.Ma,d),this.size=y}T(Qn,le);function Dt(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},y)}function tn(){this.g=!0}tn.prototype.xa=function(){this.g=!1};function Nm(d,y,E,P,F,U){d.info(function(){if(d.g)if(U)for(var ee="",nt=U.split("&"),qt=0;qt<nt.length;qt++){var qe=nt[qt].split("=");if(1<qe.length){var nn=qe[0];qe=qe[1];var rn=nn.split("_");ee=2<=rn.length&&rn[1]=="type"?ee+(nn+"="+qe+"&"):ee+(nn+"=redacted&")}}else ee=null;else ee=U;return"XMLHTTP REQ ("+P+") [attempt "+F+"]: "+y+`
`+E+`
`+ee})}function Im(d,y,E,P,F,U,ee){d.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+F+"]: "+y+`
`+E+`
`+U+" "+ee})}function bi(d,y,E,P){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Am(d,E)+(P?" "+P:"")})}function Cm(d,y){d.info(function(){return"TIMEOUT: "+y})}tn.prototype.info=function(){};function Am(d,y){if(!d.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var P=E[d];if(!(2>P.length)){var F=P[1];if(Array.isArray(F)&&!(1>F.length)){var U=F[0];if(U!="noop"&&U!="stop"&&U!="close")for(var ee=1;ee<F.length;ee++)F[ee]=""}}}}return ss(E)}catch{return y}}var Lo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},M;function ne(){}T(ne,_i),ne.prototype.g=function(){return new XMLHttpRequest},ne.prototype.i=function(){return{}},M=new ne;function te(d,y,E,P){this.j=d,this.i=y,this.l=E,this.R=P||1,this.U=new Kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fe}function fe(){this.i=null,this.g="",this.h=!1}var we={},Le={};function pe(d,y,E){d.L=1,d.v=jd($s(y)),d.m=E,d.P=!0,Se(d,null)}function Se(d,y){d.F=Date.now(),Pd(d),d.A=$s(d.v);var E=d.A,P=d.R;Array.isArray(P)||(P=[String(P)]),zw(E.i,"t",P),d.C=0,E=d.j.J,d.h=new fe,d.g=a_(d.j,E?y:null,!d.m),0<d.O&&(d.M=new gc(m(d.Y,d,d.g),d.O)),y=d.U,E=d.g,P=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(rs[0]=F.toString()),F=rs);for(var U=0;U<F.length;U++){var ee=qn(E,F[U],P||y.handleEvent,!1,y.h||y);if(!ee)break;y.g[ee.key]=ee}y=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),jt(),Nm(d.i,d.u,d.A,d.l,d.R,d.m)}te.prototype.ca=function(d){d=d.target;const y=this.M;y&&Bs(d)==3?y.j():this.Y(d)},te.prototype.Y=function(d){try{if(d==this.g)e:{const rn=Bs(this.g);var y=this.g.Ba();const Oa=this.g.Z();if(!(3>rn)&&(rn!=3||this.g&&(this.h.h||this.g.oa()||Yw(this.g)))){this.J||rn!=4||y==7||(y==8||0>=Oa?jt(3):jt(2)),Pm(this);var E=this.g.Z();this.X=E;t:if(Et(this)){var P=Yw(this.g);d="";var F=P.length,U=Bs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vo(this),wc(this);var ee="";break t}this.h.i=new l.TextDecoder}for(y=0;y<F;y++)this.h.h=!0,d+=this.h.i.decode(P[y],{stream:!(U&&y==F-1)});P.length=0,this.h.g+=d,this.C=0,ee=this.h.g}else ee=this.g.oa();if(this.o=E==200,Im(this.i,this.u,this.A,this.l,this.R,rn,E),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,qt=this.g;if((nt=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(nt)){var qe=nt;break t}}qe=null}if(E=qe)bi(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rm(this,E);else{this.o=!1,this.s=3,Ze(12),Vo(this),wc(this);break e}}if(this.P){E=!0;let Ir;for(;!this.J&&this.C<ee.length;)if(Ir=xc(this,ee),Ir==Le){rn==4&&(this.s=4,Ze(14),E=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(Ir==we){this.s=4,Ze(15),bi(this.i,this.l,ee,"[Invalid Chunk]"),E=!1;break}else bi(this.i,this.l,Ir,null),Rm(this,Ir);if(Et(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||ee.length!=0||this.h.h||(this.s=1,Ze(16),E=!1),this.o=this.o&&E,!E)bi(this.i,this.l,ee,"[Invalid Chunked Response]"),Vo(this),wc(this);else if(0<ee.length&&!this.W){this.W=!0;var nn=this.j;nn.g==this&&nn.ba&&!nn.M&&(nn.j.info("Great, no buffering proxy detected. Bytes received: "+ee.length),Lm(nn),nn.M=!0,Ze(11))}}else bi(this.i,this.l,ee,null),Rm(this,ee);rn==4&&Vo(this),this.o&&!this.J&&(rn==4?r_(this.j,this):(this.o=!1,Pd(this)))}else Vj(this.g),E==400&&0<ee.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),Vo(this),wc(this)}}}catch{}finally{}};function Et(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function xc(d,y){var E=d.C,P=y.indexOf(`
`,E);return P==-1?Le:(E=Number(y.substring(E,P)),isNaN(E)?we:(P+=1,P+E>y.length?Le:(y=y.slice(P,P+E),d.C=P+E,y)))}te.prototype.cancel=function(){this.J=!0,Vo(this)};function Pd(d){d.S=Date.now()+d.I,Rw(d,d.I)}function Rw(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Dt(m(d.ba,d),y)}function Pm(d){d.B&&(l.clearTimeout(d.B),d.B=null)}te.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Cm(this.i,this.A),this.L!=2&&(jt(),Ze(17)),Vo(this),this.s=2,wc(this)):Rw(this,this.S-d)};function wc(d){d.j.G==0||d.J||r_(d.j,d)}function Vo(d){Pm(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,Gn(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Rm(d,y){try{var E=d.j;if(E.G!=0&&(E.g==d||km(E.h,d))){if(!d.K&&km(E.h,d)&&E.G==3){try{var P=E.Da.g.parse(y)}catch{P=null}if(Array.isArray(P)&&P.length==3){var F=P;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Fd(E),Ld(E);else break e;Mm(E),Ze(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=Dt(m(E.Za,E),6e3));if(1>=Dw(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Uo(E,11)}else if((d.K||E.g==d)&&Fd(E),!b(y))for(F=E.Da.g.parse(y),y=0;y<F.length;y++){let qe=F[y];if(E.T=qe[0],qe=qe[1],E.G==2)if(qe[0]=="c"){E.K=qe[1],E.ia=qe[2];const nn=qe[3];nn!=null&&(E.la=nn,E.j.info("VER="+E.la));const rn=qe[4];rn!=null&&(E.Aa=rn,E.j.info("SVER="+E.Aa));const Oa=qe[5];Oa!=null&&typeof Oa=="number"&&0<Oa&&(P=1.5*Oa,E.L=P,E.j.info("backChannelRequestTimeoutMs_="+P)),P=E;const Ir=d.g;if(Ir){const $d=Ir.g?Ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($d){var U=P.h;U.g||$d.indexOf("spdy")==-1&&$d.indexOf("quic")==-1&&$d.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(jm(U,U.h),U.h=null))}if(P.D){const Vm=Ir.g?Ir.g.getResponseHeader("X-HTTP-Session-Id"):null;Vm&&(P.ya=Vm,it(P.I,P.D,Vm))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),P=E;var ee=d;if(P.qa=o_(P,P.J?P.ia:null,P.W),ee.K){Ow(P.h,ee);var nt=ee,qt=P.L;qt&&(nt.I=qt),nt.B&&(Pm(nt),Pd(nt)),P.g=ee}else t_(P);0<E.i.length&&Vd(E)}else qe[0]!="stop"&&qe[0]!="close"||Uo(E,7);else E.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Uo(E,7):Om(E):qe[0]!="noop"&&E.l&&E.l.ta(qe),E.v=0)}}jt(4)}catch{}}var bj=class{constructor(d,y){this.g=d,this.map=y}};function kw(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function jw(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Dw(d){return d.h?1:d.g?d.g.size:0}function km(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function jm(d,y){d.g?d.g.add(y):d.h=y}function Ow(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}kw.prototype.cancel=function(){if(this.i=Mw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Mw(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const E of d.g.values())y=y.concat(E.D);return y}return v(d.i)}function Ej(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var y=[],E=d.length,P=0;P<E;P++)y.push(d[P]);return y}y=[],E=0;for(P in d)y[E++]=d[P];return y}function Tj(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var y=[];d=d.length;for(var E=0;E<d;E++)y.push(E);return y}y=[],E=0;for(const P in d)y[E++]=P;return y}}}function Lw(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var E=Tj(d),P=Ej(d),F=P.length,U=0;U<F;U++)y.call(void 0,P[U],E&&E[U],d)}var Vw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sj(d,y){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var P=d[E].indexOf("="),F=null;if(0<=P){var U=d[E].substring(0,P);F=d[E].substring(P+1)}else U=d[E];y(U,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Fo(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Fo){this.h=d.h,Rd(this,d.j),this.o=d.o,this.g=d.g,kd(this,d.s),this.l=d.l;var y=d.i,E=new Ec;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),Fw(this,E),this.m=d.m}else d&&(y=String(d).match(Vw))?(this.h=!1,Rd(this,y[1]||"",!0),this.o=_c(y[2]||""),this.g=_c(y[3]||"",!0),kd(this,y[4]),this.l=_c(y[5]||"",!0),Fw(this,y[6]||"",!0),this.m=_c(y[7]||"")):(this.h=!1,this.i=new Ec(null,this.h))}Fo.prototype.toString=function(){var d=[],y=this.j;y&&d.push(bc(y,Uw,!0),":");var E=this.g;return(E||y=="file")&&(d.push("//"),(y=this.o)&&d.push(bc(y,Uw,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(bc(E,E.charAt(0)=="/"?Cj:Ij,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",bc(E,Pj)),d.join("")};function $s(d){return new Fo(d)}function Rd(d,y,E){d.j=E?_c(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function kd(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Fw(d,y,E){y instanceof Ec?(d.i=y,Rj(d.i,d.h)):(E||(y=bc(y,Aj)),d.i=new Ec(y,d.h))}function it(d,y,E){d.i.set(y,E)}function jd(d){return it(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function _c(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function bc(d,y,E){return typeof d=="string"?(d=encodeURI(d).replace(y,Nj),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Nj(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Uw=/[#\/\?@]/g,Ij=/[#\?:]/g,Cj=/[#\?]/g,Aj=/[#\?@]/g,Pj=/#/g;function Ec(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Ei(d){d.g||(d.g=new Map,d.h=0,d.i&&Sj(d.i,function(y,E){d.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}t=Ec.prototype,t.add=function(d,y){Ei(this),this.i=null,d=ja(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(y),this.h+=1,this};function $w(d,y){Ei(d),y=ja(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function Bw(d,y){return Ei(d),y=ja(d,y),d.g.has(y)}t.forEach=function(d,y){Ei(this),this.g.forEach(function(E,P){E.forEach(function(F){d.call(y,F,P,this)},this)},this)},t.na=function(){Ei(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let P=0;P<y.length;P++){const F=d[P];for(let U=0;U<F.length;U++)E.push(y[P])}return E},t.V=function(d){Ei(this);let y=[];if(typeof d=="string")Bw(this,d)&&(y=y.concat(this.g.get(ja(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)y=y.concat(d[E])}return y},t.set=function(d,y){return Ei(this),this.i=null,d=ja(this,d),Bw(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function zw(d,y,E){$w(d,y),0<E.length&&(d.i=null,d.g.set(ja(d,y),v(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var P=y[E];const U=encodeURIComponent(String(P)),ee=this.V(P);for(P=0;P<ee.length;P++){var F=U;ee[P]!==""&&(F+="="+encodeURIComponent(String(ee[P]))),d.push(F)}}return this.i=d.join("&")};function ja(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function Rj(d,y){y&&!d.j&&(Ei(d),d.i=null,d.g.forEach(function(E,P){var F=P.toLowerCase();P!=F&&($w(this,P),zw(this,F,E))},d)),d.j=y}function kj(d,y){const E=new tn;if(l.Image){const P=new Image;P.onload=g(Ti,E,"TestLoadImage: loaded",!0,y,P),P.onerror=g(Ti,E,"TestLoadImage: error",!1,y,P),P.onabort=g(Ti,E,"TestLoadImage: abort",!1,y,P),P.ontimeout=g(Ti,E,"TestLoadImage: timeout",!1,y,P),l.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=d}else y(!1)}function jj(d,y){const E=new tn,P=new AbortController,F=setTimeout(()=>{P.abort(),Ti(E,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:P.signal}).then(U=>{clearTimeout(F),U.ok?Ti(E,"TestPingServer: ok",!0,y):Ti(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),Ti(E,"TestPingServer: error",!1,y)})}function Ti(d,y,E,P,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),P(E)}catch{}}function Dj(){this.g=new yc}function Oj(d,y,E){const P=E||"";try{Lw(d,function(F,U){let ee=F;u(F)&&(ee=ss(F)),y.push(P+U+"="+encodeURIComponent(ee))})}catch(F){throw y.push(P+"type="+encodeURIComponent("_badmap")),F}}function Dd(d){this.l=d.Ub||null,this.j=d.eb||!1}T(Dd,_i),Dd.prototype.g=function(){return new Od(this.l,this.j)},Dd.prototype.i=function(d){return function(){return d}}({});function Od(d,y){$e.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Od,$e),t=Od.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,Sc(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||l).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Tc(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Sc(this)),this.g&&(this.readyState=3,Sc(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ww(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ww(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Tc(this):Sc(this),this.readyState==3&&Ww(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Tc(this))},t.Qa=function(d){this.g&&(this.response=d,Tc(this))},t.ga=function(){this.g&&Tc(this)};function Tc(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Sc(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=y.next();return d.join(`\r
`)};function Sc(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Od.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Hw(d){let y="";return O(d,function(E,P){y+=P,y+=":",y+=E,y+=`\r
`}),y}function Dm(d,y,E){e:{for(P in E){var P=!1;break e}P=!0}P||(E=Hw(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):it(d,y,E))}function wt(d){$e.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(wt,$e);var Mj=/^https?$/i,Lj=["POST","PUT"];t=wt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,E,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():M.g(),this.v=this.o?is(this.o):is(M),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(U){qw(this,U);return}if(d=E||"",E=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var F in P)E.set(F,P[F]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const U of P.keys())E.set(U,P.get(U));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(E.keys()).find(U=>U.toLowerCase()=="content-type"),F=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Lj,y,void 0))||P||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,ee]of E)this.g.setRequestHeader(U,ee);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qw(this),this.u=!0,this.g.send(d),this.u=!1}catch(U){qw(this,U)}};function qw(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,Kw(d),Md(d)}function Kw(d){d.A||(d.A=!0,ut(d,"complete"),ut(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ut(this,"complete"),ut(this,"abort"),Md(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Md(this,!0)),wt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gw(this):this.bb())},t.bb=function(){Gw(this)};function Gw(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Bs(d)!=4||d.Z()!=2)){if(d.u&&Bs(d)==4)Oo(d.Ea,0,d);else if(ut(d,"readystatechange"),Bs(d)==4){d.h=!1;try{const ee=d.Z();e:switch(ee){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var P;if(P=ee===0){var F=String(d.D).match(Vw)[1]||null;!F&&l.self&&l.self.location&&(F=l.self.location.protocol.slice(0,-1)),P=!Mj.test(F?F.toLowerCase():"")}E=P}if(E)ut(d,"complete"),ut(d,"success");else{d.m=6;try{var U=2<Bs(d)?d.g.statusText:""}catch{U=""}d.l=U+" ["+d.Z()+"]",Kw(d)}}finally{Md(d)}}}}function Md(d,y){if(d.g){Qw(d);const E=d.g,P=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||ut(d,"ready");try{E.onreadystatechange=P}catch{}}}function Qw(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Bs(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Bs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),dr(y)}};function Yw(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Vj(d){const y={};d=(d.g&&2<=Bs(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<d.length;P++){if(b(d[P]))continue;var E=j(d[P]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const U=y[F]||[];y[F]=U,U.push(E)}N(y,function(P){return P.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nc(d,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||y}function Xw(d){this.Aa=0,this.i=[],this.j=new tn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Nc("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Nc("baseRetryDelayMs",5e3,d),this.cb=Nc("retryDelaySeedMs",1e4,d),this.Wa=Nc("forwardChannelMaxRetries",2,d),this.wa=Nc("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new kw(d&&d.concurrentRequestLimit),this.Da=new Dj,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Xw.prototype,t.la=8,t.G=1,t.connect=function(d,y,E,P){Ze(0),this.W=d,this.H=y||{},E&&P!==void 0&&(this.H.OSID=E,this.H.OAID=P),this.F=this.X,this.I=o_(this,null,this.W),Vd(this)};function Om(d){if(Jw(d),d.G==3){var y=d.U++,E=$s(d.I);if(it(E,"SID",d.K),it(E,"RID",y),it(E,"TYPE","terminate"),Ic(d,E),y=new te(d,d.j,y),y.L=2,y.v=jd($s(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&l.Image&&(new Image().src=y.v,E=!0),E||(y.g=a_(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Pd(y)}i_(d)}function Ld(d){d.g&&(Lm(d),d.g.cancel(),d.g=null)}function Jw(d){Ld(d),d.u&&(l.clearTimeout(d.u),d.u=null),Fd(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Vd(d){if(!jw(d.h)&&!d.s){d.s=!0;var y=d.Ga;Q||$(),V||(Q(),V=!0),L.add(y,d),d.B=0}}function Fj(d,y){return Dw(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Dt(m(d.Ga,d,y),s_(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new te(this,this.j,d);let U=this.o;if(this.S&&(U?(U=S(U),A(U,this.S)):U=this.S),this.m!==null||this.O||(F.H=U,U=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var P=this.i[E];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(y+=P,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=e_(this,F,y),E=$s(this.I),it(E,"RID",d),it(E,"CVER",22),this.D&&it(E,"X-HTTP-Session-Id",this.D),Ic(this,E),U&&(this.O?y="headers="+encodeURIComponent(String(Hw(U)))+"&"+y:this.m&&Dm(E,this.m,U)),jm(this.h,F),this.Ua&&it(E,"TYPE","init"),this.P?(it(E,"$req",y),it(E,"SID","null"),F.T=!0,pe(F,E,null)):pe(F,E,y),this.G=2}}else this.G==3&&(d?Zw(this,d):this.i.length==0||jw(this.h)||Zw(this))};function Zw(d,y){var E;y?E=y.l:E=d.U++;const P=$s(d.I);it(P,"SID",d.K),it(P,"RID",E),it(P,"AID",d.T),Ic(d,P),d.m&&d.o&&Dm(P,d.m,d.o),E=new te(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),y&&(d.i=y.D.concat(d.i)),y=e_(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),jm(d.h,E),pe(E,P,y)}function Ic(d,y){d.H&&O(d.H,function(E,P){it(y,P,E)}),d.l&&Lw({},function(E,P){it(y,P,E)})}function e_(d,y,E){E=Math.min(d.i.length,E);var P=d.l?m(d.l.Na,d.l,d):null;e:{var F=d.i;let U=-1;for(;;){const ee=["count="+E];U==-1?0<E?(U=F[0].g,ee.push("ofs="+U)):U=0:ee.push("ofs="+U);let nt=!0;for(let qt=0;qt<E;qt++){let qe=F[qt].g;const nn=F[qt].map;if(qe-=U,0>qe)U=Math.max(0,F[qt].g-100),nt=!1;else try{Oj(nn,ee,"req"+qe+"_")}catch{P&&P(nn)}}if(nt){P=ee.join("&");break e}}}return d=d.i.splice(0,E),y.D=d,P}function t_(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;Q||$(),V||(Q(),V=!0),L.add(y,d),d.v=0}}function Mm(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Dt(m(d.Fa,d),s_(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,n_(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Dt(m(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),Ld(this),n_(this))};function Lm(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function n_(d){d.g=new te(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=$s(d.qa);it(y,"RID","rpc"),it(y,"SID",d.K),it(y,"AID",d.T),it(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&it(y,"TO",d.ja),it(y,"TYPE","xmlhttp"),Ic(d,y),d.m&&d.o&&Dm(y,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=jd($s(y)),E.m=null,E.P=!0,Se(E,d)}t.Za=function(){this.C!=null&&(this.C=null,Ld(this),Mm(this),Ze(19))};function Fd(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function r_(d,y){var E=null;if(d.g==y){Fd(d),Lm(d),d.g=null;var P=2}else if(km(d.h,y))E=y.D,Ow(d.h,y),P=1;else return;if(d.G!=0){if(y.o)if(P==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var F=d.B;P=je(),ut(P,new Qn(P,E)),Vd(d)}else t_(d);else if(F=y.s,F==3||F==0&&0<y.X||!(P==1&&Fj(d,y)||P==2&&Mm(d)))switch(E&&0<E.length&&(y=d.h,y.i=y.i.concat(E)),F){case 1:Uo(d,5);break;case 4:Uo(d,10);break;case 3:Uo(d,6);break;default:Uo(d,2)}}}function s_(d,y){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*y}function Uo(d,y){if(d.j.info("Error code "+y),y==2){var E=m(d.fb,d),P=d.Xa;const F=!P;P=new Fo(P||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Rd(P,"https"),jd(P),F?kj(P.toString(),E):jj(P.toString(),E)}else Ze(2);d.G=0,d.l&&d.l.sa(y),i_(d),Jw(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function i_(d){if(d.G=0,d.ka=[],d.l){const y=Mw(d.h);(y.length!=0||d.i.length!=0)&&(x(d.ka,y),x(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function o_(d,y,E){var P=E instanceof Fo?$s(E):new Fo(E);if(P.g!="")y&&(P.g=y+"."+P.g),kd(P,P.s);else{var F=l.location;P=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;var U=new Fo(null);P&&Rd(U,P),y&&(U.g=y),F&&kd(U,F),E&&(U.l=E),P=U}return E=d.D,y=d.ya,E&&y&&it(P,E,y),it(P,"VER",d.la),Ic(d,P),P}function a_(d,y,E){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new wt(new Dd({eb:E})):new wt(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function l_(){}t=l_.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ud(){}Ud.prototype.g=function(d,y){return new Yn(d,y)};function Yn(d,y){$e.call(this),this.g=new Xw(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!b(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!b(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Da(this)}T(Yn,$e),Yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yn.prototype.close=function(){Om(this.g)},Yn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=ss(d),d=E);y.i.push(new bj(y.Ya++,d)),y.G==3&&Vd(y)},Yn.prototype.N=function(){this.g.l=null,delete this.j,Om(this.g),delete this.g,Yn.aa.N.call(this)};function c_(d){Us.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const E in y){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}T(c_,Us);function u_(){Ht.call(this),this.status=1}T(u_,Ht);function Da(d){this.g=d}T(Da,l_),Da.prototype.ua=function(){ut(this.g,"a")},Da.prototype.ta=function(d){ut(this.g,new c_(d))},Da.prototype.sa=function(d){ut(this.g,new u_)},Da.prototype.ra=function(){ut(this.g,"b")},Ud.prototype.createWebChannel=Ud.prototype.g,Yn.prototype.send=Yn.prototype.o,Yn.prototype.open=Yn.prototype.m,Yn.prototype.close=Yn.prototype.close,IA=function(){return new Ud},NA=function(){return je()},SA=vn,dv={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lo.NO_ERROR=0,Lo.TIMEOUT=8,Lo.HTTP_ERROR=6,$h=Lo,vc.COMPLETE="complete",TA=vc,Mo.EventType=os,os.OPEN="a",os.CLOSE="b",os.ERROR="c",os.MESSAGE="d",$e.prototype.listen=$e.prototype.K,Hc=Mo,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,EA=wt}).apply(typeof hh<"u"?hh:typeof self<"u"?self:typeof window<"u"?window:{});const $b="@firebase/firestore",Bb="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa=new Mp("@firebase/firestore");function Ua(){return pa.logLevel}function oe(t,...e){if(pa.logLevel<=Ve.DEBUG){const n=e.map(_x);pa.debug(`Firestore (${lc}): ${t}`,...n)}}function fi(t,...e){if(pa.logLevel<=Ve.ERROR){const n=e.map(_x);pa.error(`Firestore (${lc}): ${t}`,...n)}}function ma(t,...e){if(pa.logLevel<=Ve.WARN){const n=e.map(_x);pa.warn(`Firestore (${lc}): ${t}`,...n)}}function _x(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,CA(t,r,n)}function CA(t,e,n){let r=`FIRESTORE (${lc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fi(r),new Error(r)}function Xe(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||CA(e,s,r)}function Ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends br{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dn.UNAUTHENTICATED))}shutdown(){}}class n9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class r9{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Xe(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new ni;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ni,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ni)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string",31837,{l:r}),new AA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string",2055,{h:e}),new dn(e)}}class s9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new s9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class o9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Xe(this.o===void 0,3512);const r=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=a9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function hv(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Pg(s)===Pg(i)?Fe(s,i):Pg(s)?1:-1}return Fe(t.length,e.length)}const l9=55296,c9=57343;function Pg(t){const e=t.charCodeAt(0);return e>=l9&&e<=c9}function zl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="__name__";class cs{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ve(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return cs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof cs?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=cs.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return Fe(e.length,n.length)}static compareSegments(e,n){const r=cs.isNumericId(e),s=cs.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?cs.extractNumericId(e).compare(cs.extractNumericId(n)):hv(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ao.fromString(e.substring(4,e.length-2))}}class rt extends cs{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const u9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends cs{construct(e,n,r){return new Bt(e,n,r)}static isValidIdentifier(e){return u9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wb}static keyField(){return new Bt([Wb])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new se(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new se(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new se(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new se(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(rt.fromString(e))}static fromName(e){return new ue(rt.fromString(e).popFirst(5))}static empty(){return new ue(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new rt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t,e,n){if(!n)throw new se(B.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function kA(t,e,n,r){if(e===!0&&r===!0)throw new se(B.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Hb(t){if(!ue.isDocumentKey(t))throw new se(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qb(t){if(ue.isDocumentKey(t))throw new se(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $p(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve(12329,{type:typeof t})}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$p(t);throw new se(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function d9(t,e){if(e<=0)throw new se(B.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function gd(t,e){if(!jA(t))throw new se(B.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new se(B.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb=-62135596800,Gb=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Gb);return new et(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Kb)throw new se(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Gb}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(gd(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Kb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:Rt("string",et._jsonSchemaVersion),seconds:Rt("number"),nanoseconds:Rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new et(0,0))}static max(){return new Ee(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu=-1;function h9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new go(s,ue.empty(),e)}function f9(t){return new go(t.readTime,t.key,zu)}class go{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new go(Ee.min(),ue.empty(),zu)}static max(){return new go(Ee.max(),ue.empty(),zu)}}function p9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cc(t){if(t.code!==B.FAILED_PRECONDITION||t.message!==m9)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(s=>s?H.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new H((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new H((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function y9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function uc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bp.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=-1;function zp(t){return t==null}function Mf(t){return t===0&&1/t==-1/0}function v9(t){return typeof t=="number"&&Number.isInteger(t)&&!Mf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="";function x9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qb(e)),e=w9(t.get(n),e);return Qb(e)}function w9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case DA:n+="";break;default:n+=i}}return n}function Qb(t){return t+DA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ro(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new xt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new xt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fh(this.root,e,this.comparator,!1)}getReverseIterator(){return new fh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fh(this.root,e,this.comparator,!0)}}class fh{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=s??Gt.EMPTY,this.right=i??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Gt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ve(27949);return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve(57766)}get value(){throw ve(16141)}get color(){throw ve(16727)}get left(){throw ve(29726)}get right(){throw ve(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xb(this.data.getIterator())}getIteratorFrom(e){return new Xb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Vt(this.comparator);return n.data=e,n}}class Xb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new tr([])}unionWith(e){let n=new Vt(Bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new tr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new MA("Invalid base64 string: "+i):i}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const _9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yo(t){if(Xe(!!t,39018),typeof t=="string"){let e=0;const n=_9.exec(t);if(Xe(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vo(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA="server_timestamp",VA="__type__",FA="__previous_value__",UA="__local_write_time__";function Ex(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[VA])==null?void 0:r.stringValue)===LA}function Wp(t){const e=t.mapValue.fields[FA];return Ex(e)?Wp(e):e}function Wu(t){const e=yo(t.mapValue.fields[UA].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n,r,s,i,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Lf="(default)";class Wl{constructor(e,n){this.projectId=e,this.database=n||Lf}static empty(){return new Wl("","")}get isDefaultDatabase(){return this.database===Lf}isEqual(e){return e instanceof Wl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="__type__",BA="__max__",ph={mapValue:{fields:{__type__:{stringValue:BA}}}},zA="__vector__",Vf="value";function xo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ex(t)?4:T9(t)?9007199254740991:E9(t)?10:11:ve(28295,{value:t})}function Ps(t,e){if(t===e)return!0;const n=xo(t);if(n!==xo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wu(t).isEqual(Wu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=yo(s.timestampValue),l=yo(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vo(s.bytesValue).isEqual(vo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Tt(s.geoPointValue.latitude)===Tt(i.geoPointValue.latitude)&&Tt(s.geoPointValue.longitude)===Tt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Tt(s.integerValue)===Tt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Tt(s.doubleValue),l=Tt(i.doubleValue);return o===l?Mf(o)===Mf(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return zl(t.arrayValue.values||[],e.arrayValue.values||[],Ps);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Yb(o)!==Yb(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Ps(o[c],l[c])))return!1;return!0}(t,e);default:return ve(52216,{left:t})}}function Hu(t,e){return(t.values||[]).find(n=>Ps(n,e))!==void 0}function Hl(t,e){if(t===e)return 0;const n=xo(t),r=xo(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Tt(i.integerValue||i.doubleValue),c=Tt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Jb(t.timestampValue,e.timestampValue);case 4:return Jb(Wu(t),Wu(e));case 5:return hv(t.stringValue,e.stringValue);case 6:return function(i,o){const l=vo(i),c=vo(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Fe(l[u],c[u]);if(h!==0)return h}return Fe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=Fe(Tt(i.latitude),Tt(o.latitude));return l!==0?l:Fe(Tt(i.longitude),Tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zb(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,g,T,v;const l=i.fields||{},c=o.fields||{},u=(m=l[Vf])==null?void 0:m.arrayValue,h=(g=c[Vf])==null?void 0:g.arrayValue,f=Fe(((T=u==null?void 0:u.values)==null?void 0:T.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:Zb(u,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ph.mapValue&&o===ph.mapValue)return 0;if(i===ph.mapValue)return 1;if(o===ph.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=hv(c[f],h[f]);if(m!==0)return m;const g=Hl(l[c[f]],u[h[f]]);if(g!==0)return g}return Fe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ve(23264,{he:n})}}function Jb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=yo(t),r=yo(e),s=Fe(n.seconds,r.seconds);return s!==0?s:Fe(n.nanos,r.nanos)}function Zb(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Hl(n[s],r[s]);if(i)return i}return Fe(n.length,r.length)}function ql(t){return fv(t)}function fv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=yo(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=fv(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${fv(n.fields[o])}`;return s+"}"}(t.mapValue):ve(61005,{value:t})}function Bh(t){switch(xo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wp(t);return e?16+Bh(e):16;case 5:return 2*t.stringValue.length;case 6:return vo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Bh(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ro(r.fields,(i,o)=>{s+=i.length+Bh(o)}),s}(t.mapValue);default:throw ve(13486,{value:t})}}function eE(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pv(t){return!!t&&"integerValue"in t}function Tx(t){return!!t&&"arrayValue"in t}function tE(t){return!!t&&"nullValue"in t}function nE(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zh(t){return!!t&&"mapValue"in t}function E9(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[$A])==null?void 0:r.stringValue)===zA}function uu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ro(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uu(t.arrayValue.values[n]);return e}return{...t}}function T9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!zh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uu(n)}setAll(e){let n=Bt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=uu(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());zh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ps(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];zh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ro(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ln(uu(this.value))}}function WA(t){const e=[];return Ro(t.fields,(n,r)=>{const s=new Bt([n]);if(zh(r)){const i=WA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new tr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new fn(e,0,Ee.min(),Ee.min(),Ee.min(),Ln.empty(),0)}static newFoundDocument(e,n,r,s){return new fn(e,1,n,Ee.min(),r,s,0)}static newNoDocument(e,n){return new fn(e,2,n,Ee.min(),Ee.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new fn(e,3,n,Ee.min(),Ee.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n){this.position=e,this.inclusive=n}}function rE(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ue.comparator(ue.fromName(o.referenceValue),n.key):r=Hl(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function sE(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ps(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n="asc"){this.field=e,this.dir=n}}function S9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{}class Pt extends HA{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new I9(e,n,r):n==="array-contains"?new P9(e,r):n==="in"?new R9(e,r):n==="not-in"?new k9(e,r):n==="array-contains-any"?new j9(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C9(e,r):new A9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hl(n,this.value)):n!==null&&xo(this.value)===xo(n)&&this.matchesComparison(Hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xr extends HA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Xr(e,n)}matches(e){return qA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qA(t){return t.op==="and"}function KA(t){return N9(t)&&qA(t)}function N9(t){for(const e of t.filters)if(e instanceof Xr)return!1;return!0}function mv(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+ql(t.value);if(KA(t))return t.filters.map(e=>mv(e)).join(",");{const e=t.filters.map(n=>mv(n)).join(",");return`${t.op}(${e})`}}function GA(t,e){return t instanceof Pt?function(r,s){return s instanceof Pt&&r.op===s.op&&r.field.isEqual(s.field)&&Ps(r.value,s.value)}(t,e):t instanceof Xr?function(r,s){return s instanceof Xr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&GA(o,s.filters[l]),!0):!1}(t,e):void ve(19439)}function QA(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${ql(n.value)}`}(t):t instanceof Xr?function(n){return n.op.toString()+" {"+n.getFilters().map(QA).join(" ,")+"}"}(t):"Filter"}class I9 extends Pt{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class C9 extends Pt{constructor(e,n){super(e,"in",n),this.keys=YA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class A9 extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=YA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function YA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class P9 extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Tx(n)&&Hu(n.arrayValue,this.value)}}class R9 extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Hu(this.value.arrayValue,n)}}class k9 extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Hu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Hu(this.value.arrayValue,n)}}class j9 extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Tx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Hu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function iE(t,e=null,n=[],r=[],s=null,i=null,o=null){return new D9(t,e,n,r,s,i,o)}function Sx(t){const e=Ne(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>mv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),zp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ql(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ql(r)).join(",")),e.Te=n}return e.Te}function Nx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!S9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sE(t.startAt,e.startAt)&&sE(t.endAt,e.endAt)}function gv(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function O9(t,e,n,r,s,i,o,l){return new dc(t,e,n,r,s,i,o,l)}function Hp(t){return new dc(t)}function oE(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function XA(t){return t.collectionGroup!==null}function du(t){const e=Ne(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Vt(Bt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new qu(i,r))}),n.has(Bt.keyField().canonicalString())||e.Ie.push(new qu(Bt.keyField(),r))}return e.Ie}function Ns(t){const e=Ne(t);return e.Ee||(e.Ee=M9(e,du(t))),e.Ee}function M9(t,e){if(t.limitType==="F")return iE(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new qu(s.field,i)});const n=t.endAt?new Ff(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ff(t.startAt.position,t.startAt.inclusive):null;return iE(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yv(t,e){const n=t.filters.concat([e]);return new dc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Uf(t,e,n){return new dc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qp(t,e){return Nx(Ns(t),Ns(e))&&t.limitType===e.limitType}function JA(t){return`${Sx(Ns(t))}|lt:${t.limitType}`}function $a(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>QA(s)).join(", ")}]`),zp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ql(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ql(s)).join(",")),`Target(${r})`}(Ns(t))}; limitType=${t.limitType})`}function Kp(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ue.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of du(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=rE(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,du(r),s)||r.endAt&&!function(o,l,c){const u=rE(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,du(r),s))}(t,e)}function L9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZA(t){return(e,n)=>{let r=!1;for(const s of du(t)){const i=V9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function V9(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Hl(c,u):ve(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ro(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return OA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9=new xt(ue.comparator);function pi(){return F9}const eP=new xt(ue.comparator);function qc(...t){let e=eP;for(const n of t)e=e.insert(n.key,n);return e}function tP(t){let e=eP;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ko(){return hu()}function nP(){return hu()}function hu(){return new Aa(t=>t.toString(),(t,e)=>t.isEqual(e))}const U9=new xt(ue.comparator),$9=new Vt(ue.comparator);function Ue(...t){let e=$9;for(const n of t)e=e.add(n);return e}const B9=new Vt(Fe);function z9(){return B9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mf(e)?"-0":e}}function rP(t){return{integerValue:""+t}}function W9(t,e){return v9(e)?rP(e):Ix(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this._=void 0}}function H9(t,e,n){return t instanceof Ku?function(s,i){const o={fields:{[VA]:{stringValue:LA},[UA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ex(i)&&(i=Wp(i)),i&&(o.fields[FA]=i),{mapValue:o}}(n,e):t instanceof Gu?iP(t,e):t instanceof Qu?oP(t,e):function(s,i){const o=sP(s,i),l=aE(o)+aE(s.Ae);return pv(o)&&pv(s.Ae)?rP(l):Ix(s.serializer,l)}(t,e)}function q9(t,e,n){return t instanceof Gu?iP(t,e):t instanceof Qu?oP(t,e):n}function sP(t,e){return t instanceof $f?function(r){return pv(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ku extends Gp{}class Gu extends Gp{constructor(e){super(),this.elements=e}}function iP(t,e){const n=aP(e);for(const r of t.elements)n.some(s=>Ps(s,r))||n.push(r);return{arrayValue:{values:n}}}class Qu extends Gp{constructor(e){super(),this.elements=e}}function oP(t,e){let n=aP(e);for(const r of t.elements)n=n.filter(s=>!Ps(s,r));return{arrayValue:{values:n}}}class $f extends Gp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function aE(t){return Tt(t.integerValue||t.doubleValue)}function aP(t){return Tx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,n){this.field=e,this.transform=n}}function G9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Gu&&s instanceof Gu||r instanceof Qu&&s instanceof Qu?zl(r.elements,s.elements,Ps):r instanceof $f&&s instanceof $f?Ps(r.Ae,s.Ae):r instanceof Ku&&s instanceof Ku}(t.transform,e.transform)}class Q9{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qp{}function lP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Cx(t.key,yr.none()):new yd(t.key,t.data,yr.none());{const n=t.data,r=Ln.empty();let s=new Vt(Bt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ko(t.key,r,new tr(s.toArray()),yr.none())}}function Y9(t,e,n){t instanceof yd?function(s,i,o){const l=s.value.clone(),c=cE(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ko?function(s,i,o){if(!Wh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=cE(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(cP(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fu(t,e,n,r){return t instanceof yd?function(i,o,l,c){if(!Wh(i.precondition,o))return l;const u=i.value.clone(),h=uE(i.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ko?function(i,o,l,c){if(!Wh(i.precondition,o))return l;const u=uE(i.fieldTransforms,c,o),h=o.data;return h.setAll(cP(i)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return Wh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function X9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=sP(r.transform,s||null);i!=null&&(n===null&&(n=Ln.empty()),n.set(r.field,i))}return n||null}function lE(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zl(r,s,(i,o)=>G9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class yd extends Qp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ko extends Qp{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function cP(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cE(t,e,n){const r=new Map;Xe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,q9(o,l,n[s]))}return r}function uE(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,H9(i,o,e))}return r}class Cx extends Qp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J9 extends Qp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Y9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nP();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=lP(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&zl(this.mutations,e.mutations,(n,r)=>lE(n,r))&&zl(this.baseMutations,e.baseMutations,(n,r)=>lE(n,r))}}class Ax{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Xe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return U9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Ax(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eB=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tB{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Be;function nB(t){switch(t){case B.OK:return ve(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return ve(15467,{code:t})}}function uP(t){if(t===void 0)return fi("GRPC error has no .code"),B.UNKNOWN;switch(t){case Ct.OK:return B.OK;case Ct.CANCELLED:return B.CANCELLED;case Ct.UNKNOWN:return B.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return B.INTERNAL;case Ct.UNAVAILABLE:return B.UNAVAILABLE;case Ct.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ct.NOT_FOUND:return B.NOT_FOUND;case Ct.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ct.ABORTED:return B.ABORTED;case Ct.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ct.DATA_LOSS:return B.DATA_LOSS;default:return ve(39323,{code:t})}}(Be=Ct||(Ct={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rB(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=new ao([4294967295,4294967295],0);function dE(t){const e=rB().encode(t),n=new bA;return n.update(e),new Uint8Array(n.digest())}function hE(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ao([n,r],0),new ao([s,i],0)]}class Px{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Kc(`Invalid padding: ${n}`);if(r<0)throw new Kc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Kc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Kc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ao.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ao.fromNumber(r)));return s.compare(sB)===1&&(s=new ao([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=dE(e),[r,s]=hE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Px(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=dE(e),[r,s]=hE(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yp(Ee.min(),s,new xt(Fe),pi(),Ue())}}class vd{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new vd(r,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class dP{constructor(e,n){this.targetId=e,this.Ce=n}}class hP{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class fE{constructor(){this.ve=0,this.Fe=pE(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),n=Ue(),r=Ue();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ve(38017,{changeType:i})}}),new vd(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=pE()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Xe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class iB{constructor(e){this.Ge=e,this.ze=new Map,this.je=pi(),this.Je=mh(),this.He=mh(),this.Ye=new xt(Fe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ve(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(gv(i))if(r===0){const o=new ue(i.path);this.et(n,o,fn.newNoDocument(o,Ee.min()))}else Xe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=vo(r).toUint8Array()}catch(c){if(c instanceof MA)return ma("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Px(o,s,i)}catch(c){return ma(c instanceof Kc?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&gv(l.target)){const c=new ue(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,fn.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ue();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Yp(e,n,this.Ye,this.je,r);return this.je=pi(),this.Je=mh(),this.He=mh(),this.Ye=new xt(Fe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new fE,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Vt(Fe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Vt(Fe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fE),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function mh(){return new xt(ue.comparator)}function pE(){return new xt(ue.comparator)}const oB={asc:"ASCENDING",desc:"DESCENDING"},aB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lB={and:"AND",or:"OR"};class cB{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vv(t,e){return t.useProto3Json||zp(e)?e:{value:e}}function Bf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function uB(t,e){return Bf(t,e.toTimestamp())}function Is(t){return Xe(!!t,49232),Ee.fromTimestamp(function(n){const r=yo(n);return new et(r.seconds,r.nanos)}(t))}function Rx(t,e){return xv(t,e).canonicalString()}function xv(t,e){const n=function(s){return new rt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pP(t){const e=rt.fromString(t);return Xe(xP(e),10190,{key:e.toString()}),e}function wv(t,e){return Rx(t.databaseId,e.path)}function Rg(t,e){const n=pP(e);if(n.get(1)!==t.databaseId.projectId)throw new se(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(gP(n))}function mP(t,e){return Rx(t.databaseId,e)}function dB(t){const e=pP(t);return e.length===4?rt.emptyPath():gP(e)}function _v(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gP(t){return Xe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function mE(t,e,n){return{name:wv(t,e),fields:n.value.mapValue.fields}}function hB(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ve(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Xe(h===void 0||typeof h=="string",58123),Wt.fromBase64String(h||"")):(Xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Wt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?B.UNKNOWN:uP(u.code);return new se(h,u.message||"")}(o);n=new hP(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Rg(t,r.document.name),i=Is(r.document.updateTime),o=r.document.createTime?Is(r.document.createTime):Ee.min(),l=new Ln({mapValue:{fields:r.document.fields}}),c=fn.newFoundDocument(s,i,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Hh(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Rg(t,r.document),i=r.readTime?Is(r.readTime):Ee.min(),o=fn.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Hh([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Rg(t,r.document),i=r.removedTargetIds||[];n=new Hh([],i,s,null)}else{if(!("filter"in e))return ve(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new tB(s,i),l=r.targetId;n=new dP(l,o)}}return n}function fB(t,e){let n;if(e instanceof yd)n={update:mE(t,e.key,e.value)};else if(e instanceof Cx)n={delete:wv(t,e.key)};else if(e instanceof ko)n={update:mE(t,e.key,e.data),updateMask:bB(e.fieldMask)};else{if(!(e instanceof J9))return ve(16599,{Vt:e.type});n={verify:wv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Ku)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Gu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Qu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof $f)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ve(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:uB(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ve(27497)}(t,e.precondition)),n}function pB(t,e){return t&&t.length>0?(Xe(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Is(s.updateTime):Is(i);return o.isEqual(Ee.min())&&(o=Is(i)),new Q9(o,s.transformResults||[])}(n,e))):[]}function mB(t,e){return{documents:[mP(t,e.path)]}}function gB(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mP(t,s);const i=function(u){if(u.length!==0)return vP(Xr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:Ba(m.field),direction:xB(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=vv(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function yB(t){let e=dB(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Xe(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=yP(f);return m instanceof Xr&&KA(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(T){return new qu(za(T.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,zp(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,g=f.values||[];return new Ff(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const m=!f.before,g=f.values||[];return new Ff(g,m)}(n.endAt)),O9(e,s,o,i,l,"F",c,u)}function vB(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=za(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=za(n.unaryFilter.field);return Pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=za(n.unaryFilter.field);return Pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=za(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ve(61313);default:return ve(60726)}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(za(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ve(58110);default:return ve(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Xr.create(n.compositeFilter.filters.map(r=>yP(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve(1026)}}(n.compositeFilter.op))}(t):ve(30097,{filter:t})}function xB(t){return oB[t]}function wB(t){return aB[t]}function _B(t){return lB[t]}function Ba(t){return{fieldPath:t.canonicalString()}}function za(t){return Bt.fromServerFormat(t.fieldPath)}function vP(t){return t instanceof Pt?function(n){if(n.op==="=="){if(nE(n.value))return{unaryFilter:{field:Ba(n.field),op:"IS_NAN"}};if(tE(n.value))return{unaryFilter:{field:Ba(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nE(n.value))return{unaryFilter:{field:Ba(n.field),op:"IS_NOT_NAN"}};if(tE(n.value))return{unaryFilter:{field:Ba(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ba(n.field),op:wB(n.op),value:n.value}}}(t):t instanceof Xr?function(n){const r=n.getFilters().map(s=>vP(s));return r.length===1?r[0]:{compositeFilter:{op:_B(n.op),filters:r}}}(t):ve(54877,{filter:t})}function bB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function xP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n,r,s,i=Ee.min(),o=Ee.min(),l=Wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e){this.yt=e}}function TB(t){const e=yB({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SB{constructor(){this.Cn=new NB}addToCollectionParentIndex(e,n){return this.Cn.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(go.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(go.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class NB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Vt(rt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Vt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wP=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(wP,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Kl(0)}static cr(){return new Kl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE="LruGarbageCollector",IB=1048576;function vE([t,e],[n,r]){const s=Fe(t,n);return s===0?Fe(e,r):s}class CB{constructor(e){this.Ir=e,this.buffer=new Vt(vE),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class AB{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(yE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){uc(n)?oe(yE,"Ignoring IndexedDB error during garbage collection: ",n):await cc(n)}await this.Vr(3e5)})}}class PB{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return H.resolve(Bp.ce);const r=new CB(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(gE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gE):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Ua()<=Ve.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function RB(t,e){return new PB(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kB{constructor(){this.changes=new Aa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DB{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fu(r.mutation,s,tr.empty(),et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ue()){const s=Ko();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=qc();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ko();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=pi();const o=hu(),l=function(){return hu()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof ko)?i=i.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),fu(h.mutation,u,h.mutation.getFieldMask(),et.now())):o.set(u.key,tr.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new jB(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=hu();let s=new xt((o,l)=>o-l),i=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||tr.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Ue()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=nP();h.forEach(m=>{if(!i.has(m)){const g=lP(n.get(m),r.get(m));g!==null&&f.set(m,g),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return ue.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):XA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):H.resolve(Ko());let l=zu,c=i;return o.next(u=>H.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,Ue())).next(h=>({batchId:l,changes:tP(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let s=qc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=qc();return this.indexManager.getCollectionParents(e,i).next(l=>H.forEach(l,c=>{const u=function(f,m){return new dc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,fn.newInvalidDocument(h)))});let l=qc();return o.forEach((c,u)=>{const h=i.get(c);h!==void 0&&fu(h.mutation,u,tr.empty(),et.now()),Kp(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OB{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return H.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Is(s.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:TB(s.bundledQuery),readTime:Is(s.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MB{constructor(){this.overlays=new xt(ue.comparator),this.qr=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ko();return H.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const s=Ko(),i=n.length+1,o=new ue(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return H.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new xt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=i.get(u.largestBatchId);h===null&&(h=Ko(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Ko(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return H.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new eB(n,r));let i=this.qr.get(n);i===void 0&&(i=Ue(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LB{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.Qr=new Vt(Ut.$r),this.Ur=new Vt(Ut.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ut(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ut(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ue(new rt([])),r=new Ut(n,e),s=new Ut(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ue(new rt([])),r=new Ut(n,e),s=new Ut(n,e+1);let i=Ue();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ut(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ut{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ue.comparator(e.key,n.key)||Fe(e.Yr,n.Yr)}static Kr(e,n){return Fe(e.Yr,n.Yr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Vt(Ut.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Z9(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Ut(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return H.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?bx:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ut(n,0),s=new Ut(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),H.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Vt(Fe);return n.forEach(s=>{const i=new Ut(s,0),o=new Ut(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),H.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ue.isDocumentKey(i)||(i=i.child(""));const o=new Ut(new ue(i),0);let l=new Vt(Fe);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),H.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Xe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return H.forEach(n.mutations,s=>{const i=new Ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ut(n,0),s=this.Zr.firstAfterOrEqual(r);return H.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FB{constructor(e){this.ri=e,this.docs=function(){return new xt(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(n))}getEntries(e,n){let r=pi();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():fn.newInvalidDocument(s))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=pi();const o=n.path,l=new ue(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||p9(f9(h),r)<=0||(s.has(h.key)||Kp(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return H.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ve(9500)}ii(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new UB(this)}getSize(e){return H.resolve(this.size)}}class UB extends kB{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(e){this.persistence=e,this.si=new Aa(n=>Sx(n),Nx),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.oi=0,this._i=new kx,this.targetCount=0,this.ai=Kl.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),H.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Kl(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Pr(n),H.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),H.waitFor(i).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),H.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n){this.ui={},this.overlays={},this.ci=new Bp(0),this.li=!1,this.li=!0,this.hi=new LB,this.referenceDelegate=e(this),this.Pi=new $B(this),this.indexManager=new SB,this.remoteDocumentCache=function(s){return new FB(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new EB(n),this.Ii=new OB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new VB(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const s=new BB(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return H.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class BB extends g9{constructor(e){super(),this.currentSequenceNumber=e}}class jx{constructor(e){this.persistence=e,this.Ri=new kx,this.Vi=null}static mi(e){return new jx(e)}get fi(){if(this.Vi)return this.Vi;throw ve(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),H.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,r=>{const s=ue.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,Ee.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return H.or([()=>H.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zf{constructor(e,n){this.persistence=e,this.pi=new Aa(r=>x9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=RB(this,n)}static mi(e,n){return new zf(e,n)}Ei(){}di(e){return H.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return H.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?H.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Ee.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),H.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bh(e.data.value)),n}br(e,n,r){return H.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return H.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ue(),s=Ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Dx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WB{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return w3()?8:y9(gn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zB;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ua()<=Ve.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",$a(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(Ua()<=Ve.DEBUG&&oe("QueryEngine","Query:",$a(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ua()<=Ve.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",$a(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ns(n))):H.resolve())}ys(e,n){if(oE(n))return H.resolve(null);let r=Ns(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Uf(n,null,"F"),r=Ns(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ue(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,Uf(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return oE(n)||s.isEqual(Ee.min())?H.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?H.resolve(null):(Ua()<=Ve.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$a(n)),this.vs(e,o,n,h9(s,zu)).next(l=>l))})}Ds(e,n){let r=new Vt(ZA(e));return n.forEach((s,i)=>{Kp(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Ua()<=Ve.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",$a(n)),this.ps.getDocumentsMatchingQuery(e,n,go.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox="LocalStore",HB=3e8;class qB{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new xt(Fe),this.xs=new Aa(i=>Sx(i),Nx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DB(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function KB(t,e,n,r){return new qB(t,e,n,r)}async function bP(t,e){const n=Ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Ue();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function GB(t,e){const n=Ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,m=f.keys();let g=H.resolve();return m.forEach(T=>{g=g.next(()=>h.getEntry(c,T)).next(v=>{const x=u.docVersions.get(T);Xe(x!==null,48541),v.version.compareTo(x)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),h.addEntry(v)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ue();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function EP(t){const e=Ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function QB(t,e){const n=Ne(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let g=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Wt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(v,x,_){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=HB?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,g,h)&&l.push(n.Pi.updateTargetData(i,g))});let c=pi(),u=Ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(YB(i,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Ee.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return H.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(n.Ms=s,i))}function YB(t,e,n){let r=Ue(),s=Ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=pi();return n.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):oe(Ox,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function XB(t,e){const n=Ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function JB(t,e){const n=Ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,H.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Ki(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function bv(t,e,n){const r=Ne(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!uc(o))throw o;oe(Ox,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function xE(t,e,n){const r=Ne(t);let s=Ee.min(),i=Ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=Ne(c),m=f.xs.get(h);return m!==void 0?H.resolve(f.Ms.get(m)):f.Pi.getTargetData(u,h)}(r,o,Ns(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Ee.min(),n?i:Ue())).next(l=>(ZB(r,L9(e),l),{documents:l,Qs:i})))}function ZB(t,e,n){let r=t.Os.get(e)||Ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class wE{constructor(){this.activeTargetIds=z9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class e7{constructor(){this.Mo=new wE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="ConnectivityMonitor";class bE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(_E,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(_E,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh=null;function Ev(){return gh===null?gh=function(){return 268435456+Math.round(2147483648*Math.random())}():gh++,"0x"+gh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kg="RestConnection",n7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class r7{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Lf?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Ev(),l=this.zo(e,n.toUriEncodedString());oe(kg,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:u}=new URL(l),h=Ao(u);return this.Jo(e,l,c,r,h).then(f=>(oe(kg,`Received RPC '${e}' ${o}: `,f),f),f=>{throw ma(kg,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=n7[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection";class i7 extends r7{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Ev();return new Promise((l,c)=>{const u=new EA;u.setWithCredentials(!0),u.listenOnce(TA.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case $h.NO_ERROR:const f=u.getResponseJson();oe(ln,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case $h.TIMEOUT:oe(ln,`RPC '${e}' ${o} timed out`),c(new se(B.DEADLINE_EXCEEDED,"Request time out"));break;case $h.HTTP_ERROR:const m=u.getStatus();if(oe(ln,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const T=g==null?void 0:g.error;if(T&&T.status&&T.message){const v=function(_){const b=_.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(b)>=0?b:B.UNKNOWN}(T.status);c(new se(v,T.message))}else c(new se(B.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new se(B.UNAVAILABLE,"Connection failed."));break;default:ve(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{oe(ln,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);oe(ln,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Ev(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=IA(),l=NA(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");oe(ln,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let m=!1,g=!1;const T=new s7({Yo:x=>{g?oe(ln,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(oe(ln,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),oe(ln,`RPC '${e}' stream ${s} sending:`,x),f.send(x))},Zo:()=>f.close()}),v=(x,_,b)=>{x.listen(_,w=>{try{b(w)}catch(I){setTimeout(()=>{throw I},0)}})};return v(f,Hc.EventType.OPEN,()=>{g||(oe(ln,`RPC '${e}' stream ${s} transport opened.`),T.o_())}),v(f,Hc.EventType.CLOSE,()=>{g||(g=!0,oe(ln,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(f))}),v(f,Hc.EventType.ERROR,x=>{g||(g=!0,ma(ln,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),T.a_(new se(B.UNAVAILABLE,"The operation could not be completed")))}),v(f,Hc.EventType.MESSAGE,x=>{var _;if(!g){const b=x.data[0];Xe(!!b,16349);const w=b,I=(w==null?void 0:w.error)||((_=w[0])==null?void 0:_.error);if(I){oe(ln,`RPC '${e}' stream ${s} received error:`,I);const k=I.status;let O=function(C){const A=Ct[C];if(A!==void 0)return uP(A)}(k),N=I.message;O===void 0&&(O=B.INTERNAL,N="Unknown error status: "+k+" with message "+I.message),g=!0,T.a_(new se(O,N)),f.close()}else oe(ln,`RPC '${e}' stream ${s} received:`,b),T.u_(b)}}),v(l,SA.STAT_EVENT,x=>{x.stat===dv.PROXY?oe(ln,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===dv.NOPROXY&&oe(ln,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function jg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xp(t){return new cB(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="PersistentStream";class SP{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new TP(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(fi(n.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new se(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(EE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(EE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class o7 extends SP{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=hB(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?Is(o.readTime):Ee.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=_v(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=gv(c)?{documents:mB(i,c)}:{query:gB(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=fP(i,o.resumeToken);const u=vv(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ee.min())>0){l.readTime=Bf(i,o.snapshotVersion.toTimestamp());const u=vv(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=vB(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=_v(this.serializer),n.removeTarget=e,this.q_(n)}}class a7 extends SP{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Xe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Xe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=pB(e.writeResults,e.commitTime),r=Is(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=_v(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>fB(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{}class c7 extends l7{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new se(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,xv(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new se(B.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,xv(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(B.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class u7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fi(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga="RemoteStore";class d7{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Pa(this)&&(oe(ga,"Restarting streams for network reachability change."),await async function(c){const u=Ne(c);u.Ea.add(4),await xd(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Jp(u)}(this))})}),this.Ra=new u7(r,s)}}async function Jp(t){if(Pa(t))for(const e of t.da)await e(!0)}async function xd(t){for(const e of t.da)await e(!1)}function NP(t,e){const n=Ne(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Fx(n)?Vx(n):hc(n).O_()&&Lx(n,e))}function Mx(t,e){const n=Ne(t),r=hc(n);n.Ia.delete(e),r.O_()&&IP(n,e),n.Ia.size===0&&(r.O_()?r.L_():Pa(n)&&n.Ra.set("Unknown"))}function Lx(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}hc(t).Y_(e)}function IP(t,e){t.Va.Ue(e),hc(t).Z_(e)}function Vx(t){t.Va=new iB({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),hc(t).start(),t.Ra.ua()}function Fx(t){return Pa(t)&&!hc(t).x_()&&t.Ia.size>0}function Pa(t){return Ne(t).Ea.size===0}function CP(t){t.Va=void 0}async function h7(t){t.Ra.set("Online")}async function f7(t){t.Ia.forEach((e,n)=>{Lx(t,e)})}async function p7(t,e){CP(t),Fx(t)?(t.Ra.ha(e),Vx(t)):t.Ra.set("Unknown")}async function m7(t,e,n){if(t.Ra.set("Online"),e instanceof hP&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){oe(ga,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Wf(t,r)}else if(e instanceof Hh?t.Va.Ze(e):e instanceof dP?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ee.min()))try{const r=await EP(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(u);h&&i.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Wt.EMPTY_BYTE_STRING,h.snapshotVersion)),IP(i,c);const f=new Ki(h.target,c,u,h.sequenceNumber);Lx(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){oe(ga,"Failed to raise snapshot:",r),await Wf(t,r)}}async function Wf(t,e,n){if(!uc(e))throw e;t.Ea.add(1),await xd(t),t.Ra.set("Offline"),n||(n=()=>EP(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(ga,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Jp(t)})}function AP(t,e){return e().catch(n=>Wf(t,n,e))}async function Zp(t){const e=Ne(t),n=wo(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bx;for(;g7(e);)try{const s=await XB(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,y7(e,s)}catch(s){await Wf(e,s)}PP(e)&&RP(e)}function g7(t){return Pa(t)&&t.Ta.length<10}function y7(t,e){t.Ta.push(e);const n=wo(t);n.O_()&&n.X_&&n.ea(e.mutations)}function PP(t){return Pa(t)&&!wo(t).x_()&&t.Ta.length>0}function RP(t){wo(t).start()}async function v7(t){wo(t).ra()}async function x7(t){const e=wo(t);for(const n of t.Ta)e.ea(n.mutations)}async function w7(t,e,n){const r=t.Ta.shift(),s=Ax.from(r,e,n);await AP(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Zp(t)}async function _7(t,e){e&&wo(t).X_&&await async function(r,s){if(function(o){return nB(o)&&o!==B.ABORTED}(s.code)){const i=r.Ta.shift();wo(r).B_(),await AP(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Zp(r)}}(t,e),PP(t)&&RP(t)}async function TE(t,e){const n=Ne(t);n.asyncQueue.verifyOperationInProgress(),oe(ga,"RemoteStore received new credentials");const r=Pa(n);n.Ea.add(3),await xd(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Jp(n)}async function b7(t,e){const n=Ne(t);e?(n.Ea.delete(2),await Jp(n)):e||(n.Ea.add(2),await xd(n),n.Ra.set("Unknown"))}function hc(t){return t.ma||(t.ma=function(n,r,s){const i=Ne(n);return i.sa(),new o7(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:h7.bind(null,t),t_:f7.bind(null,t),r_:p7.bind(null,t),H_:m7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Fx(t)?Vx(t):t.Ra.set("Unknown")):(await t.ma.stop(),CP(t))})),t.ma}function wo(t){return t.fa||(t.fa=function(n,r,s){const i=Ne(n);return i.sa(),new a7(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:v7.bind(null,t),r_:_7.bind(null,t),ta:x7.bind(null,t),na:w7.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zp(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(ga,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Ux(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $x(t,e){if(fi("AsyncQueue",`${e}: ${t}`),uc(t))return new se(B.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{static emptySet(e){return new xl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=qc(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new xl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.ga=new xt(ue.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ve(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Gl{constructor(e,n,r,s,i,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Gl(e,n,xl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class T7{constructor(){this.queries=NE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ne(n),i=s.queries;s.queries=NE(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new se(B.ABORTED,"Firestore shutting down"))}}function NE(){return new Aa(t=>JA(t),qp)}async function Bx(t,e){const n=Ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new E7,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=$x(o,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Wx(n)}async function zx(t,e){const n=Ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function S7(t,e){const n=Ne(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Wx(n)}function N7(t,e,n){const r=Ne(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Wx(t){t.Ca.forEach(e=>{e.next()})}var Tv,IE;(IE=Tv||(Tv={})).Ma="default",IE.Cache="cache";class Hx{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.key=e}}class jP{constructor(e){this.key=e}}class I7{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=ZA(e),this.tu=new xl(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new SE,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),g=Kp(this.query,f)?f:null,T=!!m&&this.mutatedKeys.has(m.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;m&&g?m.data.isEqual(g.data)?T!==v&&(r.track({type:3,doc:g}),x=!0):this.su(m,g)||(r.track({type:2,doc:g}),x=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!m&&g?(r.track({type:0,doc:g}),x=!0):m&&!g&&(r.track({type:1,doc:m}),x=!0,(c||u)&&(l=!0)),x&&(g?(o=o.add(g),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,T){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve(20277,{Rt:x})}};return v(g)-v(T)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Gl(this.query,e.tu,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new SE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new jP(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new kP(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qx="SyncEngine";class C7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class A7{constructor(e){this.key=e,this.hu=!1}}class P7{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Aa(l=>JA(l),qp),this.Iu=new Map,this.Eu=new Set,this.du=new xt(ue.comparator),this.Au=new Map,this.Ru=new kx,this.Vu={},this.mu=new Map,this.fu=Kl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function R7(t,e,n=!0){const r=FP(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await DP(r,e,n,!0),s}async function k7(t,e){const n=FP(t);await DP(n,e,!0,!1)}async function DP(t,e,n,r){const s=await JB(t.localStore,Ns(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await j7(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&NP(t.remoteStore,s),l}async function j7(t,e,n,r,s){t.pu=(f,m,g)=>async function(v,x,_,b){let w=x.view.ru(_);w.Cs&&(w=await xE(v.localStore,x.query,!1).then(({documents:N})=>x.view.ru(N,w)));const I=b&&b.targetChanges.get(x.targetId),k=b&&b.targetMismatches.get(x.targetId)!=null,O=x.view.applyChanges(w,v.isPrimaryClient,I,k);return AE(v,x.targetId,O.au),O.snapshot}(t,f,m,g);const i=await xE(t.localStore,e,!0),o=new I7(e,i.Qs),l=o.ru(i.documents),c=vd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);AE(t,n,u.au);const h=new C7(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function D7(t,e,n){const r=Ne(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!qp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await bv(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Mx(r.remoteStore,s.targetId),Sv(r,s.targetId)}).catch(cc)):(Sv(r,s.targetId),await bv(r.localStore,s.targetId,!0))}async function O7(t,e){const n=Ne(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mx(n.remoteStore,r.targetId))}async function M7(t,e,n){const r=z7(t);try{const s=await function(o,l){const c=Ne(o),u=et.now(),h=l.reduce((g,T)=>g.add(T.key),Ue());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let T=pi(),v=Ue();return c.Ns.getEntries(g,h).next(x=>{T=x,T.forEach((_,b)=>{b.isValidDocument()||(v=v.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,T)).next(x=>{f=x;const _=[];for(const b of l){const w=X9(b,f.get(b.key).overlayedDocument);w!=null&&_.push(new ko(b.key,w,WA(w.value.mapValue),yr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,_,l)}).next(x=>{m=x;const _=x.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(g,x.batchId,_)})}).then(()=>({batchId:m.batchId,changes:tP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new xt(Fe)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await wd(r,s.changes),await Zp(r.remoteStore)}catch(s){const i=$x(s,"Failed to persist write");n.reject(i)}}async function OP(t,e){const n=Ne(t);try{const r=await QB(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(Xe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Xe(o.hu,14607):s.removedDocuments.size>0&&(Xe(o.hu,42227),o.hu=!1))}),await wd(n,r,e)}catch(r){await cc(r)}}function CE(t,e,n){const r=Ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Ne(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(u=!0)}),u&&Wx(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function L7(t,e,n){const r=Ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new xt(ue.comparator);o=o.insert(i,fn.newNoDocument(i,Ee.min()));const l=Ue().add(i),c=new Yp(Ee.min(),new Map,new xt(Fe),o,l);await OP(r,c),r.du=r.du.remove(i),r.Au.delete(e),Kx(r)}else await bv(r.localStore,e,!1).then(()=>Sv(r,e,n)).catch(cc)}async function V7(t,e){const n=Ne(t),r=e.batch.batchId;try{const s=await GB(n.localStore,e);LP(n,r,null),MP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wd(n,s)}catch(s){await cc(s)}}async function F7(t,e,n){const r=Ne(t);try{const s=await function(o,l){const c=Ne(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(Xe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);LP(r,e,n),MP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wd(r,s)}catch(s){await cc(s)}}function MP(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function LP(t,e,n){const r=Ne(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Sv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||VP(t,r)})}function VP(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Mx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Kx(t))}function AE(t,e,n){for(const r of n)r instanceof kP?(t.Ru.addReference(r.key,e),U7(t,r)):r instanceof jP?(oe(qx,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||VP(t,r.key)):ve(19791,{wu:r})}function U7(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(oe(qx,"New document in limbo: "+n),t.Eu.add(r),Kx(t))}function Kx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ue(rt.fromString(e)),r=t.fu.next();t.Au.set(r,new A7(n)),t.du=t.du.insert(n,r),NP(t.remoteStore,new Ki(Ns(Hp(n.path)),r,"TargetPurposeLimboResolution",Bp.ce))}}async function wd(t,e,n){const r=Ne(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Dx.As(c.targetId,u);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=Ne(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>H.forEach(u,m=>H.forEach(m.Es,g=>h.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>H.forEach(m.ds,g=>h.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!uc(f))throw f;oe(Ox,"Failed to update sequence numbers: "+f)}for(const f of u){const m=f.targetId;if(!f.fromCache){const g=h.Ms.get(m),T=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(m,v)}}}(r.localStore,i))}async function $7(t,e){const n=Ne(t);if(!n.currentUser.isEqual(e)){oe(qx,"User change. New user:",e.toKey());const r=await bP(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new se(B.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wd(n,r.Ls)}}function B7(t,e){const n=Ne(t),r=n.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let s=Ue();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function FP(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=B7.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=L7.bind(null,e),e.Pu.H_=S7.bind(null,e.eventManager),e.Pu.yu=N7.bind(null,e.eventManager),e}function z7(t){const e=Ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=V7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F7.bind(null,e),e}class Hf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return KB(this.persistence,new WB,e.initialUser,this.serializer)}Cu(e){return new _P(jx.mi,this.serializer)}Du(e){return new e7}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hf.provider={build:()=>new Hf};class W7 extends Hf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Xe(this.persistence.referenceDelegate instanceof zf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new AB(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new _P(r=>zf.mi(r,n),this.serializer)}}class Nv{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>CE(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$7.bind(null,this.syncEngine),await b7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new T7}()}createDatastore(e){const n=Xp(e.databaseInfo.databaseId),r=function(i){return new i7(i)}(e.databaseInfo);return function(i,o,l,c){return new c7(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new d7(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>CE(this.syncEngine,n,0),function(){return bE.v()?new bE:new t7}())}createSyncEngine(e,n){return function(s,i,o,l,c,u,h){const f=new P7(s,i,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Ne(s);oe(ga,"RemoteStore shutting down."),i.Ea.add(5),await xd(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Nv.provider={build:()=>new Nv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="FirestoreClient";class H7{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dn.UNAUTHENTICATED,this.clientId=Up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{oe(_o,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe(_o,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=$x(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Dg(t,e){t.asyncQueue.verifyOperationInProgress(),oe(_o,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await bP(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function PE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await q7(t);oe(_o,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>TE(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>TE(e.remoteStore,s)),t._onlineComponents=e}async function q7(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(_o,"Using user provided OfflineComponentProvider");try{await Dg(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ma("Error using user provided cache. Falling back to memory cache: "+n),await Dg(t,new Hf)}}else oe(_o,"Using default OfflineComponentProvider"),await Dg(t,new W7(void 0));return t._offlineComponents}async function UP(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(_o,"Using user provided OnlineComponentProvider"),await PE(t,t._uninitializedComponentsProvider._online)):(oe(_o,"Using default OnlineComponentProvider"),await PE(t,new Nv))),t._onlineComponents}function K7(t){return UP(t).then(e=>e.syncEngine)}async function qf(t){const e=await UP(t),n=e.eventManager;return n.onListen=R7.bind(null,e.syncEngine),n.onUnlisten=D7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=k7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=O7.bind(null,e.syncEngine),n}function G7(t,e,n={}){const r=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new Gx({next:m=>{h.Nu(),o.enqueueAndForget(()=>zx(i,f));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new se(B.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new se(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Hx(Hp(l.path),h,{includeMetadataChanges:!0,qa:!0});return Bx(i,f)}(await qf(t),t.asyncQueue,e,n,r)),r.promise}function Q7(t,e,n={}){const r=new ni;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const h=new Gx({next:m=>{h.Nu(),o.enqueueAndForget(()=>zx(i,f)),m.fromCache&&c.source==="server"?u.reject(new se(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Hx(l,h,{includeMetadataChanges:!0,qa:!0});return Bx(i,f)}(await qf(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP="firestore.googleapis.com",kE=!0;class jE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=BP,this.ssl=kE}else this.host=e.host,this.ssl=e.ssl??kE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<IB)throw new se(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$P(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(B.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class em{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new PA;switch(r.type){case"firstParty":return new i9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=RE.get(n);r&&(oe("ComponentProvider","Removing Datastore"),RE.delete(n),r.terminate())}(this),Promise.resolve()}}function zP(t,e,n,r={}){var u;t=In(t,em);const s=Ao(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Dp(`https://${l}`),Op("Firestore",!0)),i.host!==BP&&i.host!==l&&ma("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!mo(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=dn.MOCK_USER;else{h=AC(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new se(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new dn(m)}t._authCredentials=new n9(new AA(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class gt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(gd(n,gt._jsonSchema))return new gt(e,r||null,new ue(rt.fromString(n.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:Rt("string",gt._jsonSchemaVersion),referencePath:Rt("string")};class ri extends Ls{constructor(e,n,r){super(e,n,Hp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ue(e))}withConverter(e){return new ri(this.firestore,e,this._path)}}function Xt(t,e,...n){if(t=ct(t),RA("collection","path",e),t instanceof em){const r=rt.fromString(e,...n);return qb(r),new ri(t,null,r)}{if(!(t instanceof gt||t instanceof ri))throw new se(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return qb(r),new ri(t.firestore,null,r)}}function tt(t,e,...n){if(t=ct(t),arguments.length===1&&(e=Up.newId()),RA("doc","path",e),t instanceof em){const r=rt.fromString(e,...n);return Hb(r),new gt(t,null,new ue(r))}{if(!(t instanceof gt||t instanceof ri))throw new se(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return Hb(r),new gt(t.firestore,t instanceof ri?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="AsyncQueue";class OE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new TP(this,"async_queue_retry"),this._c=()=>{const r=jg();r&&oe(DE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=jg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ni;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!uc(e))throw e;oe(DE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,fi("INTERNAL UNHANDLED ERROR: ",ME(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Ux.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ve(47125,{Pc:ME(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ME(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Rs extends em{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new OE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new OE(e),this._firestoreClient=void 0,await e}}}function Qx(t,e){const n=typeof t=="object"?t:dd(),r=typeof t=="string"?t:Lf,s=yi(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=cx("firestore");i&&zP(s,...i)}return s}function _d(t){if(t._terminated)throw new se(B.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Y7(t),t._firestoreClient}function Y7(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,u,h){return new b9(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$P(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new H7(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zn(Wt.fromBase64String(e))}catch(n){throw new se(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(gd(e,Zn._jsonSchema))return Zn.fromBase64String(e.bytes)}}Zn._jsonSchemaVersion="firestore/bytes/1.0",Zn._jsonSchema={type:Rt("string",Zn._jsonSchemaVersion),bytes:Rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Wr._jsonSchemaVersion}}static fromJSON(e){if(gd(e,Wr._jsonSchema))return new Wr(e.latitude,e.longitude)}}Wr._jsonSchemaVersion="firestore/geoPoint/1.0",Wr._jsonSchema={type:Rt("string",Wr._jsonSchemaVersion),latitude:Rt("number"),longitude:Rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Hr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(gd(e,Hr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Hr(e.vectorValues);throw new se(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hr._jsonSchemaVersion="firestore/vectorValue/1.0",Hr._jsonSchema={type:Rt("string",Hr._jsonSchemaVersion),vectorValues:Rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X7=/^__.*__$/;class J7{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ko(e,this.data,this.fieldMask,n,this.fieldTransforms):new yd(e,this.data,n,this.fieldTransforms)}}class WP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ko(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve(40011,{Ac:t})}}class Yx{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Kf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(HP(this.Ac)&&X7.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Z7{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xp(e)}Cc(e,n,r,s=!1){return new Yx({Ac:e,methodName:n,Dc:r,path:Bt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tm(t){const e=t._freezeSettings(),n=Xp(t._databaseId);return new Z7(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qP(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Jx("Data must be an object, but it was:",o,r);const l=KP(r,o);let c,u;if(i.merge)c=new tr(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Iv(e,f,n);if(!o.contains(m))throw new se(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);QP(h,m)||h.push(m)}c=new tr(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new J7(new Ln(l),c,u)}class nm extends Ed{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nm}}class Xx extends Ed{_toFieldTransform(e){return new K9(e.path,new Ku)}isEqual(e){return e instanceof Xx}}function ez(t,e,n,r){const s=t.Cc(1,e,n);Jx("Data must be an object, but it was:",s,r);const i=[],o=Ln.empty();Ro(r,(c,u)=>{const h=Zx(e,c,n);u=ct(u);const f=s.yc(h);if(u instanceof nm)i.push(h);else{const m=Td(u,f);m!=null&&(i.push(h),o.set(h,m))}});const l=new tr(i);return new WP(o,l,s.fieldTransforms)}function tz(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Iv(e,r,n)],c=[s];if(i.length%2!=0)throw new se(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Iv(e,i[m])),c.push(i[m+1]);const u=[],h=Ln.empty();for(let m=l.length-1;m>=0;--m)if(!QP(u,l[m])){const g=l[m];let T=c[m];T=ct(T);const v=o.yc(g);if(T instanceof nm)u.push(g);else{const x=Td(T,v);x!=null&&(u.push(g),h.set(g,x))}}const f=new tr(u);return new WP(h,f,o.fieldTransforms)}function nz(t,e,n,r=!1){return Td(n,t.Cc(r?4:3,e))}function Td(t,e){if(GP(t=ct(t)))return Jx("Unsupported field value:",e,t),KP(t,e);if(t instanceof Ed)return function(r,s){if(!HP(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Td(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return W9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=et.fromDate(r);return{timestampValue:Bf(s.serializer,i)}}if(r instanceof et){const i=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bf(s.serializer,i)}}if(r instanceof Wr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zn)return{bytesValue:fP(s.serializer,r._byteString)};if(r instanceof gt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Rx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Hr)return function(o,l){return{mapValue:{fields:{[$A]:{stringValue:zA},[Vf]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ix(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${$p(r)}`)}(t,e)}function KP(t,e){const n={};return OA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ro(t,(r,s)=>{const i=Td(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function GP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Wr||t instanceof Zn||t instanceof gt||t instanceof Ed||t instanceof Hr)}function Jx(t,e,n){if(!GP(n)||!jA(n)){const r=$p(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Iv(t,e,n){if((e=ct(e))instanceof bd)return e._internalPath;if(typeof e=="string")return Zx(t,e);throw Kf("Field path arguments must be of type string or ",t,!1,void 0,n)}const rz=new RegExp("[~\\*/\\[\\]]");function Zx(t,e,n){if(e.search(rz)>=0)throw Kf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bd(...e.split("."))._internalPath}catch{throw Kf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Kf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new se(B.INVALID_ARGUMENT,l+t+c)}function QP(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(rm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sz extends YP{data(){return super.data()}}function rm(t,e){return typeof e=="string"?Zx(t,e):e instanceof bd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ew{}class sm extends ew{}function mi(t,e,...n){let r=[];e instanceof ew&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof im).length,l=i.filter(c=>c instanceof Sd).length;if(o>1||o>0&&l>0)throw new se(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Sd extends sm{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sd(e,n,r)}_apply(e){const n=this._parse(e);return JP(e._query,n),new Ls(e.firestore,e.converter,yv(e._query,n))}_parse(e){const n=tm(e.firestore);return function(i,o,l,c,u,h,f){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new se(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){FE(f,h);const T=[];for(const v of f)T.push(VE(c,i,v));m={arrayValue:{values:T}}}else m=VE(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||FE(f,h),m=nz(l,o,f,h==="in"||h==="not-in");return Pt.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function bo(t,e,n){const r=e,s=rm("where",t);return Sd._create(s,r,n)}class im extends ew{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new im(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Xr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)JP(o,c),o=yv(o,c)}(e._query,n),new Ls(e.firestore,e.converter,yv(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class om extends sm{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new om(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new se(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new se(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qu(i,o)}(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new dc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ya(t,e="asc"){const n=e,r=rm("orderBy",t);return om._create(r,n)}class am extends sm{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new am(e,n,r)}_apply(e){return new Ls(e.firestore,e.converter,Uf(e._query,this._limit,this._limitType))}}function tw(t){return d9("limit",t),am._create("limit",t,"F")}function VE(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new se(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!XA(e)&&n.indexOf("/")!==-1)throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(rt.fromString(n));if(!ue.isDocumentKey(r))throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eE(t,new ue(r))}if(n instanceof gt)return eE(t,n._key);throw new se(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$p(n)}.`)}function FE(t,e){if(!Array.isArray(t)||t.length===0)throw new se(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function JP(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ZP{convertValue(e,n="none"){switch(xo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ro(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Vf].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Tt(o.doubleValue));return new Hr(n)}convertGeoPoint(e){return new Wr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const n=yo(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);Xe(xP(r),9688,{name:e});const s=new Wl(r.get(1),r.get(3)),i=new ue(r.popFirst(5));return s.isEqual(n)||fi(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class il{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lo extends YP{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new pu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(rm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=lo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}lo._jsonSchemaVersion="firestore/documentSnapshot/1.0",lo._jsonSchema={type:Rt("string",lo._jsonSchemaVersion),bundleSource:Rt("string","DocumentSnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class pu extends lo{data(e={}){return super.data(e)}}class co{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new il(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new pu(this._firestore,this._userDataWriter,r.key,r,new il(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new pu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new il(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new pu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new il(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:iz(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=co._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Up.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t){t=In(t,gt);const e=In(t.firestore,Rs);return G7(_d(e),t._key).then(n=>tR(e,t,n))}co._jsonSchemaVersion="firestore/querySnapshot/1.0",co._jsonSchema={type:Rt("string",co._jsonSchemaVersion),bundleSource:Rt("string","QuerySnapshot"),bundleName:Rt("string"),bundle:Rt("string")};class nw extends ZP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function ks(t){t=In(t,Ls);const e=In(t.firestore,Rs),n=_d(e),r=new nw(e);return XP(t._query),Q7(n,t._query).then(s=>new co(e,r,t,s))}function gs(t,e,n){t=In(t,gt);const r=In(t.firestore,Rs),s=eR(t.converter,e,n);return Nd(r,[qP(tm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,yr.none())])}function js(t,e,n,...r){t=In(t,gt);const s=In(t.firestore,Rs),i=tm(s);let o;return o=typeof(e=ct(e))=="string"||e instanceof bd?tz(i,"updateDoc",t._key,e,n,r):ez(i,"updateDoc",t._key,e),Nd(s,[o.toMutation(t._key,yr.exists(!0))])}function lm(t){return Nd(In(t.firestore,Rs),[new Cx(t._key,yr.none())])}function fc(t,e){const n=In(t.firestore,Rs),r=tt(t),s=eR(t.converter,e);return Nd(n,[qP(tm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,yr.exists(!1))]).then(()=>r)}function rw(t,...e){var c,u,h;t=ct(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||LE(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(LE(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let i,o,l;if(t instanceof gt)o=In(t.firestore,Rs),l=Hp(t._key.path),i={next:f=>{e[r]&&e[r](tR(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=In(t,Ls);o=In(f.firestore,Rs),l=f._query;const m=new nw(o);i={next:g=>{e[r]&&e[r](new co(o,m,f,g))},error:e[r+1],complete:e[r+2]},XP(t._query)}return function(m,g,T,v){const x=new Gx(v),_=new Hx(g,x,T);return m.asyncQueue.enqueueAndForget(async()=>Bx(await qf(m),_)),()=>{x.Nu(),m.asyncQueue.enqueueAndForget(async()=>zx(await qf(m),_))}}(_d(o),l,s,i)}function Nd(t,e){return function(r,s){const i=new ni;return r.asyncQueue.enqueueAndForget(async()=>M7(await K7(r),s,i)),i.promise}(_d(t),e)}function tR(t,e,n){const r=n.docs.get(e._key),s=new nw(t);return new lo(t,s,e._key,r,new il(n.hasPendingWrites,n.fromCache),e.converter)}function dt(){return new Xx("serverTimestamp")}(function(e,n=!0){(function(s){lc=s})(Ca),_r(new or("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Rs(new r9(r.getProvider("auth-internal")),new o9(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new se(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(u.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),pn($b,Bb,e),pn($b,Bb,"esm2020")})();const nR=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:ZP,Bytes:Zn,CollectionReference:ri,DocumentReference:gt,DocumentSnapshot:lo,FieldPath:bd,FieldValue:Ed,Firestore:Rs,FirestoreError:se,GeoPoint:Wr,Query:Ls,QueryCompositeFilterConstraint:im,QueryConstraint:sm,QueryDocumentSnapshot:pu,QueryFieldFilterConstraint:Sd,QueryLimitConstraint:am,QueryOrderByConstraint:om,QuerySnapshot:co,SnapshotMetadata:il,Timestamp:et,VectorValue:Hr,_AutoId:Up,_ByteString:Wt,_DatabaseId:Wl,_DocumentKey:ue,_EmptyAuthCredentialsProvider:PA,_FieldPath:Bt,_cast:In,_logWarn:ma,_validateIsNotUsedTogether:kA,addDoc:fc,collection:Xt,connectFirestoreEmulator:zP,deleteDoc:lm,doc:tt,ensureFirestoreConfigured:_d,executeWrite:Nd,getDoc:Eo,getDocs:ks,getFirestore:Qx,limit:tw,onSnapshot:rw,orderBy:ya,query:mi,serverTimestamp:dt,setDoc:gs,updateDoc:js,where:bo},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oz{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Mn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(i=>this.auth=i,()=>{}),this.messaging||r.get().then(i=>this.messaging=i,()=>{}),this.appCheck||s==null||s.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv="us-central1";class az{constructor(e,n,r,s,i=Cv,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new oz(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=Cv}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function lz(t,e,n){const r=Ao(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Dp(t.emulatorOrigin+"/backends"),Op("Functions",!0))}const UE="@firebase/functions",$E="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cz="auth-internal",uz="app-check-internal",dz="messaging-internal";function hz(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),i=n.getProvider(cz),o=n.getProvider(dz),l=n.getProvider(uz);return new az(s,i,o,l,r)};_r(new or(rR,e,"PUBLIC").setMultipleInstances(!0)),pn(UE,$E,t),pn(UE,$E,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(t=dd(),e=Cv){const r=yi(ct(t),rR).getImmediate({identifier:e}),s=cx("functions");return s&&fz(r,...s),r}function fz(t,e,n){lz(ct(t),e,n)}hz();const pz={apiKey:"AIzaSyBRYf_nDTQC-wzWZWjFyWjUKKWc5UHOe-I",authDomain:"voda-45a7f.firebaseapp.com",projectId:"voda-45a7f",storageBucket:"voda-45a7f.appspot.com",messagingSenderId:"1234567890",appId:"1:1234567890:web:abcdef123456",measurementId:"G-DUMMY"},sw=gb().length?gb()[0]:dx(pz),Gs=_A(sw),Ae=Qx(sw);sR(sw,"us-central1");console.log("Using Firebase Production Environment");const mz="modulepreload",gz=function(t){return"/"+t},BE={},Ql=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=gz(c),c in BE)return;BE[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":mz,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((m,g)=>{f.addEventListener("load",m),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},Qt=t=>t&&t.toDate?t.toDate():new Date,Zs={async create(t){await gs(tt(Ae,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:dt()})},async getById(t){const e=tt(Ae,"profiles",t),n=await Eo(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:Qt(r.createdAt)}}return null},async update(t,e){const n=tt(Ae,"profiles",t);await js(n,{...e,updatedAt:dt()})},async getByShopId(t){const e=mi(Xt(Ae,"profiles"),bo("shopId","==",t));return(await ks(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:Qt(s.createdAt)}})}},yz={async create(t){return(await fc(Xt(Ae,"shops"),{...t,createdAt:dt(),updatedAt:dt()})).id},async getAll(){try{console.log("Getting all shops...");const t=await ks(Xt(Ae,"shops"));console.log("Shops snapshot size:",t.size);const e=t.docs.map(n=>{const r=n.data();return console.log("Shop data:",{id:n.id,...r}),{id:n.id,...r,createdAt:Qt(r.createdAt),updatedAt:Qt(r.updatedAt)}});return console.log("Returning shops:",e),e}catch(t){throw console.error("Error in shopService.getAll:",t),t}},async getById(t){const e=tt(Ae,"shops",t),n=await Eo(e);if(n.exists()){const r=n.data();return{id:n.id,...r,createdAt:Qt(r.createdAt),updatedAt:Qt(r.updatedAt)}}return null},async update(t,e){const n=tt(Ae,"shops",t);await js(n,{...e,updatedAt:dt()})}},Ur={async create(t){return(await fc(Xt(Ae,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:dt(),updatedAt:dt()})).id},async getByMerchantId(t){const e=mi(Xt(Ae,"merchantWallets"),bo("merchantUserId","==",t),ya("createdAt","desc"));return(await ks(e)).docs.map(r=>{const s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:Qt(s.createdAt),updatedAt:Qt(s.updatedAt)}})},async getById(t){const e=tt(Ae,"merchantWallets",t),n=await Eo(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:Qt(r.createdAt),updatedAt:Qt(r.updatedAt)}}return null},async update(t,e){const n=tt(Ae,"merchantWallets",t);await js(n,{...e,updatedAt:dt()})},async updateUsage(t,e,n){const r=tt(Ae,"merchantWallets",t),s={updatedAt:dt()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await js(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async delete(t){const e=tt(Ae,"merchantWallets",t);await lm(e)}},iR={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await Ql(async()=>{const{calculateCommission:l,calculateProfit:c}=await import("./commissionCalculator-DbNVJv5a.js");return{calculateCommission:l,calculateProfit:c}},[]),r=e(t.amount,t.txnType),s=n(t.amount,t.txnType),i={...t,commission:r,profit:s,createdAt:dt(),confirmedAt:t.confirmedAt?dt():null},o=await fc(Xt(Ae,"transactions"),i);return console.log("Transaction created with ID:",o.id,"Profit:",s),await this.updateLineUsage(t.lineId,t.amount),o.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=mi(Xt(Ae,"transactions"),bo("shopId","==",t),ya("createdAt","desc"));return(await ks(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Qt(r.data().createdAt),confirmedAt:r.data().confirmedAt?Qt(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=mi(Xt(Ae,"transactions"),bo("merchantUserId","==",t),ya("createdAt","desc"));return(await ks(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Qt(r.data().createdAt),confirmedAt:r.data().confirmedAt?Qt(r.data().confirmedAt):void 0}))},async updateStatus(t,e,n){const r=tt(Ae,"transactions",t);await js(r,{status:e,confirmedAt:n?dt():null})}},Pr={async getUserData(t){try{const e=tt(Ae,"users",t),n=await Eo(e);if(n.exists()){const r=n.data();return{...r,createdAt:Qt(r.createdAt),updatedAt:Qt(r.updatedAt)}}return null}catch(e){return console.error("Error getting user data:",e),null}},async saveUserData(t,e){try{const n=tt(Ae,"users",t);await gs(n,{...e,updatedAt:dt()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{const n=tt(Ae,"users",t);await gs(n,{...e,updatedAt:dt()},{merge:!0})}catch(n){throw console.error("Error updating user data:",n),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{const e=mi(Xt(Ae,"userTransactions"),bo("userId","==",t),ya("createdAt","desc"));return(await ks(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:Qt(r.data().createdAt)}))}catch(e){return console.error("Error getting user transactions:",e),[]}},async saveUserTransaction(t,e){try{return(await fc(Xt(Ae,"userTransactions"),{...e,userId:t,createdAt:dt()})).id}catch(n){throw console.error("Error saving user transaction:",n),n}}},vz=Object.freeze(Object.defineProperty({__proto__:null,merchantWalletService:Ur,profileService:Zs,shopService:yz,transactionService:iR,userDataService:Pr},Symbol.toStringTag,{value:"Module"})),xz=p.createContext(void 0);function wz({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState(null),[i,o]=p.useState(!0),l=async g=>{try{o(!0);const T=await Zs.getById(g);T?s(T):console.error("No profile found for user")}catch(T){console.error("Error fetching profile:",T)}finally{o(!1)}},c=async()=>{e&&await l(e.uid)};p.useEffect(()=>{const g=cA(Gs,async T=>{n(T),T?await l(T.uid):s(null),o(!1)});return()=>g()},[]);const m={user:e,profile:r,loading:i,signUp:async(g,T,v)=>{try{const x=await lA(Gs,g,T);return x.user&&await Zs.create({userId:x.user.uid,role:"merchant",fullName:(v==null?void 0:v.fullName)||null,phone:(v==null?void 0:v.phone)||null,shopId:""}),{error:null}}catch(x){return console.error("Error during sign up:",x),{error:x}}},signIn:async(g,T)=>{try{return await vx(Gs,g,T),{error:null}}catch(v){return console.error("Error during sign in:",v),{error:v}}},signOut:async()=>{try{await uA(Gs)}catch(g){console.error("Error during sign out:",g)}},refreshProfile:c};return a.jsx(xz.Provider,{value:m,children:t})}const oR=p.createContext(void 0);function _z(){const t=p.useContext(oR);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Pn=_z,bz=({children:t})=>{const[e,n]=p.useState(null),[r,s]=p.useState(null),[i,o]=p.useState(!0),l=async x=>{try{const _=await Zs.getById(x);_?s(_):await c(x)}catch(_){console.error("Error fetching profile:",_),await c(x)}},c=async x=>{try{console.log("Creating default profile for user:",x);const _={userId:x,shopId:"admin-shop",role:"admin",fullName:"مدير النظام",phone:null,createdAt:new Date,updatedAt:new Date};s(_),console.log("Created temporary profile:",_);try{const{shopService:b}=await Ql(async()=>{const{shopService:k}=await Promise.resolve().then(()=>vz);return{shopService:k}},void 0);let w="admin-shop";try{console.log("Attempting to get shops");const k=await b.getAll();console.log("Shops retrieved:",k),k.length>0?(w=k[0].id,console.log("Using existing shop:",w)):(console.log("No shops found, creating default shop"),w=await b.create({name:"المحل الافتراضي",logoUrl:null}))}catch(k){console.error("Error getting/creating shop:",k),w="admin-shop"}await Zs.create({userId:x,shopId:w,role:"admin",fullName:"مدير النظام",phone:null});const I=await Zs.getById(x);I&&(s(I),console.log("Updated with Firebase profile:",I))}catch{console.log("Using local profile - Firebase unavailable")}}catch(_){console.error("Error creating default profile:",_)}};p.useEffect(()=>{console.log("Setting up auth state listener");const x=cA(Gs,async _=>{if(console.log("Auth state changed:",_==null?void 0:_.uid),n(_),_){console.log("User authenticated, fetching profile for:",_.uid);const b=new Promise((w,I)=>setTimeout(()=>I(new Error("Profile fetch timeout")),5e3));try{await Promise.race([l(_.uid),b]),console.log("Profile fetched successfully")}catch(w){console.error("Error fetching profile:",w),console.log("Attempting to create default profile");try{await Promise.race([c(_.uid),b])}catch(I){console.error("Error creating default profile:",I),s({userId:_.uid,shopId:"temp-shop",role:"admin",fullName:"مستخدم مؤقت",phone:null,createdAt:new Date,updatedAt:new Date})}}}else console.log("No user authenticated, setting profile to null"),s(null);console.log("Setting loading to false"),o(!1)});return()=>{console.log("Cleaning up auth state listener"),x()}},[]);const v={user:e,profile:r,loading:i,signUp:async(x,_,b)=>{try{const w=await lA(Gs,x,_);return b!=null&&b.fullName&&await Pb(w.user,{displayName:b.fullName}),await c(w.user.uid),{error:null}}catch(w){return console.error("Sign up error:",w),{error:w}}},signIn:async(x,_)=>{try{return await vx(Gs,x,_),{error:null}}catch(b){console.error("Sign in error:",b);let w="حدث خطأ أثناء تسجيل الدخول";return b.code==="auth/invalid-credential"?w="البريد الإلكتروني أو كلمة المرور غير صحيحة":b.code==="auth/user-not-found"?w="لا يوجد حساب بهذا البريد الإلكتروني":b.code==="auth/wrong-password"?w="كلمة المرور غير صحيحة":b.code==="auth/too-many-requests"&&(w="تم تجاوز عدد المحاولات المسموح، حاول لاحقاً"),{error:{...b,message:w}}}},signOut:async()=>{try{await uA(Gs),window.location.pathname.includes("/user/dashboard")?window.location.href="/user/login":window.location.href="/admin/login"}catch(x){console.error("Sign out error:",x)}},resetPassword:async x=>{try{return await $U(Gs,x),{error:null}}catch(_){console.error("Password reset error:",_);let b="حدث خطأ أثناء إرسال رابط إعادة تعيين كلمة المرور";return _.code==="auth/user-not-found"?b="لا يوجد حساب بهذا البريد الإلكتروني":_.code==="auth/invalid-email"?b="البريد الإلكتروني غير صحيح":_.code==="auth/too-many-requests"&&(b="تم تجاوز عدد المحاولات المسموح، حاول لاحقاً"),{error:{..._,message:b}}}},updateUserProfile:async x=>{if(!(!e||!r))try{x.fullName&&await Pb(e,{displayName:x.fullName}),await Zs.update(e.uid,{fullName:x.fullName||r.fullName,phone:x.phone||r.phone}),s({...r,fullName:x.fullName||r.fullName,phone:x.phone||r.phone})}catch(_){console.error("Error updating profile:",_)}},refreshProfile:async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await l(e.uid)}catch(x){console.error("Error refreshing profile:",x)}}};return a.jsx(oR.Provider,{value:v,children:t})},Ez=()=>{const{user:t,profile:e,loading:n}=Pn(),r=cr();return p.useEffect(()=>{console.log("Index: useEffect triggered",{loading:n,user:t==null?void 0:t.uid,profile:e==null?void 0:e.role}),n||(t?e?(console.log("Index: Profile found, navigating based on role:",e.role),e.role==="merchant"?r("/merchant"):(r("/landing"),console.log("User role not supported:",e.role))):console.log("Index: User exists but no profile yet, waiting..."):(console.log("Index: No user, navigating to landing"),r("/landing")))},[t,e,n,r]),n?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"جاري إعداد الحساب..."})]})})},Tz=ad("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),W=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?_M:"button";return a.jsx(o,{className:be(Tz({variant:e,size:n,className:t})),ref:i,...s})});W.displayName="Button";const Qe=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:be("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Qe.displayName="Card";const pt=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:be("flex flex-col space-y-1.5 p-6",t),...e}));pt.displayName="CardHeader";const mt=p.forwardRef(({className:t,...e},n)=>a.jsx("h3",{ref:n,className:be("text-2xl font-semibold leading-none tracking-tight",t),...e}));mt.displayName="CardTitle";const aR=p.forwardRef(({className:t,...e},n)=>a.jsx("p",{ref:n,className:be("text-sm text-muted-foreground",t),...e}));aR.displayName="CardDescription";const Ye=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:be("p-6 pt-0",t),...e}));Ye.displayName="CardContent";const Sz=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:be("flex items-center p-6 pt-0",t),...e}));Sz.displayName="CardFooter";function Nz(){const t=[{icon:fl,title:"إدارة الخطوط والمحافظ",description:"تحكم كامل في خطوط المحل ومحافظ التجار مع تتبع الحدود اليومية والشهرية"},{icon:yI,title:"نظام عمولة مرن",description:"احسب العمولة تلقائياً حسب قواعد قابلة للتخصيص لكل مزود وتاجر"},{icon:li,title:"أمان متقدم",description:"حماية البيانات مع صلاحيات متدرجة وسجل مراجعة شامل"},{icon:zy,title:"تقارير تفصيلية",description:"تقارير يومية وشهرية قابلة للتصدير مع رسوم بيانية تفاعلية"}],e=[{name:"Vodafone Cash",color:"provider-vodafone"},{name:"Etisalat Cash",color:"provider-etisalat"},{name:"Orange Cash",color:"provider-orange"},{name:"InstaPay",color:"provider-instapay"}];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/20 to-background",children:[a.jsx("header",{className:"container mx-auto px-4 py-6",children:a.jsxs("nav",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-8 w-8 gradient-primary rounded-lg flex items-center justify-center",children:a.jsx(fl,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold",children:"CashyLink"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(ms,{to:"/user/login",children:a.jsx(W,{variant:"ghost",children:"تسجيل الدخول"})}),a.jsx(ms,{to:"/user/register",children:a.jsxs(W,{className:"btn-primary",children:["تسجيل تاجر جديد",a.jsx(gg,{className:"mr-2 h-4 w-4"})]})})]})]})}),a.jsx("section",{className:"container mx-auto px-4 py-20 text-center",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsx("h1",{className:"text-5xl font-bold mb-6 gradient-hero bg-clip-text text-transparent",children:"منصة إدارة شاملة لمحلات الموبايل"}),a.jsx("p",{className:"text-xl text-muted-foreground mb-8 leading-relaxed",children:"أدر معاملات الأموال الإلكترونية بكفاءة وأمان مع تتبع دقيق للحدود والعمولات"}),a.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-12",children:e.map(n=>a.jsx("div",{className:`px-4 py-2 ${n.color} text-white rounded-full text-sm font-medium shadow-lg`,children:n.name},n.name))}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[a.jsx(ms,{to:"/auth?mode=signup",children:a.jsxs(W,{size:"lg",className:"btn-primary shadow-elegant",children:["ابدأ مجاناً الآن",a.jsx(gg,{className:"mr-2 h-5 w-5"})]})}),a.jsx(ms,{to:"/user/login",children:a.jsx(W,{size:"lg",variant:"outline",className:"border-primary text-primary hover:bg-primary/10",children:"تسجيل الدخول"})})]})]})}),a.jsxs("section",{className:"container mx-auto px-4 py-20",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"مميزات المنصة"}),a.jsx("p",{className:"text-muted-foreground text-lg",children:"كل ما تحتاجه لإدارة عمليات التحويل بكفاءة"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((n,r)=>a.jsx(Qe,{className:"card-glass hover:shadow-elegant transition-smooth group",children:a.jsxs(Ye,{className:"p-6 text-center",children:[a.jsx("div",{className:"h-12 w-12 gradient-primary rounded-lg flex items-center justify-center mx-auto mb-4 group-hover:animate-pulse-glow transition-smooth",children:a.jsx(n.icon,{className:"h-6 w-6 text-white"})}),a.jsx("h3",{className:"text-lg font-semibold mb-2",children:n.title}),a.jsx("p",{className:"text-muted-foreground text-sm",children:n.description})]})},r))})]}),a.jsx("section",{className:"container mx-auto px-4 py-20 bg-muted/30 rounded-3xl my-20",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-3xl font-bold mb-6",children:"لماذا CashyLink؟"}),a.jsx("div",{className:"space-y-4",children:["تتبع دقيق للحدود اليومية والشهرية","تنبيهات تلقائية عند اقتراب الحدود","حساب عمولة ذكي ومرن","تقارير شاملة قابلة للتصدير","واجهات منفصلة للإدارة والتجار","أمان متقدم مع صلاحيات متدرجة"].map((n,r)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ll,{className:"h-5 w-5 text-success flex-shrink-0"}),a.jsx("span",{className:"text-foreground",children:n})]},r))})]}),a.jsx("div",{className:"relative",children:a.jsx("div",{className:"gradient-primary rounded-2xl p-8 shadow-elegant",children:a.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-6 text-white",children:[a.jsx("h3",{className:"text-xl font-semibold mb-4",children:"ابدأ في دقائق"}),a.jsx("p",{className:"text-white/80 mb-6",children:"سجل حسابك، أضف محافظك، وابدأ في إجراء المعاملات فوراً"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-2 w-2 bg-white rounded-full animate-pulse"}),a.jsx("div",{className:"h-2 w-2 bg-white/60 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),a.jsx("div",{className:"h-2 w-2 bg-white/40 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})})})]})}),a.jsx("section",{className:"container mx-auto px-4 py-20 text-center",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4",children:"جاهز للبدء؟"}),a.jsx("p",{className:"text-muted-foreground text-lg mb-8",children:"انضم إلى مئات التجار الذين يثقون في منصتنا لإدارة معاملاتهم المالية"}),a.jsx(ms,{to:"/auth?mode=signup",children:a.jsxs(W,{size:"lg",className:"btn-primary shadow-elegant",children:["إنشاء حساب مجاني",a.jsx(gg,{className:"mr-2 h-5 w-5"})]})})]})}),a.jsx("footer",{className:"border-t border-border bg-card/50 py-8",children:a.jsxs("div",{className:"container mx-auto px-4 text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx("div",{className:"h-6 w-6 gradient-primary rounded flex items-center justify-center",children:a.jsx(fl,{className:"h-4 w-4 text-white"})}),a.jsx("span",{className:"font-semibold",children:"CashyLink"})]}),a.jsx("p",{className:"text-muted-foreground text-sm",children:"© 2024 CashyLink. جميع الحقوق محفوظة."})]})})]})}const ce=p.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:be("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));ce.displayName="Input";function Iz(){const[t]=bC(),e=cr(),n=t.get("mode")||"signin",[r,s]=p.useState(n==="signup"),[i,o]=p.useState(!1),[l,c]=p.useState({email:"admin@example.com",password:"password123",fullName:"",phone:""}),{signIn:u,signUp:h,user:f}=Pn(),{toast:m}=en();if(f)return a.jsx(wC,{to:"/",replace:!0});const g=async T=>{T.preventDefault(),o(!0);try{if(r){const{error:v}=await h(l.email,l.password,{full_name:l.fullName,phone:l.phone});if(v)throw v;try{await fc(Xt(Ae,"admin_notifications"),{type:"new_user_registration",title:"تسجيل مستخدم جديد",message:`تم تسجيل مستخدم جديد: ${l.fullName||l.email}`,userEmail:l.email,userName:l.fullName||"غير محدد",userPhone:l.phone||"غير محدد",isRead:!1,priority:"high",createdAt:dt(),timestamp:new Date().toISOString()})}catch(_){console.error("Error sending admin notification:",_)}m({title:"تم إنشاء الحساب بنجاح!",description:"تحقق من بريدك الإلكتروني لتفعيل الحساب"});const x=l.fullName||"التاجر الجديد";e(`/user/account-setup?user_name=${encodeURIComponent(x)}`)}else{const{error:v}=await u(l.email,l.password);if(v)throw v;m({title:"مرحباً بك!",description:"تم تسجيل الدخول بنجاح، جاري إعداد حسابك..."})}}catch(v){m({title:"خطأ",description:v.message||"حدث خطأ أثناء المعالجة",variant:"destructive"})}finally{o(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/10 flex items-center justify-center p-4",children:a.jsxs(Qe,{className:"w-full max-w-md",children:[a.jsxs(pt,{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx("div",{className:"h-8 w-8 gradient-primary rounded-lg flex items-center justify-center",children:a.jsx(fl,{className:"h-5 w-5 text-white"})}),a.jsx("span",{className:"text-xl font-bold",children:"CashyLink"})]}),a.jsx(mt,{children:r?"إنشاء حساب جديد":"تسجيل الدخول"})]}),a.jsxs(Ye,{children:[a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r&&a.jsxs(a.Fragment,{children:[a.jsx(ce,{placeholder:"الاسم الكامل",value:l.fullName,onChange:T=>c({...l,fullName:T.target.value}),required:!0}),a.jsx(ce,{placeholder:"رقم الهاتف",value:l.phone,onChange:T=>c({...l,phone:T.target.value})})]}),a.jsx(ce,{type:"email",placeholder:"البريد الإلكتروني",value:l.email,onChange:T=>c({...l,email:T.target.value}),required:!0}),a.jsx(ce,{type:"password",placeholder:"كلمة المرور",value:l.password,onChange:T=>c({...l,password:T.target.value}),required:!0}),a.jsx(W,{type:"submit",className:"w-full btn-primary",disabled:i,children:i?"جاري المعالجة...":r?"إنشاء الحساب":"تسجيل الدخول"}),a.jsx(W,{type:"button",variant:"secondary",className:"w-full mt-2",onClick:()=>{c({email:"admin@example.com",password:"password123",fullName:"",phone:""}),setTimeout(()=>{const T=document.querySelector("form");T&&T.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},100)},children:"تسجيل دخول كمدير"})]}),a.jsxs("div",{className:"text-center mt-6",children:[a.jsx("span",{className:"text-muted-foreground",children:r?"لديك حساب؟":"ليس لديك حساب؟"}),a.jsx(W,{variant:"link",onClick:()=>s(!r),className:"text-primary",children:r?"تسجيل الدخول":"إنشاء حساب"})]}),a.jsx("div",{className:"text-center mt-4",children:a.jsx(ms,{to:"/",children:a.jsx(W,{variant:"ghost",className:"text-muted-foreground",children:"العودة للصفحة الرئيسية"})})})]})]})})}function Cz(){const t=cr(),{user:e,profile:n,signIn:r,signOut:s}=Pn(),{toast:i}=en(),[o,l]=p.useState(!1),[c,u]=p.useState({email:"admin@example.com",password:"password123"});p.useEffect(()=>{e&&(n==null?void 0:n.role)==="admin"&&t("/admin/dashboard")},[e,n,t]);const h=async m=>{m.preventDefault(),l(!0);try{const{error:g}=await r(c.email,c.password);if(g){i({title:"خطأ في تسجيل الدخول",description:g.message||"البريد الإلكتروني أو كلمة المرور غير صحيحة",variant:"destructive"}),l(!1);return}i({title:"تم تسجيل الدخول بنجاح",description:"مرحباً بك في لوحة تحكم الإدارة"}),setTimeout(()=>{t("/admin/dashboard")},500)}catch(g){console.error("Login error:",g),i({title:"خطأ في تسجيل الدخول",description:"حدث خطأ غير متوقع، يرجى المحاولة مرة أخرى",variant:"destructive"}),l(!1)}},f=()=>{u({email:"admin@example.com",password:"password123"}),setTimeout(()=>{const m=document.querySelector("form");m&&m.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},100)};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-background to-indigo-50 flex items-center justify-center p-4",children:a.jsxs(Qe,{className:"w-full max-w-md shadow-lg",children:[a.jsxs(pt,{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:a.jsx(li,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fl,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"text-xl font-bold text-primary",children:"CashyLink"})]})]}),a.jsx(mt,{className:"text-2xl font-bold text-gray-800",children:"لوحة تحكم الأدمن"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"تسجيل الدخول للوصول إلى لوحة التحكم"})]}),a.jsxs(Ye,{children:[e?a.jsxs("div",{className:"space-y-4 text-center",children:[a.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[a.jsx("p",{className:"text-green-800 font-medium mb-2",children:"أنت مسجل دخول بالفعل"}),a.jsx("p",{className:"text-green-600 text-sm",children:e.email})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(W,{onClick:()=>t("/"),className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:"الانتقال للصفحة الرئيسية"}),a.jsx(W,{variant:"outline",onClick:async()=>{await s(),i({title:"تم تسجيل الخروج بنجاح"})},className:"flex-1 border-red-200 text-red-600 hover:bg-red-50",children:"تسجيل خروج"})]})]}):a.jsxs("form",{onSubmit:h,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),a.jsx(ce,{id:"email",type:"email",placeholder:"admin@example.com",value:c.email,onChange:m=>u(g=>({...g,email:m.target.value})),required:!0,className:"h-11"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"كلمة المرور"}),a.jsx(ce,{id:"password",type:"password",placeholder:"••••••••",value:c.password,onChange:m=>u(g=>({...g,password:m.target.value})),required:!0,className:"h-11"})]}),a.jsx(W,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",disabled:o,children:o?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري تسجيل الدخول..."]}):"تسجيل الدخول"}),a.jsxs(W,{type:"button",variant:"outline",className:"w-full h-11 border-blue-200 text-blue-600 hover:bg-blue-50",onClick:f,disabled:o,children:[a.jsx(li,{className:"w-4 h-4 mr-2"}),"تسجيل دخول سريع (أدمن)"]})]}),a.jsx("div",{className:"text-center mt-6 pt-4 border-t",children:a.jsx("p",{className:"text-xs text-muted-foreground",children:"صفحة مخصصة لمديري النظام فقط"})})]})]})})}const Az=ad("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function bn({className:t,variant:e,...n}){return a.jsx("div",{className:be(Az({variant:e}),t),...n})}function Pz({onNotificationCountChange:t}){const[e,n]=p.useState([]),[r,s]=p.useState(0),[i,o]=p.useState(!0),[l,c]=p.useState(!1),{toast:u}=en();p.useEffect(()=>{const x=mi(Xt(Ae,"admin_notifications"),ya("createdAt","desc"),tw(50)),_=rw(x,b=>{const w=b.docs.map(O=>({id:O.id,...O.data()}));n(w);const I=w.filter(O=>!O.isRead);s(I.length),t&&t(I.length),o(!1),w.filter(O=>!O.isRead&&new Date(O.timestamp).getTime()>Date.now()-5e3).forEach(O=>{O.type==="new_user_registration"&&u({title:"🔔 إشعار جديد",description:`تم تسجيل مستخدم جديد: ${O.userName}`,duration:5e3})})},b=>{console.error("Error listening to notifications:",b),o(!1),u({title:"خطأ في تحميل الإشعارات",description:"حدث خطأ أثناء تحميل الإشعارات. يرجى المحاولة مرة أخرى.",variant:"destructive"})});return()=>_()},[t,u]);const h=async x=>{try{await js(tt(Ae,"admin_notifications",x),{isRead:!0})}catch(_){console.error("Error marking notification as read:",_)}},f=async()=>{try{const _=e.filter(b=>!b.isRead).map(b=>js(tt(Ae,"admin_notifications",b.id),{isRead:!0}));await Promise.all(_),u({title:"تم تحديث الإشعارات",description:"تم وضع علامة مقروء على جميع الإشعارات"})}catch(x){console.error("Error marking all notifications as read:",x),u({title:"خطأ",description:"حدث خطأ أثناء تحديث الإشعارات",variant:"destructive"})}},m=async x=>{try{await lm(tt(Ae,"admin_notifications",x)),u({title:"تم حذف الإشعار",description:"تم حذف الإشعار بنجاح"})}catch(_){console.error("Error deleting notification:",_),u({title:"خطأ",description:"حدث خطأ أثناء حذف الإشعار",variant:"destructive"})}},g=x=>{switch(x){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},T=x=>{switch(x){case"new_user_registration":return a.jsx(ld,{className:"h-4 w-4"});default:return a.jsx(Bc,{className:"h-4 w-4"})}},v=x=>{const _=new Date,b=new Date(x),w=Math.floor((_.getTime()-b.getTime())/(1e3*60));return w<1?"الآن":w<60?`منذ ${w} دقيقة`:w<1440?`منذ ${Math.floor(w/60)} ساعة`:`منذ ${Math.floor(w/1440)} يوم`};return a.jsxs("div",{className:"relative",children:[a.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>c(!l),className:"relative p-2 hover:bg-slate-100 dark:hover:bg-slate-700",children:[a.jsx(Bc,{className:"h-5 w-5"}),r>0&&a.jsx(bn,{className:"absolute -top-1 -right-1 h-5 w-5 p-0 flex items-center justify-center text-xs bg-red-500 hover:bg-red-600",children:r>99?"99+":r})]}),l&&a.jsx("div",{className:"absolute left-0 top-full mt-2 w-96 z-50",children:a.jsxs(Qe,{className:"shadow-xl border-0 bg-white/95 backdrop-blur-sm",children:[a.jsx(pt,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(mt,{className:"text-lg font-bold flex items-center gap-2",children:[a.jsx(Bc,{className:"h-5 w-5"}),"الإشعارات",r>0&&a.jsxs(bn,{variant:"destructive",className:"text-xs",children:[r," جديد"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[r>0&&a.jsxs(W,{variant:"ghost",size:"sm",onClick:f,className:"text-xs",children:[a.jsx(wf,{className:"h-3 w-3 ml-1"}),"قراءة الكل"]}),a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>c(!1),children:a.jsx(ju,{className:"h-4 w-4"})})]})]})}),a.jsx(Ye,{className:"p-0 max-h-96 overflow-y-auto",children:i?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):e.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Bc,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"لا توجد إشعارات"})]}):a.jsx("div",{className:"space-y-1",children:e.map(x=>a.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 transition-colors duration-200 ${x.isRead?"":"bg-blue-50 border-l-4 border-l-blue-500"}`,children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx("div",{className:`p-2 rounded-full ${g(x.priority)} text-white`,children:T(x.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h4",{className:"font-medium text-sm text-gray-900 truncate",children:x.title}),!x.isRead&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:x.message}),x.type==="new_user_registration"&&a.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[a.jsxs("div",{children:["📧 ",x.userEmail]}),x.userPhone&&a.jsxs("div",{children:["📱 ",x.userPhone]})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-400",children:[a.jsx(Vl,{className:"h-3 w-3"}),v(x.timestamp)]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[!x.isRead&&a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>h(x.id),className:"h-6 w-6 p-0",children:a.jsx(wf,{className:"h-3 w-3"})}),a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>m(x.id),className:"h-6 w-6 p-0 text-red-500 hover:text-red-700",children:a.jsx(ju,{className:"h-3 w-3"})})]})]})},x.id))})})]})})]})}var Og="focusScope.autoFocusOnMount",Mg="focusScope.autoFocusOnUnmount",zE={bubbles:!1,cancelable:!0},Rz="FocusScope",cm=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=p.useState(null),u=Wn(s),h=Wn(i),f=p.useRef(null),m=Ge(e,v=>c(v)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(w){if(g.paused||!l)return;const I=w.target;l.contains(I)?f.current=I:Pi(f.current,{select:!0})},x=function(w){if(g.paused||!l)return;const I=w.relatedTarget;I!==null&&(l.contains(I)||Pi(f.current,{select:!0}))},_=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&Pi(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const b=new MutationObserver(_);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),b.disconnect()}}},[r,l,g.paused]),p.useEffect(()=>{if(l){HE.add(g);const v=document.activeElement;if(!l.contains(v)){const _=new CustomEvent(Og,zE);l.addEventListener(Og,u),l.dispatchEvent(_),_.defaultPrevented||(kz(Lz(lR(l)),{select:!0}),document.activeElement===v&&Pi(l))}return()=>{l.removeEventListener(Og,u),setTimeout(()=>{const _=new CustomEvent(Mg,zE);l.addEventListener(Mg,h),l.dispatchEvent(_),_.defaultPrevented||Pi(v??document.body,{select:!0}),l.removeEventListener(Mg,h),HE.remove(g)},0)}}},[l,u,h,g]);const T=p.useCallback(v=>{if(!n&&!r||g.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,_=document.activeElement;if(x&&_){const b=v.currentTarget,[w,I]=jz(b);w&&I?!v.shiftKey&&_===I?(v.preventDefault(),n&&Pi(w,{select:!0})):v.shiftKey&&_===w&&(v.preventDefault(),n&&Pi(I,{select:!0})):_===b&&v.preventDefault()}},[n,r,g.paused]);return a.jsx(xe.div,{tabIndex:-1,...o,ref:m,onKeyDown:T})});cm.displayName=Rz;function kz(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Pi(r,{select:e}),document.activeElement!==n)return}function jz(t){const e=lR(t),n=WE(e,t),r=WE(e.reverse(),t);return[n,r]}function lR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function WE(t,e){for(const n of t)if(!Dz(n,{upTo:e}))return n}function Dz(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function Oz(t){return t instanceof HTMLInputElement&&"select"in t}function Pi(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&Oz(t)&&e&&t.select()}}var HE=Mz();function Mz(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=qE(t,e),t.unshift(e)},remove(e){var n;t=qE(t,e),(n=t[0])==null||n.resume()}}}function qE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function Lz(t){return t.filter(e=>e.tagName!=="A")}var Lg=0;function iw(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??KE()),document.body.insertAdjacentElement("beforeend",t[1]??KE()),Lg++,()=>{Lg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Lg--}},[])}function KE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ys=function(){return ys=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ys.apply(this,arguments)};function cR(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Vz(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var qh="right-scroll-bar-position",Kh="width-before-scroll-bar",Fz="with-scroll-bars-hidden",Uz="--removed-body-scroll-bar-size";function Vg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function $z(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var Bz=typeof window<"u"?p.useLayoutEffect:p.useEffect,GE=new WeakMap;function zz(t,e){var n=$z(null,function(r){return t.forEach(function(s){return Vg(s,r)})});return Bz(function(){var r=GE.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Vg(l,null)}),i.forEach(function(l){s.has(l)||Vg(l,o)})}GE.set(n,t)},[t]),n}function Wz(t){return t}function Hz(t,e){e===void 0&&(e=Wz);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function qz(t){t===void 0&&(t={});var e=Hz(null);return e.options=ys({async:!0,ssr:!1},t),e}var uR=function(t){var e=t.sideCar,n=cR(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,ys({},n))};uR.isSideCarExport=!0;function Kz(t,e){return t.useMedium(e),uR}var dR=qz(),Fg=function(){},um=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Fg,onWheelCapture:Fg,onTouchMoveCapture:Fg}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,g=t.noRelative,T=t.noIsolation,v=t.inert,x=t.allowPinchZoom,_=t.as,b=_===void 0?"div":_,w=t.gapMode,I=cR(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=m,O=zz([n,e]),N=ys(ys({},I),s);return p.createElement(p.Fragment,null,h&&p.createElement(k,{sideCar:dR,removeScrollBar:u,shards:f,noRelative:g,noIsolation:T,inert:v,setCallbacks:i,allowPinchZoom:!!x,lockRef:n,gapMode:w}),o?p.cloneElement(p.Children.only(l),ys(ys({},N),{ref:O})):p.createElement(b,ys({},N,{className:c,ref:O}),l))});um.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};um.classNames={fullWidth:Kh,zeroRight:qh};var Gz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Qz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Gz();return e&&t.setAttribute("nonce",e),t}function Yz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Xz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var Jz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Qz())&&(Yz(e,n),Xz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Zz=function(){var t=Jz();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},hR=function(){var t=Zz(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},e8={left:0,top:0,right:0,gap:0},Ug=function(t){return parseInt(t||"",10)||0},t8=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Ug(n),Ug(r),Ug(s)]},n8=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return e8;var e=t8(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},r8=hR(),wl="data-scroll-locked",s8=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(Fz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(wl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qh,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Kh,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(qh," .").concat(qh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Kh," .").concat(Kh,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(wl,`] {
    `).concat(Uz,": ").concat(l,`px;
  }
`)},QE=function(){var t=parseInt(document.body.getAttribute(wl)||"0",10);return isFinite(t)?t:0},i8=function(){p.useEffect(function(){return document.body.setAttribute(wl,(QE()+1).toString()),function(){var t=QE()-1;t<=0?document.body.removeAttribute(wl):document.body.setAttribute(wl,t.toString())}},[])},o8=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;i8();var i=p.useMemo(function(){return n8(s)},[s]);return p.createElement(r8,{styles:s8(i,!e,s,n?"":"!important")})},Av=!1;if(typeof window<"u")try{var yh=Object.defineProperty({},"passive",{get:function(){return Av=!0,!0}});window.addEventListener("test",yh,yh),window.removeEventListener("test",yh,yh)}catch{Av=!1}var La=Av?{passive:!1}:!1,a8=function(t){return t.tagName==="TEXTAREA"},fR=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!a8(t)&&n[e]==="visible")},l8=function(t){return fR(t,"overflowY")},c8=function(t){return fR(t,"overflowX")},YE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=pR(t,r);if(s){var i=mR(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},u8=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},d8=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},pR=function(t,e){return t==="v"?l8(e):c8(e)},mR=function(t,e){return t==="v"?u8(e):d8(e)},h8=function(t,e){return t==="h"&&e==="rtl"?-1:1},f8=function(t,e,n,r,s){var i=h8(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,m=0;do{if(!l)break;var g=mR(t,l),T=g[0],v=g[1],x=g[2],_=v-x-i*T;(T||_)&&pR(t,l)&&(f+=_,m+=T);var b=l.parentNode;l=b&&b.nodeType===Node.DOCUMENT_FRAGMENT_NODE?b.host:b}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(u=!0),u},vh=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},XE=function(t){return[t.deltaX,t.deltaY]},JE=function(t){return t&&"current"in t?t.current:t},p8=function(t,e){return t[0]===e[0]&&t[1]===e[1]},m8=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},g8=0,Va=[];function y8(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(g8++)[0],i=p.useState(hR)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=Vz([t.lockRef.current],(t.shards||[]).map(JE),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var _=vh(v),b=n.current,w="deltaX"in v?v.deltaX:b[0]-_[0],I="deltaY"in v?v.deltaY:b[1]-_[1],k,O=v.target,N=Math.abs(w)>Math.abs(I)?"h":"v";if("touches"in v&&N==="h"&&O.type==="range")return!1;var S=YE(N,O);if(!S)return!0;if(S?k=N:(k=N==="v"?"h":"v",S=YE(N,O)),!S)return!1;if(!r.current&&"changedTouches"in v&&(w||I)&&(r.current=k),!k)return!0;var C=r.current||k;return f8(C,x,v,C==="h"?w:I,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!Va.length||Va[Va.length-1]!==i)){var _="deltaY"in x?XE(x):vh(x),b=e.current.filter(function(k){return k.name===x.type&&(k.target===x.target||x.target===k.shadowParent)&&p8(k.delta,_)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(JE).filter(Boolean).filter(function(k){return k.contains(x.target)}),I=w.length>0?l(x,w[0]):!o.current.noIsolation;I&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,_,b){var w={name:v,delta:x,target:_,should:b,shadowParent:v8(_)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(I){return I!==w})},1)},[]),h=p.useCallback(function(v){n.current=vh(v),r.current=void 0},[]),f=p.useCallback(function(v){u(v.type,XE(v),v.target,l(v,t.lockRef.current))},[]),m=p.useCallback(function(v){u(v.type,vh(v),v.target,l(v,t.lockRef.current))},[]);p.useEffect(function(){return Va.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,La),document.addEventListener("touchmove",c,La),document.addEventListener("touchstart",h,La),function(){Va=Va.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,La),document.removeEventListener("touchmove",c,La),document.removeEventListener("touchstart",h,La)}},[]);var g=t.removeScrollBar,T=t.inert;return p.createElement(p.Fragment,null,T?p.createElement(i,{styles:m8(s)}):null,g?p.createElement(o8,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function v8(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const x8=Kz(dR,y8);var dm=p.forwardRef(function(t,e){return p.createElement(um,ys({},t,{ref:e,sideCar:x8}))});dm.classNames=um.classNames;var w8=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Fa=new WeakMap,xh=new WeakMap,wh={},$g=0,gR=function(t){return t&&(t.host||gR(t.parentNode))},_8=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=gR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},b8=function(t,e,n,r){var s=_8(e,Array.isArray(t)?t:[t]);wh[n]||(wh[n]=new WeakMap);var i=wh[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var g=m.getAttribute(r),T=g!==null&&g!=="false",v=(Fa.get(m)||0)+1,x=(i.get(m)||0)+1;Fa.set(m,v),i.set(m,x),o.push(m),v===1&&T&&xh.set(m,!0),x===1&&m.setAttribute(n,"true"),T||m.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",m,_)}})};return h(e),l.clear(),$g++,function(){o.forEach(function(f){var m=Fa.get(f)-1,g=i.get(f)-1;Fa.set(f,m),i.set(f,g),m||(xh.has(f)||f.removeAttribute(r),xh.delete(f)),g||f.removeAttribute(n)}),$g--,$g||(Fa=new WeakMap,Fa=new WeakMap,xh=new WeakMap,wh={})}},ow=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=w8(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),b8(r,s,n,"aria-hidden")):function(){return null}},hm="Dialog",[yR,DG]=Jr(hm),[E8,es]=yR(hm),vR=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=p.useRef(null),c=p.useRef(null),[u,h]=ua({prop:r,defaultProp:s??!1,onChange:i,caller:hm});return a.jsx(E8,{scope:e,triggerRef:l,contentRef:c,contentId:bs(),titleId:bs(),descriptionId:bs(),open:u,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};vR.displayName=hm;var xR="DialogTrigger",T8=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=es(xR,n),i=Ge(e,s.triggerRef);return a.jsx(xe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":cw(s.open),...r,ref:i,onClick:re(t.onClick,s.onOpenToggle)})});T8.displayName=xR;var aw="DialogPortal",[S8,wR]=yR(aw,{forceMount:void 0}),_R=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=es(aw,e);return a.jsx(S8,{scope:e,forceMount:n,children:p.Children.map(r,o=>a.jsx(Zr,{present:n||i.open,children:a.jsx(id,{asChild:!0,container:s,children:o})}))})};_R.displayName=aw;var Gf="DialogOverlay",bR=p.forwardRef((t,e)=>{const n=wR(Gf,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=es(Gf,t.__scopeDialog);return i.modal?a.jsx(Zr,{present:r||i.open,children:a.jsx(I8,{...s,ref:e})}):null});bR.displayName=Gf;var N8=ca("DialogOverlay.RemoveScroll"),I8=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=es(Gf,n);return a.jsx(dm,{as:N8,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(xe.div,{"data-state":cw(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),va="DialogContent",ER=p.forwardRef((t,e)=>{const n=wR(va,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=es(va,t.__scopeDialog);return a.jsx(Zr,{present:r||i.open,children:i.modal?a.jsx(C8,{...s,ref:e}):a.jsx(A8,{...s,ref:e})})});ER.displayName=va;var C8=p.forwardRef((t,e)=>{const n=es(va,t.__scopeDialog),r=p.useRef(null),s=Ge(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return ow(i)},[]),a.jsx(TR,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:re(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:re(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:re(t.onFocusOutside,i=>i.preventDefault())})}),A8=p.forwardRef((t,e)=>{const n=es(va,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return a.jsx(TR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),TR=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=es(va,n),c=p.useRef(null),u=Ge(e,c);return iw(),a.jsxs(a.Fragment,{children:[a.jsx(cm,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(Zl,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":cw(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(P8,{titleId:l.titleId}),a.jsx(k8,{contentRef:c,descriptionId:l.descriptionId})]})]})}),lw="DialogTitle",SR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=es(lw,n);return a.jsx(xe.h2,{id:s.titleId,...r,ref:e})});SR.displayName=lw;var NR="DialogDescription",IR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=es(NR,n);return a.jsx(xe.p,{id:s.descriptionId,...r,ref:e})});IR.displayName=NR;var CR="DialogClose",AR=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=es(CR,n);return a.jsx(xe.button,{type:"button",...r,ref:e,onClick:re(t.onClick,()=>s.onOpenChange(!1))})});AR.displayName=CR;function cw(t){return t?"open":"closed"}var PR="DialogTitleWarning",[OG,RR]=xM(PR,{contentName:va,titleName:lw,docsSlug:"dialog"}),P8=({titleId:t})=>{const e=RR(PR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},R8="DialogDescriptionWarning",k8=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${RR(R8).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},j8=vR,D8=_R,kR=bR,jR=ER,DR=SR,OR=IR,O8=AR;const Fn=j8,M8=D8,MR=p.forwardRef(({className:t,...e},n)=>a.jsx(kR,{ref:n,className:be("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));MR.displayName=kR.displayName;const En=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(M8,{children:[a.jsx(MR,{}),a.jsxs(jR,{ref:r,className:be("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(O8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(ju,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));En.displayName=jR.displayName;const Tn=({className:t,...e})=>a.jsx("div",{className:be("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Tn.displayName="DialogHeader";const ol=({className:t,...e})=>a.jsx("div",{className:be("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ol.displayName="DialogFooter";const Sn=p.forwardRef(({className:t,...e},n)=>a.jsx(DR,{ref:n,className:be("text-lg font-semibold leading-none tracking-tight",t),...e}));Sn.displayName=DR.displayName;const L8=p.forwardRef(({className:t,...e},n)=>a.jsx(OR,{ref:n,className:be("text-sm text-muted-foreground",t),...e}));L8.displayName=OR.displayName;var V8="Label",LR=p.forwardRef((t,e)=>a.jsx(xe.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));LR.displayName=V8;var VR=LR;const F8=ad("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Te=p.forwardRef(({className:t,...e},n)=>a.jsx(VR,{ref:n,className:be(F8(),t),...e}));Te.displayName=VR.displayName;const FR="@firebase/installations",uw="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=1e4,$R=`w:${uw}`,BR="FIS_v2",U8="https://firebaseinstallations.googleapis.com/v1",$8=60*60*1e3,B8="installations",z8="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},xa=new Ia(B8,z8,W8);function zR(t){return t instanceof br&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR({projectId:t}){return`${U8}/projects/${t}/installations`}function HR(t){return{token:t.token,requestStatus:2,expiresIn:q8(t.expiresIn),creationTime:Date.now()}}async function qR(t,e){const r=(await e.json()).error;return xa.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function KR({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function H8(t,{refreshToken:e}){const n=KR(t);return n.append("Authorization",K8(e)),n}async function GR(t){const e=await t();return e.status>=500&&e.status<600?t():e}function q8(t){return Number(t.replace("s","000"))}function K8(t){return`${BR} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G8({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=WR(t),s=KR(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:BR,appId:t.appId,sdkVersion:$R},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await GR(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:HR(u.authToken)}}else throw await qR("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q8(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=/^[cdef][\w-]{21}$/,Pv="";function X8(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=J8(t);return Y8.test(n)?n:Pv}catch{return Pv}}function J8(t){return Q8(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new Map;function XR(t,e){const n=fm(t);JR(n,e),Z8(n,e)}function JR(t,e){const n=YR.get(t);if(n)for(const r of n)r(e)}function Z8(t,e){const n=eW();n&&n.postMessage({key:t,fid:e}),tW()}let Go=null;function eW(){return!Go&&"BroadcastChannel"in self&&(Go=new BroadcastChannel("[Firebase] FID Change"),Go.onmessage=t=>{JR(t.data.key,t.data.fid)}),Go}function tW(){YR.size===0&&Go&&(Go.close(),Go=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nW="firebase-installations-database",rW=1,wa="firebase-installations-store";let Bg=null;function dw(){return Bg||(Bg=OC(nW,rW,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(wa)}}})),Bg}async function Qf(t,e){const n=fm(t),s=(await dw()).transaction(wa,"readwrite"),i=s.objectStore(wa),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&XR(t,e.fid),e}async function ZR(t){const e=fm(t),r=(await dw()).transaction(wa,"readwrite");await r.objectStore(wa).delete(e),await r.done}async function pm(t,e){const n=fm(t),s=(await dw()).transaction(wa,"readwrite"),i=s.objectStore(wa),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&XR(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hw(t){let e;const n=await pm(t.appConfig,r=>{const s=sW(r),i=iW(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Pv?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function sW(t){const e=t||{fid:X8(),registrationStatus:0};return e2(e)}function iW(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(xa.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=oW(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:aW(t)}:{installationEntry:e}}async function oW(t,e){try{const n=await G8(t,e);return Qf(t.appConfig,n)}catch(n){throw zR(n)&&n.customData.serverCode===409?await ZR(t.appConfig):await Qf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function aW(t){let e=await ZE(t.appConfig);for(;e.registrationStatus===1;)await QR(100),e=await ZE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await hw(t);return r||n}return e}function ZE(t){return pm(t,e=>{if(!e)throw xa.create("installation-not-found");return e2(e)})}function e2(t){return lW(t)?{fid:t.fid,registrationStatus:0}:t}function lW(t){return t.registrationStatus===1&&t.registrationTime+UR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cW({appConfig:t,heartbeatServiceProvider:e},n){const r=uW(t,n),s=H8(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:$R,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await GR(()=>fetch(r,l));if(c.ok){const u=await c.json();return HR(u)}else throw await qR("Generate Auth Token",c)}function uW(t,{fid:e}){return`${WR(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fw(t,e=!1){let n;const r=await pm(t.appConfig,i=>{if(!t2(i))throw xa.create("not-registered");const o=i.authToken;if(!e&&fW(o))return i;if(o.requestStatus===1)return n=dW(t,e),i;{if(!navigator.onLine)throw xa.create("app-offline");const l=mW(i);return n=hW(t,l),l}});return n?await n:r.authToken}async function dW(t,e){let n=await eT(t.appConfig);for(;n.authToken.requestStatus===1;)await QR(100),n=await eT(t.appConfig);const r=n.authToken;return r.requestStatus===0?fw(t,e):r}function eT(t){return pm(t,e=>{if(!t2(e))throw xa.create("not-registered");const n=e.authToken;return gW(n)?{...e,authToken:{requestStatus:0}}:e})}async function hW(t,e){try{const n=await cW(t,e),r={...e,authToken:n};return await Qf(t.appConfig,r),n}catch(n){if(zR(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ZR(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Qf(t.appConfig,r)}throw n}}function t2(t){return t!==void 0&&t.registrationStatus===2}function fW(t){return t.requestStatus===2&&!pW(t)}function pW(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+$8}function mW(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function gW(t){return t.requestStatus===1&&t.requestTime+UR<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yW(t){const e=t,{installationEntry:n,registrationPromise:r}=await hw(e);return r?r.catch(console.error):fw(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vW(t,e=!1){const n=t;return await xW(n),(await fw(n,e)).token}async function xW(t){const{registrationPromise:e}=await hw(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wW(t){if(!t||!t.options)throw zg("App Configuration");if(!t.name)throw zg("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw zg(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function zg(t){return xa.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2="installations",_W="installations-internal",bW=t=>{const e=t.getProvider("app").getImmediate(),n=wW(e),r=yi(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},EW=t=>{const e=t.getProvider("app").getImmediate(),n=yi(e,n2).getImmediate();return{getId:()=>yW(n),getToken:s=>vW(n,s)}};function TW(){_r(new or(n2,bW,"PUBLIC")),_r(new or(_W,EW,"PRIVATE"))}TW();pn(FR,uw);pn(FR,uw,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yf="analytics",SW="firebase_id",NW="origin",IW=60*1e3,CW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pw="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new Mp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},sr=new Ia("analytics","Analytics",AW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PW(t){if(!t.startsWith(pw)){const e=sr.create("invalid-gtag-resource",{gtagURL:t});return zn.warn(e.message),""}return t}function r2(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function RW(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function kW(t,e){const n=RW("firebase-js-sdk-policy",{createScriptURL:PW}),r=document.createElement("script"),s=`${pw}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function jW(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function DW(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await r2(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(l){zn.error(l)}t("config",s,i)}async function OW(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await r2(n);for(const c of o){const u=l.find(f=>f.measurementId===c),h=u&&e[u.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){zn.error(i)}}function MW(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[l,c]=o;await OW(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await DW(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){zn.error(l)}}return s}function LW(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=MW(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function VW(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(pw)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FW=30,UW=1e3;class $W{constructor(e={},n=UW){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const s2=new $W;function BW(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function zW(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:BW(n)},s=CW.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw sr.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function WW(t,e=s2,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw sr.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw sr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new KW;return setTimeout(async()=>{l.abort()},IW),i2({appId:r,apiKey:s,measurementId:i},o,l,e)}async function i2(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=s2){var l;const{appId:i,measurementId:o}=t;try{await HW(r,e)}catch(c){if(o)return zn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw c}try{const c=await zW(t);return s.deleteThrottleMetadata(i),c}catch(c){const u=c;if(!qW(u)){if(s.deleteThrottleMetadata(i),o)return zn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:i,measurementId:o};throw c}const h=Number((l=u==null?void 0:u.customData)==null?void 0:l.httpStatus)===503?ub(n,s.intervalMillis,FW):ub(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),zn.debug(`Calling attemptFetch again in ${h} millis`),i2(t,f,r,s)}}function HW(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(sr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function qW(t){if(!(t instanceof br)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class KW{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function GW(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QW(){if(RC())try{await kC()}catch(t){return zn.warn(sr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return zn.warn(sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function YW(t,e,n,r,s,i,o){const l=WW(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&zn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>zn.error(m)),e.push(l);const c=QW().then(m=>{if(m)return r.getId()}),[u,h]=await Promise.all([l,c]);VW(i)||kW(i,u.measurementId),s("js",new Date);const f=(o==null?void 0:o.config)??{};return f[NW]="firebase",f.update=!0,h!=null&&(f[SW]=h),s("config",u.measurementId,f),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XW{constructor(e){this.app=e}_delete(){return delete mu[this.app.options.appId],Promise.resolve()}}let mu={},tT=[];const nT={};let Wg="dataLayer",JW="gtag",rT,o2,sT=!1;function ZW(){const t=[];if(PC()&&t.push("This is a browser extension environment."),_3()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=sr.create("invalid-analytics-context",{errorInfo:e});zn.warn(n.message)}}function eH(t,e,n){ZW();const r=t.options.appId;if(!r)throw sr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)zn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw sr.create("no-api-key");if(mu[r]!=null)throw sr.create("already-exists",{id:r});if(!sT){jW(Wg);const{wrappedGtag:i,gtagCore:o}=LW(mu,tT,nT,Wg,JW);o2=i,rT=o,sT=!0}return mu[r]=YW(t,tT,nT,e,rT,Wg,n),new XW(t)}function tH(t=dd()){t=ct(t);const e=yi(t,Yf);return e.isInitialized()?e.getImmediate():nH(t)}function nH(t,e={}){const n=yi(t,Yf);if(n.isInitialized()){const s=n.getImmediate();if(mo(e,n.getOptions()))return s;throw sr.create("already-initialized")}return n.initialize({options:e})}function rH(t,e,n,r){t=ct(t),GW(o2,mu[t.app.options.appId],e,n,r).catch(s=>zn.error(s))}const iT="@firebase/analytics",oT="0.10.18";function sH(){_r(new or(Yf,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return eH(r,s,n)},"PUBLIC")),_r(new or("analytics-internal",t,"PRIVATE")),pn(iT,oT),pn(iT,oT,"esm2020");function t(e){try{const n=e.getProvider(Yf).getImmediate();return{logEvent:(r,s,i)=>rH(n,r,s,i)}}catch(n){throw sr.create("interop-component-reg-failed",{reason:n})}}}sH();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="firebasestorage.googleapis.com",iH="storageBucket",oH=2*60*1e3,aH=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends br{constructor(e,n,r=0){super(Hg(e),`Firebase Storage: ${n} (${Hg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Hg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ds;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ds||(Ds={}));function Hg(t){return"storage/"+t}function lH(){const t="An unknown error occurred, please check the error payload for server response.";return new Vs(Ds.UNKNOWN,t)}function cH(){return new Vs(Ds.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uH(){return new Vs(Ds.CANCELED,"User canceled the upload/download.")}function dH(t){return new Vs(Ds.INVALID_URL,"Invalid URL '"+t+"'.")}function hH(t){return new Vs(Ds.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function aT(t){return new Vs(Ds.INVALID_ARGUMENT,t)}function l2(){return new Vs(Ds.APP_DELETED,"The Firebase app was deleted.")}function fH(t){return new Vs(Ds.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=$r.makeFromUrl(e,n)}catch{return new $r(e,"")}if(r.path==="")return r;throw hH(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(I){I.path.charAt(I.path.length-1)==="/"&&(I.path_=I.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(I){I.path_=decodeURIComponent(I.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),T={bucket:1,path:3},v=n===a2?"(?:storage.googleapis.com|storage.cloud.google.com)":n,x="([^?#]*)",_=new RegExp(`^https?://${v}/${s}/${x}`,"i"),w=[{regex:l,indices:c,postModify:i},{regex:g,indices:T,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let I=0;I<w.length;I++){const k=w[I],O=k.regex.exec(e);if(O){const N=O[k.indices.bucket];let S=O[k.indices.path];S||(S=""),r=new $r(N,S),k.postModify(r);break}}if(r==null)throw dH(e);return r}}class pH{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mH(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function h(...x){u||(u=!0,e.apply(null,x))}function f(x){s=setTimeout(()=>{s=null,t(g,c())},x)}function m(){i&&clearTimeout(i)}function g(x,..._){if(u){m();return}if(x){m(),h.call(null,x,..._);return}if(c()||o){m(),h.call(null,x,..._);return}r<64&&(r*=2);let w;l===1?(l=2,w=0):w=(r+Math.random())*1e3,f(w)}let T=!1;function v(x){T||(T=!0,m(),!u&&(s!==null?(x||(l=2),clearTimeout(s),f(0)):x||(l=1)))}return f(0),i=setTimeout(()=>{o=!0,v(!0)},n),v}function gH(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yH(t){return t!==void 0}function lT(t,e,n,r){if(r<e)throw aT(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw aT(`Invalid value for '${t}'. Expected ${n} or less.`)}function vH(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Xf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xf||(Xf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wH{constructor(e,n,r,s,i,o,l,c,u,h,f,m=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,v)=>{this.resolve_=T,this.reject_=v,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new _h(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Xf.NO_ERROR,c=i.getStatus();if(!l||xH(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===Xf.ABORT;r(!1,new _h(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new _h(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());yH(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=lH();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?l2():uH();o(c)}else{const c=cH();o(c)}};this.canceled_?n(!1,new _h(!1,null,!0)):this.backoffId_=mH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _h{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function _H(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function bH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function EH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function TH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function SH(t,e,n,r,s,i,o=!0,l=!1){const c=vH(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return EH(h,e),_H(h,n),bH(h,i),TH(h,r),new wH(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NH(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function IH(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this._service=e,n instanceof $r?this._location=n:this._location=$r.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jf(e,n)}get root(){const e=new $r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return IH(this._location.path)}get storage(){return this._service}get parent(){const e=NH(this._location.path);if(e===null)return null;const n=new $r(this._location.bucket,e);return new Jf(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw fH(e)}}function cT(t,e){const n=e==null?void 0:e[iH];return n==null?null:$r.makeFromBucketSpec(n,t)}function CH(t,e,n,r={}){t.host=`${e}:${n}`;const s=Ao(e);s&&(Dp(`https://${t.host}/b`),Op("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:AC(i,t.app.options.projectId))}class AH{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=a2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oH,this._maxUploadRetryTime=aH,this._requests=new Set,s!=null?this._bucket=$r.makeFromBucketSpec(s,this._host):this._bucket=cT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$r.makeFromBucketSpec(this._url,e):this._bucket=cT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){lT("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){lT("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Mn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jf(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new pH(l2());{const o=SH(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const uT="@firebase/storage",dT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="storage";function PH(t=dd(),e){t=ct(t);const r=yi(t,c2).getImmediate({identifier:e}),s=cx("storage");return s&&RH(r,...s),r}function RH(t,e,n,r={}){CH(t,e,n,r)}function kH(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new AH(n,r,s,e,Ca)}function jH(){_r(new or(c2,kH,"PUBLIC").setMultipleInstances(!0)),pn(uT,dT,""),pn(uT,dT,"esm2020")}jH();const DH={apiKey:"AIzaSyBRYf_nDTQC-wzWZWjFyWjUKKWc5UHOe-I",authDomain:"voda-45a7f.firebaseapp.com",projectId:"voda-45a7f",storageBucket:"voda-45a7f.appspot.com",messagingSenderId:"1234567890",appId:"1:1234567890:web:abcdef123456",measurementId:"G-DUMMY"},pc=dx(DH),Zf=_A(pc),OH=Qx(pc);PH(pc);sR(pc);tH(pc);const u2=Object.freeze(Object.defineProperty({__proto__:null,app:pc,auth:Zf,db:OH},Symbol.toStringTag,{value:"Module"})),MH=async(t,e,n)=>{try{if(!t||!e||!n)return jn.error("جميع الحقول مطلوبة"),!1;if(e.length<6)return jn.error("كلمة المرور يجب أن تكون 6 أحرف على الأقل"),!1;const r=Zf.currentUser;if(!r)return jn.error("يجب تسجيل الدخول أولاً"),!1;try{await vx(Zf,r.email,n)}catch{return jn.error("كلمة مرور المشرف غير صحيحة"),!1}return jn.info("تم إرسال رابط إعادة تعيين كلمة المرور للمستخدم"),!0}catch(r){return console.error("خطأ في تحديث كلمة المرور:",r),jn.error("حدث خطأ أثناء تحديث كلمة المرور"),!1}},LH=async t=>{try{const{doc:e,getDoc:n}=await Ql(async()=>{const{doc:i,getDoc:o}=await Promise.resolve().then(()=>nR);return{doc:i,getDoc:o}},void 0),{db:r}=await Ql(async()=>{const{db:i}=await Promise.resolve().then(()=>u2);return{db:i}},void 0),s=await n(e(r,"profiles",t));return s.exists()?s.data().role==="admin":!1}catch(e){return console.error("خطأ في التحقق من الصلاحيات:",e),!1}},VH=async(t,e,n)=>{try{const{collection:r,addDoc:s,serverTimestamp:i}=await Ql(async()=>{const{collection:l,addDoc:c,serverTimestamp:u}=await Promise.resolve().then(()=>nR);return{collection:l,addDoc:c,serverTimestamp:u}},void 0),{db:o}=await Ql(async()=>{const{db:l}=await Promise.resolve().then(()=>u2);return{db:l}},void 0);await s(r(o,"auditLogs"),{adminId:t,targetUserId:e,action:n,timestamp:i(),type:"password_management"})}catch(r){console.error("خطأ في تسجيل العملية:",r)}};function FH({isOpen:t,onClose:e,user:n}){const[r,s]=p.useState(""),[i,o]=p.useState(""),[l,c]=p.useState(""),[u,h]=p.useState(!1),[f,m]=p.useState(!1),[g,T]=p.useState(!1),[v,x]=p.useState(!1),{toast:_}=en(),b=()=>{s(""),o(""),c(""),h(!1),m(!1),T(!1),e()},w=k=>{const N=/[A-Z]/.test(k),S=/[a-z]/.test(k),C=/\d/.test(k),A=/[!@#$%^&*(),.?":{}|<>]/.test(k);return k.length<8?"كلمة المرور يجب أن تكون 8 أحرف على الأقل":N?S?C?A?null:"كلمة المرور يجب أن تحتوي على رمز خاص واحد على الأقل":"كلمة المرور يجب أن تحتوي على رقم واحد على الأقل":"كلمة المرور يجب أن تحتوي على حرف صغير واحد على الأقل":"كلمة المرور يجب أن تحتوي على حرف كبير واحد على الأقل"},I=async k=>{if(k.preventDefault(),!n)return;if(!r||!i||!l){_({title:"خطأ في البيانات",description:"يرجى ملء جميع الحقول المطلوبة",variant:"destructive"});return}if(r!==i){_({title:"خطأ في كلمة المرور",description:"كلمة المرور الجديدة وتأكيد كلمة المرور غير متطابقتين",variant:"destructive"});return}const O=w(r);if(O){_({title:"كلمة مرور ضعيفة",description:O,variant:"destructive"});return}x(!0);try{const N=Zf.currentUser;if(!N)throw new Error("يجب تسجيل الدخول كمشرف");if(!await LH(N.uid)){_({title:"خطأ في الصلاحيات",description:"ليس لديك صلاحية لتنفيذ هذا الإجراء",variant:"destructive"});return}await MH(n.email,r,l)&&(await VH(N.uid,n.id,"password_updated"),_({title:"تم تغيير كلمة المرور بنجاح",description:`تم تغيير كلمة مرور المستخدم ${n.fullName} بنجاح`}),b())}catch(N){console.error("Error changing user password:",N);let S="حدث خطأ أثناء تغيير كلمة المرور";N.code==="auth/wrong-password"?S="كلمة مرور المشرف غير صحيحة":N.code==="auth/too-many-requests"?S="تم تجاوز عدد المحاولات المسموح. يرجى المحاولة لاحقاً":N.code==="auth/user-not-found"&&(S="المستخدم غير موجود"),_({title:"خطأ في تغيير كلمة المرور",description:S,variant:"destructive"})}finally{x(!1)}};return a.jsx(Fn,{open:t,onOpenChange:b,children:a.jsxs(En,{className:"sm:max-w-md",children:[a.jsx(Tn,{children:a.jsxs(Sn,{className:"flex items-center gap-2 text-lg font-bold",children:[a.jsx(Cs,{className:"h-5 w-5 text-blue-600"}),"تغيير كلمة المرور"]})}),n&&a.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(li,{className:"h-4 w-4 text-blue-600"}),a.jsx("span",{className:"font-medium text-blue-800",children:"معلومات المستخدم"})]}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("strong",{children:"الاسم:"})," ",n.fullName]}),a.jsxs("p",{className:"text-sm text-blue-700",children:[a.jsx("strong",{children:"البريد الإلكتروني:"})," ",n.email]})]}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"newPassword",className:"text-sm font-medium",children:"كلمة المرور الجديدة"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"newPassword",type:u?"text":"password",value:r,onChange:k=>s(k.target.value),placeholder:"أدخل كلمة المرور الجديدة",className:"pr-10",required:!0}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!u),children:u?a.jsx(Lt,{className:"h-4 w-4 text-gray-400"}):a.jsx(kt,{className:"h-4 w-4 text-gray-400"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"confirmPassword",className:"text-sm font-medium",children:"تأكيد كلمة المرور الجديدة"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"confirmPassword",type:f?"text":"password",value:i,onChange:k=>o(k.target.value),placeholder:"أعد إدخال كلمة المرور الجديدة",className:"pr-10",required:!0}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>m(!f),children:f?a.jsx(Lt,{className:"h-4 w-4 text-gray-400"}):a.jsx(kt,{className:"h-4 w-4 text-gray-400"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"adminPassword",className:"text-sm font-medium text-red-600",children:"كلمة مرور المشرف (للتأكيد)"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"adminPassword",type:g?"text":"password",value:l,onChange:k=>c(k.target.value),placeholder:"أدخل كلمة مرورك كمشرف",className:"pr-10 border-red-200 focus:border-red-400",required:!0}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>T(!g),children:g?a.jsx(Lt,{className:"h-4 w-4 text-gray-400"}):a.jsx(kt,{className:"h-4 w-4 text-gray-400"})})]})]}),a.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(R4,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),a.jsxs("div",{className:"text-xs text-yellow-700",children:[a.jsx("p",{className:"font-medium mb-1",children:"تحذير أمني:"}),a.jsx("p",{children:"تغيير كلمة مرور المستخدم سيؤدي إلى تسجيل خروجه من جميع الأجهزة. تأكد من إبلاغ المستخدم بكلمة المرور الجديدة."})]})]})}),a.jsxs(ol,{className:"flex gap-2",children:[a.jsx(W,{type:"button",variant:"outline",onClick:b,disabled:v,children:"إلغاء"}),a.jsx(W,{type:"submit",disabled:v,className:"bg-blue-600 hover:bg-blue-700",children:v?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري التغيير..."]}):"تغيير كلمة المرور"})]})]})]})})}function UH(){const t=cr(),{user:e,profile:n,signOut:r}=Pn(),{toast:s}=en(),[i,o]=p.useState([]),[l,c]=p.useState([]),[u,h]=p.useState([]),[f,m]=p.useState(!0),[g,T]=p.useState(""),[v,x]=p.useState("overview"),[_,b]=p.useState(!0),[w,I]=p.useState(!1),[k,O]=p.useState(0),[N,S]=p.useState(!1),[C,A]=p.useState(null),[j,D]=p.useState({totalUsers:0,activeUsers:0,totalTransactions:0,totalRevenue:0,pendingApprovals:0});p.useEffect(()=>{if(!e||(n==null?void 0:n.role)!=="admin"){t("/admin/login");return}},[e,n,t]),p.useEffect(()=>{if(e&&(n==null?void 0:n.role)==="admin"){const V=R();return()=>{typeof V=="function"&&V()}}},[e,n]);const R=()=>{const V=Xt(Ae,"profiles");return rw(V,async $=>{try{const ie=$.docs.map(me=>({id:me.id,...me.data()}));o(ie);const Z=mi(Xt(Ae,"transactions"),ya("createdAt","desc"),tw(100)),he=(await ks(Z)).docs.map(me=>({id:me.id,...me.data()}));c(he);const De=(await ks(Xt(Ae,"wallets"))).docs.map(me=>({id:me.id,...me.data()}));h(De);const X=ie.filter(me=>me.isActive).length,Ce=he.reduce((me,_e)=>me+(_e.amount||0),0);D({totalUsers:ie.length,activeUsers:X,totalTransactions:he.length,totalRevenue:Ce,pendingApprovals:ie.filter(me=>!me.isActive).length}),m(!1)}catch(ie){console.error("Error loading dashboard data:",ie),s({title:"خطأ في تحميل البيانات",description:"حدث خطأ أثناء تحميل بيانات لوحة التحكم",variant:"destructive"}),m(!1)}},$=>{console.error("Error loading dashboard data:",$),s({title:"خطأ في تحميل البيانات",description:"حدث خطأ أثناء تحميل بيانات لوحة التحكم",variant:"destructive"}),m(!1)})},K=async(V,L)=>{try{L==="delete"?(await lm(tt(Ae,"profiles",V)),s({title:"تم حذف المستخدم",description:"تم حذف المستخدم بنجاح"})):(await js(tt(Ae,"profiles",V),{isActive:L==="activate"}),s({title:L==="activate"?"تم تفعيل المستخدم":"تم إلغاء تفعيل المستخدم",description:"تم تحديث حالة المستخدم بنجاح"})),R()}catch($){console.error("Error updating user:",$),s({title:"خطأ في تحديث المستخدم",description:"حدث خطأ أثناء تحديث بيانات المستخدم",variant:"destructive"})}},q=async()=>{try{await r()}catch(V){console.error("Error signing out:",V)}},G=[{id:"overview",label:"نظرة عامة",icon:x4},{id:"users",label:"المستخدمون",icon:yg},{id:"transactions",label:"المعاملات",icon:mg},{id:"wallets",label:"المحافظ",icon:_s},{id:"analytics",label:"التحليلات",icon:zy},{id:"reports",label:"التقارير",icon:m4},{id:"settings",label:"الإعدادات",icon:Fl}],Q=({title:V,value:L,icon:$,trend:ie,color:Z})=>a.jsxs(Qe,{className:`relative overflow-hidden transition-all duration-300 hover:shadow-lg hover:scale-105 ${Z} border-0`,children:[a.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(mt,{className:"text-sm font-medium text-white/90",children:V}),a.jsx($,{className:"h-4 w-4 text-white/80"})]}),a.jsxs(Ye,{children:[a.jsx("div",{className:"text-2xl font-bold text-white",children:L}),ie&&a.jsxs("p",{className:"text-xs text-white/70 flex items-center mt-1",children:[a.jsx(yI,{className:"h-3 w-3 mr-1"}),ie]})]}),a.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"})]});return f?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),a.jsx("p",{className:"text-slate-600 animate-pulse",children:"جاري تحميل لوحة التحكم..."})]})}):a.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${w?"dark bg-slate-900":"bg-gradient-to-br from-slate-50 to-slate-100"}`,children:[a.jsxs("div",{className:`fixed inset-y-0 right-0 z-50 w-64 transform transition-transform duration-300 ease-in-out ${_?"translate-x-0":"translate-x-full"} bg-white dark:bg-slate-800 shadow-xl border-l border-slate-200 dark:border-slate-700`,children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(li,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-slate-800 dark:text-white",children:"لوحة التحكم"}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"مدير النظام"})]})]}),a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>b(!1),className:"lg:hidden",children:a.jsx(ju,{className:"h-4 w-4"})})]}),a.jsx("nav",{className:"p-4 space-y-2",children:G.map(V=>a.jsxs("button",{onClick:()=>x(V.id),className:`w-full flex items-center space-x-3 space-x-reverse px-4 py-3 rounded-lg transition-all duration-200 group ${v===V.id?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700"}`,children:[a.jsx(V.icon,{className:`h-5 w-5 ${v===V.id?"text-white":"text-slate-500"}`}),a.jsx("span",{className:"font-medium",children:V.label}),a.jsx(mI,{className:`h-4 w-4 mr-auto transition-transform ${v===V.id?"rotate-90":"group-hover:translate-x-1"}`})]},V.id))}),a.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-slate-200 dark:border-slate-700",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(W,{variant:"ghost",size:"sm",onClick:()=>I(!w),className:"flex items-center space-x-2 space-x-reverse",children:[w?a.jsx(C4,{className:"h-4 w-4"}):a.jsx(T4,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:w?"فاتح":"داكن"})]}),a.jsxs(W,{variant:"ghost",size:"sm",onClick:q,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[a.jsx(Tp,{className:"h-4 w-4 ml-2"}),"خروج"]})]})})]}),a.jsxs("div",{className:`transition-all duration-300 ${_?"mr-64":"mr-0"}`,children:[a.jsx("header",{className:"bg-white dark:bg-slate-800 shadow-sm border-b border-slate-200 dark:border-slate-700 sticky top-0 z-40",children:a.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>b(!_),className:"lg:hidden",children:a.jsx(E4,{className:"h-5 w-5"})}),a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:["مرحباً، ",(n==null?void 0:n.fullName)||"مدير النظام"]}),a.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"إليك نظرة سريعة على أداء النظام اليوم"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsx(Pz,{onNotificationCountChange:O}),a.jsxs(W,{variant:"outline",size:"sm",onClick:R,disabled:f,className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx(N4,{className:`h-4 w-4 ${f?"animate-spin":""}`}),a.jsx("span",{children:"تحديث"})]})]})]})}),a.jsxs("main",{className:"p-6",children:[v==="overview"&&a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsx(Q,{title:"إجمالي المستخدمين",value:j.totalUsers.toLocaleString(),icon:yg,trend:"+12% من الشهر الماضي",color:"bg-gradient-to-r from-blue-500 to-blue-600"}),a.jsx(Q,{title:"المستخدمون النشطون",value:j.activeUsers.toLocaleString(),icon:P1,trend:"+8% من الشهر الماضي",color:"bg-gradient-to-r from-green-500 to-green-600"}),a.jsx(Q,{title:"إجمالي المعاملات",value:j.totalTransactions.toLocaleString(),icon:mg,trend:"+23% من الشهر الماضي",color:"bg-gradient-to-r from-purple-500 to-purple-600"}),a.jsx(Q,{title:"إجمالي الإيرادات",value:`$${j.totalRevenue.toLocaleString()}`,icon:Vr,trend:"+15% من الشهر الماضي",color:"bg-gradient-to-r from-orange-500 to-orange-600"})]}),a.jsxs(Qe,{className:"border-0 shadow-lg",children:[a.jsx(pt,{children:a.jsxs(mt,{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx(li,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{children:"الإجراءات السريعة"})]})}),a.jsx(Ye,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(W,{className:"h-20 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300",onClick:()=>x("users"),children:a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx(yg,{className:"h-6 w-6"}),a.jsx("span",{children:"إدارة المستخدمين"})]})}),a.jsx(W,{className:"h-20 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300",onClick:()=>x("transactions"),children:a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx(mg,{className:"h-6 w-6"}),a.jsx("span",{children:"عرض المعاملات"})]})}),a.jsx(W,{className:"h-20 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300",onClick:()=>x("analytics"),children:a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[a.jsx(zy,{className:"h-6 w-6"}),a.jsx("span",{children:"التحليلات"})]})})]})})]})]}),v==="users"&&a.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right duration-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"إدارة المستخدمين"}),a.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[a.jsxs("div",{className:"relative",children:[a.jsx(I4,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx(ce,{placeholder:"البحث عن مستخدم...",value:g,onChange:V=>T(V.target.value),className:"pr-10 w-64"})]}),a.jsxs(W,{variant:"outline",size:"sm",children:[a.jsx(v4,{className:"h-4 w-4 ml-2"}),"تصفية"]})]})]}),a.jsx(Qe,{className:"border-0 shadow-lg",children:a.jsx(Ye,{className:"p-0",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50 dark:bg-slate-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"text-right p-4 font-medium text-slate-600 dark:text-slate-300",children:"المستخدم"}),a.jsx("th",{className:"text-right p-4 font-medium text-slate-600 dark:text-slate-300",children:"البريد الإلكتروني"}),a.jsx("th",{className:"text-right p-4 font-medium text-slate-600 dark:text-slate-300",children:"الدور"}),a.jsx("th",{className:"text-right p-4 font-medium text-slate-600 dark:text-slate-300",children:"الحالة"}),a.jsx("th",{className:"text-right p-4 font-medium text-slate-600 dark:text-slate-300",children:"الإجراءات"})]})}),a.jsx("tbody",{children:i.filter(V=>{var L,$;return((L=V.fullName)==null?void 0:L.toLowerCase().includes(g.toLowerCase()))||(($=V.email)==null?void 0:$.toLowerCase().includes(g.toLowerCase()))}).map((V,L)=>{var $;return a.jsxs("tr",{className:"border-b border-slate-100 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors duration-200",style:{animationDelay:`${L*100}ms`},children:[a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-medium",children:(($=V.fullName)==null?void 0:$.charAt(0))||"م"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-800 dark:text-white",children:V.fullName||"غير محدد"}),a.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["ID: ",V.id.slice(0,8),"..."]})]})]})}),a.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-300",children:V.email}),a.jsx("td",{className:"p-4",children:a.jsx(bn,{variant:V.role==="admin"?"default":"secondary",children:V.role==="admin"?"مدير":"مستخدم"})}),a.jsx("td",{className:"p-4",children:a.jsx(bn,{variant:V.isActive?"default":"destructive",children:V.isActive?"نشط":"غير نشط"})}),a.jsx("td",{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[a.jsx(W,{variant:"ghost",size:"sm",children:a.jsx(kt,{className:"h-4 w-4"})}),a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{A(V),S(!0)},className:"text-blue-600 hover:text-blue-700",children:a.jsx(w4,{className:"h-4 w-4"})}),a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>K(V.id,V.isActive?"deactivate":"activate"),children:V.isActive?a.jsx(j4,{className:"h-4 w-4"}):a.jsx(P1,{className:"h-4 w-4"})}),a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>K(V.id,"delete"),className:"text-red-600 hover:text-red-700",children:a.jsx(fs,{className:"h-4 w-4"})})]})})]},V.id)})})]})})})})]}),v!=="overview"&&v!=="users"&&a.jsx("div",{className:"flex items-center justify-center h-64 animate-in fade-in duration-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Fl,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-slate-800 dark:text-white mb-2",children:"قيد التطوير"}),a.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"هذا القسم قيد التطوير وسيكون متاحاً قريباً"})]})})]})]}),_&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>b(!1)}),C&&a.jsx(FH,{isOpen:N,onClose:()=>{S(!1),A(null)},user:C})]})}const $H=()=>{const[t,e]=p.useState(""),[n,r]=p.useState(""),[s,i]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(!1),{signIn:h,resetPassword:f}=Pn(),m=cr(),g=async v=>{if(v.preventDefault(),!t||!n){jn.error("يرجى ملء جميع الحقول");return}l(!0);try{const{error:x}=await h(t,n);x?jn.error(x.message||"حدث خطأ أثناء تسجيل الدخول"):(jn.success("تم تسجيل الدخول بنجاح"),m("/user/dashboard"))}catch{jn.error("حدث خطأ غير متوقع")}finally{l(!1)}},T=async()=>{if(!t){jn.error("يرجى إدخال البريد الإلكتروني أولاً");return}u(!0);try{const{error:v}=await f(t);v?jn.error(v.message||"حدث خطأ أثناء إرسال رابط إعادة تعيين كلمة المرور"):jn.success("تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني")}catch{jn.error("حدث خطأ غير متوقع")}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:a.jsxs(Qe,{className:"w-full max-w-md",children:[a.jsxs(pt,{className:"space-y-1 text-center",children:[a.jsx(mt,{className:"text-2xl font-bold text-gray-900",children:"تسجيل دخول المستخدم"}),a.jsx(aR,{className:"text-gray-600",children:"أدخل بياناتك لتسجيل الدخول إلى حسابك"})]}),a.jsxs(Ye,{children:[a.jsxs("form",{onSubmit:g,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"email",className:"text-right block",children:"البريد الإلكتروني"}),a.jsx(ce,{id:"email",type:"email",placeholder:"أدخل بريدك الإلكتروني",value:t,onChange:v=>e(v.target.value),className:"text-right",dir:"rtl",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"password",className:"text-right block",children:"كلمة المرور"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"password",type:s?"text":"password",placeholder:"أدخل كلمة المرور",value:n,onChange:v=>r(v.target.value),className:"text-right pr-10",dir:"rtl",required:!0}),a.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:s?a.jsx(Lt,{size:20}):a.jsx(kt,{size:20})})]})]}),a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs(W,{type:"button",variant:"ghost",size:"sm",onClick:T,disabled:c,className:"text-blue-600 hover:text-blue-800 p-0 h-auto font-normal",children:[a.jsx(gI,{className:"w-4 h-4 ml-1"}),c?"جاري الإرسال...":"نسيت كلمة المرور؟"]})}),a.jsxs(W,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:o,children:[o?"جاري تسجيل الدخول...":"تسجيل الدخول",a.jsx(F0,{className:"mr-2 h-4 w-4"})]})]}),a.jsxs("div",{className:"mt-6 text-center space-y-2",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["ليس لديك حساب؟"," ",a.jsx(ms,{to:"/user/register",className:"text-blue-600 hover:text-blue-800 font-medium",children:"إنشاء حساب جديد"})]}),a.jsx("p",{className:"text-sm",children:a.jsx(ms,{to:"/",className:"text-gray-500 hover:text-gray-700",children:"العودة إلى الصفحة الرئيسية"})})]})]})]})})},BH=ad("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),mw=p.forwardRef(({className:t,variant:e,...n},r)=>a.jsx("div",{ref:r,role:"alert",className:be(BH({variant:e}),t),...n}));mw.displayName="Alert";const zH=p.forwardRef(({className:t,...e},n)=>a.jsx("h5",{ref:n,className:be("mb-1 font-medium leading-none tracking-tight",t),...e}));zH.displayName="AlertTitle";const gw=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:be("text-sm [&_p]:leading-relaxed",t),...e}));gw.displayName="AlertDescription";const WH=()=>{const[t,e]=p.useState({name:"",email:"",password:"",confirmPassword:""}),[n,r]=p.useState(!1),[s,i]=p.useState(!1),[o,l]=p.useState(!1),[c,u]=p.useState(""),{signUp:h}=Pn(),{toast:f}=en(),m=cr(),g=(x,_)=>{e(b=>({...b,[x]:_}))},T=()=>!t.name||!t.email||!t.password||!t.confirmPassword?(u("يرجى ملء جميع الحقول"),!1):t.name.length<2?(u("يجب أن يكون الاسم أكثر من حرفين"),!1):t.password.length<6?(u("يجب أن تكون كلمة المرور 6 أحرف على الأقل"),!1):t.password!==t.confirmPassword?(u("كلمات المرور غير متطابقة"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)?!0:(u("البريد الإلكتروني غير صالح"),!1),v=async x=>{if(x.preventDefault(),u(""),!!T()){l(!0);try{await h(t.email,t.password,t.name),f({title:"تم إنشاء الحساب بنجاح",description:"مرحباً بك في نظام إدارة المحافظ الإلكترونية"}),m("/user/dashboard")}catch(_){console.error("Registration error:",_);let b="حدث خطأ أثناء إنشاء الحساب";_.code==="auth/email-already-in-use"?b="البريد الإلكتروني مستخدم بالفعل":_.code==="auth/invalid-email"?b="البريد الإلكتروني غير صالح":_.code==="auth/weak-password"?b="كلمة المرور ضعيفة جداً":_.code==="auth/operation-not-allowed"&&(b="إنشاء الحسابات غير مفعل حالياً"),u(b),f({title:"خطأ في إنشاء الحساب",description:b,variant:"destructive"})}finally{l(!1)}}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8 fade-in-up",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mb-4 shadow-lg",children:a.jsx(_s,{className:"h-8 w-8 text-white"})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"كاشي لينك"}),a.jsx("p",{className:"text-gray-600",children:"نظام إدارة المحافظ الإلكترونية"})]}),a.jsxs(Qe,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm card-glow fade-in-up",children:[a.jsxs(pt,{className:"text-center pb-4",children:[a.jsxs(mt,{className:"text-2xl font-bold text-gray-900 flex items-center justify-center gap-2",children:[a.jsx(k4,{className:"h-6 w-6 text-green-600"}),"إنشاء حساب جديد"]}),a.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"أدخل بياناتك لإنشاء حساب جديد"})]}),a.jsxs(Ye,{className:"space-y-6",children:[c&&a.jsx(mw,{variant:"destructive",className:"fade-in-up",children:a.jsx(gw,{children:c})}),a.jsxs("form",{onSubmit:v,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2 fade-in-up",children:[a.jsx(Te,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"الاسم الكامل"}),a.jsxs("div",{className:"relative",children:[a.jsx(ld,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ce,{id:"name",type:"text",value:t.name,onChange:x=>g("name",x.target.value),placeholder:"أدخل اسمك الكامل",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:o})]})]}),a.jsxs("div",{className:"space-y-2 fade-in-up",children:[a.jsx(Te,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),a.jsxs("div",{className:"relative",children:[a.jsx(gI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ce,{id:"email",type:"email",value:t.email,onChange:x=>g("email",x.target.value),placeholder:"أدخل بريدك الإلكتروني",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:o})]})]}),a.jsxs("div",{className:"space-y-2 fade-in-up",children:[a.jsx(Te,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"كلمة المرور"}),a.jsxs("div",{className:"relative",children:[a.jsx(Cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ce,{id:"password",type:n?"text":"password",value:t.password,onChange:x=>g("password",x.target.value),placeholder:"أدخل كلمة المرور (6 أحرف على الأقل)",className:"pl-10 pr-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:o}),a.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:o,children:n?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2 fade-in-up",children:[a.jsx(Te,{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"تأكيد كلمة المرور"}),a.jsxs("div",{className:"relative",children:[a.jsx(Cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ce,{id:"confirmPassword",type:s?"text":"password",value:t.confirmPassword,onChange:x=>g("confirmPassword",x.target.value),placeholder:"أعد إدخال كلمة المرور",className:"pl-10 pr-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:o}),a.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:o,children:s?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),a.jsx(W,{type:"submit",disabled:o||!t.name||!t.email||!t.password||!t.confirmPassword,className:"w-full h-12 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-medium transition-all duration-300 btn-bounce hover-glow fade-in-up",children:o?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إنشاء الحساب..."]}):a.jsxs("div",{className:"flex items-center gap-2",children:["إنشاء حساب جديد",a.jsx(F0,{className:"h-4 w-4"})]})})]}),a.jsx("div",{className:"text-center pt-4 border-t border-gray-200 fade-in-up",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["لديك حساب بالفعل؟"," ",a.jsx(ms,{to:"/user/login",className:"text-green-600 hover:text-green-700 font-medium transition-colors hover:underline",children:"تسجيل الدخول"})]})}),a.jsx("div",{className:"text-center pt-2 fade-in-up",children:a.jsxs("p",{className:"text-xs text-gray-500",children:["هل أنت مدير؟"," ",a.jsx(ms,{to:"/admin/login",className:"text-indigo-600 hover:text-indigo-700 font-medium transition-colors hover:underline",children:"تسجيل دخول المدير"})]})})]})]}),a.jsx("div",{className:"text-center mt-8 fade-in-up",children:a.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 كاشي لينك. جميع الحقوق محفوظة."})})]})})},HH=()=>{const[t]=bC(),e=t.get("user_name")||"",n=cr(),{toast:r}=en(),{user:s}=Pn(),[i,o]=p.useState({shopName:"",shopAddress:"",phoneNumber:"",description:""}),[l,c]=p.useState(!1),[u,h]=p.useState("");p.useEffect(()=>{if(!s){n("/auth");return}},[s,n]);const f=T=>{const{name:v,value:x}=T.target;o(_=>({..._,[v]:x}))},m=()=>i.shopName.trim()?i.phoneNumber.trim()?i.shopAddress.trim()?!0:(h("عنوان المتجر مطلوب"),!1):(h("رقم الهاتف مطلوب"),!1):(h("اسم المتجر مطلوب"),!1),g=async T=>{if(T.preventDefault(),h(""),!!m()){c(!0);try{r({title:"تم إعداد الحساب بنجاح",description:`مرحباً ${e}! تم إعداد متجرك "${i.shopName}" بنجاح`}),n("/merchant/dashboard")}catch(v){console.error("Account setup error:",v),h("حدث خطأ أثناء إعداد الحساب"),r({title:"خطأ في إعداد الحساب",description:"حدث خطأ أثناء إعداد الحساب، يرجى المحاولة مرة أخرى",variant:"destructive"})}finally{c(!1)}}};return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-2xl",children:[a.jsxs("div",{className:"text-center mb-8 fade-in-up",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4 shadow-lg",children:a.jsx(A1,{className:"h-8 w-8 text-white"})}),a.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["مرحباً ",e,"!"]}),a.jsx("p",{className:"text-gray-600",children:"دعنا نقوم بإعداد حساب متجرك"})]}),a.jsxs(Qe,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm card-glow fade-in-up",children:[a.jsxs(pt,{className:"text-center pb-4",children:[a.jsxs(mt,{className:"text-2xl font-bold text-gray-900 flex items-center justify-center gap-2",children:[a.jsx(ld,{className:"h-6 w-6 text-blue-600"}),"إعداد حساب التاجر"]}),a.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"أدخل بيانات متجرك لإكمال إعداد الحساب"})]}),a.jsxs(Ye,{className:"space-y-6",children:[u&&a.jsx(mw,{variant:"destructive",className:"fade-in-up",children:a.jsx(gw,{children:u})}),a.jsxs("form",{onSubmit:g,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2 fade-in-up",children:[a.jsxs(Te,{htmlFor:"shopName",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[a.jsx(A1,{className:"h-4 w-4 text-blue-600"}),"اسم المتجر"]}),a.jsx(ce,{id:"shopName",name:"shopName",type:"text",placeholder:"أدخل اسم متجرك",value:i.shopName,onChange:f,required:!0,className:"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"space-y-2 fade-in-up",children:[a.jsxs(Te,{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[a.jsx(ro,{className:"h-4 w-4 text-blue-600"}),"رقم الهاتف"]}),a.jsx(ce,{id:"phoneNumber",name:"phoneNumber",type:"tel",placeholder:"أدخل رقم هاتف المتجر",value:i.phoneNumber,onChange:f,required:!0,className:"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"space-y-2 fade-in-up",children:[a.jsxs(Te,{htmlFor:"shopAddress",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[a.jsx(b4,{className:"h-4 w-4 text-blue-600"}),"عنوان المتجر"]}),a.jsx(ce,{id:"shopAddress",name:"shopAddress",type:"text",placeholder:"أدخل عنوان المتجر",value:i.shopAddress,onChange:f,required:!0,className:"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{className:"space-y-2 fade-in-up",children:[a.jsx(Te,{htmlFor:"description",className:"text-sm font-medium text-gray-700",children:"وصف المتجر (اختياري)"}),a.jsx("textarea",{id:"description",name:"description",placeholder:"أدخل وصفاً مختصراً عن متجرك",value:i.description,onChange:f,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"})]}),a.jsx(W,{type:"submit",disabled:l,className:"w-full h-12 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-medium transition-all duration-300 btn-bounce hover-glow fade-in-up",children:l?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إعداد الحساب..."]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ll,{className:"h-4 w-4"}),"إكمال إعداد الحساب",a.jsx(F0,{className:"h-4 w-4"})]})})]}),a.jsx("div",{className:"text-center pt-4 border-t border-gray-200 fade-in-up",children:a.jsx("p",{className:"text-sm text-gray-600",children:"بعد إكمال الإعداد، ستتمكن من الوصول إلى لوحة تحكم التاجر وإدارة متجرك"})})]})]}),a.jsx("div",{className:"text-center mt-8 fade-in-up",children:a.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 كاشي لينك. جميع الحقوق محفوظة."})})]})}):null},qH=()=>{const t=cr(),{toast:e}=en(),[n,r]=p.useState({username:"",password:""}),[s,i]=p.useState(!1),[o,l]=p.useState(!1),c=f=>{const{name:m,value:g}=f.target;r(T=>({...T,[m]:g}))},u=async f=>{f.preventDefault(),l(!0);try{if(n.username==="admin"&&n.password==="admin123")localStorage.setItem("dashboardAuth","true"),localStorage.setItem("dashboardUser",JSON.stringify({username:n.username,loginTime:new Date().toISOString()})),e({title:"مرحباً بك في لوحة التحكم!",description:"تم تسجيل الدخول بنجاح"}),t("/dashboard");else throw new Error("اسم المستخدم أو كلمة المرور غير صحيحة")}catch(m){console.error("Login error:",m),e({title:"خطأ في تسجيل الدخول",description:m.message||"تحقق من اسم المستخدم وكلمة المرور",variant:"destructive"})}finally{l(!1)}},h=()=>{r({username:"admin",password:"admin123"})};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-background to-indigo-50 flex items-center justify-center p-4",children:a.jsxs(Qe,{className:"w-full max-w-md shadow-lg",children:[a.jsxs(pt,{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[a.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-red-500 to-red-600 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"ك"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(fl,{className:"h-5 w-5 text-primary"}),a.jsx("span",{className:"text-xl font-bold text-primary",children:"كاشي لينك"})]})]}),a.jsx(mt,{className:"text-2xl font-bold text-gray-800",children:"لوحة التحكم"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"تسجيل الدخول للوصول إلى لوحة التحكم"})]}),a.jsxs(Ye,{children:[a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"اسم المستخدم"}),a.jsxs("div",{className:"relative",children:[a.jsx(ld,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ce,{name:"username",type:"text",value:n.username,onChange:c,placeholder:"أدخل اسم المستخدم",className:"pl-10",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"كلمة المرور"}),a.jsxs("div",{className:"relative",children:[a.jsx(Cs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),a.jsx(ce,{name:"password",type:s?"text":"password",value:n.password,onChange:c,placeholder:"أدخل كلمة المرور",className:"pl-10 pr-10",required:!0}),a.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),a.jsx(W,{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:o?"جاري تسجيل الدخول...":"تسجيل الدخول"})]}),a.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"للتجربة السريعة:"}),a.jsxs(W,{onClick:h,variant:"outline",className:"w-full text-sm",children:[a.jsx(li,{className:"h-4 w-4 mr-2"}),"تسجيل دخول تجريبي"]}),a.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"اسم المستخدم: admin | كلمة المرور: admin123"})]})}),a.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(li,{className:"h-4 w-4 text-blue-600 mt-0.5"}),a.jsxs("div",{className:"text-xs text-blue-700",children:[a.jsx("p",{className:"font-medium mb-1",children:"ملاحظة أمنية:"}),a.jsx("p",{children:"تأكد من أنك تستخدم اتصال آمن وموثوق للوصول إلى لوحة التحكم."})]})]})})]})]})})};function hT(t,[e,n]){return Math.min(n,Math.max(e,t))}var KH=p.createContext(void 0);function mm(t){const e=p.useContext(KH);return t||e||"ltr"}function GH(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var QH=[" ","Enter","ArrowUp","ArrowDown"],YH=[" ","Enter"],_a="Select",[gm,ym,XH]=_p(_a),[mc,MG]=Jr(_a,[XH,sc]),vm=sc(),[JH,jo]=mc(_a),[ZH,eq]=mc(_a),d2=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:m,required:g,form:T}=t,v=vm(e),[x,_]=p.useState(null),[b,w]=p.useState(null),[I,k]=p.useState(!1),O=mm(u),[N,S]=ua({prop:r,defaultProp:s??!1,onChange:i,caller:_a}),[C,A]=ua({prop:o,defaultProp:l,onChange:c,caller:_a}),j=p.useRef(null),D=x?T||!!x.closest("form"):!0,[R,K]=p.useState(new Set),q=Array.from(R).map(G=>G.props.value).join(";");return a.jsx(QI,{...v,children:a.jsxs(JH,{required:g,scope:e,trigger:x,onTriggerChange:_,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:I,onValueNodeHasChildrenChange:k,contentId:bs(),value:C,onValueChange:A,open:N,onOpenChange:S,dir:O,triggerPointerDownPosRef:j,disabled:m,children:[a.jsx(gm.Provider,{scope:e,children:a.jsx(ZH,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(G=>{K(Q=>new Set(Q).add(G))},[]),onNativeOptionRemove:p.useCallback(G=>{K(Q=>{const V=new Set(Q);return V.delete(G),V})},[]),children:n})}),D?a.jsxs(O2,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:C,onChange:G=>A(G.target.value),disabled:m,form:T,children:[C===void 0?a.jsx("option",{value:""}):null,Array.from(R)]},q):null]})})};d2.displayName=_a;var h2="SelectTrigger",f2=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=vm(n),o=jo(h2,n),l=o.disabled||r,c=Ge(e,o.onTriggerChange),u=ym(n),h=p.useRef("touch"),[f,m,g]=L2(v=>{const x=u().filter(w=>!w.disabled),_=x.find(w=>w.value===o.value),b=V2(x,v,_);b!==void 0&&o.onValueChange(b.value)}),T=v=>{l||(o.onOpenChange(!0),g()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return a.jsx(Z0,{asChild:!0,...i,children:a.jsx(xe.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":M2(o.value)?"":void 0,...s,ref:c,onClick:re(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&T(v)}),onPointerDown:re(s.onPointerDown,v=>{h.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(T(v),v.preventDefault())}),onKeyDown:re(s.onKeyDown,v=>{const x=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(x&&v.key===" ")&&QH.includes(v.key)&&(T(),v.preventDefault())})})})});f2.displayName=h2;var p2="SelectValue",m2=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=jo(p2,n),{onValueNodeHasChildrenChange:u}=c,h=i!==void 0,f=Ge(e,c.onValueNodeChange);return Zt(()=>{u(h)},[u,h]),a.jsx(xe.span,{...l,ref:f,style:{pointerEvents:"none"},children:M2(c.value)?a.jsx(a.Fragment,{children:o}):i})});m2.displayName=p2;var tq="SelectIcon",g2=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(xe.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});g2.displayName=tq;var nq="SelectPortal",y2=t=>a.jsx(id,{asChild:!0,...t});y2.displayName=nq;var ba="SelectContent",v2=p.forwardRef((t,e)=>{const n=jo(ba,t.__scopeSelect),[r,s]=p.useState();if(Zt(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?Sa.createPortal(a.jsx(x2,{scope:t.__scopeSelect,children:a.jsx(gm.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(w2,{...t,ref:e})});v2.displayName=ba;var Rr=10,[x2,Do]=mc(ba),rq="SelectContentImpl",sq=ca("SelectContent.RemoveScroll"),w2=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:T,hideWhenDetached:v,avoidCollisions:x,..._}=t,b=jo(ba,n),[w,I]=p.useState(null),[k,O]=p.useState(null),N=Ge(e,X=>I(X)),[S,C]=p.useState(null),[A,j]=p.useState(null),D=ym(n),[R,K]=p.useState(!1),q=p.useRef(!1);p.useEffect(()=>{if(w)return ow(w)},[w]),iw();const G=p.useCallback(X=>{const[Ce,...me]=D().map(ke=>ke.ref.current),[_e]=me.slice(-1),Pe=document.activeElement;for(const ke of X)if(ke===Pe||(ke==null||ke.scrollIntoView({block:"nearest"}),ke===Ce&&k&&(k.scrollTop=0),ke===_e&&k&&(k.scrollTop=k.scrollHeight),ke==null||ke.focus(),document.activeElement!==Pe))return},[D,k]),Q=p.useCallback(()=>G([S,w]),[G,S,w]);p.useEffect(()=>{R&&Q()},[R,Q]);const{onOpenChange:V,triggerPointerDownPosRef:L}=b;p.useEffect(()=>{if(w){let X={x:0,y:0};const Ce=_e=>{var Pe,ke;X={x:Math.abs(Math.round(_e.pageX)-(((Pe=L.current)==null?void 0:Pe.x)??0)),y:Math.abs(Math.round(_e.pageY)-(((ke=L.current)==null?void 0:ke.y)??0))}},me=_e=>{X.x<=10&&X.y<=10?_e.preventDefault():w.contains(_e.target)||V(!1),document.removeEventListener("pointermove",Ce),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",Ce),document.addEventListener("pointerup",me,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ce),document.removeEventListener("pointerup",me,{capture:!0})}}},[w,V,L]),p.useEffect(()=>{const X=()=>V(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[V]);const[$,ie]=L2(X=>{const Ce=D().filter(Pe=>!Pe.disabled),me=Ce.find(Pe=>Pe.ref.current===document.activeElement),_e=V2(Ce,X,me);_e&&setTimeout(()=>_e.ref.current.focus())}),Z=p.useCallback((X,Ce,me)=>{const _e=!q.current&&!me;(b.value!==void 0&&b.value===Ce||_e)&&(C(X),_e&&(q.current=!0))},[b.value]),le=p.useCallback(()=>w==null?void 0:w.focus(),[w]),he=p.useCallback((X,Ce,me)=>{const _e=!q.current&&!me;(b.value!==void 0&&b.value===Ce||_e)&&j(X)},[b.value]),Oe=r==="popper"?Rv:_2,De=Oe===Rv?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:g,sticky:T,hideWhenDetached:v,avoidCollisions:x}:{};return a.jsx(x2,{scope:n,content:w,viewport:k,onViewportChange:O,itemRefCallback:Z,selectedItem:S,onItemLeave:le,itemTextRefCallback:he,focusSelectedItem:Q,selectedItemText:A,position:r,isPositioned:R,searchRef:$,children:a.jsx(dm,{as:sq,allowPinchZoom:!0,children:a.jsx(cm,{asChild:!0,trapped:b.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:re(s,X=>{var Ce;(Ce=b.trigger)==null||Ce.focus({preventScroll:!0}),X.preventDefault()}),children:a.jsx(Zl,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:a.jsx(Oe,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:X=>X.preventDefault(),..._,...De,onPlaced:()=>K(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:re(_.onKeyDown,X=>{const Ce=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!Ce&&X.key.length===1&&ie(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let _e=D().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(X.key)&&(_e=_e.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const Pe=X.target,ke=_e.indexOf(Pe);_e=_e.slice(ke+1)}setTimeout(()=>G(_e)),X.preventDefault()}})})})})})})});w2.displayName=rq;var iq="SelectItemAlignedPosition",_2=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=jo(ba,n),o=Do(ba,n),[l,c]=p.useState(null),[u,h]=p.useState(null),f=Ge(e,N=>h(N)),m=ym(n),g=p.useRef(!1),T=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:_,focusSelectedItem:b}=o,w=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&v&&x&&_){const N=i.trigger.getBoundingClientRect(),S=u.getBoundingClientRect(),C=i.valueNode.getBoundingClientRect(),A=_.getBoundingClientRect();if(i.dir!=="rtl"){const Pe=A.left-S.left,ke=C.left-Pe,He=N.left-ke,Ft=N.width+He,Hn=Math.max(Ft,S.width),qn=window.innerWidth-Rr,Er=hT(ke,[Rr,Math.max(Rr,qn-Hn)]);l.style.minWidth=Ft+"px",l.style.left=Er+"px"}else{const Pe=S.right-A.right,ke=window.innerWidth-C.right-Pe,He=window.innerWidth-N.right-ke,Ft=N.width+He,Hn=Math.max(Ft,S.width),qn=window.innerWidth-Rr,Er=hT(ke,[Rr,Math.max(Rr,qn-Hn)]);l.style.minWidth=Ft+"px",l.style.right=Er+"px"}const j=m(),D=window.innerHeight-Rr*2,R=v.scrollHeight,K=window.getComputedStyle(u),q=parseInt(K.borderTopWidth,10),G=parseInt(K.paddingTop,10),Q=parseInt(K.borderBottomWidth,10),V=parseInt(K.paddingBottom,10),L=q+G+R+V+Q,$=Math.min(x.offsetHeight*5,L),ie=window.getComputedStyle(v),Z=parseInt(ie.paddingTop,10),le=parseInt(ie.paddingBottom,10),he=N.top+N.height/2-Rr,Oe=D-he,De=x.offsetHeight/2,X=x.offsetTop+De,Ce=q+G+X,me=L-Ce;if(Ce<=he){const Pe=j.length>0&&x===j[j.length-1].ref.current;l.style.bottom="0px";const ke=u.clientHeight-v.offsetTop-v.offsetHeight,He=Math.max(Oe,De+(Pe?le:0)+ke+Q),Ft=Ce+He;l.style.height=Ft+"px"}else{const Pe=j.length>0&&x===j[0].ref.current;l.style.top="0px";const He=Math.max(he,q+v.offsetTop+(Pe?Z:0)+De)+me;l.style.height=He+"px",v.scrollTop=Ce-he+v.offsetTop}l.style.margin=`${Rr}px 0`,l.style.minHeight=$+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,l,u,v,x,_,i.dir,r]);Zt(()=>w(),[w]);const[I,k]=p.useState();Zt(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const O=p.useCallback(N=>{N&&T.current===!0&&(w(),b==null||b(),T.current=!1)},[w,b]);return a.jsx(aq,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:O,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:I},children:a.jsx(xe.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});_2.displayName=iq;var oq="SelectPopperPosition",Rv=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=Rr,...i}=t,o=vm(n);return a.jsx(ex,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Rv.displayName=oq;var[aq,yw]=mc(ba,{}),kv="SelectViewport",b2=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Do(kv,n),o=yw(kv,n),l=Ge(e,i.onViewportChange),c=p.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(gm.Slot,{scope:n,children:a.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:re(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const T=window.innerHeight-Rr*2,v=parseFloat(f.style.minHeight),x=parseFloat(f.style.height),_=Math.max(v,x);if(_<T){const b=_+g,w=Math.min(T,b),I=b-w;f.style.height=w+"px",f.style.bottom==="0px"&&(h.scrollTop=I>0?I:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});b2.displayName=kv;var E2="SelectGroup",[lq,cq]=mc(E2),uq=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=bs();return a.jsx(lq,{scope:n,id:s,children:a.jsx(xe.div,{role:"group","aria-labelledby":s,...r,ref:e})})});uq.displayName=E2;var T2="SelectLabel",S2=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=cq(T2,n);return a.jsx(xe.div,{id:s.id,...r,ref:e})});S2.displayName=T2;var ep="SelectItem",[dq,N2]=mc(ep),I2=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=jo(ep,n),c=Do(ep,n),u=l.value===r,[h,f]=p.useState(i??""),[m,g]=p.useState(!1),T=Ge(e,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,r,s)}),v=bs(),x=p.useRef("touch"),_=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(dq,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:p.useCallback(b=>{f(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:a.jsx(gm.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(xe.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:T,onFocus:re(o.onFocus,()=>g(!0)),onBlur:re(o.onBlur,()=>g(!1)),onClick:re(o.onClick,()=>{x.current!=="mouse"&&_()}),onPointerUp:re(o.onPointerUp,()=>{x.current==="mouse"&&_()}),onPointerDown:re(o.onPointerDown,b=>{x.current=b.pointerType}),onPointerMove:re(o.onPointerMove,b=>{var w;x.current=b.pointerType,s?(w=c.onItemLeave)==null||w.call(c):x.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:re(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:re(o.onKeyDown,b=>{var I;((I=c.searchRef)==null?void 0:I.current)!==""&&b.key===" "||(YH.includes(b.key)&&_(),b.key===" "&&b.preventDefault())})})})})});I2.displayName=ep;var Gc="SelectItemText",C2=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=jo(Gc,n),l=Do(Gc,n),c=N2(Gc,n),u=eq(Gc,n),[h,f]=p.useState(null),m=Ge(e,_=>f(_),c.onItemTextChange,_=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,_,c.value,c.disabled)}),g=h==null?void 0:h.textContent,T=p.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return Zt(()=>(v(T),()=>x(T)),[v,x,T]),a.jsxs(a.Fragment,{children:[a.jsx(xe.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Sa.createPortal(i.children,o.valueNode):null]})});C2.displayName=Gc;var A2="SelectItemIndicator",P2=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return N2(A2,n).isSelected?a.jsx(xe.span,{"aria-hidden":!0,...r,ref:e}):null});P2.displayName=A2;var jv="SelectScrollUpButton",R2=p.forwardRef((t,e)=>{const n=Do(jv,t.__scopeSelect),r=yw(jv,t.__scopeSelect),[s,i]=p.useState(!1),o=Ge(e,r.onScrollButtonChange);return Zt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;i(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(j2,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});R2.displayName=jv;var Dv="SelectScrollDownButton",k2=p.forwardRef((t,e)=>{const n=Do(Dv,t.__scopeSelect),r=yw(Dv,t.__scopeSelect),[s,i]=p.useState(!1),o=Ge(e,r.onScrollButtonChange);return Zt(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(j2,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});k2.displayName=Dv;var j2=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Do("SelectScrollButton",n),o=p.useRef(null),l=ym(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),Zt(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(xe.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:re(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:re(s.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:re(s.onPointerLeave,()=>{c()})})}),hq="SelectSeparator",D2=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(xe.div,{"aria-hidden":!0,...r,ref:e})});D2.displayName=hq;var Ov="SelectArrow",fq=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=vm(n),i=jo(Ov,n),o=Do(Ov,n);return i.open&&o.position==="popper"?a.jsx(tx,{...s,...r,ref:e}):null});fq.displayName=Ov;var pq="SelectBubbleInput",O2=p.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=p.useRef(null),i=Ge(r,s),o=GH(e);return p.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[o,e]),a.jsx(xe.select,{...n,style:{...HN,...n.style},ref:i,defaultValue:e})});O2.displayName=pq;function M2(t){return t===""||t===void 0}function L2(t){const e=Wn(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function V2(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=mq(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function mq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var gq=d2,F2=f2,yq=m2,vq=g2,xq=y2,U2=v2,wq=b2,$2=S2,B2=I2,_q=C2,bq=P2,z2=R2,W2=k2,H2=D2;const vw=gq,xw=yq,xm=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(F2,{ref:r,className:be("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(vq,{asChild:!0,children:a.jsx(U0,{className:"h-4 w-4 opacity-50"})})]}));xm.displayName=F2.displayName;const q2=p.forwardRef(({className:t,...e},n)=>a.jsx(z2,{ref:n,className:be("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(g4,{className:"h-4 w-4"})}));q2.displayName=z2.displayName;const K2=p.forwardRef(({className:t,...e},n)=>a.jsx(W2,{ref:n,className:be("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(U0,{className:"h-4 w-4"})}));K2.displayName=W2.displayName;const wm=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(xq,{children:a.jsxs(U2,{ref:s,className:be("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(q2,{}),a.jsx(wq,{className:be("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(K2,{})]})}));wm.displayName=U2.displayName;const Eq=p.forwardRef(({className:t,...e},n)=>a.jsx($2,{ref:n,className:be("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));Eq.displayName=$2.displayName;const Gi=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(B2,{ref:r,className:be("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(bq,{children:a.jsx(wf,{className:"h-4 w-4"})})}),a.jsx(_q,{children:e})]}));Gi.displayName=B2.displayName;const Tq=p.forwardRef(({className:t,...e},n)=>a.jsx(H2,{ref:n,className:be("-mx-1 my-1 h-px bg-muted",t),...e}));Tq.displayName=H2.displayName;const Sq=()=>{const{toast:t}=en(),{signOut:e,user:n}=Pn(),[r,s]=p.useState("01030302038"),[i,o]=p.useState(""),[l,c]=p.useState(""),[u,h]=p.useState("transfer"),[f,m]=p.useState([]);p.useState("all"),p.useState(!1),p.useState(""),p.useState([]),p.useState(null),p.useState(!1),p.useState([]),p.useState([]),p.useState(!1),p.useState("daily");const[g,T]=p.useState([]),[v,x]=p.useState(0),[_,b]=p.useState({});p.useState(!1),p.useState(!1),p.useState(!1),p.useState(!1),p.useState(!1),p.useState(""),p.useState(!1);const[w,I]=p.useState(!1),k=async N=>{if(n)try{const S=await Zs.getById(n.uid);if(S!=null&&S.shopId){const C=tt(Ae,"adminData",S.shopId);await js(C,N)}}catch(S){console.error("Error saving to Firebase:",S),t({title:"خطأ في الحفظ",description:"حدث خطأ أثناء حفظ البيانات في Firebase",variant:"destructive"})}};p.useEffect(()=>{if(!n)return;(async()=>{I(!0);try{const S=await Zs.getById(n.uid);if(S!=null&&S.shopId){const C=tt(Ae,"adminData",S.shopId),A=await Eo(C);if(A.exists()){const j=A.data();x(j.cashBalance||0),b(j.walletBalances||{"admin-wallet-1":5e3,"admin-wallet-2":3e3}),T(j.deletedTransactions||[])}else{const j={cashBalance:0,walletBalances:{"admin-wallet-1":5e3,"admin-wallet-2":3e3},deletedTransactions:[]};await gs(C,j),x(j.cashBalance),b(j.walletBalances),T(j.deletedTransactions)}}}catch(S){console.error("Error loading data from Firebase:",S);const C=localStorage.getItem("adminCashBalance");C&&x(parseFloat(C));const A=localStorage.getItem("adminWalletBalances");b(A?JSON.parse(A):{"admin-wallet-1":5e3,"admin-wallet-2":3e3})}finally{I(!1)}})()},[n]);const O=async N=>{if(N.preventDefault(),u==="transfer"){if(!r||!i||!l){t({title:"خطأ",description:"يرجى ملء جميع الحقول المطلوبة",variant:"destructive"});return}const S={id:Date.now().toString(),type:"send",senderPhone:r,receiverPhone:i,amount:parseFloat(l),status:"pending",createdAt:new Date,withdrawnAmount:0,sentAmount:parseFloat(l)},C=[S,...f];m(C),await k({transactions:C});const A=parseFloat(l)*.02,j=v-A;x(j),await k({cashBalance:j}),t({title:"تم إرسال التحويل",description:"جاري معالجة التحويل..."}),setTimeout(async()=>{const R=[{...S,status:"completed"},...f];m(R),await k({transactions:R}),t({title:"تم التحويل بنجاح",description:`تم تحويل ${l} جنيه إلى ${i} وخصم عمولة ${A} جنيه من الدرج`})},2e3),s("01030302038"),o(""),c("")}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[w&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-2 text-center",children:"جاري تحميل البيانات..."})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"لوحة تحكم الإدارة"}),a.jsxs(W,{onClick:e,variant:"outline",className:"flex items-center gap-2",children:[a.jsx(Tp,{className:"h-4 w-4"}),"تسجيل الخروج"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs(Qe,{children:[a.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(mt,{className:"text-sm font-medium",children:"الرصيد النقدي"}),a.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Ye,{children:a.jsxs("div",{className:"text-2xl font-bold",children:[v.toLocaleString()," جنيه"]})})]}),a.jsxs(Qe,{children:[a.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(mt,{className:"text-sm font-medium",children:"إجمالي المحافظ"}),a.jsx(_s,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Ye,{children:a.jsxs("div",{className:"text-2xl font-bold",children:[Object.values(_).reduce((N,S)=>N+S,0).toLocaleString()," جنيه"]})})]}),a.jsxs(Qe,{children:[a.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(mt,{className:"text-sm font-medium",children:"المعاملات اليوم"}),a.jsx(au,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Ye,{children:a.jsx("div",{className:"text-2xl font-bold",children:f.length})})]}),a.jsxs(Qe,{children:[a.jsxs(pt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(mt,{className:"text-sm font-medium",children:"إجمالي اليوم"}),a.jsx(Vr,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsx(Ye,{children:a.jsxs("div",{className:"text-2xl font-bold",children:[f.reduce((N,S)=>N+S.amount,0).toLocaleString()," جنيه"]})})]})]}),a.jsxs(Qe,{children:[a.jsx(pt,{children:a.jsx(mt,{children:"إجراء معاملة جديدة"})}),a.jsx(Ye,{children:a.jsxs("form",{onSubmit:O,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"نوع المعاملة"}),a.jsxs(vw,{value:u,onValueChange:N=>h(N),children:[a.jsx(xm,{children:a.jsx(xw,{})}),a.jsxs(wm,{children:[a.jsx(Gi,{value:"transfer",children:"تحويل"}),a.jsx(Gi,{value:"withdraw",children:"سحب"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"رقم المرسل"}),a.jsx(ce,{type:"tel",value:r,onChange:N=>s(N.target.value),placeholder:"01xxxxxxxxx"})]}),u==="transfer"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"رقم المستقبل"}),a.jsx(ce,{type:"tel",value:i,onChange:N=>o(N.target.value),placeholder:"01xxxxxxxxx"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"المبلغ"}),a.jsx(ce,{type:"number",value:l,onChange:N=>c(N.target.value),placeholder:"0.00"})]})]}),a.jsx(W,{type:"submit",className:"w-full",children:u==="transfer"?"إرسال التحويل":"تنفيذ السحب"})]})})]}),a.jsxs(Qe,{children:[a.jsx(pt,{children:a.jsx(mt,{children:"المعاملات الأخيرة"})}),a.jsx(Ye,{children:a.jsx("div",{className:"space-y-4",children:f.slice(0,10).map(N=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[N.status==="completed"&&a.jsx(Ll,{className:"h-5 w-5 text-green-500"}),N.status==="pending"&&a.jsx(Vl,{className:"h-5 w-5 text-yellow-500"}),N.status==="failed"&&a.jsx($0,{className:"h-5 w-5 text-red-500"})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:[N.type==="send"?"تحويل":"سحب"," - ",N.amount.toLocaleString()," جنيه"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["من ",N.senderPhone," إلى ",N.receiverPhone]})]})]}),a.jsx(bn,{variant:N.status==="completed"?"default":N.status==="pending"?"secondary":"destructive",children:N.status==="completed"?"مكتمل":N.status==="pending"?"قيد المعالجة":"فشل"})]},N.id))})})]})]})]})},Nq=()=>{const t=cr(),[e,n]=p.useState(!1),[r,s]=p.useState(!0);return p.useEffect(()=>{(()=>{const o=localStorage.getItem("dashboardAuth"),l=localStorage.getItem("dashboardUser");if(o==="true"&&l)try{const c=JSON.parse(l),u=new Date(c.loginTime);(new Date().getTime()-u.getTime())/(1e3*60*60)<24?n(!0):(localStorage.removeItem("dashboardAuth"),localStorage.removeItem("dashboardUser"),t("/dashboard/login"))}catch(c){console.error("Error parsing user data:",c),t("/dashboard/login")}else t("/dashboard/login");s(!1)})()},[t]),r?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"جاري التحقق من صلاحية الدخول..."})]})}):e?a.jsx(Sq,{}):null};var qg="rovingFocusGroup.onEntryFocus",Iq={bubbles:!1,cancelable:!0},Id="RovingFocusGroup",[Mv,G2,Cq]=_p(Id),[Aq,_m]=Jr(Id,[Cq]),[Pq,Rq]=Aq(Id),Q2=p.forwardRef((t,e)=>a.jsx(Mv.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Mv.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(kq,{...t,ref:e})})}));Q2.displayName=Id;var kq=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,m=p.useRef(null),g=Ge(e,m),T=mm(i),[v,x]=ua({prop:o,defaultProp:l??null,onChange:c,caller:Id}),[_,b]=p.useState(!1),w=Wn(u),I=G2(n),k=p.useRef(!1),[O,N]=p.useState(0);return p.useEffect(()=>{const S=m.current;if(S)return S.addEventListener(qg,w),()=>S.removeEventListener(qg,w)},[w]),a.jsx(Pq,{scope:n,orientation:r,dir:T,loop:s,currentTabStopId:v,onItemFocus:p.useCallback(S=>x(S),[x]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>N(S=>S+1),[]),onFocusableItemRemove:p.useCallback(()=>N(S=>S-1),[]),children:a.jsx(xe.div,{tabIndex:_||O===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:re(t.onMouseDown,()=>{k.current=!0}),onFocus:re(t.onFocus,S=>{const C=!k.current;if(S.target===S.currentTarget&&C&&!_){const A=new CustomEvent(qg,Iq);if(S.currentTarget.dispatchEvent(A),!A.defaultPrevented){const j=I().filter(G=>G.focusable),D=j.find(G=>G.active),R=j.find(G=>G.id===v),q=[D,R,...j].filter(Boolean).map(G=>G.ref.current);J2(q,h)}}k.current=!1}),onBlur:re(t.onBlur,()=>b(!1))})})}),Y2="RovingFocusGroupItem",X2=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,children:o,...l}=t,c=bs(),u=i||c,h=Rq(Y2,n),f=h.currentTabStopId===u,m=G2(n),{onFocusableItemAdd:g,onFocusableItemRemove:T,currentTabStopId:v}=h;return p.useEffect(()=>{if(r)return g(),()=>T()},[r,g,T]),a.jsx(Mv.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:a.jsx(xe.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:re(t.onMouseDown,x=>{r?h.onItemFocus(u):x.preventDefault()}),onFocus:re(t.onFocus,()=>h.onItemFocus(u)),onKeyDown:re(t.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){h.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const _=Oq(x,h.orientation,h.dir);if(_!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let w=m().filter(I=>I.focusable).map(I=>I.ref.current);if(_==="last")w.reverse();else if(_==="prev"||_==="next"){_==="prev"&&w.reverse();const I=w.indexOf(x.currentTarget);w=h.loop?Mq(w,I+1):w.slice(I+1)}setTimeout(()=>J2(w))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:v!=null}):o})})});X2.displayName=Y2;var jq={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Dq(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Oq(t,e,n){const r=Dq(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return jq[r]}function J2(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function Mq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var Z2=Q2,ek=X2,bm="Tabs",[Lq,LG]=Jr(bm,[_m]),tk=_m(),[Vq,ww]=Lq(bm),nk=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=mm(l),[f,m]=ua({prop:r,onChange:s,defaultProp:i??"",caller:bm});return a.jsx(Vq,{scope:n,baseId:bs(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:c,children:a.jsx(xe.div,{dir:h,"data-orientation":o,...u,ref:e})})});nk.displayName=bm;var rk="TabsList",sk=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=ww(rk,n),o=tk(n);return a.jsx(Z2,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(xe.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});sk.displayName=rk;var ik="TabsTrigger",ok=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=ww(ik,n),l=tk(n),c=ck(o.baseId,r),u=uk(o.baseId,r),h=r===o.value;return a.jsx(ek,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(xe.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:re(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:re(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:re(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});ok.displayName=ik;var ak="TabsContent",lk=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=ww(ak,n),c=ck(l.baseId,r),u=uk(l.baseId,r),h=r===l.value,f=p.useRef(h);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(Zr,{present:s||h,children:({present:m})=>a.jsx(xe.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});lk.displayName=ak;function ck(t,e){return`${t}-trigger-${e}`}function uk(t,e){return`${t}-content-${e}`}var Fq=nk,dk=sk,hk=ok,fk=lk;const Uq=Fq,pk=p.forwardRef(({className:t,...e},n)=>a.jsx(dk,{ref:n,className:be("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));pk.displayName=dk.displayName;const Wa=p.forwardRef(({className:t,...e},n)=>a.jsx(hk,{ref:n,className:be("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Wa.displayName=hk.displayName;const Ha=p.forwardRef(({className:t,...e},n)=>a.jsx(fk,{ref:n,className:be("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Ha.displayName=fk.displayName;const $q=({isOpen:t,onClose:e,onWalletUpdate:n})=>{const{toast:r}=en(),{user:s}=Pn(),[i,o]=p.useState([]),[l,c]=p.useState(!1),[u,h]=p.useState(null),[f,m]=p.useState(""),[g,T]=p.useState(""),[v,x]=p.useState("200000"),[_,b]=p.useState("200000"),[w,I]=p.useState(!1),[k,O]=p.useState("10"),[N,S]=p.useState(!1);p.useEffect(()=>{(async()=>{if(s!=null&&s.uid){S(!0);try{const V=(await Ur.getByMerchantId(s.uid)).map(L=>({id:L.id,name:L.walletName,phone:L.phoneNumber,isDefault:!1,monthlyWithdrawalLimit:L.withdrawLimit||2e5,monthlyTransferLimit:L.transferLimit||2e5}));o(V)}catch(Q){console.error("Error loading wallets:",Q);const V=localStorage.getItem("wallets");if(V){const L=JSON.parse(V);o(L.map($=>({...$,phone:$.phone||$.phoneNumber,monthlyWithdrawalLimit:$.monthlyWithdrawalLimit||2e5,monthlyTransferLimit:$.monthlyTransferLimit||2e5})))}}finally{S(!1)}}})();const G=localStorage.getItem("withdrawalCommissionRate");G&&O(G)},[s==null?void 0:s.uid]);const C=()=>{m(""),T(""),x("200000"),b("200000"),I(!1),h(null),c(!1)},A=()=>{const q=parseFloat(k);if(isNaN(q)||q<0||q>100){r({title:"خطأ",description:"يرجى إدخال معدل عمولة صحيح (0-100 جنيه لكل 1000 جنيه)",variant:"destructive"});return}localStorage.setItem("withdrawalCommissionRate",k),r({title:"تم الحفظ",description:`تم تحديث معدل عمولة السحب إلى ${k} جنيه لكل 1000 جنيه`})},j=async()=>{if(!f.trim()||!g.trim()){r({title:"خطأ",description:"يرجى ملء جميع الحقول المطلوبة",variant:"destructive"});return}if(!(s!=null&&s.uid)){r({title:"خطأ",description:"يجب تسجيل الدخول أولاً",variant:"destructive"});return}S(!0);try{if(u){await Ur.update(u.id,{walletName:f.trim(),phoneNumber:g.trim(),withdrawLimit:parseInt(v),transferLimit:parseInt(_)});const G=i.map(Q=>Q.id===u.id?{...Q,name:f.trim(),phone:g.trim(),monthlyWithdrawalLimit:parseInt(v),monthlyTransferLimit:parseInt(_)}:Q);o(G),r({title:"تم التحديث",description:"تم تحديث المحفظة بنجاح"})}else{const G={merchantUserId:s.uid,walletName:f.trim(),phoneNumber:g.trim(),withdrawLimit:parseInt(v),transferLimit:parseInt(_),dailyWithdrawUsage:0,dailyTransferUsage:0,monthlyWithdrawUsage:0,monthlyTransferUsage:0},V={id:(await Ur.create(G)).id,name:f.trim(),phone:g.trim(),isDefault:w,monthlyWithdrawalLimit:parseInt(v),monthlyTransferLimit:parseInt(_)};o([...i,V]),r({title:"تم الإنشاء",description:"تم إنشاء المحفظة بنجاح"})}const q=u?i.map(G=>G.id===u.id?{...G,name:f.trim(),phone:g.trim(),monthlyWithdrawalLimit:parseInt(v),monthlyTransferLimit:parseInt(_)}:G):[...i,{id:Date.now().toString(),name:f.trim(),phone:g.trim(),isDefault:w,monthlyWithdrawalLimit:parseInt(v),monthlyTransferLimit:parseInt(_)}];localStorage.setItem("wallets",JSON.stringify(q)),n&&n(),C(),c(!1),h(null)}catch(q){console.error("Error saving wallet:",q),r({title:"خطأ",description:"حدث خطأ أثناء حفظ المحفظة",variant:"destructive"})}finally{S(!1)}},D=q=>{h(q),setNewWallet({name:q.name,phoneNumber:q.phoneNumber,balance:q.balance})},R=async q=>{const G=i.find(Q=>Q.id===q);if(G!=null&&G.isDefault){r({title:"تحذير",description:"لا يمكن حذف المحفظة الافتراضية",variant:"destructive"});return}if(!(s!=null&&s.uid)){r({title:"خطأ",description:"يجب تسجيل الدخول أولاً",variant:"destructive"});return}S(!0);try{await Ur.delete(q);const Q=i.filter(V=>V.id!==q);o(Q),localStorage.setItem("wallets",JSON.stringify(Q)),n&&n(),r({title:"تم الحذف",description:"تم حذف المحفظة بنجاح"})}catch(Q){console.error("Error deleting wallet:",Q),r({title:"خطأ",description:"حدث خطأ أثناء حذف المحفظة",variant:"destructive"})}finally{S(!1)}},K=q=>{const G=i.map(Q=>({...Q,isDefault:Q.id===q}));o(G),localStorage.setItem("wallets",JSON.stringify(G)),n&&n(),r({title:"تم تحديث المحفظة الافتراضية",description:"تم تعيين المحفظة كافتراضية بنجاح"})};return a.jsx(Fn,{open:t,onOpenChange:e,children:a.jsxs(En,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[a.jsx(Tn,{className:"pb-2",children:a.jsxs(Sn,{className:"flex items-center gap-1 text-sm",children:[a.jsx(_s,{className:"h-3 w-3"}),"إدارة المحافظ"]})}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-sm font-semibold",children:["المحافظ المتاحة (",i.length,")"]}),a.jsxs(W,{onClick:()=>c(!0),className:"flex items-center gap-1 h-6 px-2 text-xs",size:"sm",children:[a.jsx(ra,{className:"h-3 w-3"}),"إضافة محفظة جديدة"]})]}),(l||u)&&a.jsxs(Qe,{className:"border-2 border-blue-200 bg-blue-50",children:[a.jsx(pt,{className:"pb-1",children:a.jsx(mt,{className:"text-sm",children:u?"تعديل المحفظة":"إضافة محفظة جديدة"})}),a.jsxs(Ye,{className:"space-y-2 pt-1",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"اسم المحفظة"}),a.jsx(ce,{value:f,onChange:q=>m(q.target.value),placeholder:"مثال: محفظة العمل",className:"h-6 text-xs"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"رقم الهاتف"}),a.jsxs("div",{className:"relative",children:[a.jsx(ro,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),a.jsx(ce,{value:g,onChange:q=>T(q.target.value),placeholder:"01030302038",className:"pl-6 h-6 text-xs"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"الحد الشهري للسحب (جنيه)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Vr,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),a.jsx(ce,{type:"number",value:v,onChange:q=>x(q.target.value),placeholder:"200000",className:"pl-6 h-6 text-xs"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"الحد الشهري للتحويل (جنيه)"}),a.jsxs("div",{className:"relative",children:[a.jsx(Vr,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),a.jsx(ce,{type:"number",value:_,onChange:q=>b(q.target.value),placeholder:"200000",className:"pl-6 h-6 text-xs"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"checkbox",id:"isDefault",checked:w,onChange:q=>I(q.target.checked),className:"rounded w-3 h-3"}),a.jsx("label",{htmlFor:"isDefault",className:"text-xs font-medium text-gray-700",children:"تعيين كمحفظة افتراضية"})]}),a.jsxs("div",{className:"border-t pt-2 mt-2",children:[a.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[a.jsx(Fl,{className:"h-3 w-3 text-gray-600"}),a.jsx("label",{className:"text-xs font-medium text-gray-700",children:"إعدادات العمولة"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"معدل عمولة السحب (جنيه لكل 1000 جنيه)"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Vr,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),a.jsx(ce,{type:"number",value:k,onChange:q=>O(q.target.value),placeholder:"10",min:"0",max:"100",step:"0.1",className:"pl-6 h-6 text-xs"})]}),a.jsx(W,{onClick:A,variant:"outline",className:"h-6 px-2 text-xs",size:"sm",children:"حفظ"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["المعدل الحالي: ",k," جنيه لكل 1000 جنيه"]})]})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(W,{onClick:j,className:"flex-1 h-6 text-xs",size:"sm",children:u?"تحديث المحفظة":"إضافة المحفظة"}),a.jsx(W,{variant:"outline",onClick:C,className:"h-6 text-xs",size:"sm",children:"إلغاء"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:i.map(q=>a.jsxs(Qe,{className:`${q.isDefault?"border-green-300 bg-green-50":""}`,children:[a.jsx(pt,{className:"pb-1",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(mt,{className:"text-sm flex items-center gap-1",children:[a.jsx(_s,{className:"h-3 w-3"}),q.name]}),q.isDefault&&a.jsx(bn,{variant:"default",className:"bg-green-600 text-xs px-1 py-0",children:"افتراضية"})]})}),a.jsxs(Ye,{className:"space-y-1 pt-0",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ro,{className:"h-3 w-3 text-gray-500"}),a.jsx("span",{className:"text-xs",children:q.phoneNumber})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Vr,{className:"h-3 w-3 text-gray-500"}),a.jsxs("span",{className:"text-xs font-medium",children:[q.balance," جنيه"]})]}),a.jsxs("div",{className:"flex gap-1 pt-1",children:[a.jsxs(W,{size:"sm",variant:"outline",onClick:()=>D(q),className:"flex-1 h-5 text-xs px-1",children:[a.jsx(B0,{className:"h-2 w-2 mr-0.5"}),"تعديل"]}),!q.isDefault&&a.jsxs(a.Fragment,{children:[a.jsx(W,{size:"sm",variant:"outline",onClick:()=>K(q.id),className:"flex-1 h-5 text-xs px-1",children:"جعلها افتراضية"}),a.jsx(W,{size:"sm",variant:"destructive",onClick:()=>R(q.id),className:"h-5 px-1",children:a.jsx(fs,{className:"h-2 w-2"})})]})]})]})]},q.id))}),i.length===0&&a.jsx("div",{className:"text-center py-4 text-gray-500 text-xs",children:"لا توجد محافظ متاحة. قم بإضافة محفظة جديدة للبدء."})]})]})})};var Bq="Separator",fT="horizontal",zq=["horizontal","vertical"],mk=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=fT,...s}=t,i=Wq(r)?r:fT,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(xe.div,{"data-orientation":i,...l,...s,ref:e})});mk.displayName=Bq;function Wq(t){return zq.includes(t)}var gk=mk;const Lv=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(gk,{ref:s,decorative:n,orientation:e,className:be("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Lv.displayName=gk.displayName;const Hq=({isOpen:t,onClose:e,transaction:n,onDelete:r})=>{if(!n)return null;const s=h=>{switch(h){case"completed":return a.jsx(Ll,{className:"h-5 w-5 text-green-500"});case"pending":return a.jsx(Vl,{className:"h-5 w-5 text-yellow-500"});case"failed":return a.jsx($0,{className:"h-5 w-5 text-red-500"});default:return a.jsx(Vl,{className:"h-5 w-5 text-gray-500"})}},i=h=>{switch(h){case"completed":return"مكتملة";case"pending":return"قيد الانتظار";case"failed":return"فاشلة";default:return"غير معروف"}},o=h=>{switch(h){case"withdraw":return"سحب";case"send":return"إرسال";case"receive":return"استقبال";default:return"تحويل"}},l=h=>{switch(h){case"withdraw":return a.jsx(pI,{className:"h-5 w-5 text-green-500"});default:return a.jsx(au,{className:"h-5 w-5 text-blue-500"})}},c=()=>{const h=`
      <div style="font-family: Arial, sans-serif; max-width: 400px; margin: 0 auto; padding: 20px;">
        <div style="text-align: center; margin-bottom: 20px;">
          <h2 style="color: #333; margin-bottom: 10px;">إيصال المعاملة</h2>
          <p style="color: #666; font-size: 14px;">رقم المعاملة: ${n.id}</p>
        </div>
        
        <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 15px;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
            <span style="font-weight: bold;">نوع المعاملة:</span>
            <span>${o(n.type)}</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
            <span style="font-weight: bold;">المبلغ:</span>
            <span style="color: #2563eb; font-weight: bold;">${n.amount} جنيه</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
            <span style="font-weight: bold;">الحالة:</span>
            <span style="color: ${n.status==="completed"?"#16a34a":n.status==="pending"?"#ca8a04":"#dc2626"};">
              ${i(n.status)}
            </span>
          </div>
          
          ${n.type!=="withdraw"?`
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span style="font-weight: bold;">من:</span>
              <span>${n.senderPhone}</span>
            </div>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span style="font-weight: bold;">إلى:</span>
              <span>${n.receiverPhone}</span>
            </div>
          `:`
            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
              <span style="font-weight: bold;">رقم المحفظة:</span>
              <span>${n.senderPhone}</span>
            </div>
          `}
          
          <div style="display: flex; justify-content: space-between;">
            <span style="font-weight: bold;">التاريخ:</span>
            <span>${n.createdAt.toLocaleString("ar-EG")}</span>
          </div>
        </div>
        
        <div style="text-align: center; color: #666; font-size: 12px; margin-top: 20px;">
          <p>شكراً لاستخدام خدماتنا</p>
          <p>تم الطباعة في: ${new Date().toLocaleString("ar-EG")}</p>
        </div>
      </div>
    `,f=window.open("","_blank");f&&(f.document.write(`
        <html>
          <head>
            <title>إيصال المعاملة - ${n.id}</title>
            <style>
              body { margin: 0; padding: 20px; }
              @media print {
                body { margin: 0; }
              }
            </style>
          </head>
          <body>
            ${h}
          </body>
        </html>
      `),f.document.close(),f.print())},u=()=>{window.confirm("هل أنت متأكد من حذف هذه المعاملة؟ لا يمكن التراجع عن هذا الإجراء.")&&r(n.id)};return a.jsx(Fn,{open:t,onOpenChange:e,children:a.jsxs(En,{className:"max-w-md",children:[a.jsx(Tn,{children:a.jsxs(Sn,{className:"flex items-center gap-2",children:[l(n.type),"تفاصيل المعاملة"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(Qe,{children:a.jsxs(Ye,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[s(n.status),a.jsx("span",{className:"font-medium",children:i(n.status)})]}),a.jsx(bn,{variant:n.status==="completed"?"default":"secondary",className:`${n.type==="withdraw"?"bg-green-100 text-green-800":""}`,children:o(n.type)})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-2xl font-bold text-blue-600 mb-1",children:[n.type==="withdraw"?"-":"",n.amount," جنيه"]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["رقم المعاملة: ",n.id]})]})]})}),a.jsx(Qe,{children:a.jsxs(Ye,{className:"p-4 space-y-3",children:[n.type!=="withdraw"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ro,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium",children:"من"})]}),a.jsx("span",{className:"text-sm",children:n.senderPhone})]}),a.jsx(Lv,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ro,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium",children:"إلى"})]}),a.jsx("span",{className:"text-sm",children:n.receiverPhone})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ro,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium",children:"رقم المحفظة"})]}),a.jsx("span",{className:"text-sm",children:n.senderPhone})]}),a.jsx(Lv,{}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(p4,{className:"h-4 w-4 text-gray-400"}),a.jsx("span",{className:"text-sm font-medium",children:"التاريخ"})]}),a.jsx("span",{className:"text-sm",children:n.createdAt.toLocaleString("ar-EG")})]})]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(W,{onClick:c,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[a.jsx(S4,{className:"h-4 w-4 mr-2"}),"طباعة الإيصال"]}),a.jsxs(W,{onClick:u,variant:"destructive",className:"flex-1",children:[a.jsx(fs,{className:"h-4 w-4 mr-2"}),"حذف المعاملة"]})]}),a.jsx(W,{onClick:e,variant:"outline",className:"w-full",children:"إغلاق"})]})]})})};class qr{static setSecretPin(e){const n=btoa(e);localStorage.setItem(this.SECRET_KEY,n)}static hasSecretPin(){return localStorage.getItem(this.SECRET_KEY)!==null}static verifySecretPin(e){const n=localStorage.getItem(this.SECRET_KEY);if(!n)return!1;try{return atob(n)===e}catch{return!1}}static clearSecretPin(){localStorage.removeItem(this.SECRET_KEY)}}h_(qr,"SECRET_KEY","dashboard_secret_pin");function qq({open:t,onOpenChange:e,onSuccess:n,title:r,description:s}){const[i,o]=p.useState(""),[l,c]=p.useState(""),[u,h]=p.useState(!1),[f,m]=p.useState(""),[g,T]=p.useState(!1),v=qr.hasSecretPin(),x=async b=>{b.preventDefault(),m(""),T(!0);try{if(v)qr.verifySecretPin(i)?(n(),e(!1),o("")):m("الرقم السري غير صحيح");else{if(i.length<4){m("الرقم السري يجب أن يكون 4 أرقام على الأقل");return}if(i!==l){m("الرقم السري وتأكيده غير متطابقين");return}qr.setSecretPin(i),n(),e(!1),o(""),c("")}}catch{m("حدث خطأ، يرجى المحاولة مرة أخرى")}finally{T(!1)}},_=()=>{o(""),c(""),m(""),e(!1)};return a.jsx(Fn,{open:t,onOpenChange:_,children:a.jsxs(En,{className:"sm:max-w-md",dir:"rtl",children:[a.jsx(Tn,{children:a.jsxs(Sn,{className:"flex items-center gap-2 text-center justify-center",children:[a.jsx(Cs,{className:"h-5 w-5 text-red-600"}),r]})}),a.jsx("div",{className:"text-center text-sm text-gray-600 mb-4",children:s}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"pin",children:v?"أدخل الرقم السري":"إنشاء رقم سري جديد"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"pin",type:u?"text":"password",value:i,onChange:b=>o(b.target.value),placeholder:"أدخل الرقم السري",className:"pr-10",required:!0,minLength:4}),a.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),!v&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"confirmPin",children:"تأكيد الرقم السري"}),a.jsx("div",{className:"relative",children:a.jsx(ce,{id:"confirmPin",type:u?"text":"password",value:l,onChange:b=>c(b.target.value),placeholder:"أعد إدخال الرقم السري",className:"pr-10",required:!0,minLength:4})})]}),f&&a.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:[a.jsx(ec,{className:"h-4 w-4"}),f]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx(W,{type:"button",variant:"outline",onClick:_,className:"flex-1",disabled:g,children:"إلغاء"}),a.jsx(W,{type:"submit",className:"flex-1 bg-red-600 hover:bg-red-700",disabled:g,children:g?"جاري التحقق...":v?"تأكيد":"حفظ الرقم السري"})]})]}),!v&&a.jsx("div",{className:"text-xs text-gray-500 text-center mt-2",children:"⚠️ احفظ هذا الرقم السري جيداً، ستحتاجه لتصفير المعاملات"})]})})}function pT({open:t,onOpenChange:e,onSuccess:n,title:r,description:s,currentBalance:i,balanceLabel:o}){const[l,c]=p.useState(""),[u,h]=p.useState(i.toString()),[f,m]=p.useState(!1),[g,T]=p.useState(""),[v,x]=p.useState(!1),_=qr.hasSecretPin(),b=async I=>{I.preventDefault(),T(""),x(!0);try{const k=parseFloat(u);if(isNaN(k)||k<0){T("يرجى إدخال مبلغ صحيح"),x(!1);return}_?qr.verifySecretPin(l)?(n(k),e(!1),c(""),h("")):T("الرقم السري غير صحيح"):T("لم يتم تعيين رقم سري. يرجى تعيين رقم سري أولاً من إعدادات التطبيق")}catch{T("حدث خطأ أثناء التحقق من الرقم السري")}finally{x(!1)}},w=()=>{c(""),h(i.toString()),T(""),e(!1)};return J.useEffect(()=>{t&&h(i.toString())},[i,t]),a.jsx(Fn,{open:t,onOpenChange:w,children:a.jsxs(En,{className:"sm:max-w-md",dir:"rtl",children:[a.jsx(Tn,{children:a.jsxs(Sn,{className:"flex items-center gap-2 text-right",children:[a.jsx(Vr,{className:"h-5 w-5"}),r]})}),a.jsxs("form",{onSubmit:b,className:"space-y-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground text-right",children:s}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsxs(Te,{className:"text-sm font-medium text-gray-700",children:[o," الحالي"]}),a.jsxs("div",{className:"text-lg font-bold text-gray-900 mt-1",children:[i.toLocaleString()," جنيه"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"newAmount",className:"text-right",children:"المبلغ الجديد"}),a.jsx(ce,{id:"newAmount",type:"number",step:"0.01",min:"0",value:u,onChange:I=>h(I.target.value),placeholder:"أدخل المبلغ الجديد",className:"text-right",required:!0})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"pin",className:"text-right",children:"الرقم السري"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"pin",type:f?"text":"password",value:l,onChange:I=>c(I.target.value),placeholder:"أدخل الرقم السري",className:"text-right pr-10",required:!0}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>m(!f),children:f?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),g&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:[a.jsx(ec,{className:"h-4 w-4"}),g]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx(W,{type:"button",variant:"outline",onClick:w,className:"flex-1",children:"إلغاء"}),a.jsx(W,{type:"submit",disabled:v||!l||!u,className:"flex-1",children:v?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري التحديث..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Cs,{className:"h-4 w-4 mr-2"}),"تحديث الرصيد"]})})]})]})]})})}function yk({open:t,onOpenChange:e}){const[n,r]=p.useState(""),[s,i]=p.useState(""),[o,l]=p.useState(""),[c,u]=p.useState(!1),[h,f]=p.useState(!1),[m,g]=p.useState(!1),[T,v]=p.useState(""),[x,_]=p.useState(!1),{toast:b}=en(),w=qr.hasSecretPin(),I=async O=>{O.preventDefault(),v(""),_(!0);try{if(!s||s.length<4){v("يجب أن يكون الرقم السري 4 أرقام على الأقل"),_(!1);return}if(s!==o){v("الرقم السري الجديد وتأكيده غير متطابقين"),_(!1);return}if(w){if(!n){v("يرجى إدخال الرقم السري الحالي"),_(!1);return}if(!qr.verifySecretPin(n)){v("الرقم السري الحالي غير صحيح"),_(!1);return}}qr.setSecretPin(s),b({title:w?"تم تغيير الرقم السري":"تم تعيين الرقم السري",description:w?"تم تغيير الرقم السري بنجاح":"تم تعيين الرقم السري بنجاح"}),k()}catch{v("حدث خطأ أثناء حفظ الرقم السري")}finally{_(!1)}},k=()=>{r(""),i(""),l(""),v(""),u(!1),f(!1),g(!1),e(!1)};return a.jsx(Fn,{open:t,onOpenChange:k,children:a.jsxs(En,{className:"sm:max-w-md",dir:"rtl",children:[a.jsx(Tn,{children:a.jsxs(Sn,{className:"flex items-center gap-2 text-right",children:[a.jsx(Fl,{className:"h-5 w-5"}),w?"تغيير الرقم السري":"تعيين الرقم السري"]})}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground text-right",children:w?"أدخل الرقم السري الحالي والرقم السري الجديد لتغييره":"أدخل الرقم السري الجديد الذي تريد استخدامه في عمليات التعديل"}),w&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"currentPin",className:"text-right block",children:"الرقم السري الحالي"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"currentPin",type:c?"text":"password",value:n,onChange:O=>r(O.target.value),placeholder:"أدخل الرقم السري الحالي",className:"pr-10",dir:"ltr"}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(!c),children:c?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"newPin",className:"text-right block",children:"الرقم السري الجديد"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"newPin",type:h?"text":"password",value:s,onChange:O=>i(O.target.value),placeholder:"أدخل الرقم السري الجديد",className:"pr-10",dir:"ltr"}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!h),children:h?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"confirmPin",className:"text-right block",children:"تأكيد الرقم السري الجديد"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"confirmPin",type:m?"text":"password",value:o,onChange:O=>l(O.target.value),placeholder:"أعد إدخال الرقم السري الجديد",className:"pr-10",dir:"ltr"}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(!m),children:m?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),T&&a.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[a.jsx(ec,{className:"h-4 w-4"}),T]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsxs(W,{type:"submit",disabled:x,className:"flex-1",children:[a.jsx(Cs,{className:"h-4 w-4 mr-2"}),x?"جاري الحفظ...":w?"تغيير الرقم السري":"تعيين الرقم السري"]}),a.jsx(W,{type:"button",variant:"outline",onClick:k,disabled:x,children:"إلغاء"})]})]})]})})}function vk({open:t,onOpenChange:e}){const[n,r]=p.useState(""),[s,i]=p.useState(""),[o,l]=p.useState(""),[c,u]=p.useState(!1),[h,f]=p.useState(!1),[m,g]=p.useState(!1),[T,v]=p.useState(""),[x,_]=p.useState(!1),{toast:b}=en(),w="cash_drawer_pin",I=()=>localStorage.getItem(w)!==null,k=C=>{const A=localStorage.getItem(w);if(!A)return!1;try{return atob(A)===C}catch{return!1}},O=C=>{const A=btoa(C);localStorage.setItem(w,A)},N=async C=>{C.preventDefault(),v(""),_(!0);try{if(!s||s.length<4){v("يجب أن يكون الرقم السري 4 أرقام على الأقل"),_(!1);return}if(s!==o){v("الرقم السري الجديد وتأكيده غير متطابقين"),_(!1);return}if(I()){if(!n){v("يرجى إدخال الرقم السري الحالي لدرج النقدية"),_(!1);return}if(!k(n)){v("الرقم السري الحالي لدرج النقدية غير صحيح"),_(!1);return}}O(s),b({title:I()?"تم تغيير رقم درج النقدية":"تم تعيين رقم درج النقدية",description:I()?"تم تغيير الرقم السري لدرج النقدية بنجاح":"تم تعيين الرقم السري لدرج النقدية بنجاح"}),S()}catch{v("حدث خطأ أثناء حفظ الرقم السري لدرج النقدية")}finally{_(!1)}},S=()=>{r(""),i(""),l(""),v(""),u(!1),f(!1),g(!1),e(!1)};return a.jsx(Fn,{open:t,onOpenChange:S,children:a.jsxs(En,{className:"sm:max-w-md",dir:"rtl",children:[a.jsx(Tn,{children:a.jsxs(Sn,{className:"flex items-center gap-2 text-right",children:[a.jsx(Vr,{className:"h-5 w-5 text-green-600"}),I()?"تغيير رقم درج النقدية":"تعيين رقم درج النقدية"]})}),a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground text-right",children:I()?"أدخل الرقم السري الحالي والرقم السري الجديد لدرج النقدية":"أدخل الرقم السري الجديد الذي تريد استخدامه لحماية درج النقدية"}),I()&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"currentPin",className:"text-right block",children:"الرقم السري الحالي لدرج النقدية"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"currentPin",type:c?"text":"password",value:n,onChange:C=>r(C.target.value),placeholder:"أدخل الرقم السري الحالي",className:"pr-10",dir:"ltr"}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(!c),children:c?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"newPin",className:"text-right block",children:"الرقم السري الجديد لدرج النقدية"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"newPin",type:h?"text":"password",value:s,onChange:C=>i(C.target.value),placeholder:"أدخل الرقم السري الجديد",className:"pr-10",dir:"ltr"}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!h),children:h?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"confirmPin",className:"text-right block",children:"تأكيد الرقم السري الجديد"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"confirmPin",type:m?"text":"password",value:o,onChange:C=>l(C.target.value),placeholder:"أعد إدخال الرقم السري الجديد",className:"pr-10",dir:"ltr"}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(!m),children:m?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),T&&a.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[a.jsx(ec,{className:"h-4 w-4"}),T]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsxs(W,{type:"submit",disabled:x,className:"flex-1 bg-green-600 hover:bg-green-700",children:[a.jsx(Cs,{className:"h-4 w-4 mr-2"}),x?"جاري الحفظ...":I()?"تغيير رقم درج النقدية":"تعيين رقم درج النقدية"]}),a.jsx(W,{type:"button",variant:"outline",onClick:S,disabled:x,children:"إلغاء"})]})]}),a.jsx("div",{className:"text-xs text-gray-500 text-center mt-2",children:"💰 هذا الرقم السري خاص بحماية درج النقدية فقط"})]})})}function xk({open:t,onOpenChange:e}){const[n,r]=p.useState(""),[s,i]=p.useState(""),[o,l]=p.useState(""),[c,u]=p.useState(!1),[h,f]=p.useState(!1),[m,g]=p.useState(!1),[T,v]=p.useState(""),[x,_]=p.useState(!1),{toast:b}=en(),w="wallet_total_pin",I=()=>localStorage.getItem(w)!==null,k=C=>{const A=localStorage.getItem(w);if(!A)return!1;try{return atob(A)===C}catch{return!1}},O=C=>{const A=btoa(C);localStorage.setItem(w,A)},N=async C=>{C.preventDefault(),v(""),_(!0);try{if(!s||s.length<4){v("يجب أن يكون الرقم السري 4 أرقام على الأقل"),_(!1);return}if(s!==o){v("الرقم السري الجديد وتأكيده غير متطابقين"),_(!1);return}if(I()){if(!n){v("يرجى إدخال الرقم السري الحالي لإجمالي المحفظة"),_(!1);return}if(!k(n)){v("الرقم السري الحالي لإجمالي المحفظة غير صحيح"),_(!1);return}}O(s),b({title:I()?"تم تغيير رقم إجمالي المحفظة":"تم تعيين رقم إجمالي المحفظة",description:I()?"تم تغيير الرقم السري لإجمالي المحفظة بنجاح":"تم تعيين الرقم السري لإجمالي المحفظة بنجاح"}),S()}catch{v("حدث خطأ أثناء حفظ الرقم السري لإجمالي المحفظة")}finally{_(!1)}},S=()=>{r(""),i(""),l(""),v(""),u(!1),f(!1),g(!1),e(!1)};return a.jsx(Fn,{open:t,onOpenChange:S,children:a.jsxs(En,{className:"sm:max-w-md",dir:"rtl",children:[a.jsx(Tn,{children:a.jsxs(Sn,{className:"flex items-center gap-2 text-right",children:[a.jsx(_s,{className:"h-5 w-5 text-blue-600"}),I()?"تغيير رقم إجمالي المحفظة":"تعيين رقم إجمالي المحفظة"]})}),a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground text-right",children:I()?"أدخل الرقم السري الحالي والرقم السري الجديد لإجمالي المحفظة":"أدخل الرقم السري الجديد الذي تريد استخدامه لحماية إجمالي المحفظة"}),I()&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"currentPin",className:"text-right block",children:"الرقم السري الحالي لإجمالي المحفظة"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"currentPin",type:c?"text":"password",value:n,onChange:C=>r(C.target.value),placeholder:"أدخل الرقم السري الحالي",className:"pr-10",dir:"ltr"}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(!c),children:c?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"newPin",className:"text-right block",children:"الرقم السري الجديد لإجمالي المحفظة"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"newPin",type:h?"text":"password",value:s,onChange:C=>i(C.target.value),placeholder:"أدخل الرقم السري الجديد",className:"pr-10",dir:"ltr"}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!h),children:h?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"confirmPin",className:"text-right block",children:"تأكيد الرقم السري الجديد"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"confirmPin",type:m?"text":"password",value:o,onChange:C=>l(C.target.value),placeholder:"أعد إدخال الرقم السري الجديد",className:"pr-10",dir:"ltr"}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(!m),children:m?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),T&&a.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[a.jsx(ec,{className:"h-4 w-4"}),T]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsxs(W,{type:"submit",disabled:x,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[a.jsx(Cs,{className:"h-4 w-4 mr-2"}),x?"جاري الحفظ...":I()?"تغيير رقم إجمالي المحفظة":"تعيين رقم إجمالي المحفظة"]}),a.jsx(W,{type:"button",variant:"outline",onClick:S,disabled:x,children:"إلغاء"})]})]}),a.jsx("div",{className:"text-xs text-gray-500 text-center mt-2",children:"💼 هذا الرقم السري خاص بحماية إجمالي المحفظة فقط"})]})})}var Vv=["Enter"," "],Kq=["ArrowDown","PageUp","Home"],wk=["ArrowUp","PageDown","End"],Gq=[...Kq,...wk],Qq={ltr:[...Vv,"ArrowRight"],rtl:[...Vv,"ArrowLeft"]},Yq={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Cd="Menu",[Yu,Xq,Jq]=_p(Cd),[Ra,_k]=Jr(Cd,[Jq,sc,_m]),Em=sc(),bk=_m(),[Zq,ka]=Ra(Cd),[eK,Ad]=Ra(Cd),Ek=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:i,modal:o=!0}=t,l=Em(e),[c,u]=p.useState(null),h=p.useRef(!1),f=Wn(i),m=mm(s);return p.useEffect(()=>{const g=()=>{h.current=!0,document.addEventListener("pointerdown",T,{capture:!0,once:!0}),document.addEventListener("pointermove",T,{capture:!0,once:!0})},T=()=>h.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",T,{capture:!0}),document.removeEventListener("pointermove",T,{capture:!0})}},[]),a.jsx(QI,{...l,children:a.jsx(Zq,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:a.jsx(eK,{scope:e,onClose:p.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:m,modal:o,children:r})})})};Ek.displayName=Cd;var tK="MenuAnchor",_w=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Em(n);return a.jsx(Z0,{...s,...r,ref:e})});_w.displayName=tK;var bw="MenuPortal",[nK,Tk]=Ra(bw,{forceMount:void 0}),Sk=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,i=ka(bw,e);return a.jsx(nK,{scope:e,forceMount:n,children:a.jsx(Zr,{present:n||i.open,children:a.jsx(id,{asChild:!0,container:s,children:r})})})};Sk.displayName=bw;var vr="MenuContent",[rK,Ew]=Ra(vr),Nk=p.forwardRef((t,e)=>{const n=Tk(vr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=ka(vr,t.__scopeMenu),o=Ad(vr,t.__scopeMenu);return a.jsx(Yu.Provider,{scope:t.__scopeMenu,children:a.jsx(Zr,{present:r||i.open,children:a.jsx(Yu.Slot,{scope:t.__scopeMenu,children:o.modal?a.jsx(sK,{...s,ref:e}):a.jsx(iK,{...s,ref:e})})})})}),sK=p.forwardRef((t,e)=>{const n=ka(vr,t.__scopeMenu),r=p.useRef(null),s=Ge(e,r);return p.useEffect(()=>{const i=r.current;if(i)return ow(i)},[]),a.jsx(Tw,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:re(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),iK=p.forwardRef((t,e)=>{const n=ka(vr,t.__scopeMenu);return a.jsx(Tw,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),oK=ca("MenuContent.ScrollLock"),Tw=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:g,disableOutsideScroll:T,...v}=t,x=ka(vr,n),_=Ad(vr,n),b=Em(n),w=bk(n),I=Xq(n),[k,O]=p.useState(null),N=p.useRef(null),S=Ge(e,N,x.onContentChange),C=p.useRef(0),A=p.useRef(""),j=p.useRef(0),D=p.useRef(null),R=p.useRef("right"),K=p.useRef(0),q=T?dm:p.Fragment,G=T?{as:oK,allowPinchZoom:!0}:void 0,Q=L=>{var X,Ce;const $=A.current+L,ie=I().filter(me=>!me.disabled),Z=document.activeElement,le=(X=ie.find(me=>me.ref.current===Z))==null?void 0:X.textValue,he=ie.map(me=>me.textValue),Oe=vK(he,$,le),De=(Ce=ie.find(me=>me.textValue===Oe))==null?void 0:Ce.ref.current;(function me(_e){A.current=_e,window.clearTimeout(C.current),_e!==""&&(C.current=window.setTimeout(()=>me(""),1e3))})($),De&&setTimeout(()=>De.focus())};p.useEffect(()=>()=>window.clearTimeout(C.current),[]),iw();const V=p.useCallback(L=>{var ie,Z;return R.current===((ie=D.current)==null?void 0:ie.side)&&wK(L,(Z=D.current)==null?void 0:Z.area)},[]);return a.jsx(rK,{scope:n,searchRef:A,onItemEnter:p.useCallback(L=>{V(L)&&L.preventDefault()},[V]),onItemLeave:p.useCallback(L=>{var $;V(L)||(($=N.current)==null||$.focus(),O(null))},[V]),onTriggerLeave:p.useCallback(L=>{V(L)&&L.preventDefault()},[V]),pointerGraceTimerRef:j,onPointerGraceIntentChange:p.useCallback(L=>{D.current=L},[]),children:a.jsx(q,{...G,children:a.jsx(cm,{asChild:!0,trapped:s,onMountAutoFocus:re(i,L=>{var $;L.preventDefault(),($=N.current)==null||$.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:a.jsx(Zl,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:m,onDismiss:g,children:a.jsx(Z2,{asChild:!0,...w,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:O,onEntryFocus:re(c,L=>{_.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(ex,{role:"menu","aria-orientation":"vertical","data-state":Bk(x.open),"data-radix-menu-content":"",dir:_.dir,...b,...v,ref:S,style:{outline:"none",...v.style},onKeyDown:re(v.onKeyDown,L=>{const ie=L.target.closest("[data-radix-menu-content]")===L.currentTarget,Z=L.ctrlKey||L.altKey||L.metaKey,le=L.key.length===1;ie&&(L.key==="Tab"&&L.preventDefault(),!Z&&le&&Q(L.key));const he=N.current;if(L.target!==he||!Gq.includes(L.key))return;L.preventDefault();const De=I().filter(X=>!X.disabled).map(X=>X.ref.current);wk.includes(L.key)&&De.reverse(),gK(De)}),onBlur:re(t.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(C.current),A.current="")}),onPointerMove:re(t.onPointerMove,Xu(L=>{const $=L.target,ie=K.current!==L.clientX;if(L.currentTarget.contains($)&&ie){const Z=L.clientX>K.current?"right":"left";R.current=Z,K.current=L.clientX}}))})})})})})})});Nk.displayName=vr;var aK="MenuGroup",Sw=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(xe.div,{role:"group",...r,ref:e})});Sw.displayName=aK;var lK="MenuLabel",Ik=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(xe.div,{...r,ref:e})});Ik.displayName=lK;var tp="MenuItem",mT="menu.itemSelect",Tm=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,i=p.useRef(null),o=Ad(tp,t.__scopeMenu),l=Ew(tp,t.__scopeMenu),c=Ge(e,i),u=p.useRef(!1),h=()=>{const f=i.current;if(!n&&f){const m=new CustomEvent(mT,{bubbles:!0,cancelable:!0});f.addEventListener(mT,g=>r==null?void 0:r(g),{once:!0}),O0(f,m),m.defaultPrevented?u.current=!1:o.onClose()}};return a.jsx(Ck,{...s,ref:c,disabled:n,onClick:re(t.onClick,h),onPointerDown:f=>{var m;(m=t.onPointerDown)==null||m.call(t,f),u.current=!0},onPointerUp:re(t.onPointerUp,f=>{var m;u.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:re(t.onKeyDown,f=>{const m=l.searchRef.current!=="";n||m&&f.key===" "||Vv.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Tm.displayName=tp;var Ck=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...i}=t,o=Ew(tp,n),l=bk(n),c=p.useRef(null),u=Ge(e,c),[h,f]=p.useState(!1),[m,g]=p.useState("");return p.useEffect(()=>{const T=c.current;T&&g((T.textContent??"").trim())},[i.children]),a.jsx(Yu.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:a.jsx(ek,{asChild:!0,...l,focusable:!r,children:a.jsx(xe.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:re(t.onPointerMove,Xu(T=>{r?o.onItemLeave(T):(o.onItemEnter(T),T.defaultPrevented||T.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:re(t.onPointerLeave,Xu(T=>o.onItemLeave(T))),onFocus:re(t.onFocus,()=>f(!0)),onBlur:re(t.onBlur,()=>f(!1))})})})}),cK="MenuCheckboxItem",Ak=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return a.jsx(Dk,{scope:t.__scopeMenu,checked:n,children:a.jsx(Tm,{role:"menuitemcheckbox","aria-checked":np(n)?"mixed":n,...s,ref:e,"data-state":Iw(n),onSelect:re(s.onSelect,()=>r==null?void 0:r(np(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Ak.displayName=cK;var Pk="MenuRadioGroup",[uK,dK]=Ra(Pk,{value:void 0,onValueChange:()=>{}}),Rk=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,i=Wn(r);return a.jsx(uK,{scope:t.__scopeMenu,value:n,onValueChange:i,children:a.jsx(Sw,{...s,ref:e})})});Rk.displayName=Pk;var kk="MenuRadioItem",jk=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=dK(kk,t.__scopeMenu),i=n===s.value;return a.jsx(Dk,{scope:t.__scopeMenu,checked:i,children:a.jsx(Tm,{role:"menuitemradio","aria-checked":i,...r,ref:e,"data-state":Iw(i),onSelect:re(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});jk.displayName=kk;var Nw="MenuItemIndicator",[Dk,hK]=Ra(Nw,{checked:!1}),Ok=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,i=hK(Nw,n);return a.jsx(Zr,{present:r||np(i.checked)||i.checked===!0,children:a.jsx(xe.span,{...s,ref:e,"data-state":Iw(i.checked)})})});Ok.displayName=Nw;var fK="MenuSeparator",Mk=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return a.jsx(xe.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});Mk.displayName=fK;var pK="MenuArrow",Lk=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Em(n);return a.jsx(tx,{...s,...r,ref:e})});Lk.displayName=pK;var mK="MenuSub",[VG,Vk]=Ra(mK),Qc="MenuSubTrigger",Fk=p.forwardRef((t,e)=>{const n=ka(Qc,t.__scopeMenu),r=Ad(Qc,t.__scopeMenu),s=Vk(Qc,t.__scopeMenu),i=Ew(Qc,t.__scopeMenu),o=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=i,u={__scopeMenu:t.__scopeMenu},h=p.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return p.useEffect(()=>h,[h]),p.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),a.jsx(_w,{asChild:!0,...u,children:a.jsx(Ck,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Bk(n.open),...t,ref:wp(e,s.onTriggerChange),onClick:f=>{var m;(m=t.onClick)==null||m.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:re(t.onPointerMove,Xu(f=>{i.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:re(t.onPointerLeave,Xu(f=>{var g,T;h();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(T=n.content)==null?void 0:T.dataset.side,x=v==="right",_=x?-5:5,b=m[x?"left":"right"],w=m[x?"right":"left"];i.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:b,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:b,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(f),f.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:re(t.onKeyDown,f=>{var g;const m=i.searchRef.current!=="";t.disabled||m&&f.key===" "||Qq[r.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});Fk.displayName=Qc;var Uk="MenuSubContent",$k=p.forwardRef((t,e)=>{const n=Tk(vr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,i=ka(vr,t.__scopeMenu),o=Ad(vr,t.__scopeMenu),l=Vk(Uk,t.__scopeMenu),c=p.useRef(null),u=Ge(e,c);return a.jsx(Yu.Provider,{scope:t.__scopeMenu,children:a.jsx(Zr,{present:r||i.open,children:a.jsx(Yu.Slot,{scope:t.__scopeMenu,children:a.jsx(Tw,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:re(t.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:re(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:re(t.onKeyDown,h=>{var g;const f=h.currentTarget.contains(h.target),m=Yq[o.dir].includes(h.key);f&&m&&(i.onOpenChange(!1),(g=l.trigger)==null||g.focus(),h.preventDefault())})})})})})});$k.displayName=Uk;function Bk(t){return t?"open":"closed"}function np(t){return t==="indeterminate"}function Iw(t){return np(t)?"indeterminate":t?"checked":"unchecked"}function gK(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function yK(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function vK(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=yK(t,Math.max(i,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function xK(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i],c=e[o],u=l.x,h=l.y,f=c.x,m=c.y;h>r!=m>r&&n<(f-u)*(r-h)/(m-h)+u&&(s=!s)}return s}function wK(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return xK(n,e)}function Xu(t){return e=>e.pointerType==="mouse"?t(e):void 0}var _K=Ek,bK=_w,EK=Sk,TK=Nk,SK=Sw,NK=Ik,IK=Tm,CK=Ak,AK=Rk,PK=jk,RK=Ok,kK=Mk,jK=Lk,DK=Fk,OK=$k,Sm="DropdownMenu",[MK,FG]=Jr(Sm,[_k]),Rn=_k(),[LK,zk]=MK(Sm),Wk=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:i,onOpenChange:o,modal:l=!0}=t,c=Rn(e),u=p.useRef(null),[h,f]=ua({prop:s,defaultProp:i??!1,onChange:o,caller:Sm});return a.jsx(LK,{scope:e,triggerId:bs(),triggerRef:u,contentId:bs(),open:h,onOpenChange:f,onOpenToggle:p.useCallback(()=>f(m=>!m),[f]),modal:l,children:a.jsx(_K,{...c,open:h,onOpenChange:f,dir:r,modal:l,children:n})})};Wk.displayName=Sm;var Hk="DropdownMenuTrigger",qk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,i=zk(Hk,n),o=Rn(n);return a.jsx(bK,{asChild:!0,...o,children:a.jsx(xe.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:wp(e,i.triggerRef),onPointerDown:re(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:re(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});qk.displayName=Hk;var VK="DropdownMenuPortal",Kk=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Rn(e);return a.jsx(EK,{...r,...n})};Kk.displayName=VK;var Gk="DropdownMenuContent",Qk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=zk(Gk,n),i=Rn(n),o=p.useRef(!1);return a.jsx(TK,{id:s.contentId,"aria-labelledby":s.triggerId,...i,...r,ref:e,onCloseAutoFocus:re(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:re(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Qk.displayName=Gk;var FK="DropdownMenuGroup",UK=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(SK,{...s,...r,ref:e})});UK.displayName=FK;var $K="DropdownMenuLabel",Yk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(NK,{...s,...r,ref:e})});Yk.displayName=$K;var BK="DropdownMenuItem",Xk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(IK,{...s,...r,ref:e})});Xk.displayName=BK;var zK="DropdownMenuCheckboxItem",Jk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(CK,{...s,...r,ref:e})});Jk.displayName=zK;var WK="DropdownMenuRadioGroup",HK=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(AK,{...s,...r,ref:e})});HK.displayName=WK;var qK="DropdownMenuRadioItem",Zk=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(PK,{...s,...r,ref:e})});Zk.displayName=qK;var KK="DropdownMenuItemIndicator",ej=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(RK,{...s,...r,ref:e})});ej.displayName=KK;var GK="DropdownMenuSeparator",tj=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(kK,{...s,...r,ref:e})});tj.displayName=GK;var QK="DropdownMenuArrow",YK=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(jK,{...s,...r,ref:e})});YK.displayName=QK;var XK="DropdownMenuSubTrigger",nj=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(DK,{...s,...r,ref:e})});nj.displayName=XK;var JK="DropdownMenuSubContent",rj=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=Rn(n);return a.jsx(OK,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});rj.displayName=JK;var ZK=Wk,eG=qk,tG=Kk,sj=Qk,ij=Yk,oj=Xk,aj=Jk,lj=Zk,cj=ej,uj=tj,dj=nj,hj=rj;const fj=ZK,pj=eG,nG=p.forwardRef(({className:t,inset:e,children:n,...r},s)=>a.jsxs(dj,{ref:s,className:be("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,a.jsx(mI,{className:"ml-auto h-4 w-4"})]}));nG.displayName=dj.displayName;const rG=p.forwardRef(({className:t,...e},n)=>a.jsx(hj,{ref:n,className:be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));rG.displayName=hj.displayName;const Cw=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(tG,{children:a.jsx(sj,{ref:r,sideOffset:e,className:be("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));Cw.displayName=sj.displayName;const _l=p.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(oj,{ref:r,className:be("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));_l.displayName=oj.displayName;const sG=p.forwardRef(({className:t,children:e,checked:n,...r},s)=>a.jsxs(aj,{ref:s,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(cj,{children:a.jsx(wf,{className:"h-4 w-4"})})}),e]}));sG.displayName=aj.displayName;const iG=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(lj,{ref:r,className:be("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(cj,{children:a.jsx(y4,{className:"h-2 w-2 fill-current"})})}),e]}));iG.displayName=lj.displayName;const mj=p.forwardRef(({className:t,inset:e,...n},r)=>a.jsx(ij,{ref:r,className:be("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));mj.displayName=ij.displayName;const Fv=p.forwardRef(({className:t,...e},n)=>a.jsx(uj,{ref:n,className:be("-mx-1 my-1 h-px bg-muted",t),...e}));Fv.displayName=uj.displayName;const oG=()=>{const[t,e]=p.useState(!1),[n,r]=p.useState(!1),[s,i]=p.useState(!1);return a.jsxs(a.Fragment,{children:[a.jsxs(fj,{children:[a.jsx(pj,{asChild:!0,children:a.jsxs(W,{variant:"outline",size:"sm",className:"flex items-center gap-0.5 bg-gradient-to-r from-blue-50 to-purple-50 hover:from-blue-100 hover:to-purple-100 border-blue-300 text-blue-700 text-xs btn-bounce hover-glow h-6 px-1 shadow-sm w-auto min-w-0",children:[a.jsx(li,{className:"h-2 w-2"}),a.jsx("span",{className:"text-xs whitespace-nowrap",children:"إدارة"}),a.jsx(U0,{className:"h-1.5 w-1.5"})]})}),a.jsxs(Cw,{align:"end",className:"w-48 bg-white border border-gray-200 shadow-lg rounded-md",children:[a.jsxs(_l,{onClick:()=>e(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-blue-700 hover:bg-blue-50 cursor-pointer",children:[a.jsx(Fl,{className:"h-3.5 w-3.5"}),"تغيير الرقم السري"]}),a.jsxs(_l,{onClick:()=>r(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-purple-700 hover:bg-purple-50 cursor-pointer",children:[a.jsx(f4,{className:"h-3.5 w-3.5"}),"رقم درج النقدية"]}),a.jsxs(_l,{onClick:()=>i(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-indigo-700 hover:bg-indigo-50 cursor-pointer",children:[a.jsx(_s,{className:"h-3.5 w-3.5"}),"رقم إجمالي المحفظة"]})]})]}),a.jsx(yk,{open:t,onOpenChange:e}),a.jsx(vk,{open:n,onOpenChange:r}),a.jsx(xk,{open:s,onOpenChange:i})]})};function aG({open:t,onOpenChange:e,onSuccess:n,title:r,description:s,currentBalance:i,balanceLabel:o}){const[l,c]=p.useState(""),[u,h]=p.useState(""),[f,m]=p.useState("add"),[g,T]=p.useState(!1),[v,x]=p.useState(""),[_,b]=p.useState(!1),w=qr.hasSecretPin(),I=async N=>{N.preventDefault(),x(""),b(!0);try{const S=parseFloat(u);if(isNaN(S)||S<=0){x("يرجى إدخال مبلغ صحيح أكبر من صفر"),b(!1);return}if(f==="subtract"&&S>i){x("لا يمكن خصم مبلغ أكبر من الرصيد الحالي"),b(!1);return}if(w)if(qr.verifySecretPin(l)){const C=f==="add"?S:-S;n(C),k()}else x("الرقم السري غير صحيح");else x("لم يتم تعيين رقم سري. يرجى تعيين رقم سري أولاً من إعدادات التطبيق")}catch{x("حدث خطأ أثناء التحقق من الرقم السري")}finally{b(!1)}},k=()=>{c(""),h(""),m("add"),x(""),e(!1)},O=()=>{const N=parseFloat(u)||0;return f==="add"?i+N:i-N};return a.jsx(Fn,{open:t,onOpenChange:k,children:a.jsxs(En,{className:"sm:max-w-md",dir:"rtl",children:[a.jsx(Tn,{children:a.jsxs(Sn,{className:"flex items-center gap-2 text-right",children:[f==="add"?a.jsx(ra,{className:"h-5 w-5 text-green-600"}):a.jsx(Wy,{className:"h-5 w-5 text-red-600"}),r]})}),a.jsxs("form",{onSubmit:I,className:"space-y-4",children:[a.jsx("div",{className:"text-sm text-muted-foreground text-right",children:s}),a.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[a.jsxs(Te,{className:"text-sm font-medium text-gray-700",children:[o," الحالي"]}),a.jsxs("div",{className:"text-lg font-bold text-gray-900 mt-1",children:[i.toLocaleString()," جنيه"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{className:"text-right",children:"نوع العملية"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(W,{type:"button",variant:f==="add"?"default":"outline",onClick:()=>m("add"),className:"flex-1 flex items-center gap-2",children:[a.jsx(ra,{className:"h-4 w-4"}),"إضافة"]}),a.jsxs(W,{type:"button",variant:f==="subtract"?"default":"outline",onClick:()=>m("subtract"),className:"flex-1 flex items-center gap-2",children:[a.jsx(Wy,{className:"h-4 w-4"}),"خصم"]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Te,{htmlFor:"amount",className:"text-right",children:["المبلغ المراد ",f==="add"?"إضافته":"خصمه"]}),a.jsx(ce,{id:"amount",type:"number",step:"0.01",min:"0.01",value:u,onChange:N=>h(N.target.value),placeholder:`أدخل المبلغ المراد ${f==="add"?"إضافته":"خصمه"}`,className:"text-right",required:!0})]}),u&&!isNaN(parseFloat(u))&&a.jsxs("div",{className:`p-3 rounded-lg ${f==="add"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[a.jsx(Te,{className:"text-sm font-medium text-gray-700",children:"الرصيد الجديد المتوقع"}),a.jsxs("div",{className:`text-lg font-bold mt-1 ${f==="add"?"text-green-700":"text-red-700"}`,children:[O().toLocaleString()," جنيه"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"pin",className:"text-right",children:"الرقم السري"}),a.jsxs("div",{className:"relative",children:[a.jsx(ce,{id:"pin",type:g?"text":"password",value:l,onChange:N=>c(N.target.value),placeholder:"أدخل الرقم السري",className:"text-right pr-10",required:!0}),a.jsx(W,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>T(!g),children:g?a.jsx(Lt,{className:"h-4 w-4"}):a.jsx(kt,{className:"h-4 w-4"})})]})]}),v&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:[a.jsx(ec,{className:"h-4 w-4"}),v]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx(W,{type:"button",variant:"outline",onClick:k,className:"flex-1",children:"إلغاء"}),a.jsx(W,{type:"submit",disabled:_||!l||!u,className:`flex-1 ${f==="add"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:_?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري التحديث..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Cs,{className:"h-4 w-4 mr-2"}),f==="add"?"إضافة المبلغ":"خصم المبلغ"]})})]})]})]})})}const gj={getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},async getWalletUsage(t){try{const e=this.getCurrentMonthId(),n=tt(Ae,"users",t,"limits",e),r=await Eo(n);if(r.exists()){const i=r.data();return{walletId:t,used_transfer:i.used_transfer||0,used_withdraw:i.used_withdraw||0,monthly_limit:i.monthly_limit||2e5,last_reset:i.last_reset||null,updatedAt:i.updatedAt||et.now()}}const s={walletId:t,used_transfer:0,used_withdraw:0,monthly_limit:2e5,last_reset:null,updatedAt:et.now()};return await gs(n,{used_transfer:0,used_withdraw:0,monthly_limit:2e5,last_reset:null,updatedAt:dt()}),s}catch(e){return console.error("Error getting wallet usage:",e),null}},shouldResetLimits(t){const e=new Date,n=e.getDate();if(!t)return!0;if(n===1){const r=t.toDate(),s=e.getMonth(),i=e.getFullYear();return r.getMonth()!==s||r.getFullYear()!==i}return!1},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletUsage(t);return e&&this.shouldResetLimits(e.last_reset)?(console.log(`🔄 تصفير تلقائي للحدود للمحفظة ${t} - اليوم الأول من الشهر`),await this.resetWalletUsage(t)):!1}catch(e){return console.error("خطأ في التصفير التلقائي للحدود:",e),!1}},async resetWalletUsage(t){try{const e=this.getCurrentMonthId(),n=tt(Ae,"users",t,"limits",e);return await gs(n,{used_transfer:0,used_withdraw:0,last_reset:dt(),updatedAt:dt()},{merge:!0}),console.log(`🔄 تم تصفير استخدام المحفظة ${t} بنجاح`),!0}catch(e){return console.error("خطأ في تصفير استخدام المحفظة:",e),!1}},async calculateUsageFromTransactions(t){var e;try{const n=this.getCurrentMonthId(),r=tt(Ae,"users",t,"limits",n),s=await Eo(r),i=s.exists()?(e=s.data())==null?void 0:e.last_reset:null,o=mi(Xt(Ae,"tx"),bo("uid","==",t),...i?[bo("createdAt",">=",i)]:[]),l=await ks(o);let c=0,u=0;return l.forEach(h=>{const f=h.data();f.status==="completed"&&(f.type==="transfer"?c+=f.amount:f.type==="withdraw"&&(u+=f.amount))}),{used_transfer:c,used_withdraw:u}}catch(n){return console.error("خطأ في حساب الاستخدام من المعاملات:",n),{used_transfer:0,used_withdraw:0}}},async getWalletUsageWithRefresh(t){try{const e=await this.getWalletUsage(t);if(!e)return null;const n=await this.calculateUsageFromTransactions(t);if(e.used_transfer!==n.used_transfer||e.used_withdraw!==n.used_withdraw){const r=this.getCurrentMonthId(),s=tt(Ae,"users",t,"limits",r);return await gs(s,{used_transfer:n.used_transfer,used_withdraw:n.used_withdraw,updatedAt:dt()},{merge:!0}),await this.getWalletUsage(t)}return e}catch(e){return console.error("خطأ في الحصول على الاستخدام مع التحديث:",e),null}},calculateRemaining(t){return{remainingTransfer:Math.max(0,t.monthly_limit-t.used_transfer),remainingWithdraw:Math.max(0,t.monthly_limit-t.used_withdraw)}},async canPerformOperation(t,e,n){try{const r=await this.getWalletUsageWithRefresh(t);if(!r)return{canPerform:!1,message:"لا يمكن العثور على بيانات الاستخدام للمحفظة"};const s=this.calculateRemaining(r);return n==="transfer"&&e>s.remainingTransfer?{canPerform:!1,message:`تجاوز حد التحويل المسموح. المتبقي: ${s.remainingTransfer.toLocaleString()} ج.م من أصل ${r.monthly_limit.toLocaleString()} ج.م`,remaining:s.remainingTransfer}:n==="withdraw"&&e>s.remainingWithdraw?{canPerform:!1,message:`تجاوز حد السحب المسموح. المتبقي: ${s.remainingWithdraw.toLocaleString()} ج.م من أصل ${r.monthly_limit.toLocaleString()} ج.م`,remaining:s.remainingWithdraw}:{canPerform:!0}}catch(r){return console.error("Error checking operation limits:",r),{canPerform:!1,message:"خطأ في التحقق من الحدود"}}},async updateUsage(t,e,n){try{const r=await this.getWalletUsageWithRefresh(t);if(!r)throw new Error("لا يمكن العثور على بيانات الاستخدام للمحفظة");const s=await this.canPerformOperation(t,e,n);if(!s.canPerform)throw new Error(s.message||"لا يمكن إجراء العملية");const i=n==="transfer"?r.used_transfer+e:r.used_transfer,o=n==="withdraw"?r.used_withdraw+e:r.used_withdraw,l=this.getCurrentMonthId(),c=tt(Ae,"users",r.walletId,"limits",l);await gs(c,{used_transfer:i,used_withdraw:o,updatedAt:dt()},{merge:!0});const u=await this.getWalletUsageWithRefresh(t);if(!u)throw new Error("فشل في قراءة البيانات المحدثة");return u}catch(r){throw console.error("Error updating wallet usage:",r),r}},async resetWalletUsageManually(t){try{const e=this.getCurrentMonthId(),n=tt(Ae,"users",t,"limits",e);await gs(n,{used_transfer:0,used_withdraw:0,last_reset:dt(),updatedAt:dt()},{merge:!0});const r=await this.getWalletUsageWithRefresh(t);if(!r)throw new Error("فشل في قراءة البيانات بعد التصفير");return console.log(`✅ تم تصفير استخدام المحفظة ${t} بنجاح`),r}catch(e){throw console.error("Error resetting wallet usage:",e),e}},async getAllWalletsUsage(t){try{const n=(await Ur.getByMerchantId(t)).map(s=>this.getWalletUsageWithRefresh(s.id));return(await Promise.all(n)).filter(s=>s!==null)}catch(e){return console.error("Error getting all wallets usage:",e),[]}}},Gh={shouldResetReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:()=>{try{const t=localStorage.getItem("reportsData");let e={lastResetDate:null,dailyTransactions:[],monthlyTransactions:[]};if(t){const n=JSON.parse(t);e={...n,lastResetDate:n.lastResetDate?new Date(n.lastResetDate):null}}return Gh.shouldResetReports(e.lastResetDate)?(e.dailyTransactions=[],e.monthlyTransactions=[],e.lastResetDate=new Date,localStorage.setItem("reportsData",JSON.stringify(e)),console.log("تم تصفير التقارير تلقائياً في اليوم الأول من الشهر"),!0):!1}catch(t){return console.error("خطأ في التصفير التلقائي للتقارير:",t),!1}},resetReportsManually:t=>{try{const e=localStorage.getItem("transactions");if(!e)return;const n=JSON.parse(e);let r;if(t==="daily"){const s=new Date().toDateString();r=n.filter(i=>new Date(i.createdAt).toDateString()!==s)}else{const s=new Date().getMonth(),i=new Date().getFullYear();r=n.filter(o=>{const l=new Date(o.createdAt);return!(l.getMonth()===s&&l.getFullYear()===i)})}localStorage.setItem("transactions",JSON.stringify(r)),console.log(`تم تصفير التقارير ${t==="daily"?"اليومية":"الشهرية"} يدوياً`)}catch(e){console.error("خطأ في التصفير اليدوي للتقارير:",e)}},getReportsData:()=>{try{const t=localStorage.getItem("reportsData");if(t){const e=JSON.parse(t);return{...e,lastResetDate:e.lastResetDate?new Date(e.lastResetDate):null}}}catch(t){console.error("خطأ في قراءة بيانات التقارير:",t)}return{lastResetDate:null,dailyTransactions:[],monthlyTransactions:[]}}},lG=()=>{var Lo,vc;const{toast:t}=en(),{signOut:e,user:n}=Pn(),[r,s]=p.useState("01030302038"),[i,o]=p.useState(""),[l,c]=p.useState(""),[u,h]=p.useState("transfer"),[f,m]=p.useState([]),[g,T]=p.useState("all"),[v,x]=p.useState(!1),[_,b]=p.useState(""),[w,I]=p.useState([]),[k,O]=p.useState(null),[N,S]=p.useState(!1);p.useState([]),p.useState([]);const[C,A]=p.useState(!1),[j,D]=p.useState("daily"),[R,K]=p.useState([]),q=2e5,G=2e5,[Q,V]=p.useState(0),[L,$]=p.useState({}),[ie,Z]=p.useState(!1),[le,he]=p.useState(!1),[Oe,De]=p.useState(!1),[X,Ce]=p.useState(""),[me,_e]=p.useState(""),[Pe,ke]=p.useState(!1),[He,Ft]=p.useState("");p.useState(!1);const[Hn,qn]=p.useState(!1),[Er,Fs]=p.useState(!1),[Tr,xi]=p.useState(!1),[ts,ns]=p.useState(!1),[yn,Sr]=p.useState(""),[wi,$e]=p.useState(""),[ut,Nr]=p.useState(!1),[Oo,ur]=p.useState(""),[gc,Kn]=p.useState(!1),[rs,Gn]=p.useState("");w.reduce((M,ne)=>M+(L[ne.id]||0),0);const ss=M=>{const te=localStorage.getItem("wallet_total_pin");if(!te)return M==="1234";try{return atob(te)===M}catch{return M==="1234"}},dr=M=>{const te=localStorage.getItem("cash_drawer_pin");if(!te)return M==="1234";try{return atob(te)===M}catch{return M==="1234"}};p.useEffect(()=>{(async()=>{try{const fe=await Pr.getUserData((n==null?void 0:n.uid)||"user-1");if(fe){if(fe.walletBalances!==void 0)$(fe.walletBalances);else{const pe={"wallet-1":1e4,"wallet-2":5e3};$(pe),await Pr.updateUserData((n==null?void 0:n.uid)||"user-1",{walletBalances:pe})}fe.cashBalance!==void 0&&V(fe.cashBalance),fe.deletedTransactions&&K(fe.deletedTransactions)}const we=await Pr.getUserWallets("user-1");if(we&&we.length>0){I(we);const pe=we.find(Se=>Se.isDefault);pe&&(b(pe.id),s(pe.phone))}else{const pe=[{id:"wallet-1",name:"المحفظة الرئيسية",phone:"01030302038",isDefault:!0,monthlyWithdrawalLimit:2e5,monthlyTransferLimit:2e5},{id:"wallet-2",name:"محفظة احتياطية",phone:"01234567890",isDefault:!1,monthlyWithdrawalLimit:2e5,monthlyTransferLimit:2e5}];I(pe),await Pr.updateUserData((n==null?void 0:n.uid)||"user-1",{wallets:pe}),b("wallet-1"),s("01030302038")}const Le=await Pr.getUserTransactions((n==null?void 0:n.uid)||"user-1");if(Le&&Le.length>0){const pe=Le.map(Se=>({...Se,createdAt:new Date(Se.createdAt)}));m(pe)}}catch(fe){console.error("خطأ في تحميل بيانات المستخدم من Firebase:",fe);const we=localStorage.getItem("userCashBalance");we&&V(parseFloat(we))}})();const ne=async()=>{try{for(const fe of w)await gj.autoResetLimitsIfNeeded(fe.phone)}catch(fe){console.error("خطأ في التصفير التلقائي للحدود:",fe)}},te=()=>{try{if(Gh.autoResetReportsIfNeeded()){const we=localStorage.getItem("transactions");if(we){const pe=JSON.parse(we).map(Se=>({...Se,createdAt:new Date(Se.createdAt)}));m(pe)}}}catch(fe){console.error("خطأ في التصفير التلقائي للتقارير:",fe)}};ne(),te()},[n==null?void 0:n.uid]);const yc=M=>{b(M);const ne=w.find(te=>te.id===M);ne&&s(ne.phone)},_i=M=>{h(M),o(""),c("")},is=M=>{O(M),S(!0)},Mo=M=>{const ne=f.find(te=>te.id===M);if(ne){const te=[...R,ne];K(te),localStorage.setItem("deletedTransactions",JSON.stringify(te));const fe=f.filter(we=>we.id!==M);m(fe),localStorage.setItem("transactions",JSON.stringify(fe)),S(!1),t({title:"تم نقل المعاملة إلى المحذوفات",description:"تم نقل المعاملة إلى قائمة المحذوفات بنجاح. يمكنك استرجاعها لاحقاً"})}},os=M=>{const ne=localStorage.getItem("withdrawalCommissionRate"),te=ne?parseFloat(ne):10;return Math.ceil(M/1e3*te)},Us=()=>{const M=parseFloat(l)||0,ne=os(M);return M+ne},Ht=()=>{const M=new Date().toDateString(),ne=f.filter(pe=>new Date(pe.createdAt).toDateString()===M&&pe.status==="completed"),te=ne.length,fe=ne.reduce((pe,Se)=>pe+Se.amount,0),we=ne.filter(pe=>pe.type==="withdraw").reduce((pe,Se)=>pe+(Se.withdrawnAmount||0),0),Le=ne.filter(pe=>pe.type==="send").reduce((pe,Se)=>pe+(Se.sentAmount||0),0);return{totalTransactions:te,totalAmount:fe,totalWithdrawn:we,totalSent:Le}},vn=()=>{const M=new Date().getMonth(),ne=new Date().getFullYear(),te=f.filter(Se=>{const Et=new Date(Se.createdAt);return Et.getMonth()===M&&Et.getFullYear()===ne&&Se.status==="completed"}),fe=te.length,we=te.reduce((Se,Et)=>Se+Et.amount,0),Le=te.filter(Se=>Se.type==="withdraw").reduce((Se,Et)=>{const xc=Et.withdrawnAmount||Et.amount;return Se+xc},0),pe=te.filter(Se=>Se.type==="send").reduce((Se,Et)=>{const xc=Et.sentAmount||Et.amount;return Se+xc},0);return{totalTransactions:fe,totalAmount:we,totalWithdrawn:Le,totalSent:pe}},ge=vn(),je=ge.totalWithdrawn,ze=ge.totalSent;p.useEffect(()=>{const M=localStorage.getItem("transactions");if(M){const te=JSON.parse(M).map(fe=>({...fe,createdAt:new Date(fe.createdAt)}));m(te)}},[]),p.useEffect(()=>{f.length>0&&localStorage.setItem("transactions",JSON.stringify(f))},[f]);const jt=async()=>{if(console.log("🔄 بدء عملية التحويل/السحب"),console.log("📊 البيانات المدخلة:",{senderPhone:r,receiverPhone:i,amount:l,transactionType:u}),!r||!l){console.log("❌ خطأ: بيانات ناقصة"),t({title:"خطأ في البيانات",description:"يرجى ملء جميع الحقول المطلوبة",variant:"destructive"});return}if(u==="transfer"&&!i){console.log("❌ خطأ: رقم المستقبل مفقود"),t({title:"خطأ في البيانات",description:"يرجى إدخال رقم المستقبل",variant:"destructive"});return}const M=parseFloat(l);if(console.log("💰 المبلغ المحول:",M),M<=0){console.log("❌ خطأ: مبلغ غير صحيح"),t({title:"خطأ في المبلغ",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}if(console.log("📈 فحص الحدود الشهرية"),console.log("📊 الإحصائيات الشهرية الحالية:",{monthlyWithdrawn:je,monthlyTransferred:ze,MONTHLY_WITHDRAWAL_LIMIT:q,MONTHLY_TRANSFER_LIMIT:G}),u==="withdraw"){if(console.log("🏧 فحص حد السحب الشهري"),console.log(`💸 المسحوب حالياً: ${je}, المبلغ الجديد: ${M}, الحد الأقصى: ${q}`),je+M>q){console.log("❌ تجاوز حد السحب الشهري"),t({title:"تجاوز حد السحب الشهري",description:`لا يمكن سحب أكثر من ${q} جنيه شهرياً`,variant:"destructive"});return}}else if(console.log("💸 فحص حد التحويل الشهري"),console.log(`📤 المحول حالياً: ${ze}, المبلغ الجديد: ${M}, الحد الأقصى: ${G}`),ze+M>G){console.log("❌ تجاوز حد التحويل الشهري"),t({title:"تجاوز حد التحويل الشهري",description:`لا يمكن تحويل أكثر من ${G} جنيه شهرياً`,variant:"destructive"});return}const ne={id:Date.now().toString(),type:u==="transfer"?"send":"withdraw",senderPhone:r,receiverPhone:u==="transfer"?i:r,amount:M,status:"completed",createdAt:new Date,withdrawnAmount:u==="withdraw"?M:void 0,sentAmount:u==="transfer"?M:void 0};if(u==="transfer"){const te=w.reduce((pe,Se)=>{const Et=L[Se.id]||0;return pe+Et},0);te<M&&t({title:"تحذير: رصيد غير كافي",description:`الرصيد المتاح في المحافظ (${te} جنيه) أقل من المبلغ المطلوب (${M} جنيه). سيتم إجراء العملية وستصبح المحافظ بأرصدة سالبة.`,variant:"destructive"});const fe=Q+M;V(fe);const we={...L};let Le=M;for(const pe of w){if(Le<=0)break;const Se=we[pe.id]||0,Et=Math.min(Se,Le);Et>0&&(we[pe.id]=Se-Et,Le-=Et)}$(we)}if(u==="withdraw"){if(Q<M){t({title:"رصيد غير كافي في درج النقدية",description:`الرصيد المتاح في درج النقدية (${Q} جنيه) أقل من المبلغ المطلوب (${M} جنيه)`,variant:"destructive"});return}const te=Q-M;V(te);const fe={...L},we=w.find(Le=>Le.isDefault)||w[0];if(we){const Le=fe[we.id]||0;fe[we.id]=Le+M,$(fe)}}m(te=>[ne,...te]);try{await iR.create({type:u==="transfer"?"send":"withdraw",senderPhone:r,receiverPhone:u==="transfer"?i:r,amount:M,status:"completed",userId:(n==null?void 0:n.uid)||"user-1"}),await Pr.updateUserData((n==null?void 0:n.uid)||"user-1",{cashBalance:u==="withdraw"?Q-M:Q+M,walletBalances:u==="transfer"?Object.fromEntries(Object.entries(L).map(([te,fe])=>{let we=M;for(const Le of w){if(we<=0)break;if(Le.id===te){const pe=fe||0,Se=Math.min(pe,we);if(Se>0)return we-=Se,[te,pe-Se]}}return[te,fe]})):(()=>{const te=w.find(fe=>fe.isDefault)||w[0];return te?{...L,[te.id]:(L[te.id]||0)+M}:L})()})}catch(te){console.error("خطأ في حفظ المعاملة في Firebase:",te)}o(""),c(""),t({title:u==="transfer"?"تم التحويل بنجاح":"تم السحب بنجاح",description:`تم ${u==="transfer"?"تحويل":"سحب"} ${M} جنيه بنجاح`})},It=M=>{switch(M){case"completed":return a.jsx(Ll,{className:"h-2.5 w-2.5 text-green-500"});case"pending":return a.jsx(Vl,{className:"h-2.5 w-2.5 text-yellow-500"});case"failed":return a.jsx($0,{className:"h-2.5 w-2.5 text-red-500"});default:return a.jsx(Vl,{className:"h-2.5 w-2.5 text-gray-500"})}},Ze=M=>{switch(M){case"completed":return"مكتمل";case"pending":return"معلق";case"failed":return"فاشل";default:return"غير معروف"}},Qn=f.filter(M=>g==="all"?!0:g==="send"?M.type==="send":g==="receive"?M.type==="receive":g==="withdraw"?M.type==="withdraw":g!=="deleted"),Dt=M=>{const ne=R.find(te=>te.id===M);if(ne){const te=[ne,...f];m(te),localStorage.setItem("transactions",JSON.stringify(te));const fe=R.filter(we=>we.id!==M);K(fe),localStorage.setItem("deletedTransactions",JSON.stringify(fe)),t({title:"تم استرجاع المعاملة",description:"تم استرجاع المعاملة بنجاح إلى القائمة الرئيسية"})}},tn=M=>{const ne=R.filter(te=>te.id!==M);K(ne),localStorage.setItem("deletedTransactions",JSON.stringify(ne)),t({title:"تم حذف المعاملة نهائياً",description:"تم حذف المعاملة نهائياً ولا يمكن استرجاعها"})},Nm=()=>{if(j==="daily"){Gh.resetReportsManually("daily");const M=new Date().toDateString(),ne=f.filter(te=>new Date(te.createdAt).toDateString()!==M);m(ne),localStorage.setItem("transactions",JSON.stringify(ne)),t({title:"تم تصفير المعاملات اليومية",description:"تم حذف جميع معاملات اليوم بنجاح (الحدود لم تتأثر)"})}else{Gh.resetReportsManually("monthly");const M=new Date().getMonth(),ne=new Date().getFullYear(),te=f.filter(fe=>{const we=new Date(fe.createdAt);return!(we.getMonth()===M&&we.getFullYear()===ne)});m(te),localStorage.setItem("transactions",JSON.stringify(te)),t({title:"تم تصفير المعاملات الشهرية",description:"تم حذف جميع معاملات الشهر بنجاح (الحدود لم تتأثر)"})}A(!1)},Im=()=>j==="daily"?"تصفير المعاملات اليومية":"تصفير المعاملات الشهرية",bi=()=>j==="daily"?"أدخل الرقم السري لتصفير جميع معاملات اليوم":"أدخل الرقم السري لتصفير جميع معاملات الشهر",Cm=M=>{V(M),localStorage.setItem("userCashBalance",M.toString()),Z(!1),t({title:"تم تحديث الرصيد النقدي",description:`تم تحديث الرصيد النقدي إلى ${M} جنيه`})},Am=M=>{var ne;if(console.log("💰 بدء تحديث رصيد المحفظة"),console.log("📊 معرف المحفظة المحررة:",He),console.log("💵 المبلغ المضاف/المخصوم:",M),He){const te=L[He]||0;console.log("💰 الرصيد الحالي:",te);const fe=te+M;console.log("💰 الرصيد الجديد:",fe);const we={...L,[He]:fe};console.log("📊 الأرصدة المحدثة:",we),$(we),localStorage.setItem("walletBalances",JSON.stringify(we)),console.log("✅ تم حفظ الأرصدة في localStorage");const Le=((ne=w.find(Et=>Et.id===He))==null?void 0:ne.name)||"المحفظة",pe=M>0?"إضافة":"خصم",Se=Math.abs(M);t({title:`تم ${pe} مبلغ ${pe==="إضافة"?"إلى":"من"} رصيد المحفظة`,description:`تم ${pe} ${Se} جنيه ${pe==="إضافة"?"إلى":"من"} رصيد ${Le}. الرصيد الجديد: ${fe.toLocaleString()} جنيه`})}else console.log("❌ لا يوجد معرف محفظة للتحرير");ke(!1),Ft("")};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[a.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 fade-in-up",children:[a.jsxs(Qe,{className:"card-gradient-purple card-modern card-interactive hover-shadow-lg tilt",children:[a.jsx(pt,{className:"pb-1 px-3 pt-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(mt,{className:"text-xs font-medium text-purple-700 hover-text-glow",children:"تقارير الشهر"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(W,{size:"sm",variant:"ghost",onClick:()=>{D("monthly"),A(!0)},className:"btn-elegant h-4 w-4 p-0 text-purple-600 hover:text-purple-800 hover:bg-purple-200 btn-bounce ripple magnetic hover-rotate",title:"تصفير معاملات الشهر",children:a.jsx(fs,{className:"h-2.5 w-2.5"})}),a.jsx(au,{className:"h-2.5 w-2.5 text-purple-600 hover-rotate"})]})]})}),a.jsxs(Ye,{className:"space-y-0.5 pt-0 px-3 pb-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-purple-600",children:"عدد المعاملات:"}),a.jsx("span",{className:"font-bold text-xs text-purple-800",children:vn().totalTransactions})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-purple-600",children:"إجمالي المبالغ:"}),a.jsxs("span",{className:"font-bold text-xs text-purple-800",children:[vn().totalAmount.toFixed(2)," ج.م"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-purple-600",children:"المسحوب:"}),a.jsxs("span",{className:"font-bold text-xs text-purple-800",children:[vn().totalWithdrawn.toFixed(2)," ج.م"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-purple-600",children:"المرسل:"}),a.jsxs("span",{className:"font-bold text-xs text-purple-800",children:[vn().totalSent.toFixed(2)," ج.م"]})]})]})]}),a.jsxs(Qe,{className:"card-gradient-blue card-modern card-interactive hover-shadow-lg tilt",children:[a.jsx(pt,{className:"pb-1 px-3 pt-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(mt,{className:"text-xs font-medium text-blue-700 hover-text-glow",children:"تقارير اليوم"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(W,{size:"sm",variant:"ghost",onClick:()=>{D("daily"),A(!0)},className:"btn-elegant h-4 w-4 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-200 btn-bounce ripple magnetic hover-rotate",title:"تصفير معاملات اليوم",children:a.jsx(fs,{className:"h-2.5 w-2.5"})}),a.jsx(au,{className:"h-2.5 w-2.5 text-blue-600 hover-rotate"})]})]})}),a.jsxs(Ye,{className:"space-y-0.5 pt-0 px-3 pb-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-blue-600",children:"عدد المعاملات:"}),a.jsx("span",{className:"font-bold text-xs text-blue-800",children:Ht().totalTransactions})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-blue-600",children:"إجمالي المبالغ:"}),a.jsxs("span",{className:"font-bold text-xs text-blue-800",children:[Ht().totalAmount.toFixed(2)," ج.م"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-blue-600",children:"المسحوب:"}),a.jsxs("span",{className:"font-bold text-xs text-blue-800",children:[Ht().totalWithdrawn.toFixed(2)," ج.م"]})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-xs text-blue-600",children:"المرسل:"}),a.jsxs("span",{className:"font-bold text-xs text-blue-800",children:[Ht().totalSent.toFixed(2)," ج.م"]})]})]})]})]}),a.jsx(Qe,{className:"card-elegant fade-in-up mb-4",children:a.jsx(Ye,{className:"p-2",children:a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("div",{className:"card-gradient-green p-2 rounded-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Vr,{className:"h-2.5 w-2.5 text-green-600"}),a.jsx("span",{className:"text-xs font-medium text-green-800",children:"القيمة في الدرج"}),a.jsxs("span",{className:"text-sm font-bold text-green-700 mr-2",children:[Q.toLocaleString()," جنيه"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(W,{variant:"ghost",size:"sm",className:"btn-elegant h-4 w-4 p-0 text-green-600 hover:text-green-800 hover:bg-green-200",onClick:()=>{De(!0),Ce(""),_e("")},children:a.jsx(B0,{className:"h-2.5 w-2.5"})}),a.jsx(W,{variant:"ghost",size:"sm",className:"btn-elegant h-4 w-4 p-0 text-red-600 hover:text-red-800 hover:bg-red-200",onClick:()=>Kn(!0),children:a.jsx(fs,{className:"h-2.5 w-2.5"})})]})]})}),a.jsx("div",{className:"card-gradient-blue p-2 rounded-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(_s,{className:"h-2.5 w-2.5 text-blue-600"}),a.jsx("span",{className:"text-xs font-medium text-blue-800",children:"إجمالي المحفظة"}),a.jsxs("span",{className:"text-sm font-bold text-blue-700 mr-2",children:[Object.values(L).reduce((M,ne)=>M+ne,0).toLocaleString()," جنيه"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(W,{variant:"ghost",size:"sm",className:"btn-elegant h-4 w-4 p-0 text-red-600 hover:text-red-800 hover:bg-red-200",onClick:()=>{Nr(!0),ur("")},title:"تصفير إجمالي المحفظة",children:a.jsx(fs,{className:"h-2.5 w-2.5"})}),a.jsx(W,{variant:"ghost",size:"sm",className:"btn-elegant h-4 w-4 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-200",onClick:()=>{ns(!0),Sr(""),$e("")},children:a.jsx(au,{className:"h-2.5 w-2.5"})})]})]})})]})})}),a.jsxs(Qe,{className:"card-modern fade-in-up",children:[a.jsx(pt,{className:"pb-2 px-3 pt-3",children:a.jsx(mt,{className:"text-sm font-bold",children:"المعاملات الأخيرة"})}),a.jsx(Ye,{className:"px-3 pb-3",children:a.jsxs(Uq,{value:g,onValueChange:T,className:"w-full",children:[a.jsxs(pk,{className:"grid w-full grid-cols-5 h-10 text-sm bg-white border rounded-md",children:[a.jsx(Wa,{value:"all",className:"text-sm data-[state=active]:bg-blue-500 data-[state=active]:text-white hover:bg-blue-50 transition-colors",children:"الكل"}),a.jsx(Wa,{value:"send",className:"text-sm data-[state=active]:bg-green-500 data-[state=active]:text-white hover:bg-green-50 transition-colors",children:"مرسل"}),a.jsx(Wa,{value:"receive",className:"text-sm data-[state=active]:bg-purple-500 data-[state=active]:text-white hover:bg-purple-50 transition-colors",children:"مستقبل"}),a.jsx(Wa,{value:"withdraw",className:"text-sm data-[state=active]:bg-orange-500 data-[state=active]:text-white hover:bg-orange-50 transition-colors",children:"سحب"}),a.jsx(Wa,{value:"deleted",className:"text-sm data-[state=active]:bg-red-500 data-[state=active]:text-white hover:bg-red-50 transition-colors",children:"محذوف"})]}),a.jsx(Ha,{value:"all",className:"mt-2",children:Qn.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500 fade-in-up tab-stagger-item text-xs",children:"لا توجد معاملات محفوظة بعد"}):a.jsx("div",{className:"space-y-1 fade-in-up tab-content-smooth",children:Qn.map((M,ne)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border hover:shadow-md cursor-pointer transition-all duration-200",onClick:()=>is(M),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[It(M.status),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm",children:M.type==="withdraw"?`سحب من المحفظة - ${M.senderPhone}`:`${M.senderPhone} → ${M.receiverPhone}`}),a.jsx("p",{className:"text-sm text-gray-500",children:M.createdAt.toLocaleString("ar-EG")})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold text-sm",children:[M.type==="withdraw"?"-":"",M.amount," جنيه"]}),M.withdrawnAmount&&a.jsxs("p",{className:"text-sm text-red-600",children:["مسحوب: ",M.withdrawnAmount," جنيه"]}),M.sentAmount&&a.jsxs("p",{className:"text-sm text-green-600",children:["مرسل: ",M.sentAmount," جنيه"]}),a.jsx(bn,{variant:M.status==="completed"?"default":"secondary",className:`text-sm ${M.type==="withdraw"?"bg-green-100 text-green-800":""}`,children:M.type==="withdraw"?"سحب":Ze(M.status)})]})]},M.id))})}),a.jsx(Ha,{value:"send",className:"mt-2",children:f.filter(M=>M.type==="send").length===0?a.jsx("div",{className:"text-center py-4 text-gray-500 fade-in-up tab-stagger-item text-xs",children:"لا توجد معاملات إرسال محفوظة بعد"}):a.jsx("div",{className:"space-y-1 fade-in-up tab-content-smooth",children:f.filter(M=>M.type==="send").map((M,ne)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border hover:shadow-md cursor-pointer transition-all duration-200",onClick:()=>is(M),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[It(M.status),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-sm",children:[M.senderPhone," → ",M.receiverPhone]}),a.jsx("p",{className:"text-sm text-gray-500",children:M.createdAt.toLocaleString("ar-EG")})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold text-sm",children:[M.amount," جنيه"]}),M.sentAmount&&a.jsxs("p",{className:"text-sm text-green-600",children:["مرسل: ",M.sentAmount," جنيه"]}),a.jsx(bn,{variant:M.status==="completed"?"default":"secondary",className:"text-sm",children:Ze(M.status)})]})]},M.id))})}),a.jsx(Ha,{value:"receive",className:"mt-2",children:f.filter(M=>M.type==="receive").length===0?a.jsx("div",{className:"text-center py-4 text-gray-500 fade-in-up tab-stagger-item text-xs",children:"لا توجد معاملات استقبال محفوظة بعد"}):a.jsx("div",{className:"space-y-2",children:f.filter(M=>M.type==="receive").map((M,ne)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:()=>is(M),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[It(M.status),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-sm",children:[M.senderPhone," → ",M.receiverPhone]}),a.jsx("p",{className:"text-sm text-gray-500",children:M.createdAt.toLocaleString("ar-EG")})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold text-sm",children:["+",M.amount," جنيه"]}),a.jsx(bn,{variant:M.status==="completed"?"default":"secondary",className:"text-xs",children:Ze(M.status)})]})]},M.id))})}),a.jsx(Ha,{value:"withdraw",className:"mt-2",children:f.filter(M=>M.type==="withdraw").length===0?a.jsx("div",{className:"text-center py-4 text-gray-500 fade-in-up tab-stagger-item text-xs",children:"لا توجد معاملات سحب محفوظة بعد"}):a.jsx("div",{className:"space-y-2",children:f.filter(M=>M.type==="withdraw").map((M,ne)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:()=>is(M),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[It(M.status),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium text-sm",children:["سحب من المحفظة - ",M.senderPhone]}),a.jsx("p",{className:"text-sm text-gray-500",children:M.createdAt.toLocaleString("ar-EG")})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-bold text-sm",children:["-",M.amount," جنيه"]}),M.withdrawnAmount&&a.jsxs("p",{className:"text-sm text-red-600",children:["مسحوب: ",M.withdrawnAmount," جنيه"]}),a.jsx(bn,{variant:"secondary",className:"text-xs bg-green-100 text-green-800",children:"سحب"})]})]},M.id))})}),a.jsx(Ha,{value:"deleted",className:"mt-2",children:R.length===0?a.jsx("div",{className:"text-center py-4 text-gray-500 fade-in-up tab-stagger-item text-xs",children:"لا توجد معاملات محذوفة"}):a.jsx("div",{className:"space-y-2",children:R.map((M,ne)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[It(M.status),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-sm text-red-700",children:M.type==="withdraw"?`سحب من المحفظة - ${M.senderPhone}`:`${M.senderPhone} → ${M.receiverPhone}`}),a.jsx("p",{className:"text-sm text-red-500",children:M.createdAt.toLocaleString("ar-EG")})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"text-right mr-2",children:[a.jsxs("p",{className:"font-bold text-sm text-red-700",children:[M.type==="withdraw"?"-":"",M.amount," جنيه"]}),a.jsx(bn,{variant:"secondary",className:"text-xs bg-red-100 text-red-800",children:"محذوف"})]}),a.jsx(W,{variant:"ghost",size:"sm",className:"text-green-600 hover:bg-green-100 h-8 px-3",onClick:()=>Dt(M.id),children:"استرجاع"}),a.jsx(W,{variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-100 h-8 px-3",onClick:()=>tn(M.id),children:a.jsx(fs,{className:"h-4 w-4"})})]})]},M.id))})})]})})]})]}),a.jsxs("div",{className:"space-y-2 fade-in-right",children:[a.jsxs(Qe,{className:"card-glow",children:[a.jsx(pt,{className:"pb-1 px-3 pt-2",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(mt,{className:"text-xs font-bold flex items-center gap-1",children:[a.jsx(Ll,{className:"h-3 w-3 text-green-500"}),"إجراء معاملة جديدة"]}),a.jsxs(W,{variant:"outline",size:"sm",className:"flex items-center gap-0.5 bg-white hover:bg-gray-50 border-gray-300 text-xs btn-bounce hover-glow h-6 px-1 w-auto min-w-0",onClick:()=>x(!0),children:[a.jsx(_s,{className:"h-2 w-2"}),a.jsx("span",{className:"text-xs whitespace-nowrap",children:"محفظة"})]}),a.jsx(oG,{}),a.jsxs(W,{variant:"outline",size:"sm",className:"flex items-center gap-0.5 bg-red-50 hover:bg-red-100 border-red-300 text-red-600 text-xs btn-bounce hover-glow h-6 px-1 w-auto min-w-0",onClick:async()=>{try{await e(),t({title:"تم تسجيل الخروج بنجاح",description:"شكراً لاستخدامك النظام"})}catch{t({title:"خطأ في تسجيل الخروج",description:"حدث خطأ أثناء تسجيل الخروج",variant:"destructive"})}},children:[a.jsx(Tp,{className:"h-2 w-2"}),a.jsx("span",{className:"text-xs whitespace-nowrap",children:"خروج"})]})]})}),a.jsxs(Ye,{className:"space-y-2 px-3 pb-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-1 p-0.5 bg-gray-100 rounded-lg fade-in-up",children:[a.jsx(W,{variant:u==="transfer"?"default":"ghost",onClick:()=>_i("transfer"),className:`text-xs transition-bounce ripple magnetic hover-scale h-6 ${u==="transfer"?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-200"}`,children:"تحويل"}),a.jsx(W,{variant:u==="withdraw"?"default":"ghost",onClick:()=>_i("withdraw"),className:`text-xs transition-bounce ripple magnetic hover-scale h-6 ${u==="withdraw"?"bg-green-600 text-white":"text-gray-600 hover:bg-gray-200"}`,children:"سحب"})]}),w.length>0&&a.jsxs("div",{className:"fade-in-up",children:[a.jsx("label",{className:"text-xs font-medium text-gray-700 mb-0.5 block",children:"اختيار المحفظة"}),a.jsxs(vw,{value:_,onValueChange:yc,children:[a.jsx(xm,{className:"w-full h-6 text-xs transition-all duration-300 hover:border-blue-400",children:a.jsx(xw,{placeholder:"اختر محفظة للمعاملة"})}),a.jsx(wm,{children:w.map(M=>a.jsx(Gi,{value:M.id,children:a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(_s,{className:"h-2.5 w-2.5"}),a.jsx("span",{className:"text-xs",children:M.name}),a.jsxs("span",{className:"text-gray-500 text-xs",children:["(",M.phone,")"]}),M.isDefault&&a.jsx(bn,{variant:"secondary",className:"text-xs",children:"افتراضي"})]})},M.id))})]})]}),a.jsx("div",{className:"fade-in-up mb-2",children:a.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-1 rounded-md border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[a.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-1 overflow-hidden flex",children:[a.jsx("div",{className:"w-1/2 bg-red-200 relative",children:a.jsx("div",{className:"bg-gradient-to-r from-red-400 to-red-600 h-1 transition-all duration-700 ease-out shadow-sm",style:{width:`${Math.min(je/q*100,100)}%`}})}),a.jsx("div",{className:"w-1/2 bg-blue-200 relative",children:a.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-1 transition-all duration-700 ease-out shadow-sm",style:{width:`${Math.min(ze/G*100,100)}%`}})})]}),a.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[a.jsxs("div",{className:"text-xs text-red-600 font-medium",children:["متبقي سحب: ",Math.max(q-je,0)," جنيه"]}),a.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["متبقي تحويل: ",Math.max(G-ze,0)," جنيه"]})]})]})}),a.jsxs("div",{className:"fade-in-up",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:u==="transfer"?"رقم المرسل":"رقم المستقبل"}),a.jsxs("div",{className:"relative",children:[a.jsx(ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),a.jsx(ce,{value:r,onChange:M=>s(M.target.value),placeholder:"01030302038",className:"pl-10 h-10 text-sm transition-all duration-300 hover:border-blue-400 focus:border-blue-500"})]})]}),a.jsxs("div",{className:"fade-in-up",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:u==="transfer"?"رقم المستقبل":"رقم الراسل"}),a.jsxs("div",{className:"relative",children:[a.jsx(ro,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),a.jsx(ce,{value:i,onChange:M=>o(M.target.value),placeholder:"أدخل رقم الراسل",className:"pl-10 h-10 text-sm transition-all duration-300 hover:border-blue-400 focus:border-blue-500"})]})]}),a.jsxs("div",{className:"fade-in-up",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:u==="transfer"?"المبلغ (جنيه)":"مبلغ السحب (جنيه)"}),a.jsxs("div",{className:"relative",children:[u==="withdraw"?a.jsx(pI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 text-green-500"}):a.jsx(Vr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),a.jsx(ce,{value:l,onChange:M=>c(M.target.value),placeholder:u==="transfer"?"أدخل المبلغ":"أدخل مبلغ السحب",type:"number",className:"pl-10 h-10 text-sm transition-all duration-300 hover:border-blue-400 focus:border-blue-500"})]})]}),a.jsx("div",{className:`text-center text-sm p-3 rounded fade-in-up ${u==="transfer"?"text-gray-600 bg-gray-50":"text-green-600 bg-green-50 border border-green-200"}`,children:u==="transfer"?a.jsxs(a.Fragment,{children:["محفظة (اختيارية)",a.jsx("br",{}),a.jsx("span",{className:"text-sm",children:"اضغط على العلامة"})]}):a.jsxs(a.Fragment,{children:["💰 سحب من الرصيد المتاح",a.jsx("br",{}),l&&parseFloat(l)>0&&a.jsxs("div",{className:"mt-1 text-sm space-y-1",children:[a.jsxs("div",{children:["المبلغ: ",l," جنيه"]}),a.jsxs("div",{children:["العمولة: ",os(parseFloat(l))," جنيه"]}),a.jsxs("div",{className:"font-bold border-t pt-1",children:["الإجمالي: ",Us()," جنيه"]})]}),a.jsx("span",{className:"text-sm block mt-1",children:"عمولة السحب: 10 جنيه لكل 1000 جنيه"})]})}),a.jsx(W,{onClick:jt,className:`w-full font-medium h-10 text-sm btn-bounce hover-glow transition-all duration-300 ${u==="transfer"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:u==="transfer"?"تأكيد التحويل":"تأكيد السحب"})]})]}),a.jsx(Qe,{className:"bg-gradient-to-br from-red-50 to-red-100 border-red-200 fade-in-up card-float",children:a.jsxs(Ye,{className:"p-3 text-center",children:[a.jsx("div",{className:"text-red-600 font-medium text-xs mb-1",children:"⚠️ تحذير من التحويل"}),a.jsx("div",{className:"text-xs text-red-700",children:"لا يمكن إلغاء أي عملية بعد تأكيدها للمحافظة على الأمان"})]})})]})]}),a.jsx($q,{isOpen:v,onClose:()=>x(!1),onWalletUpdate:()=>{const M=localStorage.getItem("wallets");if(M){const ne=JSON.parse(M);I(ne)}}}),a.jsx(Hq,{isOpen:N,onClose:()=>S(!1),transaction:k,onDelete:Mo}),a.jsx(qq,{open:C,onOpenChange:A,onSuccess:Nm,title:Im(),description:bi()}),a.jsx(pT,{open:ie,onOpenChange:Z,onSuccess:Cm,title:"تعديل الرصيد النقدي في الدرج",description:"أدخل الرقم السري والمبلغ الجديد لتعديل الرصيد النقدي في الدرج",currentBalance:Q,balanceLabel:"الرصيد النقدي"}),a.jsx(pT,{open:le,onOpenChange:he,onSuccess:()=>{},title:"تعديل رصيد المحفظة",description:"أدخل الرقم السري والمبلغ الجديد لتعديل رصيد المحفظة",currentBalance:He&&L[He]||0,balanceLabel:`رصيد ${((Lo=w.find(M=>M.id===He))==null?void 0:Lo.name)||"المحفظة"}`}),a.jsx(aG,{open:Pe,onOpenChange:ke,onSuccess:Am,title:"إضافة أو خصم مبلغ من رصيد المحفظة",description:"أدخل الرقم السري والمبلغ المراد إضافته أو خصمه من رصيد المحفظة",currentBalance:He&&L[He]||0,balanceLabel:`رصيد ${((vc=w.find(M=>M.id===He))==null?void 0:vc.name)||"المحفظة"}`}),a.jsx(yk,{open:Hn,onOpenChange:qn}),a.jsx(vk,{open:Er,onOpenChange:Fs}),a.jsx(xk,{open:Tr,onOpenChange:xi}),a.jsx(Fn,{open:Oe,onOpenChange:De,children:a.jsxs(En,{className:"sm:max-w-md",children:[a.jsx(Tn,{children:a.jsx(Sn,{className:"text-right",children:"تعديل الدرج النقدية"})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"amount",className:"text-right block",children:"المبلغ"}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx(ce,{id:"amount",type:"number",placeholder:"أدخل المبلغ",value:X,onChange:M=>Ce(M.target.value),className:"text-right flex-1",dir:"rtl",min:"0"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsxs(W,{type:"button",size:"sm",className:"bg-green-600 hover:bg-green-700 text-white px-3 py-2",onClick:()=>{if(!dr(me)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}const M=parseFloat(X);if(isNaN(M)||M<=0){t({title:"خطأ",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}const ne=Q+M;V(ne),Pr.updateUserData((n==null?void 0:n.uid)||"user-1",{cashBalance:ne}).catch(te=>console.error("خطأ في حفظ الرصيد في Firebase:",te)),t({title:"تم بنجاح",description:`تم إضافة ${M} جنيه إلى الدرج النقدية`}),De(!1),Ce(""),_e("")},children:[a.jsx(ra,{className:"h-3 w-3 mr-1"}),"إضافة"]}),a.jsxs(W,{type:"button",size:"sm",className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2",onClick:()=>{if(!dr(me)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}const M=parseFloat(X);if(isNaN(M)||M<=0){t({title:"خطأ",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}const ne=Q-M;V(ne),Pr.updateUserData((n==null?void 0:n.uid)||"user-1",{cashBalance:ne}).catch(te=>console.error("خطأ في حفظ الرصيد في Firebase:",te)),t({title:"تم بنجاح",description:`تم خصم ${M} جنيه من الدرج النقدية`}),De(!1),Ce(""),_e("")},children:[a.jsx(Wy,{className:"h-3 w-3 mr-1"}),"خصم"]})]})]}),a.jsxs("p",{className:"text-xs text-gray-500 text-right",children:["الرصيد الحالي: ",Q.toLocaleString()," جنيه"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"pin",className:"text-right block",children:"الرقم السري"}),a.jsx(ce,{id:"pin",type:"password",placeholder:"أدخل الرقم السري",value:me,onChange:M=>_e(M.target.value),className:"text-right",dir:"rtl"})]})]}),a.jsx(ol,{className:"flex gap-2",children:a.jsx(W,{variant:"outline",onClick:()=>{De(!1),Ce(""),_e("")},children:"إلغاء"})})]})}),a.jsx(Fn,{open:ts,onOpenChange:ns,children:a.jsxs(En,{className:"sm:max-w-md",children:[a.jsx(Tn,{children:a.jsx(Sn,{className:"text-right",children:"تعديل إجمالي المحافظ"})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"totalWalletAmount",className:"text-right block",children:"المبلغ"}),a.jsxs("div",{className:"flex gap-2 items-center",children:[a.jsx(ce,{id:"totalWalletAmount",type:"number",placeholder:"أدخل المبلغ",value:yn,onChange:M=>Sr(M.target.value),className:"text-right flex-1",dir:"rtl",min:"0"}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx(W,{type:"button",size:"sm",className:"bg-green-600 hover:bg-green-700 text-white px-3 py-2",onClick:()=>{if(!ss(wi)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}const M=parseFloat(yn);if(isNaN(M)||M<=0){t({title:"خطأ",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}Object.values(L).reduce((Le,pe)=>Le+pe,0);let ne=w;ne.length===0&&(ne=[{id:"default-wallet",name:"المحفظة الافتراضية",phone:"01000000000",isDefault:!0}],I(ne),localStorage.setItem("wallets",JSON.stringify(ne)));const te=ne.length,fe=M/te,we={...L};ne.forEach(Le=>{const pe=we[Le.id]||0;we[Le.id]=pe+fe}),$(we),localStorage.setItem("walletBalances",JSON.stringify(we)),setTimeout(()=>{$({...we})},100),t({title:"تم بنجاح",description:`تم إضافة ${M} جنيه إلى إجمالي المحافظ`}),ns(!1),Sr(""),$e("")},children:"إضافة"}),a.jsx(W,{type:"button",size:"sm",className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2",onClick:()=>{if(!ss(wi)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}const M=parseFloat(yn);if(isNaN(M)||M<=0){t({title:"خطأ",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}const ne=Object.values(L).reduce((pe,Se)=>pe+Se,0);if(M>ne){t({title:"خطأ",description:"المبلغ المطلوب خصمه أكبر من الرصيد الحالي",variant:"destructive"});return}let te=w;te.length===0&&(te=[{id:"default-wallet",name:"المحفظة الافتراضية",phone:"01000000000",isDefault:!0}],I(te),localStorage.setItem("wallets",JSON.stringify(te)));const fe=te.length,we=M/fe,Le={...L};te.forEach(pe=>{const Se=Le[pe.id]||0;Le[pe.id]=Math.max(0,Se-we)}),$(Le),localStorage.setItem("walletBalances",JSON.stringify(Le)),setTimeout(()=>{$({...Le})},100),t({title:"تم بنجاح",description:`تم خصم ${M} جنيه من إجمالي المحافظ`}),ns(!1),Sr(""),$e("")},children:"خصم"})]})]}),a.jsxs("p",{className:"text-xs text-gray-500 text-right",children:["الرصيد الحالي: ",Object.values(L).reduce((M,ne)=>M+ne,0).toLocaleString()," جنيه"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"totalWalletPin",className:"text-right block",children:"الرقم السري"}),a.jsx(ce,{id:"totalWalletPin",type:"password",placeholder:"أدخل الرقم السري",value:wi,onChange:M=>$e(M.target.value),className:"text-right",dir:"rtl"})]})]}),a.jsx(ol,{className:"flex gap-2",children:a.jsx(W,{variant:"outline",onClick:()=>{ns(!1),Sr(""),$e("")},children:"إلغاء"})})]})}),a.jsx(Fn,{open:ut,onOpenChange:Nr,children:a.jsxs(En,{className:"sm:max-w-md",children:[a.jsx(Tn,{children:a.jsx(Sn,{className:"text-right text-red-600",children:"تصفير إجمالي المحفظة"})}),a.jsxs("div",{className:"space-y-4 py-4",children:[a.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg border border-red-200",children:[a.jsx("p",{className:"text-red-800 font-medium mb-2",children:"تحذير!"}),a.jsx("p",{className:"text-red-700 text-sm",children:"سيتم تصفير جميع أرصدة المحافظ إلى صفر. هذا الإجراء لا يمكن التراجع عنه."}),a.jsxs("p",{className:"text-red-600 text-sm mt-2",children:["الرصيد الحالي: ",Object.values(L).reduce((M,ne)=>M+ne,0).toLocaleString()," جنيه"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"resetWalletTotalPin",className:"text-right block",children:"الرقم السري للتأكيد"}),a.jsx(ce,{id:"resetWalletTotalPin",type:"password",placeholder:"أدخل الرقم السري",value:Oo,onChange:M=>ur(M.target.value),className:"text-right",dir:"rtl"})]})]}),a.jsxs(ol,{className:"flex gap-2",children:[a.jsx(W,{variant:"outline",onClick:()=>{Nr(!1),ur("")},children:"إلغاء"}),a.jsx(W,{variant:"destructive",onClick:async()=>{if(!ss(Oo)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}try{const M={};Object.keys(L).forEach(ne=>{M[ne]=0}),$(M),await Pr.updateUserData((n==null?void 0:n.uid)||"user-1",{walletBalances:M}),setTimeout(()=>{$({...M})},100),t({title:"تم التصفير بنجاح",description:"تم تصفير جميع أرصدة المحافظ إلى صفر"}),Nr(!1),ur("")}catch(M){console.error("خطأ في حفظ أرصدة المحافظ في Firebase:",M),t({title:"خطأ",description:"حدث خطأ أثناء حفظ البيانات",variant:"destructive"})}},children:"تصفير المحفظة"})]})]})}),a.jsx(Fn,{open:gc,onOpenChange:Kn,children:a.jsxs(En,{className:"sm:max-w-[425px]",children:[a.jsx(Tn,{children:a.jsxs(Sn,{className:"text-red-600 flex items-center gap-2",children:[a.jsx(fs,{className:"h-5 w-5"}),"تصفير الرصيد النقدي"]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsx("p",{className:"text-sm text-red-700",children:"⚠️ تحذير: سيتم تصفير الرصيد النقدي في الدرج إلى صفر. هذا الإجراء لا يمكن التراجع عنه."})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"resetCashPin",children:"الرقم السري لدرج النقدية"}),a.jsx(ce,{id:"resetCashPin",type:"password",placeholder:"أدخل الرقم السري",value:rs,onChange:M=>Gn(M.target.value)})]})]}),a.jsxs(ol,{children:[a.jsx(W,{variant:"outline",onClick:()=>{Kn(!1),Gn("")},children:"إلغاء"}),a.jsx(W,{variant:"destructive",onClick:async()=>{if(!rs){t({title:"خطأ",description:"يرجى إدخال الرقم السري",variant:"destructive"});return}if(!dr(rs)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}try{V(0),await Pr.updateUserData((n==null?void 0:n.uid)||"user-1",{cashBalance:0}),t({title:"تم التصفير بنجاح",description:"تم تصفير الرصيد النقدي في الدرج إلى صفر"}),Kn(!1),Gn("")}catch(M){console.error("خطأ في حفظ الرصيد في Firebase:",M),t({title:"خطأ",description:"حدث خطأ أثناء حفظ البيانات",variant:"destructive"})}},children:"تصفير الرصيد"})]})]})})]})},cG=()=>{const t=cr(),{user:e,loading:n}=Pn(),[r,s]=p.useState(!1);return p.useEffect(()=>{n||(e?s(!0):t("/user/login"))},[e,n,t]),n?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"جاري التحقق من صلاحية الدخول..."})]})}):r?a.jsx(lG,{}):null};function uG(){const{profile:t,signOut:e}=Pn(),n=s=>{switch(s){case"admin":return"مدير";case"staff":return"موظف";case"merchant":return"تاجر";default:return s}},r=s=>{switch(s){case"admin":return"bg-primary text-primary-foreground";case"staff":return"bg-secondary text-secondary-foreground";case"merchant":return"bg-success text-success-foreground";default:return"bg-muted text-muted-foreground"}};return a.jsx("header",{className:"h-16 border-b border-border bg-card/50 backdrop-blur-sm",children:a.jsxs("div",{className:"flex h-full items-center justify-between px-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h1",{className:"text-xl font-bold text-foreground",children:"منصة إدارة المحول"}),t&&a.jsx(bn,{className:r(t.role),children:n(t.role)})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(W,{variant:"ghost",size:"icon",className:"relative",children:[a.jsx(Bc,{className:"h-5 w-5"}),a.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-destructive text-xs text-destructive-foreground flex items-center justify-center",children:"3"})]}),a.jsxs(fj,{children:[a.jsx(pj,{asChild:!0,children:a.jsxs(W,{variant:"ghost",className:"flex items-center gap-2",children:[a.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:a.jsx(ld,{className:"h-4 w-4 text-primary"})}),a.jsx("span",{className:"text-sm",children:(t==null?void 0:t.fullName)||"المستخدم"})]})}),a.jsxs(Cw,{align:"end",className:"w-56",children:[a.jsx(mj,{children:"حسابي"}),a.jsx(Fv,{}),a.jsxs(_l,{children:[a.jsx(Fl,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"الإعدادات"})]}),a.jsx(Fv,{}),a.jsxs(_l,{onClick:()=>e(),className:"text-destructive",children:[a.jsx(Tp,{className:"mr-2 h-4 w-4"}),a.jsx("span",{children:"تسجيل الخروج"})]})]})]})]})]})})}var Aw="Progress",Pw=100,[dG,UG]=Jr(Aw),[hG,fG]=dG(Aw),yj=p.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=pG,...o}=t;(s||s===0)&&!gT(s)&&console.error(mG(`${s}`,"Progress"));const l=gT(s)?s:Pw;r!==null&&!yT(r,l)&&console.error(gG(`${r}`,"Progress"));const c=yT(r,l)?r:null,u=rp(c)?i(c,l):void 0;return a.jsx(hG,{scope:n,value:c,max:l,children:a.jsx(xe.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":rp(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":wj(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});yj.displayName=Aw;var vj="ProgressIndicator",xj=p.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=fG(vj,n);return a.jsx(xe.div,{"data-state":wj(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});xj.displayName=vj;function pG(t,e){return`${Math.round(t/e*100)}%`}function wj(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function rp(t){return typeof t=="number"}function gT(t){return rp(t)&&!isNaN(t)&&t>0}function yT(t,e){return rp(t)&&!isNaN(t)&&t<=e&&t>=0}function mG(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Pw}\`.`}function gG(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Pw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var _j=yj,yG=xj;const Yc=p.forwardRef(({className:t,value:e,...n},r)=>a.jsx(_j,{ref:r,className:be("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:a.jsx(yG,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Yc.displayName=_j.displayName;function vG({open:t,onOpenChange:e,wallet:n,onSuccess:r}){const[s,i]=p.useState({provider:(n==null?void 0:n.provider)||"",msisdn:(n==null?void 0:n.msisdn)||"",dailyLimit:(n==null?void 0:n.dailyLimit)||0,monthlyLimit:(n==null?void 0:n.monthlyLimit)||0,transferLimit:(n==null?void 0:n.transferLimit)||2e5,withdrawLimit:(n==null?void 0:n.withdrawLimit)||2e5}),[o,l]=p.useState(!1),[c,u]=p.useState(null),{user:h}=Pn(),{toast:f}=en(),m=(v,x)=>{const _=v.slice(0,3);return x==="vodafone_cash"&&_==="010"||x==="orange_cash"&&_==="012"||x==="etisalat_cash"&&_==="011"||x==="instapay"&&_==="015"},g=v=>{switch(v){case"INVALID_MSISDN":return"رقم المحفظة غير صالح.";case"PROVIDER_MISMATCH":return"المزوّد لا يطابق مقدمة الرقم.";case"ALREADY_EXISTS":return"المحفظة مضافة قبل كده.";case"RLS_DENIED":return"ليست لديك صلاحية لإضافة المحفظة.";default:return"خطأ غير متوقع."}},T=async v=>{if(v.preventDefault(),u(null),!/^01\d{9}$/.test(s.msisdn)){u("اكتب رقم 11 رقم يبدأ بـ 01.");return}if(!m(s.msisdn,s.provider)){u("مقدم الخدمة لا يتطابق مع مقدمة الرقم.");return}l(!0);try{const x={...s,merchantUserId:h==null?void 0:h.uid,isActive:!0,provider:s.provider};if(console.log("Saving wallet data:",x),n!=null&&n.id)await Ur.update(n.id,x),console.log("Wallet updated successfully"),r();else{console.log("Creating new wallet...");const _=await Ur.create(x);console.log("Wallet created with ID:",_);const b={id:_,...x,dailyUsage:0,monthlyUsage:0};console.log("Final wallet object:",b),r(b)}f({title:"تم إضافة المحفظة",description:`تم ${n!=null&&n.id?"تحديث":"إضافة"} المحفظة بنجاح`}),e(!1)}catch(x){console.error("Error saving wallet:",x);let _="حصل خطأ أثناء الإضافة";x.code?_=g(x.code):x.message&&(_=x.message),f({title:"خطأ",description:_,variant:"destructive"})}finally{l(!1)}};return a.jsx(Fn,{open:t,onOpenChange:e,children:a.jsxs(En,{className:"sm:max-w-md",children:[a.jsx(Tn,{children:a.jsx(Sn,{children:n!=null&&n.id?"تعديل المحفظة":"إضافة محفظة جديدة"})}),a.jsxs("form",{onSubmit:T,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"provider",children:"المزود"}),a.jsxs(vw,{value:s.provider,onValueChange:v=>i({...s,provider:v}),disabled:o,children:[a.jsx(xm,{children:a.jsx(xw,{placeholder:"اختر المزود"})}),a.jsxs(wm,{children:[a.jsx(Gi,{value:"vodafone_cash",children:"Vodafone Cash"}),a.jsx(Gi,{value:"etisalat_cash",children:"Etisalat Cash"}),a.jsx(Gi,{value:"orange_cash",children:"Orange Cash"}),a.jsx(Gi,{value:"instapay",children:"InstaPay"})]})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"msisdn",children:"رقم الهاتف"}),a.jsx(ce,{id:"msisdn",placeholder:"01xxxxxxxxx",value:s.msisdn,onChange:v=>i({...s,msisdn:v.target.value}),disabled:o,required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"dailyLimit",children:"الحد اليومي (ج.م)"}),a.jsx(ce,{id:"dailyLimit",type:"number",min:"0",step:"0.01",value:s.dailyLimit,onChange:v=>i({...s,dailyLimit:parseFloat(v.target.value)||0}),disabled:o})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"monthlyLimit",children:"الحد الشهري (ج.م)"}),a.jsx(ce,{id:"monthlyLimit",type:"number",min:"0",step:"0.01",value:s.monthlyLimit,onChange:v=>i({...s,monthlyLimit:parseFloat(v.target.value)||0}),disabled:o})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"transferLimit",children:"حد التحويل (ج.م)"}),a.jsx(ce,{id:"transferLimit",type:"number",min:"0",step:"0.01",value:s.transferLimit,onChange:v=>i({...s,transferLimit:parseFloat(v.target.value)||2e5}),disabled:o,placeholder:"200000"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx(Te,{htmlFor:"withdrawLimit",children:"حد السحب (ج.م)"}),a.jsx(ce,{id:"withdrawLimit",type:"number",min:"0",step:"0.01",value:s.withdrawLimit,onChange:v=>i({...s,withdrawLimit:parseFloat(v.target.value)||2e5}),disabled:o,placeholder:"200000"})]})]}),c&&a.jsx("div",{className:"text-red-600 text-sm mt-2",children:c}),a.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[a.jsx(W,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:o,children:"إلغاء"}),a.jsx(W,{type:"submit",disabled:o,className:"btn-primary",children:o?a.jsxs(a.Fragment,{children:[a.jsx(_4,{className:"mr-2 h-4 w-4 animate-spin"}),"جارِ الإضافة…"]}):n!=null&&n.id?"تحديث المحفظة":"إضافة المحفظة"})]})]})]})})}function xG(){const[t,e]=p.useState([]),[n,r]=p.useState(!0),[s,i]=p.useState(!1),[o,l]=p.useState(null),[c,u]=p.useState(!0),{user:h}=Pn(),{toast:f}=en();p.useEffect(()=>{h!=null&&h.uid&&m()},[h==null?void 0:h.uid]);const m=async()=>{try{if(!(h!=null&&h.uid)){e([]),r(!1);return}r(!0);const w=await Ur.getByMerchantId(h.uid),I=await Promise.all(w.map(async k=>{try{const O=await gj.getUsage(k.id);return{...k,dailyUsage:k.dailyUsage||0,monthlyUsage:k.monthlyUsage||0,transferUsage:(O==null?void 0:O.transferUsage)||0,withdrawUsage:(O==null?void 0:O.withdrawUsage)||0}}catch(O){return console.error(`Error loading usage for wallet ${k.id}:`,O),{...k,dailyUsage:k.dailyUsage||0,monthlyUsage:k.monthlyUsage||0,transferUsage:0,withdrawUsage:0}}}));e(I)}catch(w){console.error("Error fetching wallets from Firebase:",w),f({title:"خطأ",description:"فشل في تحميل المحافظ من الخادم. يرجى المحاولة مرة أخرى.",variant:"destructive"}),e([])}finally{r(!1)}},g=async(w,I)=>{try{await Ur.update(w,{isActive:!I});const k=t.map(O=>O.id===w?{...O,isActive:!O.isActive}:O);e(k),f({title:"تم التحديث",description:`تم ${I?"إلغاء تفعيل":"تفعيل"} المحفظة بنجاح`})}catch(k){console.error("Error toggling wallet status:",k),f({title:"خطأ",description:"فشل في تحديث حالة المحفظة",variant:"destructive"})}},T=async(w,I)=>{if(window.confirm(`هل أنت متأكد من حذف المحفظة ${I}؟

هذا الإجراء لا يمكن التراجع عنه.`))try{await Ur.delete(w);const O=t.filter(N=>N.id!==w);e(O),f({title:"تم الحذف",description:"تم حذف المحفظة بنجاح"})}catch(O){console.error("Error deleting wallet:",O),f({title:"خطأ",description:"فشل في حذف المحفظة",variant:"destructive"})}},v=(w,I)=>{if(I===0)return"bg-muted";const k=w/I*100;return k>=100?"bg-destructive":k>=80?"bg-warning":"bg-success"},x=w=>{switch(w){case"vodafone_cash":return"bg-red-600";case"etisalat_cash":return"bg-green-600";case"orange_cash":return"bg-orange-600";case"instapay":return"bg-blue-600";default:return"bg-gray-600"}},_=w=>{switch(w){case"vodafone_cash":return"#dc2626";case"etisalat_cash":return"#16a34a";case"orange_cash":return"#ea580c";case"instapay":return"#2563eb";default:return"#6b7280"}},b=w=>{switch(w){case"vodafone_cash":return"فودافون كاش";case"etisalat_cash":return"اتصالات كاش";case"orange_cash":return"أورانج كاش";case"instapay":return"إنستاباي";default:return w.replace("_"," ")}};return n?a.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"}),a.jsx("p",{className:"text-muted-foreground animate-pulse",children:"جاري تحميل المحافظ..."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"محافظي"}),a.jsxs(W,{variant:"outline",size:"sm",onClick:m,disabled:n,className:"flex items-center gap-2",children:[a.jsx("svg",{className:`w-4 h-4 ${n?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"تحديث"]})]}),c&&a.jsxs(W,{onClick:()=>{i(!0),u(!1)},className:"btn-primary",children:[a.jsx(ra,{className:"ml-2 h-4 w-4"}),"إضافة محفظة جديدة"]})]}),a.jsxs("div",{className:"grid gap-6",children:[t.map(w=>{var I,k,O,N,S,C;return a.jsxs(Qe,{className:"card-glass hover:shadow-lg transition-all duration-300 border-l-4",style:{borderLeftColor:_(w.provider)},children:[a.jsx(pt,{className:"pb-4",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(bn,{className:`${x(w.provider)} text-white font-medium px-3 py-1`,children:b(w.provider)}),a.jsx("div",{className:`w-3 h-3 rounded-full ${w.isActive?"bg-green-500":"bg-gray-400"}`,title:w.isActive?"نشط":"غير نشط"})]}),a.jsx(mt,{className:"text-xl font-bold text-primary",children:w.msisdn}),w.label&&a.jsxs("span",{className:"text-sm text-muted-foreground font-medium",children:["(",w.label,")"]})]})}),a.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-lg p-2",children:[a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>{l(w),i(!0)},children:a.jsx(B0,{className:"h-4 w-4"})}),a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>g(w.id,w.isActive),children:w.isActive?a.jsx(P4,{className:"h-5 w-5 text-success"}):a.jsx(A4,{className:"h-5 w-5 text-muted-foreground"})}),a.jsx(W,{variant:"ghost",size:"sm",onClick:()=>T(w.id,w.msisdn),className:"text-destructive hover:text-destructive",children:a.jsx(fs,{className:"h-4 w-4"})})]})]})}),a.jsx(Ye,{className:"pt-4",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[a.jsx("span",{className:"font-medium text-muted-foreground",children:"الاستخدام اليومي"}),a.jsxs("span",{className:"font-bold",children:[(I=w.dailyUsage)==null?void 0:I.toLocaleString()," / ",w.dailyLimit>0?w.dailyLimit.toLocaleString():"∞"," جنيه"]})]}),a.jsx(Yc,{value:w.dailyLimit>0?Math.min((w.dailyUsage||0)/w.dailyLimit*100,100):0,className:`h-3 ${v(w.dailyUsage||0,w.dailyLimit)}`}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[w.dailyLimit>0?((w.dailyUsage||0)/w.dailyLimit*100).toFixed(1):0,"% مستخدم"]})]}),a.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[a.jsx("span",{className:"font-medium text-muted-foreground",children:"الاستخدام الشهري"}),a.jsxs("span",{className:"font-bold",children:[(k=w.monthlyUsage)==null?void 0:k.toLocaleString()," / ",w.monthlyLimit>0?w.monthlyLimit.toLocaleString():"∞"," جنيه"]})]}),a.jsx(Yc,{value:w.monthlyLimit>0?Math.min((w.monthlyUsage||0)/w.monthlyLimit*100,100):0,className:`h-3 ${v(w.monthlyUsage||0,w.monthlyLimit)}`}),a.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[w.monthlyLimit>0?((w.monthlyUsage||0)/w.monthlyLimit*100).toFixed(1):0,"% مستخدم"]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[a.jsx("span",{className:"font-medium text-blue-700",children:"حد التحويل"}),a.jsxs("span",{className:"font-bold text-blue-900",children:[((O=w.transferUsage)==null?void 0:O.toLocaleString())||0," / ",((N=w.transferLimit)==null?void 0:N.toLocaleString())||2e5," جنيه"]})]}),a.jsx(Yc,{value:w.transferLimit?Math.min((w.transferUsage||0)/w.transferLimit*100,100):0,className:"h-3 bg-blue-100"}),a.jsxs("div",{className:"text-xs text-blue-600 mt-1 text-right",children:[w.transferLimit?((w.transferUsage||0)/w.transferLimit*100).toFixed(1):0,"% مستخدم"]})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[a.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[a.jsx("span",{className:"font-medium text-green-700",children:"حد السحب"}),a.jsxs("span",{className:"font-bold text-green-900",children:[((S=w.withdrawUsage)==null?void 0:S.toLocaleString())||0," / ",((C=w.withdrawLimit)==null?void 0:C.toLocaleString())||2e5," جنيه"]})]}),a.jsx(Yc,{value:w.withdrawLimit?Math.min((w.withdrawUsage||0)/w.withdrawLimit*100,100):0,className:"h-3 bg-green-100"}),a.jsxs("div",{className:"text-xs text-green-600 mt-1 text-right",children:[w.withdrawLimit?((w.withdrawUsage||0)/w.withdrawLimit*100).toFixed(1):0,"% مستخدم"]})]})]})})]},w.id)}),t.length===0&&a.jsx(Qe,{className:"card-glass",children:a.jsxs(Ye,{className:"text-center py-16",children:[a.jsx("div",{className:"bg-muted/30 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:a.jsx(ra,{className:"w-12 h-12 text-muted-foreground"})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"لا توجد محافظ"}),a.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"ابدأ بإضافة محفظتك الأولى لتتمكن من استقبال المدفوعات من عملائك"}),c&&a.jsxs(W,{onClick:()=>{i(!0),u(!1)},size:"lg",className:"btn-primary px-8",children:[a.jsx(ra,{className:"w-5 h-5 ml-2"}),"إضافة محفظة جديدة"]})]})})]}),a.jsx(vG,{open:s,onOpenChange:w=>{i(w),w||(l(null),u(!0))},wallet:o,onSuccess:w=>{console.log("onSuccess called with:",w),console.log("editingWallet:",o),w&&!o?(console.log("Adding new wallet to list"),e(I=>{const k=[...I,w];return console.log("Updated wallets list:",k),k})):(console.log("Refreshing wallets from Firebase"),m()),i(!1),l(null),u(!0)}})]})}function wG(){const{user:t,profile:e,loading:n}=Pn();return p.useEffect(()=>{!n&&(!t||!e||e.role!=="merchant")&&(window.location.href="/auth")},[t,e,n]),n?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})}):!t||!e||e.role!=="merchant"?null:a.jsxs("div",{className:"min-h-screen bg-background",children:[a.jsx(uG,{}),a.jsx("main",{className:"container mx-auto p-6",children:a.jsxs(_C,{children:[a.jsx(cn,{path:"/",element:a.jsx(wC,{to:"/merchant/wallets",replace:!0})}),a.jsx(cn,{path:"/wallets",element:a.jsx(xG,{})})]})})]})}const _G=()=>{const t=Na();return p.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),a.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),a.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},bG=new nF,EG=()=>a.jsx(sF,{client:bG,children:a.jsx(bz,{children:a.jsx(wz,{children:a.jsxs(k5,{children:[a.jsx(mL,{}),a.jsx(KL,{}),a.jsx(e3,{children:a.jsxs(_C,{children:[a.jsx(cn,{path:"/",element:a.jsx(Ez,{})}),a.jsx(cn,{path:"/landing",element:a.jsx(Nz,{})}),a.jsx(cn,{path:"/auth",element:a.jsx(Iz,{})}),a.jsx(cn,{path:"/admin/login",element:a.jsx(Cz,{})}),a.jsx(cn,{path:"/admin/dashboard",element:a.jsx(UH,{})}),a.jsx(cn,{path:"/user/login",element:a.jsx($H,{})}),a.jsx(cn,{path:"/user/register",element:a.jsx(WH,{})}),a.jsx(cn,{path:"/user/account-setup",element:a.jsx(HH,{})}),a.jsx(cn,{path:"/user/dashboard",element:a.jsx(cG,{})}),a.jsx(cn,{path:"/merchant/*",element:a.jsx(wG,{})}),a.jsx(cn,{path:"/dashboard/login",element:a.jsx(qH,{})}),a.jsx(cn,{path:"/dashboard",element:a.jsx(Nq,{})}),a.jsx(cn,{path:"*",element:a.jsx(_G,{})})]})})]})})})});UN(document.getElementById("root")).render(a.jsx(EG,{}));

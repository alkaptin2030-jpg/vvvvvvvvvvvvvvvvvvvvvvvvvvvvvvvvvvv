var Wk=Object.defineProperty;var L1=t=>{throw TypeError(t)};var Hk=(t,e,n)=>e in t?Wk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var jg=(t,e,n)=>Hk(t,typeof e!="symbol"?e+"":e,n),Sg=(t,e,n)=>e.has(t)||L1("Cannot "+n);var K=(t,e,n)=>(Sg(t,e,"read from private field"),n?n.call(t):e.get(t)),lt=(t,e,n)=>e.has(t)?L1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ue=(t,e,n,r)=>(Sg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ln=(t,e,n)=>(Sg(t,e,"access private method"),n);var Ch=(t,e,n,r)=>({set _(s){Ue(t,e,s,n)},get _(){return K(t,e,r)}});function qk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function $E(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BE={exports:{}},Wm={},zE={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vd=Symbol.for("react.element"),Kk=Symbol.for("react.portal"),Gk=Symbol.for("react.fragment"),Qk=Symbol.for("react.strict_mode"),Yk=Symbol.for("react.profiler"),Xk=Symbol.for("react.provider"),Jk=Symbol.for("react.context"),Zk=Symbol.for("react.forward_ref"),eD=Symbol.for("react.suspense"),tD=Symbol.for("react.memo"),nD=Symbol.for("react.lazy"),F1=Symbol.iterator;function rD(t){return t===null||typeof t!="object"?null:(t=F1&&t[F1]||t["@@iterator"],typeof t=="function"?t:null)}var WE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},HE=Object.assign,qE={};function Uc(t,e,n){this.props=t,this.context=e,this.refs=qE,this.updater=n||WE}Uc.prototype.isReactComponent={};Uc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function KE(){}KE.prototype=Uc.prototype;function Ty(t,e,n){this.props=t,this.context=e,this.refs=qE,this.updater=n||WE}var Iy=Ty.prototype=new KE;Iy.constructor=Ty;HE(Iy,Uc.prototype);Iy.isPureReactComponent=!0;var V1=Array.isArray,GE=Object.prototype.hasOwnProperty,Cy={current:null},QE={key:!0,ref:!0,__self:!0,__source:!0};function YE(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)GE.call(e,r)&&!QE.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Vd,type:t,key:a,ref:o,props:s,_owner:Cy.current}}function sD(t,e){return{$$typeof:Vd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ay(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vd}function iD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var U1=/\/+/g;function Tg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iD(""+t.key):e.toString(36)}function cf(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vd:case Kk:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tg(o,0):r,V1(s)?(n="",t!=null&&(n=t.replace(U1,"$&/")+"/"),cf(s,e,n,"",function(u){return u})):s!=null&&(Ay(s)&&(s=sD(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(U1,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",V1(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+Tg(a,l);o+=cf(a,e,n,c,s)}else if(c=rD(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+Tg(a,l++),o+=cf(a,e,n,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ah(t,e,n){if(t==null)return t;var r=[],s=0;return cf(t,r,"","",function(a){return e.call(n,a,s++)}),r}function aD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var rr={current:null},uf={transition:null},oD={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:uf,ReactCurrentOwner:Cy};function XE(){throw Error("act(...) is not supported in production builds of React.")}Qe.Children={map:Ah,forEach:function(t,e,n){Ah(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ah(t,function(){e++}),e},toArray:function(t){return Ah(t,function(e){return e})||[]},only:function(t){if(!Ay(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Qe.Component=Uc;Qe.Fragment=Gk;Qe.Profiler=Yk;Qe.PureComponent=Ty;Qe.StrictMode=Qk;Qe.Suspense=eD;Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oD;Qe.act=XE;Qe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=HE({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Cy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)GE.call(e,c)&&!QE.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Vd,type:t.type,key:s,ref:a,props:r,_owner:o}};Qe.createContext=function(t){return t={$$typeof:Jk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xk,_context:t},t.Consumer=t};Qe.createElement=YE;Qe.createFactory=function(t){var e=YE.bind(null,t);return e.type=t,e};Qe.createRef=function(){return{current:null}};Qe.forwardRef=function(t){return{$$typeof:Zk,render:t}};Qe.isValidElement=Ay;Qe.lazy=function(t){return{$$typeof:nD,_payload:{_status:-1,_result:t},_init:aD}};Qe.memo=function(t,e){return{$$typeof:tD,type:t,compare:e===void 0?null:e}};Qe.startTransition=function(t){var e=uf.transition;uf.transition={};try{t()}finally{uf.transition=e}};Qe.unstable_act=XE;Qe.useCallback=function(t,e){return rr.current.useCallback(t,e)};Qe.useContext=function(t){return rr.current.useContext(t)};Qe.useDebugValue=function(){};Qe.useDeferredValue=function(t){return rr.current.useDeferredValue(t)};Qe.useEffect=function(t,e){return rr.current.useEffect(t,e)};Qe.useId=function(){return rr.current.useId()};Qe.useImperativeHandle=function(t,e,n){return rr.current.useImperativeHandle(t,e,n)};Qe.useInsertionEffect=function(t,e){return rr.current.useInsertionEffect(t,e)};Qe.useLayoutEffect=function(t,e){return rr.current.useLayoutEffect(t,e)};Qe.useMemo=function(t,e){return rr.current.useMemo(t,e)};Qe.useReducer=function(t,e,n){return rr.current.useReducer(t,e,n)};Qe.useRef=function(t){return rr.current.useRef(t)};Qe.useState=function(t){return rr.current.useState(t)};Qe.useSyncExternalStore=function(t,e,n){return rr.current.useSyncExternalStore(t,e,n)};Qe.useTransition=function(){return rr.current.useTransition()};Qe.version="18.3.1";zE.exports=Qe;var m=zE.exports;const te=$E(m),Py=qk({__proto__:null,default:te},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lD=m,cD=Symbol.for("react.element"),uD=Symbol.for("react.fragment"),dD=Object.prototype.hasOwnProperty,hD=lD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,fD={key:!0,ref:!0,__self:!0,__source:!0};function JE(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)dD.call(e,r)&&!fD.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:cD,type:t,key:a,ref:o,props:s,_owner:hD.current}}Wm.Fragment=uD;Wm.jsx=JE;Wm.jsxs=JE;BE.exports=Wm;var i=BE.exports,ZE={exports:{}},Or={},ej={exports:{}},tj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,L){var Q=U.length;U.push(L);e:for(;0<Q;){var he=Q-1>>>1,ne=U[he];if(0<s(ne,L))U[he]=L,U[Q]=ne,Q=he;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var L=U[0],Q=U.pop();if(Q!==L){U[0]=Q;e:for(var he=0,ne=U.length,me=ne>>>1;he<me;){var Ne=2*(he+1)-1,We=U[Ne],He=Ne+1,Z=U[He];if(0>s(We,Q))He<ne&&0>s(Z,We)?(U[he]=Z,U[He]=Q,he=He):(U[he]=We,U[Ne]=Q,he=Ne);else if(He<ne&&0>s(Z,Q))U[he]=Z,U[He]=Q,he=He;else break e}}return L}function s(U,L){var Q=U.sortIndex-L.sortIndex;return Q!==0?Q:U.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,f=null,p=3,g=!1,N=!1,x=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(U){for(var L=n(u);L!==null;){if(L.callback===null)r(u);else if(L.startTime<=U)r(u),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(u)}}function C(U){if(x=!1,v(U),!N)if(n(c)!==null)N=!0,W(I);else{var L=n(u);L!==null&&X(C,L.startTime-U)}}function I(U,L){N=!1,x&&(x=!1,_(S),S=-1),g=!0;var Q=p;try{for(v(L),f=n(c);f!==null&&(!(f.expirationTime>L)||U&&!A());){var he=f.callback;if(typeof he=="function"){f.callback=null,p=f.priorityLevel;var ne=he(f.expirationTime<=L);L=t.unstable_now(),typeof ne=="function"?f.callback=ne:f===n(c)&&r(c),v(L)}else r(c);f=n(c)}if(f!==null)var me=!0;else{var Ne=n(u);Ne!==null&&X(C,Ne.startTime-L),me=!1}return me}finally{f=null,p=Q,g=!1}}var R=!1,j=null,S=-1,T=5,P=-1;function A(){return!(t.unstable_now()-P<T)}function D(){if(j!==null){var U=t.unstable_now();P=U;var L=!0;try{L=j(!0,U)}finally{L?M():(R=!1,j=null)}}else R=!1}var M;if(typeof w=="function")M=function(){w(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,se=$.port2;$.port1.onmessage=D,M=function(){se.postMessage(null)}}else M=function(){b(D,0)};function W(U){j=U,R||(R=!0,M())}function X(U,L){S=b(function(){U(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){N||g||(N=!0,W(I))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var L=3;break;default:L=p}var Q=p;p=L;try{return U()}finally{p=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,L){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Q=p;p=U;try{return L()}finally{p=Q}},t.unstable_scheduleCallback=function(U,L,Q){var he=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?he+Q:he):Q=he,U){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=Q+ne,U={id:h++,callback:L,priorityLevel:U,startTime:Q,expirationTime:ne,sortIndex:-1},Q>he?(U.sortIndex=Q,e(u,U),n(c)===null&&U===n(u)&&(x?(_(S),S=-1):x=!0,X(C,Q-he))):(U.sortIndex=ne,e(c,U),N||g||(N=!0,W(I))),U},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(U){var L=p;return function(){var Q=p;p=L;try{return U.apply(this,arguments)}finally{p=Q}}}})(tj);ej.exports=tj;var mD=ej.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pD=m,Mr=mD;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nj=new Set,ed={};function sl(t,e){Ec(t,e),Ec(t+"Capture",e)}function Ec(t,e){for(ed[t]=e,t=0;t<e.length;t++)nj.add(e[t])}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P0=Object.prototype.hasOwnProperty,gD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$1={},B1={};function xD(t){return P0.call(B1,t)?!0:P0.call($1,t)?!1:gD.test(t)?B1[t]=!0:($1[t]=!0,!1)}function yD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function vD(t,e,n,r){if(e===null||typeof e>"u"||yD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pn[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pn[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pn[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pn[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pn[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pn[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pn[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pn[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pn[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ry=/[\-:]([a-z])/g;function ky(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ry,ky);Pn[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ry,ky);Pn[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ry,ky);Pn[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pn[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Pn.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pn[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dy(t,e,n,r){var s=Pn.hasOwnProperty(e)?Pn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(vD(e,n,s,r)&&(n=null),r||s===null?xD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var $i=pD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ph=Symbol.for("react.element"),Vl=Symbol.for("react.portal"),Ul=Symbol.for("react.fragment"),My=Symbol.for("react.strict_mode"),R0=Symbol.for("react.profiler"),rj=Symbol.for("react.provider"),sj=Symbol.for("react.context"),Oy=Symbol.for("react.forward_ref"),k0=Symbol.for("react.suspense"),D0=Symbol.for("react.suspense_list"),Ly=Symbol.for("react.memo"),ra=Symbol.for("react.lazy"),ij=Symbol.for("react.offscreen"),z1=Symbol.iterator;function mu(t){return t===null||typeof t!="object"?null:(t=z1&&t[z1]||t["@@iterator"],typeof t=="function"?t:null)}var Ft=Object.assign,Ig;function Eu(t){if(Ig===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ig=e&&e[1]||""}return`
`+Ig+t}var Cg=!1;function Ag(t,e){if(!t||Cg)return"";Cg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Cg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Eu(t):""}function wD(t){switch(t.tag){case 5:return Eu(t.type);case 16:return Eu("Lazy");case 13:return Eu("Suspense");case 19:return Eu("SuspenseList");case 0:case 2:case 15:return t=Ag(t.type,!1),t;case 11:return t=Ag(t.type.render,!1),t;case 1:return t=Ag(t.type,!0),t;default:return""}}function M0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ul:return"Fragment";case Vl:return"Portal";case R0:return"Profiler";case My:return"StrictMode";case k0:return"Suspense";case D0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sj:return(t.displayName||"Context")+".Consumer";case rj:return(t._context.displayName||"Context")+".Provider";case Oy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ly:return e=t.displayName||null,e!==null?e:M0(t.type)||"Memo";case ra:e=t._payload,t=t._init;try{return M0(t(e))}catch{}}return null}function bD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M0(e);case 8:return e===My?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function La(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aj(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ND(t){var e=aj(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rh(t){t._valueTracker||(t._valueTracker=ND(t))}function oj(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aj(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ff(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function O0(t,e){var n=e.checked;return Ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function W1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=La(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lj(t,e){e=e.checked,e!=null&&Dy(t,"checked",e,!1)}function L0(t,e){lj(t,e);var n=La(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?F0(t,e.type,n):e.hasOwnProperty("defaultValue")&&F0(t,e.type,La(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function H1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function F0(t,e,n){(e!=="number"||Ff(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ju=Array.isArray;function ec(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+La(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function V0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function q1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(ju(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:La(n)}}function cj(t,e){var n=La(e.value),r=La(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function K1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uj(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function U0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uj(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kh,dj=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kh=kh||document.createElement("div"),kh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function td(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Mu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_D=["Webkit","ms","Moz","O"];Object.keys(Mu).forEach(function(t){_D.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mu[e]=Mu[t]})});function hj(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Mu.hasOwnProperty(t)&&Mu[t]?(""+e).trim():e+"px"}function fj(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hj(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var ED=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $0(t,e){if(e){if(ED[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function B0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z0=null;function Fy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var W0=null,tc=null,nc=null;function G1(t){if(t=Bd(t)){if(typeof W0!="function")throw Error(J(280));var e=t.stateNode;e&&(e=Qm(e),W0(t.stateNode,t.type,e))}}function mj(t){tc?nc?nc.push(t):nc=[t]:tc=t}function pj(){if(tc){var t=tc,e=nc;if(nc=tc=null,G1(t),e)for(t=0;t<e.length;t++)G1(e[t])}}function gj(t,e){return t(e)}function xj(){}var Pg=!1;function yj(t,e,n){if(Pg)return t(e,n);Pg=!0;try{return gj(t,e,n)}finally{Pg=!1,(tc!==null||nc!==null)&&(xj(),pj())}}function nd(t,e){var n=t.stateNode;if(n===null)return null;var r=Qm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var H0=!1;if(Ti)try{var pu={};Object.defineProperty(pu,"passive",{get:function(){H0=!0}}),window.addEventListener("test",pu,pu),window.removeEventListener("test",pu,pu)}catch{H0=!1}function jD(t,e,n,r,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Ou=!1,Vf=null,Uf=!1,q0=null,SD={onError:function(t){Ou=!0,Vf=t}};function TD(t,e,n,r,s,a,o,l,c){Ou=!1,Vf=null,jD.apply(SD,arguments)}function ID(t,e,n,r,s,a,o,l,c){if(TD.apply(this,arguments),Ou){if(Ou){var u=Vf;Ou=!1,Vf=null}else throw Error(J(198));Uf||(Uf=!0,q0=u)}}function il(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vj(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Q1(t){if(il(t)!==t)throw Error(J(188))}function CD(t){var e=t.alternate;if(!e){if(e=il(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return Q1(s),t;if(a===r)return Q1(s),e;a=a.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function wj(t){return t=CD(t),t!==null?bj(t):null}function bj(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bj(t);if(e!==null)return e;t=t.sibling}return null}var Nj=Mr.unstable_scheduleCallback,Y1=Mr.unstable_cancelCallback,AD=Mr.unstable_shouldYield,PD=Mr.unstable_requestPaint,Jt=Mr.unstable_now,RD=Mr.unstable_getCurrentPriorityLevel,Vy=Mr.unstable_ImmediatePriority,_j=Mr.unstable_UserBlockingPriority,$f=Mr.unstable_NormalPriority,kD=Mr.unstable_LowPriority,Ej=Mr.unstable_IdlePriority,Hm=null,Qs=null;function DD(t){if(Qs&&typeof Qs.onCommitFiberRoot=="function")try{Qs.onCommitFiberRoot(Hm,t,void 0,(t.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:LD,MD=Math.log,OD=Math.LN2;function LD(t){return t>>>=0,t===0?32:31-(MD(t)/OD|0)|0}var Dh=64,Mh=4194304;function Su(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Su(l):(a&=o,a!==0&&(r=Su(a)))}else o=n&~s,o!==0?r=Su(o):a!==0&&(r=Su(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vs(e),s=1<<n,r|=t[n],e&=~s;return r}function FD(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VD(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-vs(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=FD(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function K0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jj(){var t=Dh;return Dh<<=1,!(Dh&4194240)&&(Dh=64),t}function Rg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ud(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vs(e),t[e]=n}function UD(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vs(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function Uy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vs(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var mt=0;function Sj(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tj,$y,Ij,Cj,Aj,G0=!1,Oh=[],_a=null,Ea=null,ja=null,rd=new Map,sd=new Map,aa=[],$D="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function X1(t,e){switch(t){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":ja=null;break;case"pointerover":case"pointerout":rd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sd.delete(e.pointerId)}}function gu(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Bd(e),e!==null&&$y(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function BD(t,e,n,r,s){switch(e){case"focusin":return _a=gu(_a,t,e,n,r,s),!0;case"dragenter":return Ea=gu(Ea,t,e,n,r,s),!0;case"mouseover":return ja=gu(ja,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return rd.set(a,gu(rd.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,sd.set(a,gu(sd.get(a)||null,t,e,n,r,s)),!0}return!1}function Pj(t){var e=_o(t.target);if(e!==null){var n=il(e);if(n!==null){if(e=n.tag,e===13){if(e=vj(n),e!==null){t.blockedOn=e,Aj(t.priority,function(){Ij(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function df(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Q0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);z0=r,n.target.dispatchEvent(r),z0=null}else return e=Bd(n),e!==null&&$y(e),t.blockedOn=n,!1;e.shift()}return!0}function J1(t,e,n){df(t)&&n.delete(e)}function zD(){G0=!1,_a!==null&&df(_a)&&(_a=null),Ea!==null&&df(Ea)&&(Ea=null),ja!==null&&df(ja)&&(ja=null),rd.forEach(J1),sd.forEach(J1)}function xu(t,e){t.blockedOn===e&&(t.blockedOn=null,G0||(G0=!0,Mr.unstable_scheduleCallback(Mr.unstable_NormalPriority,zD)))}function id(t){function e(s){return xu(s,t)}if(0<Oh.length){xu(Oh[0],t);for(var n=1;n<Oh.length;n++){var r=Oh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_a!==null&&xu(_a,t),Ea!==null&&xu(Ea,t),ja!==null&&xu(ja,t),rd.forEach(e),sd.forEach(e),n=0;n<aa.length;n++)r=aa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<aa.length&&(n=aa[0],n.blockedOn===null);)Pj(n),n.blockedOn===null&&aa.shift()}var rc=$i.ReactCurrentBatchConfig,zf=!0;function WD(t,e,n,r){var s=mt,a=rc.transition;rc.transition=null;try{mt=1,By(t,e,n,r)}finally{mt=s,rc.transition=a}}function HD(t,e,n,r){var s=mt,a=rc.transition;rc.transition=null;try{mt=4,By(t,e,n,r)}finally{mt=s,rc.transition=a}}function By(t,e,n,r){if(zf){var s=Q0(t,e,n,r);if(s===null)Bg(t,e,r,Wf,n),X1(t,r);else if(BD(s,t,e,n,r))r.stopPropagation();else if(X1(t,r),e&4&&-1<$D.indexOf(t)){for(;s!==null;){var a=Bd(s);if(a!==null&&Tj(a),a=Q0(t,e,n,r),a===null&&Bg(t,e,r,Wf,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Bg(t,e,r,null,n)}}var Wf=null;function Q0(t,e,n,r){if(Wf=null,t=Fy(r),t=_o(t),t!==null)if(e=il(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vj(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wf=t,null}function Rj(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(RD()){case Vy:return 1;case _j:return 4;case $f:case kD:return 16;case Ej:return 536870912;default:return 16}default:return 16}}var ya=null,zy=null,hf=null;function kj(){if(hf)return hf;var t,e=zy,n=e.length,r,s="value"in ya?ya.value:ya.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return hf=s.slice(t,1<r?1-r:void 0)}function ff(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Lh(){return!0}function Z1(){return!1}function Lr(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Lh:Z1,this.isPropagationStopped=Z1,this}return Ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Lh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Lh)},persist:function(){},isPersistent:Lh}),e}var $c={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wy=Lr($c),$d=Ft({},$c,{view:0,detail:0}),qD=Lr($d),kg,Dg,yu,qm=Ft({},$d,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yu&&(yu&&t.type==="mousemove"?(kg=t.screenX-yu.screenX,Dg=t.screenY-yu.screenY):Dg=kg=0,yu=t),kg)},movementY:function(t){return"movementY"in t?t.movementY:Dg}}),eb=Lr(qm),KD=Ft({},qm,{dataTransfer:0}),GD=Lr(KD),QD=Ft({},$d,{relatedTarget:0}),Mg=Lr(QD),YD=Ft({},$c,{animationName:0,elapsedTime:0,pseudoElement:0}),XD=Lr(YD),JD=Ft({},$c,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZD=Lr(JD),e4=Ft({},$c,{data:0}),tb=Lr(e4),t4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function s4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=r4[t])?!!e[t]:!1}function Hy(){return s4}var i4=Ft({},$d,{key:function(t){if(t.key){var e=t4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ff(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?n4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hy,charCode:function(t){return t.type==="keypress"?ff(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ff(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),a4=Lr(i4),o4=Ft({},qm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nb=Lr(o4),l4=Ft({},$d,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hy}),c4=Lr(l4),u4=Ft({},$c,{propertyName:0,elapsedTime:0,pseudoElement:0}),d4=Lr(u4),h4=Ft({},qm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),f4=Lr(h4),m4=[9,13,27,32],qy=Ti&&"CompositionEvent"in window,Lu=null;Ti&&"documentMode"in document&&(Lu=document.documentMode);var p4=Ti&&"TextEvent"in window&&!Lu,Dj=Ti&&(!qy||Lu&&8<Lu&&11>=Lu),rb=" ",sb=!1;function Mj(t,e){switch(t){case"keyup":return m4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Oj(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $l=!1;function g4(t,e){switch(t){case"compositionend":return Oj(e);case"keypress":return e.which!==32?null:(sb=!0,rb);case"textInput":return t=e.data,t===rb&&sb?null:t;default:return null}}function x4(t,e){if($l)return t==="compositionend"||!qy&&Mj(t,e)?(t=kj(),hf=zy=ya=null,$l=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dj&&e.locale!=="ko"?null:e.data;default:return null}}var y4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ib(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!y4[t.type]:e==="textarea"}function Lj(t,e,n,r){mj(r),e=Hf(e,"onChange"),0<e.length&&(n=new Wy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fu=null,ad=null;function v4(t){Gj(t,0)}function Km(t){var e=Wl(t);if(oj(e))return t}function w4(t,e){if(t==="change")return e}var Fj=!1;if(Ti){var Og;if(Ti){var Lg="oninput"in document;if(!Lg){var ab=document.createElement("div");ab.setAttribute("oninput","return;"),Lg=typeof ab.oninput=="function"}Og=Lg}else Og=!1;Fj=Og&&(!document.documentMode||9<document.documentMode)}function ob(){Fu&&(Fu.detachEvent("onpropertychange",Vj),ad=Fu=null)}function Vj(t){if(t.propertyName==="value"&&Km(ad)){var e=[];Lj(e,ad,t,Fy(t)),yj(v4,e)}}function b4(t,e,n){t==="focusin"?(ob(),Fu=e,ad=n,Fu.attachEvent("onpropertychange",Vj)):t==="focusout"&&ob()}function N4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Km(ad)}function _4(t,e){if(t==="click")return Km(e)}function E4(t,e){if(t==="input"||t==="change")return Km(e)}function j4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var js=typeof Object.is=="function"?Object.is:j4;function od(t,e){if(js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!P0.call(e,s)||!js(t[s],e[s]))return!1}return!0}function lb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cb(t,e){var n=lb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lb(n)}}function Uj(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uj(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $j(){for(var t=window,e=Ff();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ff(t.document)}return e}function Ky(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function S4(t){var e=$j(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Uj(n.ownerDocument.documentElement,n)){if(r!==null&&Ky(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=cb(n,a);var o=cb(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var T4=Ti&&"documentMode"in document&&11>=document.documentMode,Bl=null,Y0=null,Vu=null,X0=!1;function ub(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;X0||Bl==null||Bl!==Ff(r)||(r=Bl,"selectionStart"in r&&Ky(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vu&&od(Vu,r)||(Vu=r,r=Hf(Y0,"onSelect"),0<r.length&&(e=new Wy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Bl)))}function Fh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zl={animationend:Fh("Animation","AnimationEnd"),animationiteration:Fh("Animation","AnimationIteration"),animationstart:Fh("Animation","AnimationStart"),transitionend:Fh("Transition","TransitionEnd")},Fg={},Bj={};Ti&&(Bj=document.createElement("div").style,"AnimationEvent"in window||(delete zl.animationend.animation,delete zl.animationiteration.animation,delete zl.animationstart.animation),"TransitionEvent"in window||delete zl.transitionend.transition);function Gm(t){if(Fg[t])return Fg[t];if(!zl[t])return t;var e=zl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Bj)return Fg[t]=e[n];return t}var zj=Gm("animationend"),Wj=Gm("animationiteration"),Hj=Gm("animationstart"),qj=Gm("transitionend"),Kj=new Map,db="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xa(t,e){Kj.set(t,e),sl(e,[t])}for(var Vg=0;Vg<db.length;Vg++){var Ug=db[Vg],I4=Ug.toLowerCase(),C4=Ug[0].toUpperCase()+Ug.slice(1);Xa(I4,"on"+C4)}Xa(zj,"onAnimationEnd");Xa(Wj,"onAnimationIteration");Xa(Hj,"onAnimationStart");Xa("dblclick","onDoubleClick");Xa("focusin","onFocus");Xa("focusout","onBlur");Xa(qj,"onTransitionEnd");Ec("onMouseEnter",["mouseout","mouseover"]);Ec("onMouseLeave",["mouseout","mouseover"]);Ec("onPointerEnter",["pointerout","pointerover"]);Ec("onPointerLeave",["pointerout","pointerover"]);sl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sl("onBeforeInput",["compositionend","keypress","textInput","paste"]);sl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tu));function hb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ID(r,e,void 0,t),t.currentTarget=null}function Gj(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;hb(s,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;hb(s,l,u),a=c}}}if(Uf)throw t=q0,Uf=!1,q0=null,t}function St(t,e){var n=e[nx];n===void 0&&(n=e[nx]=new Set);var r=t+"__bubble";n.has(r)||(Qj(e,t,2,!1),n.add(r))}function $g(t,e,n){var r=0;e&&(r|=4),Qj(n,t,r,e)}var Vh="_reactListening"+Math.random().toString(36).slice(2);function ld(t){if(!t[Vh]){t[Vh]=!0,nj.forEach(function(n){n!=="selectionchange"&&(A4.has(n)||$g(n,!1,t),$g(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Vh]||(e[Vh]=!0,$g("selectionchange",!1,e))}}function Qj(t,e,n,r){switch(Rj(e)){case 1:var s=WD;break;case 4:s=HD;break;default:s=By}n=s.bind(null,e,n,t),s=void 0,!H0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Bg(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=_o(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}yj(function(){var u=a,h=Fy(n),f=[];e:{var p=Kj.get(t);if(p!==void 0){var g=Wy,N=t;switch(t){case"keypress":if(ff(n)===0)break e;case"keydown":case"keyup":g=a4;break;case"focusin":N="focus",g=Mg;break;case"focusout":N="blur",g=Mg;break;case"beforeblur":case"afterblur":g=Mg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=eb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=GD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=c4;break;case zj:case Wj:case Hj:g=XD;break;case qj:g=d4;break;case"scroll":g=qD;break;case"wheel":g=f4;break;case"copy":case"cut":case"paste":g=ZD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=nb}var x=(e&4)!==0,b=!x&&t==="scroll",_=x?p!==null?p+"Capture":null:p;x=[];for(var w=u,v;w!==null;){v=w;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,_!==null&&(C=nd(w,_),C!=null&&x.push(cd(w,C,v)))),b)break;w=w.return}0<x.length&&(p=new g(p,N,null,n,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==z0&&(N=n.relatedTarget||n.fromElement)&&(_o(N)||N[Ii]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(N=n.relatedTarget||n.toElement,g=u,N=N?_o(N):null,N!==null&&(b=il(N),N!==b||N.tag!==5&&N.tag!==6)&&(N=null)):(g=null,N=u),g!==N)){if(x=eb,C="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(x=nb,C="onPointerLeave",_="onPointerEnter",w="pointer"),b=g==null?p:Wl(g),v=N==null?p:Wl(N),p=new x(C,w+"leave",g,n,h),p.target=b,p.relatedTarget=v,C=null,_o(h)===u&&(x=new x(_,w+"enter",N,n,h),x.target=v,x.relatedTarget=b,C=x),b=C,g&&N)t:{for(x=g,_=N,w=0,v=x;v;v=Tl(v))w++;for(v=0,C=_;C;C=Tl(C))v++;for(;0<w-v;)x=Tl(x),w--;for(;0<v-w;)_=Tl(_),v--;for(;w--;){if(x===_||_!==null&&x===_.alternate)break t;x=Tl(x),_=Tl(_)}x=null}else x=null;g!==null&&fb(f,p,g,x,!1),N!==null&&b!==null&&fb(f,b,N,x,!0)}}e:{if(p=u?Wl(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var I=w4;else if(ib(p))if(Fj)I=E4;else{I=N4;var R=b4}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=_4);if(I&&(I=I(t,u))){Lj(f,I,n,h);break e}R&&R(t,p,u),t==="focusout"&&(R=p._wrapperState)&&R.controlled&&p.type==="number"&&F0(p,"number",p.value)}switch(R=u?Wl(u):window,t){case"focusin":(ib(R)||R.contentEditable==="true")&&(Bl=R,Y0=u,Vu=null);break;case"focusout":Vu=Y0=Bl=null;break;case"mousedown":X0=!0;break;case"contextmenu":case"mouseup":case"dragend":X0=!1,ub(f,n,h);break;case"selectionchange":if(T4)break;case"keydown":case"keyup":ub(f,n,h)}var j;if(qy)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else $l?Mj(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Dj&&n.locale!=="ko"&&($l||S!=="onCompositionStart"?S==="onCompositionEnd"&&$l&&(j=kj()):(ya=h,zy="value"in ya?ya.value:ya.textContent,$l=!0)),R=Hf(u,S),0<R.length&&(S=new tb(S,t,null,n,h),f.push({event:S,listeners:R}),j?S.data=j:(j=Oj(n),j!==null&&(S.data=j)))),(j=p4?g4(t,n):x4(t,n))&&(u=Hf(u,"onBeforeInput"),0<u.length&&(h=new tb("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:u}),h.data=j))}Gj(f,e)})}function cd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Hf(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=nd(t,n),a!=null&&r.unshift(cd(t,a,s)),a=nd(t,e),a!=null&&r.push(cd(t,a,s))),t=t.return}return r}function Tl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function fb(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=nd(n,a),c!=null&&o.unshift(cd(n,c,l))):s||(c=nd(n,a),c!=null&&o.push(cd(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var P4=/\r\n?/g,R4=/\u0000|\uFFFD/g;function mb(t){return(typeof t=="string"?t:""+t).replace(P4,`
`).replace(R4,"")}function Uh(t,e,n){if(e=mb(e),mb(t)!==e&&n)throw Error(J(425))}function qf(){}var J0=null,Z0=null;function ex(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tx=typeof setTimeout=="function"?setTimeout:void 0,k4=typeof clearTimeout=="function"?clearTimeout:void 0,pb=typeof Promise=="function"?Promise:void 0,D4=typeof queueMicrotask=="function"?queueMicrotask:typeof pb<"u"?function(t){return pb.resolve(null).then(t).catch(M4)}:tx;function M4(t){setTimeout(function(){throw t})}function zg(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),id(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);id(e)}function Sa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function gb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Bc=Math.random().toString(36).slice(2),Hs="__reactFiber$"+Bc,ud="__reactProps$"+Bc,Ii="__reactContainer$"+Bc,nx="__reactEvents$"+Bc,O4="__reactListeners$"+Bc,L4="__reactHandles$"+Bc;function _o(t){var e=t[Hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ii]||n[Hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=gb(t);t!==null;){if(n=t[Hs])return n;t=gb(t)}return e}t=n,n=t.parentNode}return null}function Bd(t){return t=t[Hs]||t[Ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function Qm(t){return t[ud]||null}var rx=[],Hl=-1;function Ja(t){return{current:t}}function It(t){0>Hl||(t.current=rx[Hl],rx[Hl]=null,Hl--)}function _t(t,e){Hl++,rx[Hl]=t.current,t.current=e}var Fa={},qn=Ja(Fa),pr=Ja(!1),Fo=Fa;function jc(t,e){var n=t.type.contextTypes;if(!n)return Fa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gr(t){return t=t.childContextTypes,t!=null}function Kf(){It(pr),It(qn)}function xb(t,e,n){if(qn.current!==Fa)throw Error(J(168));_t(qn,e),_t(pr,n)}function Yj(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(J(108,bD(t)||"Unknown",s));return Ft({},n,r)}function Gf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fa,Fo=qn.current,_t(qn,t),_t(pr,pr.current),!0}function yb(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=Yj(t,e,Fo),r.__reactInternalMemoizedMergedChildContext=t,It(pr),It(qn),_t(qn,t)):It(pr),_t(pr,n)}var pi=null,Ym=!1,Wg=!1;function Xj(t){pi===null?pi=[t]:pi.push(t)}function F4(t){Ym=!0,Xj(t)}function Za(){if(!Wg&&pi!==null){Wg=!0;var t=0,e=mt;try{var n=pi;for(mt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}pi=null,Ym=!1}catch(s){throw pi!==null&&(pi=pi.slice(t+1)),Nj(Vy,Za),s}finally{mt=e,Wg=!1}}return null}var ql=[],Kl=0,Qf=null,Yf=0,qr=[],Kr=0,Vo=null,xi=1,yi="";function wo(t,e){ql[Kl++]=Yf,ql[Kl++]=Qf,Qf=t,Yf=e}function Jj(t,e,n){qr[Kr++]=xi,qr[Kr++]=yi,qr[Kr++]=Vo,Vo=t;var r=xi;t=yi;var s=32-vs(r)-1;r&=~(1<<s),n+=1;var a=32-vs(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,xi=1<<32-vs(e)+s|n<<s|r,yi=a+t}else xi=1<<a|n<<s|r,yi=t}function Gy(t){t.return!==null&&(wo(t,1),Jj(t,1,0))}function Qy(t){for(;t===Qf;)Qf=ql[--Kl],ql[Kl]=null,Yf=ql[--Kl],ql[Kl]=null;for(;t===Vo;)Vo=qr[--Kr],qr[Kr]=null,yi=qr[--Kr],qr[Kr]=null,xi=qr[--Kr],qr[Kr]=null}var kr=null,Cr=null,Rt=!1,gs=null;function Zj(t,e){var n=Gr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function vb(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,Cr=Sa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,Cr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vo!==null?{id:xi,overflow:yi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Gr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kr=t,Cr=null,!0):!1;default:return!1}}function sx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ix(t){if(Rt){var e=Cr;if(e){var n=e;if(!vb(t,e)){if(sx(t))throw Error(J(418));e=Sa(n.nextSibling);var r=kr;e&&vb(t,e)?Zj(r,n):(t.flags=t.flags&-4097|2,Rt=!1,kr=t)}}else{if(sx(t))throw Error(J(418));t.flags=t.flags&-4097|2,Rt=!1,kr=t}}}function wb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function $h(t){if(t!==kr)return!1;if(!Rt)return wb(t),Rt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ex(t.type,t.memoizedProps)),e&&(e=Cr)){if(sx(t))throw e2(),Error(J(418));for(;e;)Zj(t,e),e=Sa(e.nextSibling)}if(wb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Cr=Sa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Cr=null}}else Cr=kr?Sa(t.stateNode.nextSibling):null;return!0}function e2(){for(var t=Cr;t;)t=Sa(t.nextSibling)}function Sc(){Cr=kr=null,Rt=!1}function Yy(t){gs===null?gs=[t]:gs.push(t)}var V4=$i.ReactCurrentBatchConfig;function vu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Bh(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bb(t){var e=t._init;return e(t._payload)}function t2(t){function e(_,w){if(t){var v=_.deletions;v===null?(_.deletions=[w],_.flags|=16):v.push(w)}}function n(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function r(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=Aa(_,w),_.index=0,_.sibling=null,_}function a(_,w,v){return _.index=v,t?(v=_.alternate,v!==null?(v=v.index,v<w?(_.flags|=2,w):v):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,w,v,C){return w===null||w.tag!==6?(w=Xg(v,_.mode,C),w.return=_,w):(w=s(w,v),w.return=_,w)}function c(_,w,v,C){var I=v.type;return I===Ul?h(_,w,v.props.children,C,v.key):w!==null&&(w.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ra&&bb(I)===w.type)?(C=s(w,v.props),C.ref=vu(_,w,v),C.return=_,C):(C=wf(v.type,v.key,v.props,null,_.mode,C),C.ref=vu(_,w,v),C.return=_,C)}function u(_,w,v,C){return w===null||w.tag!==4||w.stateNode.containerInfo!==v.containerInfo||w.stateNode.implementation!==v.implementation?(w=Jg(v,_.mode,C),w.return=_,w):(w=s(w,v.children||[]),w.return=_,w)}function h(_,w,v,C,I){return w===null||w.tag!==7?(w=Do(v,_.mode,C,I),w.return=_,w):(w=s(w,v),w.return=_,w)}function f(_,w,v){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Xg(""+w,_.mode,v),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ph:return v=wf(w.type,w.key,w.props,null,_.mode,v),v.ref=vu(_,null,w),v.return=_,v;case Vl:return w=Jg(w,_.mode,v),w.return=_,w;case ra:var C=w._init;return f(_,C(w._payload),v)}if(ju(w)||mu(w))return w=Do(w,_.mode,v,null),w.return=_,w;Bh(_,w)}return null}function p(_,w,v,C){var I=w!==null?w.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return I!==null?null:l(_,w,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ph:return v.key===I?c(_,w,v,C):null;case Vl:return v.key===I?u(_,w,v,C):null;case ra:return I=v._init,p(_,w,I(v._payload),C)}if(ju(v)||mu(v))return I!==null?null:h(_,w,v,C,null);Bh(_,v)}return null}function g(_,w,v,C,I){if(typeof C=="string"&&C!==""||typeof C=="number")return _=_.get(v)||null,l(w,_,""+C,I);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ph:return _=_.get(C.key===null?v:C.key)||null,c(w,_,C,I);case Vl:return _=_.get(C.key===null?v:C.key)||null,u(w,_,C,I);case ra:var R=C._init;return g(_,w,v,R(C._payload),I)}if(ju(C)||mu(C))return _=_.get(v)||null,h(w,_,C,I,null);Bh(w,C)}return null}function N(_,w,v,C){for(var I=null,R=null,j=w,S=w=0,T=null;j!==null&&S<v.length;S++){j.index>S?(T=j,j=null):T=j.sibling;var P=p(_,j,v[S],C);if(P===null){j===null&&(j=T);break}t&&j&&P.alternate===null&&e(_,j),w=a(P,w,S),R===null?I=P:R.sibling=P,R=P,j=T}if(S===v.length)return n(_,j),Rt&&wo(_,S),I;if(j===null){for(;S<v.length;S++)j=f(_,v[S],C),j!==null&&(w=a(j,w,S),R===null?I=j:R.sibling=j,R=j);return Rt&&wo(_,S),I}for(j=r(_,j);S<v.length;S++)T=g(j,_,S,v[S],C),T!==null&&(t&&T.alternate!==null&&j.delete(T.key===null?S:T.key),w=a(T,w,S),R===null?I=T:R.sibling=T,R=T);return t&&j.forEach(function(A){return e(_,A)}),Rt&&wo(_,S),I}function x(_,w,v,C){var I=mu(v);if(typeof I!="function")throw Error(J(150));if(v=I.call(v),v==null)throw Error(J(151));for(var R=I=null,j=w,S=w=0,T=null,P=v.next();j!==null&&!P.done;S++,P=v.next()){j.index>S?(T=j,j=null):T=j.sibling;var A=p(_,j,P.value,C);if(A===null){j===null&&(j=T);break}t&&j&&A.alternate===null&&e(_,j),w=a(A,w,S),R===null?I=A:R.sibling=A,R=A,j=T}if(P.done)return n(_,j),Rt&&wo(_,S),I;if(j===null){for(;!P.done;S++,P=v.next())P=f(_,P.value,C),P!==null&&(w=a(P,w,S),R===null?I=P:R.sibling=P,R=P);return Rt&&wo(_,S),I}for(j=r(_,j);!P.done;S++,P=v.next())P=g(j,_,S,P.value,C),P!==null&&(t&&P.alternate!==null&&j.delete(P.key===null?S:P.key),w=a(P,w,S),R===null?I=P:R.sibling=P,R=P);return t&&j.forEach(function(D){return e(_,D)}),Rt&&wo(_,S),I}function b(_,w,v,C){if(typeof v=="object"&&v!==null&&v.type===Ul&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ph:e:{for(var I=v.key,R=w;R!==null;){if(R.key===I){if(I=v.type,I===Ul){if(R.tag===7){n(_,R.sibling),w=s(R,v.props.children),w.return=_,_=w;break e}}else if(R.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===ra&&bb(I)===R.type){n(_,R.sibling),w=s(R,v.props),w.ref=vu(_,R,v),w.return=_,_=w;break e}n(_,R);break}else e(_,R);R=R.sibling}v.type===Ul?(w=Do(v.props.children,_.mode,C,v.key),w.return=_,_=w):(C=wf(v.type,v.key,v.props,null,_.mode,C),C.ref=vu(_,w,v),C.return=_,_=C)}return o(_);case Vl:e:{for(R=v.key;w!==null;){if(w.key===R)if(w.tag===4&&w.stateNode.containerInfo===v.containerInfo&&w.stateNode.implementation===v.implementation){n(_,w.sibling),w=s(w,v.children||[]),w.return=_,_=w;break e}else{n(_,w);break}else e(_,w);w=w.sibling}w=Jg(v,_.mode,C),w.return=_,_=w}return o(_);case ra:return R=v._init,b(_,w,R(v._payload),C)}if(ju(v))return N(_,w,v,C);if(mu(v))return x(_,w,v,C);Bh(_,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,w!==null&&w.tag===6?(n(_,w.sibling),w=s(w,v),w.return=_,_=w):(n(_,w),w=Xg(v,_.mode,C),w.return=_,_=w),o(_)):n(_,w)}return b}var Tc=t2(!0),n2=t2(!1),Xf=Ja(null),Jf=null,Gl=null,Xy=null;function Jy(){Xy=Gl=Jf=null}function Zy(t){var e=Xf.current;It(Xf),t._currentValue=e}function ax(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sc(t,e){Jf=t,Xy=Gl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(fr=!0),t.firstContext=null)}function Jr(t){var e=t._currentValue;if(Xy!==t)if(t={context:t,memoizedValue:e,next:null},Gl===null){if(Jf===null)throw Error(J(308));Gl=t,Jf.dependencies={lanes:0,firstContext:t}}else Gl=Gl.next=t;return e}var Eo=null;function ev(t){Eo===null?Eo=[t]:Eo.push(t)}function r2(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,ev(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ci(t,r)}function Ci(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var sa=!1;function tv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _i(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ta(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,nt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ci(t,n)}return s=r.interleaved,s===null?(e.next=e,ev(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ci(t,n)}function mf(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Uy(t,n)}}function Nb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Zf(t,e,n,r){var s=t.updateQueue;sa=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;o=0,h=u=c=null,l=a;do{var p=l.lane,g=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,x=l;switch(p=e,g=n,x.tag){case 1:if(N=x.payload,typeof N=="function"){f=N.call(g,f,p);break e}f=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=x.payload,p=typeof N=="function"?N.call(g,f,p):N,p==null)break e;f=Ft({},f,p);break e;case 2:sa=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=g,c=f):h=h.next=g,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);$o|=o,t.lanes=o,t.memoizedState=f}}function _b(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var zd={},Ys=Ja(zd),dd=Ja(zd),hd=Ja(zd);function jo(t){if(t===zd)throw Error(J(174));return t}function nv(t,e){switch(_t(hd,e),_t(dd,t),_t(Ys,zd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:U0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=U0(e,t)}It(Ys),_t(Ys,e)}function Ic(){It(Ys),It(dd),It(hd)}function i2(t){jo(hd.current);var e=jo(Ys.current),n=U0(e,t.type);e!==n&&(_t(dd,t),_t(Ys,n))}function rv(t){dd.current===t&&(It(Ys),It(dd))}var Mt=Ja(0);function em(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Hg=[];function sv(){for(var t=0;t<Hg.length;t++)Hg[t]._workInProgressVersionPrimary=null;Hg.length=0}var pf=$i.ReactCurrentDispatcher,qg=$i.ReactCurrentBatchConfig,Uo=0,Lt=null,un=null,xn=null,tm=!1,Uu=!1,fd=0,U4=0;function Fn(){throw Error(J(321))}function iv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!js(t[n],e[n]))return!1;return!0}function av(t,e,n,r,s,a){if(Uo=a,Lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,pf.current=t===null||t.memoizedState===null?W4:H4,t=n(r,s),Uu){a=0;do{if(Uu=!1,fd=0,25<=a)throw Error(J(301));a+=1,xn=un=null,e.updateQueue=null,pf.current=q4,t=n(r,s)}while(Uu)}if(pf.current=nm,e=un!==null&&un.next!==null,Uo=0,xn=un=Lt=null,tm=!1,e)throw Error(J(300));return t}function ov(){var t=fd!==0;return fd=0,t}function Vs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?Lt.memoizedState=xn=t:xn=xn.next=t,xn}function Zr(){if(un===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=un.next;var e=xn===null?Lt.memoizedState:xn.next;if(e!==null)xn=e,un=t;else{if(t===null)throw Error(J(310));un=t,t={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},xn===null?Lt.memoizedState=xn=t:xn=xn.next=t}return xn}function md(t,e){return typeof e=="function"?e(t):e}function Kg(t){var e=Zr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=un,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((Uo&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,Lt.lanes|=h,$o|=h}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,js(r,e.memoizedState)||(fr=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Lt.lanes|=a,$o|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Gg(t){var e=Zr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);js(a,e.memoizedState)||(fr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function a2(){}function o2(t,e){var n=Lt,r=Zr(),s=e(),a=!js(r.memoizedState,s);if(a&&(r.memoizedState=s,fr=!0),r=r.queue,lv(u2.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||xn!==null&&xn.memoizedState.tag&1){if(n.flags|=2048,pd(9,c2.bind(null,n,r,s,e),void 0,null),bn===null)throw Error(J(349));Uo&30||l2(n,e,s)}return s}function l2(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function c2(t,e,n,r){e.value=n,e.getSnapshot=r,d2(e)&&h2(t)}function u2(t,e,n){return n(function(){d2(e)&&h2(t)})}function d2(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!js(t,n)}catch{return!0}}function h2(t){var e=Ci(t,1);e!==null&&ws(e,t,1,-1)}function Eb(t){var e=Vs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:md,lastRenderedState:t},e.queue=t,t=t.dispatch=z4.bind(null,Lt,t),[e.memoizedState,t]}function pd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Lt.updateQueue,e===null?(e={lastEffect:null,stores:null},Lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function f2(){return Zr().memoizedState}function gf(t,e,n,r){var s=Vs();Lt.flags|=t,s.memoizedState=pd(1|e,n,void 0,r===void 0?null:r)}function Xm(t,e,n,r){var s=Zr();r=r===void 0?null:r;var a=void 0;if(un!==null){var o=un.memoizedState;if(a=o.destroy,r!==null&&iv(r,o.deps)){s.memoizedState=pd(e,n,a,r);return}}Lt.flags|=t,s.memoizedState=pd(1|e,n,a,r)}function jb(t,e){return gf(8390656,8,t,e)}function lv(t,e){return Xm(2048,8,t,e)}function m2(t,e){return Xm(4,2,t,e)}function p2(t,e){return Xm(4,4,t,e)}function g2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function x2(t,e,n){return n=n!=null?n.concat([t]):null,Xm(4,4,g2.bind(null,e,t),n)}function cv(){}function y2(t,e){var n=Zr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&iv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v2(t,e){var n=Zr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&iv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w2(t,e,n){return Uo&21?(js(n,e)||(n=jj(),Lt.lanes|=n,$o|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,fr=!0),t.memoizedState=n)}function $4(t,e){var n=mt;mt=n!==0&&4>n?n:4,t(!0);var r=qg.transition;qg.transition={};try{t(!1),e()}finally{mt=n,qg.transition=r}}function b2(){return Zr().memoizedState}function B4(t,e,n){var r=Ca(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},N2(t))_2(e,n);else if(n=r2(t,e,n,r),n!==null){var s=tr();ws(n,t,r,s),E2(n,e,r)}}function z4(t,e,n){var r=Ca(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(N2(t))_2(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,js(l,o)){var c=e.interleaved;c===null?(s.next=s,ev(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=r2(t,e,s,r),n!==null&&(s=tr(),ws(n,t,r,s),E2(n,e,r))}}function N2(t){var e=t.alternate;return t===Lt||e!==null&&e===Lt}function _2(t,e){Uu=tm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function E2(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Uy(t,n)}}var nm={readContext:Jr,useCallback:Fn,useContext:Fn,useEffect:Fn,useImperativeHandle:Fn,useInsertionEffect:Fn,useLayoutEffect:Fn,useMemo:Fn,useReducer:Fn,useRef:Fn,useState:Fn,useDebugValue:Fn,useDeferredValue:Fn,useTransition:Fn,useMutableSource:Fn,useSyncExternalStore:Fn,useId:Fn,unstable_isNewReconciler:!1},W4={readContext:Jr,useCallback:function(t,e){return Vs().memoizedState=[t,e===void 0?null:e],t},useContext:Jr,useEffect:jb,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gf(4194308,4,g2.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gf(4194308,4,t,e)},useInsertionEffect:function(t,e){return gf(4,2,t,e)},useMemo:function(t,e){var n=Vs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=B4.bind(null,Lt,t),[r.memoizedState,t]},useRef:function(t){var e=Vs();return t={current:t},e.memoizedState=t},useState:Eb,useDebugValue:cv,useDeferredValue:function(t){return Vs().memoizedState=t},useTransition:function(){var t=Eb(!1),e=t[0];return t=$4.bind(null,t[1]),Vs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Lt,s=Vs();if(Rt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),bn===null)throw Error(J(349));Uo&30||l2(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,jb(u2.bind(null,r,a,t),[t]),r.flags|=2048,pd(9,c2.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=Vs(),e=bn.identifierPrefix;if(Rt){var n=yi,r=xi;n=(r&~(1<<32-vs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=U4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},H4={readContext:Jr,useCallback:y2,useContext:Jr,useEffect:lv,useImperativeHandle:x2,useInsertionEffect:m2,useLayoutEffect:p2,useMemo:v2,useReducer:Kg,useRef:f2,useState:function(){return Kg(md)},useDebugValue:cv,useDeferredValue:function(t){var e=Zr();return w2(e,un.memoizedState,t)},useTransition:function(){var t=Kg(md)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:a2,useSyncExternalStore:o2,useId:b2,unstable_isNewReconciler:!1},q4={readContext:Jr,useCallback:y2,useContext:Jr,useEffect:lv,useImperativeHandle:x2,useInsertionEffect:m2,useLayoutEffect:p2,useMemo:v2,useReducer:Gg,useRef:f2,useState:function(){return Gg(md)},useDebugValue:cv,useDeferredValue:function(t){var e=Zr();return un===null?e.memoizedState=t:w2(e,un.memoizedState,t)},useTransition:function(){var t=Gg(md)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:a2,useSyncExternalStore:o2,useId:b2,unstable_isNewReconciler:!1};function ds(t,e){if(t&&t.defaultProps){e=Ft({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ox(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ft({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Jm={isMounted:function(t){return(t=t._reactInternals)?il(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tr(),s=Ca(t),a=_i(r,s);a.payload=e,n!=null&&(a.callback=n),e=Ta(t,a,s),e!==null&&(ws(e,t,s,r),mf(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tr(),s=Ca(t),a=_i(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ta(t,a,s),e!==null&&(ws(e,t,s,r),mf(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tr(),r=Ca(t),s=_i(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ta(t,s,r),e!==null&&(ws(e,t,r,n),mf(e,t,r))}};function Sb(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!od(n,r)||!od(s,a):!0}function j2(t,e,n){var r=!1,s=Fa,a=e.contextType;return typeof a=="object"&&a!==null?a=Jr(a):(s=gr(e)?Fo:qn.current,r=e.contextTypes,a=(r=r!=null)?jc(t,s):Fa),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Jm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Tb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Jm.enqueueReplaceState(e,e.state,null)}function lx(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},tv(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Jr(a):(a=gr(e)?Fo:qn.current,s.context=jc(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(ox(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Jm.enqueueReplaceState(s,s.state,null),Zf(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Cc(t,e){try{var n="",r=e;do n+=wD(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Qg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function cx(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var K4=typeof WeakMap=="function"?WeakMap:Map;function S2(t,e,n){n=_i(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sm||(sm=!0,vx=r),cx(t,e)},n}function T2(t,e,n){n=_i(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){cx(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){cx(t,e),typeof r!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ib(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new K4;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=o5.bind(null,t,e,n),e.then(t,t))}function Cb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ab(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_i(-1,1),e.tag=2,Ta(n,e,1))),n.lanes|=1),t)}var G4=$i.ReactCurrentOwner,fr=!1;function Jn(t,e,n,r){e.child=t===null?n2(e,null,n,r):Tc(e,t.child,n,r)}function Pb(t,e,n,r,s){n=n.render;var a=e.ref;return sc(e,s),r=av(t,e,n,r,a,s),n=ov(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ai(t,e,s)):(Rt&&n&&Gy(e),e.flags|=1,Jn(t,e,r,s),e.child)}function Rb(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!xv(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,I2(t,e,a,r,s)):(t=wf(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:od,n(o,r)&&t.ref===e.ref)return Ai(t,e,s)}return e.flags|=1,t=Aa(a,r),t.ref=e.ref,t.return=e,e.child=t}function I2(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(od(a,r)&&t.ref===e.ref)if(fr=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(fr=!0);else return e.lanes=t.lanes,Ai(t,e,s)}return ux(t,e,n,r,s)}function C2(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(Yl,_r),_r|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_t(Yl,_r),_r|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,_t(Yl,_r),_r|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,_t(Yl,_r),_r|=r;return Jn(t,e,s,n),e.child}function A2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ux(t,e,n,r,s){var a=gr(n)?Fo:qn.current;return a=jc(e,a),sc(e,s),n=av(t,e,n,r,a,s),r=ov(),t!==null&&!fr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ai(t,e,s)):(Rt&&r&&Gy(e),e.flags|=1,Jn(t,e,n,s),e.child)}function kb(t,e,n,r,s){if(gr(n)){var a=!0;Gf(e)}else a=!1;if(sc(e,s),e.stateNode===null)xf(t,e),j2(e,n,r),lx(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Jr(u):(u=gr(n)?Fo:qn.current,u=jc(e,u));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Tb(e,o,r,u),sa=!1;var p=e.memoizedState;o.state=p,Zf(e,r,o,s),c=e.memoizedState,l!==r||p!==c||pr.current||sa?(typeof h=="function"&&(ox(e,n,h,r),c=e.memoizedState),(l=sa||Sb(e,n,l,r,p,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,s2(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ds(e.type,l),o.props=u,f=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Jr(c):(c=gr(n)?Fo:qn.current,c=jc(e,c));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==c)&&Tb(e,o,r,c),sa=!1,p=e.memoizedState,o.state=p,Zf(e,r,o,s);var N=e.memoizedState;l!==f||p!==N||pr.current||sa?(typeof g=="function"&&(ox(e,n,g,r),N=e.memoizedState),(u=sa||Sb(e,n,u,r,p,N,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return dx(t,e,n,r,a,s)}function dx(t,e,n,r,s,a){A2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&yb(e,n,!1),Ai(t,e,a);r=e.stateNode,G4.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Tc(e,t.child,null,a),e.child=Tc(e,null,l,a)):Jn(t,e,l,a),e.memoizedState=r.state,s&&yb(e,n,!0),e.child}function P2(t){var e=t.stateNode;e.pendingContext?xb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&xb(t,e.context,!1),nv(t,e.containerInfo)}function Db(t,e,n,r,s){return Sc(),Yy(s),e.flags|=256,Jn(t,e,n,r),e.child}var hx={dehydrated:null,treeContext:null,retryLane:0};function fx(t){return{baseLanes:t,cachePool:null,transitions:null}}function R2(t,e,n){var r=e.pendingProps,s=Mt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_t(Mt,s&1),t===null)return ix(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=tp(o,r,0,null),t=Do(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=fx(n),e.memoizedState=hx,t):uv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Q4(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Aa(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Aa(l,a):(a=Do(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?fx(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=hx,r}return a=t.child,t=a.sibling,r=Aa(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function uv(t,e){return e=tp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function zh(t,e,n,r){return r!==null&&Yy(r),Tc(e,t.child,null,n),t=uv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Q4(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Qg(Error(J(422))),zh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=tp({mode:"visible",children:r.children},s,0,null),a=Do(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Tc(e,t.child,null,o),e.child.memoizedState=fx(o),e.memoizedState=hx,a);if(!(e.mode&1))return zh(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(J(419)),r=Qg(a,r,void 0),zh(t,e,o,r)}if(l=(o&t.childLanes)!==0,fr||l){if(r=bn,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Ci(t,s),ws(r,t,s,-1))}return gv(),r=Qg(Error(J(421))),zh(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=l5.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Cr=Sa(s.nextSibling),kr=e,Rt=!0,gs=null,t!==null&&(qr[Kr++]=xi,qr[Kr++]=yi,qr[Kr++]=Vo,xi=t.id,yi=t.overflow,Vo=e),e=uv(e,r.children),e.flags|=4096,e)}function Mb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ax(t.return,e,n)}function Yg(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function k2(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Jn(t,e,r.children,n),r=Mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Mb(t,n,e);else if(t.tag===19)Mb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_t(Mt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&em(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Yg(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&em(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Yg(e,!0,n,null,a);break;case"together":Yg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ai(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$o|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Aa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Aa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Y4(t,e,n){switch(e.tag){case 3:P2(e),Sc();break;case 5:i2(e);break;case 1:gr(e.type)&&Gf(e);break;case 4:nv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_t(Xf,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_t(Mt,Mt.current&1),e.flags|=128,null):n&e.child.childLanes?R2(t,e,n):(_t(Mt,Mt.current&1),t=Ai(t,e,n),t!==null?t.sibling:null);_t(Mt,Mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return k2(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_t(Mt,Mt.current),r)break;return null;case 22:case 23:return e.lanes=0,C2(t,e,n)}return Ai(t,e,n)}var D2,mx,M2,O2;D2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};mx=function(){};M2=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,jo(Ys.current);var a=null;switch(n){case"input":s=O0(t,s),r=O0(t,r),a=[];break;case"select":s=Ft({},s,{value:void 0}),r=Ft({},r,{value:void 0}),a=[];break;case"textarea":s=V0(t,s),r=V0(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=qf)}$0(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ed.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ed.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&St("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};O2=function(t,e,n,r){n!==r&&(e.flags|=4)};function wu(t,e){if(!Rt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function X4(t,e,n){var r=e.pendingProps;switch(Qy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vn(e),null;case 1:return gr(e.type)&&Kf(),Vn(e),null;case 3:return r=e.stateNode,Ic(),It(pr),It(qn),sv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&($h(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gs!==null&&(Nx(gs),gs=null))),mx(t,e),Vn(e),null;case 5:rv(e);var s=jo(hd.current);if(n=e.type,t!==null&&e.stateNode!=null)M2(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Vn(e),null}if(t=jo(Ys.current),$h(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Hs]=e,r[ud]=a,t=(e.mode&1)!==0,n){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(s=0;s<Tu.length;s++)St(Tu[s],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":W1(r,a),St("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},St("invalid",r);break;case"textarea":q1(r,a),St("invalid",r)}$0(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Uh(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Uh(r.textContent,l,t),s=["children",""+l]):ed.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&St("scroll",r)}switch(n){case"input":Rh(r),H1(r,a,!0);break;case"textarea":Rh(r),K1(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=qf)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uj(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hs]=e,t[ud]=r,D2(t,e,!1,!1),e.stateNode=t;e:{switch(o=B0(n,r),n){case"dialog":St("cancel",t),St("close",t),s=r;break;case"iframe":case"object":case"embed":St("load",t),s=r;break;case"video":case"audio":for(s=0;s<Tu.length;s++)St(Tu[s],t);s=r;break;case"source":St("error",t),s=r;break;case"img":case"image":case"link":St("error",t),St("load",t),s=r;break;case"details":St("toggle",t),s=r;break;case"input":W1(t,r),s=O0(t,r),St("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ft({},r,{value:void 0}),St("invalid",t);break;case"textarea":q1(t,r),s=V0(t,r),St("invalid",t);break;default:s=r}$0(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?fj(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&dj(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&td(t,c):typeof c=="number"&&td(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ed.hasOwnProperty(a)?c!=null&&a==="onScroll"&&St("scroll",t):c!=null&&Dy(t,a,c,o))}switch(n){case"input":Rh(t),H1(t,r,!1);break;case"textarea":Rh(t),K1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+La(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?ec(t,!!r.multiple,a,!1):r.defaultValue!=null&&ec(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=qf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vn(e),null;case 6:if(t&&e.stateNode!=null)O2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=jo(hd.current),jo(Ys.current),$h(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hs]=e,(a=r.nodeValue!==n)&&(t=kr,t!==null))switch(t.tag){case 3:Uh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Uh(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hs]=e,e.stateNode=r}return Vn(e),null;case 13:if(It(Mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Rt&&Cr!==null&&e.mode&1&&!(e.flags&128))e2(),Sc(),e.flags|=98560,a=!1;else if(a=$h(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(J(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(J(317));a[Hs]=e}else Sc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vn(e),a=!1}else gs!==null&&(Nx(gs),gs=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Mt.current&1?hn===0&&(hn=3):gv())),e.updateQueue!==null&&(e.flags|=4),Vn(e),null);case 4:return Ic(),mx(t,e),t===null&&ld(e.stateNode.containerInfo),Vn(e),null;case 10:return Zy(e.type._context),Vn(e),null;case 17:return gr(e.type)&&Kf(),Vn(e),null;case 19:if(It(Mt),a=e.memoizedState,a===null)return Vn(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)wu(a,!1);else{if(hn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=em(t),o!==null){for(e.flags|=128,wu(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _t(Mt,Mt.current&1|2),e.child}t=t.sibling}a.tail!==null&&Jt()>Ac&&(e.flags|=128,r=!0,wu(a,!1),e.lanes=4194304)}else{if(!r)if(t=em(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wu(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Rt)return Vn(e),null}else 2*Jt()-a.renderingStartTime>Ac&&n!==1073741824&&(e.flags|=128,r=!0,wu(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Jt(),e.sibling=null,n=Mt.current,_t(Mt,r?n&1|2:n&1),e):(Vn(e),null);case 22:case 23:return pv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_r&1073741824&&(Vn(e),e.subtreeFlags&6&&(e.flags|=8192)):Vn(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function J4(t,e){switch(Qy(e),e.tag){case 1:return gr(e.type)&&Kf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ic(),It(pr),It(qn),sv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rv(e),null;case 13:if(It(Mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Sc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return It(Mt),null;case 4:return Ic(),null;case 10:return Zy(e.type._context),null;case 22:case 23:return pv(),null;case 24:return null;default:return null}}var Wh=!1,zn=!1,Z4=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Ql(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Bt(t,e,r)}else n.current=null}function px(t,e,n){try{n()}catch(r){Bt(t,e,r)}}var Ob=!1;function e5(t,e){if(J0=zf,t=$j(),Ky(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==a||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++u===s&&(l=o),p===a&&++h===r&&(c=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Z0={focusedElem:t,selectionRange:n},zf=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var x=N.memoizedProps,b=N.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?x:ds(e.type,x),b);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(C){Bt(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return N=Ob,Ob=!1,N}function $u(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&px(e,n,a)}s=s.next}while(s!==r)}}function Zm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function gx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function L2(t){var e=t.alternate;e!==null&&(t.alternate=null,L2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hs],delete e[ud],delete e[nx],delete e[O4],delete e[L4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function F2(t){return t.tag===5||t.tag===3||t.tag===4}function Lb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||F2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=qf));else if(r!==4&&(t=t.child,t!==null))for(xx(t,e,n),t=t.sibling;t!==null;)xx(t,e,n),t=t.sibling}function yx(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(yx(t,e,n),t=t.sibling;t!==null;)yx(t,e,n),t=t.sibling}var Sn=null,ps=!1;function Xi(t,e,n){for(n=n.child;n!==null;)V2(t,e,n),n=n.sibling}function V2(t,e,n){if(Qs&&typeof Qs.onCommitFiberUnmount=="function")try{Qs.onCommitFiberUnmount(Hm,n)}catch{}switch(n.tag){case 5:zn||Ql(n,e);case 6:var r=Sn,s=ps;Sn=null,Xi(t,e,n),Sn=r,ps=s,Sn!==null&&(ps?(t=Sn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Sn.removeChild(n.stateNode));break;case 18:Sn!==null&&(ps?(t=Sn,n=n.stateNode,t.nodeType===8?zg(t.parentNode,n):t.nodeType===1&&zg(t,n),id(t)):zg(Sn,n.stateNode));break;case 4:r=Sn,s=ps,Sn=n.stateNode.containerInfo,ps=!0,Xi(t,e,n),Sn=r,ps=s;break;case 0:case 11:case 14:case 15:if(!zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&px(n,e,o),s=s.next}while(s!==r)}Xi(t,e,n);break;case 1:if(!zn&&(Ql(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Bt(n,e,l)}Xi(t,e,n);break;case 21:Xi(t,e,n);break;case 22:n.mode&1?(zn=(r=zn)||n.memoizedState!==null,Xi(t,e,n),zn=r):Xi(t,e,n);break;default:Xi(t,e,n)}}function Fb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Z4),e.forEach(function(r){var s=c5.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ls(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Sn=l.stateNode,ps=!1;break e;case 3:Sn=l.stateNode.containerInfo,ps=!0;break e;case 4:Sn=l.stateNode.containerInfo,ps=!0;break e}l=l.return}if(Sn===null)throw Error(J(160));V2(a,o,s),Sn=null,ps=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Bt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U2(e,t),e=e.sibling}function U2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ls(e,t),Fs(t),r&4){try{$u(3,t,t.return),Zm(3,t)}catch(x){Bt(t,t.return,x)}try{$u(5,t,t.return)}catch(x){Bt(t,t.return,x)}}break;case 1:ls(e,t),Fs(t),r&512&&n!==null&&Ql(n,n.return);break;case 5:if(ls(e,t),Fs(t),r&512&&n!==null&&Ql(n,n.return),t.flags&32){var s=t.stateNode;try{td(s,"")}catch(x){Bt(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&lj(s,a),B0(l,o);var u=B0(l,a);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?fj(s,f):h==="dangerouslySetInnerHTML"?dj(s,f):h==="children"?td(s,f):Dy(s,h,f,u)}switch(l){case"input":L0(s,a);break;case"textarea":cj(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?ec(s,!!a.multiple,g,!1):p!==!!a.multiple&&(a.defaultValue!=null?ec(s,!!a.multiple,a.defaultValue,!0):ec(s,!!a.multiple,a.multiple?[]:"",!1))}s[ud]=a}catch(x){Bt(t,t.return,x)}}break;case 6:if(ls(e,t),Fs(t),r&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(x){Bt(t,t.return,x)}}break;case 3:if(ls(e,t),Fs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{id(e.containerInfo)}catch(x){Bt(t,t.return,x)}break;case 4:ls(e,t),Fs(t);break;case 13:ls(e,t),Fs(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(fv=Jt())),r&4&&Fb(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(zn=(u=zn)||h,ls(e,t),zn=u):ls(e,t),Fs(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ge=t,h=t.child;h!==null;){for(f=ge=h;ge!==null;){switch(p=ge,g=p.child,p.tag){case 0:case 11:case 14:case 15:$u(4,p,p.return);break;case 1:Ql(p,p.return);var N=p.stateNode;if(typeof N.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(x){Bt(r,n,x)}}break;case 5:Ql(p,p.return);break;case 22:if(p.memoizedState!==null){Ub(f);continue}}g!==null?(g.return=p,ge=g):Ub(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=hj("display",o))}catch(x){Bt(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Bt(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ls(e,t),Fs(t),r&4&&Fb(t);break;case 21:break;default:ls(e,t),Fs(t)}}function Fs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(F2(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(td(s,""),r.flags&=-33);var a=Lb(t);yx(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Lb(t);xx(t,l,o);break;default:throw Error(J(161))}}catch(c){Bt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function t5(t,e,n){ge=t,$2(t)}function $2(t,e,n){for(var r=(t.mode&1)!==0;ge!==null;){var s=ge,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Wh;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||zn;l=Wh;var u=zn;if(Wh=o,(zn=c)&&!u)for(ge=s;ge!==null;)o=ge,c=o.child,o.tag===22&&o.memoizedState!==null?$b(s):c!==null?(c.return=o,ge=c):$b(s);for(;a!==null;)ge=a,$2(a),a=a.sibling;ge=s,Wh=l,zn=u}Vb(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ge=a):Vb(t)}}function Vb(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zn||Zm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ds(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&_b(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_b(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&id(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}zn||e.flags&512&&gx(e)}catch(p){Bt(e,e.return,p)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function Ub(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function $b(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Zm(4,e)}catch(c){Bt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Bt(e,s,c)}}var a=e.return;try{gx(e)}catch(c){Bt(e,a,c)}break;case 5:var o=e.return;try{gx(e)}catch(c){Bt(e,o,c)}}}catch(c){Bt(e,e.return,c)}if(e===t){ge=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ge=l;break}ge=e.return}}var n5=Math.ceil,rm=$i.ReactCurrentDispatcher,dv=$i.ReactCurrentOwner,Qr=$i.ReactCurrentBatchConfig,nt=0,bn=null,sn=null,Cn=0,_r=0,Yl=Ja(0),hn=0,gd=null,$o=0,ep=0,hv=0,Bu=null,ur=null,fv=0,Ac=1/0,mi=null,sm=!1,vx=null,Ia=null,Hh=!1,va=null,im=0,zu=0,wx=null,yf=-1,vf=0;function tr(){return nt&6?Jt():yf!==-1?yf:yf=Jt()}function Ca(t){return t.mode&1?nt&2&&Cn!==0?Cn&-Cn:V4.transition!==null?(vf===0&&(vf=jj()),vf):(t=mt,t!==0||(t=window.event,t=t===void 0?16:Rj(t.type)),t):1}function ws(t,e,n,r){if(50<zu)throw zu=0,wx=null,Error(J(185));Ud(t,n,r),(!(nt&2)||t!==bn)&&(t===bn&&(!(nt&2)&&(ep|=n),hn===4&&oa(t,Cn)),xr(t,r),n===1&&nt===0&&!(e.mode&1)&&(Ac=Jt()+500,Ym&&Za()))}function xr(t,e){var n=t.callbackNode;VD(t,e);var r=Bf(t,t===bn?Cn:0);if(r===0)n!==null&&Y1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Y1(n),e===1)t.tag===0?F4(Bb.bind(null,t)):Xj(Bb.bind(null,t)),D4(function(){!(nt&6)&&Za()}),n=null;else{switch(Sj(r)){case 1:n=Vy;break;case 4:n=_j;break;case 16:n=$f;break;case 536870912:n=Ej;break;default:n=$f}n=Q2(n,B2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function B2(t,e){if(yf=-1,vf=0,nt&6)throw Error(J(327));var n=t.callbackNode;if(ic()&&t.callbackNode!==n)return null;var r=Bf(t,t===bn?Cn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=am(t,r);else{e=r;var s=nt;nt|=2;var a=W2();(bn!==t||Cn!==e)&&(mi=null,Ac=Jt()+500,ko(t,e));do try{i5();break}catch(l){z2(t,l)}while(!0);Jy(),rm.current=a,nt=s,sn!==null?e=0:(bn=null,Cn=0,e=hn)}if(e!==0){if(e===2&&(s=K0(t),s!==0&&(r=s,e=bx(t,s))),e===1)throw n=gd,ko(t,0),oa(t,r),xr(t,Jt()),n;if(e===6)oa(t,r);else{if(s=t.current.alternate,!(r&30)&&!r5(s)&&(e=am(t,r),e===2&&(a=K0(t),a!==0&&(r=a,e=bx(t,a))),e===1))throw n=gd,ko(t,0),oa(t,r),xr(t,Jt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:bo(t,ur,mi);break;case 3:if(oa(t,r),(r&130023424)===r&&(e=fv+500-Jt(),10<e)){if(Bf(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){tr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=tx(bo.bind(null,t,ur,mi),e);break}bo(t,ur,mi);break;case 4:if(oa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vs(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=Jt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*n5(r/1960))-r,10<r){t.timeoutHandle=tx(bo.bind(null,t,ur,mi),r);break}bo(t,ur,mi);break;case 5:bo(t,ur,mi);break;default:throw Error(J(329))}}}return xr(t,Jt()),t.callbackNode===n?B2.bind(null,t):null}function bx(t,e){var n=Bu;return t.current.memoizedState.isDehydrated&&(ko(t,e).flags|=256),t=am(t,e),t!==2&&(e=ur,ur=n,e!==null&&Nx(e)),t}function Nx(t){ur===null?ur=t:ur.push.apply(ur,t)}function r5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!js(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function oa(t,e){for(e&=~hv,e&=~ep,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vs(e),r=1<<n;t[n]=-1,e&=~r}}function Bb(t){if(nt&6)throw Error(J(327));ic();var e=Bf(t,0);if(!(e&1))return xr(t,Jt()),null;var n=am(t,e);if(t.tag!==0&&n===2){var r=K0(t);r!==0&&(e=r,n=bx(t,r))}if(n===1)throw n=gd,ko(t,0),oa(t,e),xr(t,Jt()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bo(t,ur,mi),xr(t,Jt()),null}function mv(t,e){var n=nt;nt|=1;try{return t(e)}finally{nt=n,nt===0&&(Ac=Jt()+500,Ym&&Za())}}function Bo(t){va!==null&&va.tag===0&&!(nt&6)&&ic();var e=nt;nt|=1;var n=Qr.transition,r=mt;try{if(Qr.transition=null,mt=1,t)return t()}finally{mt=r,Qr.transition=n,nt=e,!(nt&6)&&Za()}}function pv(){_r=Yl.current,It(Yl)}function ko(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,k4(n)),sn!==null)for(n=sn.return;n!==null;){var r=n;switch(Qy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Kf();break;case 3:Ic(),It(pr),It(qn),sv();break;case 5:rv(r);break;case 4:Ic();break;case 13:It(Mt);break;case 19:It(Mt);break;case 10:Zy(r.type._context);break;case 22:case 23:pv()}n=n.return}if(bn=t,sn=t=Aa(t.current,null),Cn=_r=e,hn=0,gd=null,hv=ep=$o=0,ur=Bu=null,Eo!==null){for(e=0;e<Eo.length;e++)if(n=Eo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}Eo=null}return t}function z2(t,e){do{var n=sn;try{if(Jy(),pf.current=nm,tm){for(var r=Lt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}tm=!1}if(Uo=0,xn=un=Lt=null,Uu=!1,fd=0,dv.current=null,n===null||n.return===null){hn=1,gd=e,sn=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=Cn,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Cb(o);if(g!==null){g.flags&=-257,Ab(g,o,l,a,e),g.mode&1&&Ib(a,u,e),e=g,c=u;var N=e.updateQueue;if(N===null){var x=new Set;x.add(c),e.updateQueue=x}else N.add(c);break e}else{if(!(e&1)){Ib(a,u,e),gv();break e}c=Error(J(426))}}else if(Rt&&l.mode&1){var b=Cb(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Ab(b,o,l,a,e),Yy(Cc(c,l));break e}}a=c=Cc(c,l),hn!==4&&(hn=2),Bu===null?Bu=[a]:Bu.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var _=S2(a,c,e);Nb(a,_);break e;case 1:l=c;var w=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ia===null||!Ia.has(v)))){a.flags|=65536,e&=-e,a.lanes|=e;var C=T2(a,l,e);Nb(a,C);break e}}a=a.return}while(a!==null)}q2(n)}catch(I){e=I,sn===n&&n!==null&&(sn=n=n.return);continue}break}while(!0)}function W2(){var t=rm.current;return rm.current=nm,t===null?nm:t}function gv(){(hn===0||hn===3||hn===2)&&(hn=4),bn===null||!($o&268435455)&&!(ep&268435455)||oa(bn,Cn)}function am(t,e){var n=nt;nt|=2;var r=W2();(bn!==t||Cn!==e)&&(mi=null,ko(t,e));do try{s5();break}catch(s){z2(t,s)}while(!0);if(Jy(),nt=n,rm.current=r,sn!==null)throw Error(J(261));return bn=null,Cn=0,hn}function s5(){for(;sn!==null;)H2(sn)}function i5(){for(;sn!==null&&!AD();)H2(sn)}function H2(t){var e=G2(t.alternate,t,_r);t.memoizedProps=t.pendingProps,e===null?q2(t):sn=e,dv.current=null}function q2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=J4(n,e),n!==null){n.flags&=32767,sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hn=6,sn=null;return}}else if(n=X4(n,e,_r),n!==null){sn=n;return}if(e=e.sibling,e!==null){sn=e;return}sn=e=t}while(e!==null);hn===0&&(hn=5)}function bo(t,e,n){var r=mt,s=Qr.transition;try{Qr.transition=null,mt=1,a5(t,e,n,r)}finally{Qr.transition=s,mt=r}return null}function a5(t,e,n,r){do ic();while(va!==null);if(nt&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(UD(t,a),t===bn&&(sn=bn=null,Cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hh||(Hh=!0,Q2($f,function(){return ic(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Qr.transition,Qr.transition=null;var o=mt;mt=1;var l=nt;nt|=4,dv.current=null,e5(t,n),U2(n,t),S4(Z0),zf=!!J0,Z0=J0=null,t.current=n,t5(n),PD(),nt=l,mt=o,Qr.transition=a}else t.current=n;if(Hh&&(Hh=!1,va=t,im=s),a=t.pendingLanes,a===0&&(Ia=null),DD(n.stateNode),xr(t,Jt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(sm)throw sm=!1,t=vx,vx=null,t;return im&1&&t.tag!==0&&ic(),a=t.pendingLanes,a&1?t===wx?zu++:(zu=0,wx=t):zu=0,Za(),null}function ic(){if(va!==null){var t=Sj(im),e=Qr.transition,n=mt;try{if(Qr.transition=null,mt=16>t?16:t,va===null)var r=!1;else{if(t=va,va=null,im=0,nt&6)throw Error(J(331));var s=nt;for(nt|=4,ge=t.current;ge!==null;){var a=ge,o=a.child;if(ge.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ge=u;ge!==null;){var h=ge;switch(h.tag){case 0:case 11:case 15:$u(8,h,a)}var f=h.child;if(f!==null)f.return=h,ge=f;else for(;ge!==null;){h=ge;var p=h.sibling,g=h.return;if(L2(h),h===u){ge=null;break}if(p!==null){p.return=g,ge=p;break}ge=g}}}var N=a.alternate;if(N!==null){var x=N.child;if(x!==null){N.child=null;do{var b=x.sibling;x.sibling=null,x=b}while(x!==null)}}ge=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ge=o;else e:for(;ge!==null;){if(a=ge,a.flags&2048)switch(a.tag){case 0:case 11:case 15:$u(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,ge=_;break e}ge=a.return}}var w=t.current;for(ge=w;ge!==null;){o=ge;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ge=v;else e:for(o=w;ge!==null;){if(l=ge,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Zm(9,l)}}catch(I){Bt(l,l.return,I)}if(l===o){ge=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,ge=C;break e}ge=l.return}}if(nt=s,Za(),Qs&&typeof Qs.onPostCommitFiberRoot=="function")try{Qs.onPostCommitFiberRoot(Hm,t)}catch{}r=!0}return r}finally{mt=n,Qr.transition=e}}return!1}function zb(t,e,n){e=Cc(n,e),e=S2(t,e,1),t=Ta(t,e,1),e=tr(),t!==null&&(Ud(t,1,e),xr(t,e))}function Bt(t,e,n){if(t.tag===3)zb(t,t,n);else for(;e!==null;){if(e.tag===3){zb(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ia===null||!Ia.has(r))){t=Cc(n,t),t=T2(e,t,1),e=Ta(e,t,1),t=tr(),e!==null&&(Ud(e,1,t),xr(e,t));break}}e=e.return}}function o5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=tr(),t.pingedLanes|=t.suspendedLanes&n,bn===t&&(Cn&n)===n&&(hn===4||hn===3&&(Cn&130023424)===Cn&&500>Jt()-fv?ko(t,0):hv|=n),xr(t,e)}function K2(t,e){e===0&&(t.mode&1?(e=Mh,Mh<<=1,!(Mh&130023424)&&(Mh=4194304)):e=1);var n=tr();t=Ci(t,e),t!==null&&(Ud(t,e,n),xr(t,n))}function l5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),K2(t,n)}function c5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),K2(t,n)}var G2;G2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pr.current)fr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return fr=!1,Y4(t,e,n);fr=!!(t.flags&131072)}else fr=!1,Rt&&e.flags&1048576&&Jj(e,Yf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xf(t,e),t=e.pendingProps;var s=jc(e,qn.current);sc(e,n),s=av(null,e,r,t,s,n);var a=ov();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gr(r)?(a=!0,Gf(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,tv(e),s.updater=Jm,e.stateNode=s,s._reactInternals=e,lx(e,r,t,n),e=dx(null,e,r,!0,a,n)):(e.tag=0,Rt&&a&&Gy(e),Jn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xf(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=d5(r),t=ds(r,t),s){case 0:e=ux(null,e,r,t,n);break e;case 1:e=kb(null,e,r,t,n);break e;case 11:e=Pb(null,e,r,t,n);break e;case 14:e=Rb(null,e,r,ds(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),ux(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),kb(t,e,r,s,n);case 3:e:{if(P2(e),t===null)throw Error(J(387));r=e.pendingProps,a=e.memoizedState,s=a.element,s2(t,e),Zf(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=Cc(Error(J(423)),e),e=Db(t,e,r,n,s);break e}else if(r!==s){s=Cc(Error(J(424)),e),e=Db(t,e,r,n,s);break e}else for(Cr=Sa(e.stateNode.containerInfo.firstChild),kr=e,Rt=!0,gs=null,n=n2(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sc(),r===s){e=Ai(t,e,n);break e}Jn(t,e,r,n)}e=e.child}return e;case 5:return i2(e),t===null&&ix(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,ex(r,s)?o=null:a!==null&&ex(r,a)&&(e.flags|=32),A2(t,e),Jn(t,e,o,n),e.child;case 6:return t===null&&ix(e),null;case 13:return R2(t,e,n);case 4:return nv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Tc(e,null,r,n):Jn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),Pb(t,e,r,s,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,_t(Xf,r._currentValue),r._currentValue=o,a!==null)if(js(a.value,o)){if(a.children===s.children&&!pr.current){e=Ai(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=_i(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),ax(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(J(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ax(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Jn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,sc(e,n),s=Jr(s),r=r(s),e.flags|=1,Jn(t,e,r,n),e.child;case 14:return r=e.type,s=ds(r,e.pendingProps),s=ds(r.type,s),Rb(t,e,r,s,n);case 15:return I2(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ds(r,s),xf(t,e),e.tag=1,gr(r)?(t=!0,Gf(e)):t=!1,sc(e,n),j2(e,r,s),lx(e,r,s,n),dx(null,e,r,!0,t,n);case 19:return k2(t,e,n);case 22:return C2(t,e,n)}throw Error(J(156,e.tag))};function Q2(t,e){return Nj(t,e)}function u5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,e,n,r){return new u5(t,e,n,r)}function xv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function d5(t){if(typeof t=="function")return xv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Oy)return 11;if(t===Ly)return 14}return 2}function Aa(t,e){var n=t.alternate;return n===null?(n=Gr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wf(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")xv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ul:return Do(n.children,s,a,e);case My:o=8,s|=8;break;case R0:return t=Gr(12,n,e,s|2),t.elementType=R0,t.lanes=a,t;case k0:return t=Gr(13,n,e,s),t.elementType=k0,t.lanes=a,t;case D0:return t=Gr(19,n,e,s),t.elementType=D0,t.lanes=a,t;case ij:return tp(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rj:o=10;break e;case sj:o=9;break e;case Oy:o=11;break e;case Ly:o=14;break e;case ra:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Gr(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function Do(t,e,n,r){return t=Gr(7,t,r,e),t.lanes=n,t}function tp(t,e,n,r){return t=Gr(22,t,r,e),t.elementType=ij,t.lanes=n,t.stateNode={isHidden:!1},t}function Xg(t,e,n){return t=Gr(6,t,null,e),t.lanes=n,t}function Jg(t,e,n){return e=Gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function h5(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rg(0),this.expirationTimes=Rg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rg(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yv(t,e,n,r,s,a,o,l,c){return t=new h5(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Gr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tv(a),t}function f5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Y2(t){if(!t)return Fa;t=t._reactInternals;e:{if(il(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(gr(n))return Yj(t,n,e)}return e}function X2(t,e,n,r,s,a,o,l,c){return t=yv(n,r,!0,t,s,a,o,l,c),t.context=Y2(null),n=t.current,r=tr(),s=Ca(n),a=_i(r,s),a.callback=e??null,Ta(n,a,s),t.current.lanes=s,Ud(t,s,r),xr(t,r),t}function np(t,e,n,r){var s=e.current,a=tr(),o=Ca(s);return n=Y2(n),e.context===null?e.context=n:e.pendingContext=n,e=_i(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ta(s,e,o),t!==null&&(ws(t,s,o,a),mf(t,s,o)),o}function om(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function vv(t,e){Wb(t,e),(t=t.alternate)&&Wb(t,e)}function m5(){return null}var J2=typeof reportError=="function"?reportError:function(t){console.error(t)};function wv(t){this._internalRoot=t}rp.prototype.render=wv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));np(t,e,null,null)};rp.prototype.unmount=wv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bo(function(){np(null,t,null,null)}),e[Ii]=null}};function rp(t){this._internalRoot=t}rp.prototype.unstable_scheduleHydration=function(t){if(t){var e=Cj();t={blockedOn:null,target:t,priority:e};for(var n=0;n<aa.length&&e!==0&&e<aa[n].priority;n++);aa.splice(n,0,t),n===0&&Pj(t)}};function bv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Hb(){}function p5(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=om(o);a.call(u)}}var o=X2(e,r,t,0,null,!1,!1,"",Hb);return t._reactRootContainer=o,t[Ii]=o.current,ld(t.nodeType===8?t.parentNode:t),Bo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=om(c);l.call(u)}}var c=yv(t,0,!1,null,null,!1,!1,"",Hb);return t._reactRootContainer=c,t[Ii]=c.current,ld(t.nodeType===8?t.parentNode:t),Bo(function(){np(e,c,n,r)}),c}function ip(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=om(o);l.call(c)}}np(e,o,t,s)}else o=p5(n,e,t,s,r);return om(o)}Tj=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Su(e.pendingLanes);n!==0&&(Uy(e,n|1),xr(e,Jt()),!(nt&6)&&(Ac=Jt()+500,Za()))}break;case 13:Bo(function(){var r=Ci(t,1);if(r!==null){var s=tr();ws(r,t,1,s)}}),vv(t,1)}};$y=function(t){if(t.tag===13){var e=Ci(t,134217728);if(e!==null){var n=tr();ws(e,t,134217728,n)}vv(t,134217728)}};Ij=function(t){if(t.tag===13){var e=Ca(t),n=Ci(t,e);if(n!==null){var r=tr();ws(n,t,e,r)}vv(t,e)}};Cj=function(){return mt};Aj=function(t,e){var n=mt;try{return mt=t,e()}finally{mt=n}};W0=function(t,e,n){switch(e){case"input":if(L0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Qm(r);if(!s)throw Error(J(90));oj(r),L0(r,s)}}}break;case"textarea":cj(t,n);break;case"select":e=n.value,e!=null&&ec(t,!!n.multiple,e,!1)}};gj=mv;xj=Bo;var g5={usingClientEntryPoint:!1,Events:[Bd,Wl,Qm,mj,pj,mv]},bu={findFiberByHostInstance:_o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},x5={bundleType:bu.bundleType,version:bu.version,rendererPackageName:bu.rendererPackageName,rendererConfig:bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$i.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wj(t),t===null?null:t.stateNode},findFiberByHostInstance:bu.findFiberByHostInstance||m5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qh.isDisabled&&qh.supportsFiber)try{Hm=qh.inject(x5),Qs=qh}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g5;Or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bv(e))throw Error(J(200));return f5(t,e,null,n)};Or.createRoot=function(t,e){if(!bv(t))throw Error(J(299));var n=!1,r="",s=J2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yv(t,1,!1,null,null,n,!1,r,s),t[Ii]=e.current,ld(t.nodeType===8?t.parentNode:t),new wv(e)};Or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=wj(e),t=t===null?null:t.stateNode,t};Or.flushSync=function(t){return Bo(t)};Or.hydrate=function(t,e,n){if(!sp(e))throw Error(J(200));return ip(null,t,e,!0,n)};Or.hydrateRoot=function(t,e,n){if(!bv(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=J2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=X2(e,null,t,1,n??null,s,!1,a,o),t[Ii]=e.current,ld(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new rp(e)};Or.render=function(t,e,n){if(!sp(e))throw Error(J(200));return ip(null,t,e,!1,n)};Or.unmountComponentAtNode=function(t){if(!sp(t))throw Error(J(40));return t._reactRootContainer?(Bo(function(){ip(null,null,t,!1,function(){t._reactRootContainer=null,t[Ii]=null})}),!0):!1};Or.unstable_batchedUpdates=mv;Or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sp(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return ip(t,e,n,!1,r)};Or.version="18.3.1-next-f1338f8080-20240426";function Z2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z2)}catch(t){console.error(t)}}Z2(),ZE.exports=Or;var al=ZE.exports;const eS=$E(al);var tS,qb=al;tS=qb.createRoot,qb.hydrateRoot;const y5=1,v5=1e6;let Zg=0;function w5(){return Zg=(Zg+1)%Number.MAX_SAFE_INTEGER,Zg.toString()}const e0=new Map,Kb=t=>{if(e0.has(t))return;const e=setTimeout(()=>{e0.delete(t),Wu({type:"REMOVE_TOAST",toastId:t})},v5);e0.set(t,e)},b5=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,y5)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Kb(n):t.toasts.forEach(r=>{Kb(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},bf=[];let Nf={toasts:[]};function Wu(t){Nf=b5(Nf,t),bf.forEach(e=>{e(Nf)})}function N5({...t}){const e=w5(),n=s=>Wu({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>Wu({type:"DISMISS_TOAST",toastId:e});return Wu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function _n(){const[t,e]=m.useState(Nf);return m.useEffect(()=>(bf.push(e),()=>{const n=bf.indexOf(e);n>-1&&bf.splice(n,1)}),[t]),{...t,toast:N5,dismiss:n=>Wu({type:"DISMISS_TOAST",toastId:n})}}function ce(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Gb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function ap(...t){return e=>{let n=!1;const r=t.map(s=>{const a=Gb(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():Gb(t[s],null)}}}}function rt(...t){return m.useCallback(ap(...t),t)}function _5(t,e){const n=m.createContext(e),r=a=>{const{children:o,...l}=a,c=m.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(a){const o=m.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${t}\``)}return[r,s]}function Fr(t,e=[]){let n=[];function r(a,o){const l=m.createContext(o),c=n.length;n=[...n,o];const u=f=>{var _;const{scope:p,children:g,...N}=f,x=((_=p==null?void 0:p[t])==null?void 0:_[c])||l,b=m.useMemo(()=>N,Object.values(N));return i.jsx(x.Provider,{value:b,children:g})};u.displayName=a+"Provider";function h(f,p){var x;const g=((x=p==null?void 0:p[t])==null?void 0:x[c])||l,N=m.useContext(g);if(N)return N;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${a}\``)}return[u,h]}const s=()=>{const a=n.map(o=>m.createContext(o));return function(l){const c=(l==null?void 0:l[t])||a;return m.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,E5(s,...e)]}function E5(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const o=r.reduce((l,{useScope:c,scopeName:u})=>{const f=c(a)[`__scope${u}`];return{...l,...f}},{});return m.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function zo(t){const e=S5(t),n=m.forwardRef((r,s)=>{const{children:a,...o}=r,l=m.Children.toArray(a),c=l.find(I5);if(c){const u=c.props.children,h=l.map(f=>f===c?m.Children.count(u)>1?m.Children.only(null):m.isValidElement(u)?u.props.children:null:f);return i.jsx(e,{...o,ref:s,children:m.isValidElement(u)?m.cloneElement(u,void 0,h):null})}return i.jsx(e,{...o,ref:s,children:a})});return n.displayName=`${t}.Slot`,n}var j5=zo("Slot");function S5(t){const e=m.forwardRef((n,r)=>{const{children:s,...a}=n;if(m.isValidElement(s)){const o=A5(s),l=C5(a,s.props);return s.type!==m.Fragment&&(l.ref=r?ap(r,o):o),m.cloneElement(s,l)}return m.Children.count(s)>1?m.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var nS=Symbol("radix.slottable");function T5(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=nS,e}function I5(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===nS}function C5(t,e){const n={...e};for(const r in e){const s=t[r],a=e[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...t,...n}}function A5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function op(t){const e=t+"CollectionProvider",[n,r]=Fr(e),[s,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:b,children:_}=x,w=te.useRef(null),v=te.useRef(new Map).current;return i.jsx(s,{scope:b,itemMap:v,collectionRef:w,children:_})};o.displayName=e;const l=t+"CollectionSlot",c=zo(l),u=te.forwardRef((x,b)=>{const{scope:_,children:w}=x,v=a(l,_),C=rt(b,v.collectionRef);return i.jsx(c,{ref:C,children:w})});u.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",p=zo(h),g=te.forwardRef((x,b)=>{const{scope:_,children:w,...v}=x,C=te.useRef(null),I=rt(b,C),R=a(h,_);return te.useEffect(()=>(R.itemMap.set(C,{ref:C,...v}),()=>void R.itemMap.delete(C))),i.jsx(p,{[f]:"",ref:I,children:w})});g.displayName=h;function N(x){const b=a(t+"CollectionConsumer",x);return te.useCallback(()=>{const w=b.collectionRef.current;if(!w)return[];const v=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(b.itemMap.values()).sort((R,j)=>v.indexOf(R.ref.current)-v.indexOf(j.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},N,r]}var P5=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],je=P5.reduce((t,e)=>{const n=zo(`Primitive.${e}`),r=m.forwardRef((s,a)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Nv(t,e){t&&al.flushSync(()=>t.dispatchEvent(e))}function nr(t){const e=m.useRef(t);return m.useEffect(()=>{e.current=t}),m.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function R5(t,e=globalThis==null?void 0:globalThis.document){const n=nr(t);m.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var k5="DismissableLayer",_x="dismissableLayer.update",D5="dismissableLayer.pointerDownOutside",M5="dismissableLayer.focusOutside",Qb,rS=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zc=m.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=t,u=m.useContext(rS),[h,f]=m.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=m.useState({}),N=rt(e,j=>f(j)),x=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),_=x.indexOf(b),w=h?x.indexOf(h):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,C=w>=_,I=L5(j=>{const S=j.target,T=[...u.branches].some(P=>P.contains(S));!C||T||(s==null||s(j),o==null||o(j),j.defaultPrevented||l==null||l())},p),R=F5(j=>{const S=j.target;[...u.branches].some(P=>P.contains(S))||(a==null||a(j),o==null||o(j),j.defaultPrevented||l==null||l())},p);return R5(j=>{w===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&l&&(j.preventDefault(),l()))},p),m.useEffect(()=>{if(h)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(Qb=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(h)),u.layers.add(h),Yb(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Qb)}},[h,p,n,u]),m.useEffect(()=>()=>{h&&(u.layers.delete(h),u.layersWithOutsidePointerEventsDisabled.delete(h),Yb())},[h,u]),m.useEffect(()=>{const j=()=>g({});return document.addEventListener(_x,j),()=>document.removeEventListener(_x,j)},[]),i.jsx(je.div,{...c,ref:N,style:{pointerEvents:v?C?"auto":"none":void 0,...t.style},onFocusCapture:ce(t.onFocusCapture,R.onFocusCapture),onBlurCapture:ce(t.onBlurCapture,R.onBlurCapture),onPointerDownCapture:ce(t.onPointerDownCapture,I.onPointerDownCapture)})});zc.displayName=k5;var O5="DismissableLayerBranch",sS=m.forwardRef((t,e)=>{const n=m.useContext(rS),r=m.useRef(null),s=rt(e,r);return m.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),i.jsx(je.div,{...t,ref:s})});sS.displayName=O5;function L5(t,e=globalThis==null?void 0:globalThis.document){const n=nr(t),r=m.useRef(!1),s=m.useRef(()=>{});return m.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){iS(D5,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",a),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function F5(t,e=globalThis==null?void 0:globalThis.document){const n=nr(t),r=m.useRef(!1);return m.useEffect(()=>{const s=a=>{a.target&&!r.current&&iS(M5,n,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function Yb(){const t=new CustomEvent(_x);document.dispatchEvent(t)}function iS(t,e,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Nv(s,a):s.dispatchEvent(a)}var V5=zc,U5=sS,ln=globalThis!=null&&globalThis.document?m.useLayoutEffect:()=>{},$5="Portal",Wd=m.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,a]=m.useState(!1);ln(()=>a(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?eS.createPortal(i.jsx(je.div,{...r,ref:e}),o):null});Wd.displayName=$5;function B5(t,e){return m.useReducer((n,r)=>e[n][r]??n,t)}var Ps=t=>{const{present:e,children:n}=t,r=z5(e),s=typeof n=="function"?n({present:r.isPresent}):m.Children.only(n),a=rt(r.ref,W5(s));return typeof n=="function"||r.isPresent?m.cloneElement(s,{ref:a}):null};Ps.displayName="Presence";function z5(t){const[e,n]=m.useState(),r=m.useRef(null),s=m.useRef(t),a=m.useRef("none"),o=t?"mounted":"unmounted",[l,c]=B5(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const u=Kh(r.current);a.current=l==="mounted"?u:"none"},[l]),ln(()=>{const u=r.current,h=s.current;if(h!==t){const p=a.current,g=Kh(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(h&&p!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),ln(()=>{if(e){let u;const h=e.ownerDocument.defaultView??window,f=g=>{const x=Kh(r.current).includes(g.animationName);if(g.target===e&&x&&(c("ANIMATION_END"),!s.current)){const b=e.style.animationFillMode;e.style.animationFillMode="forwards",u=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=b)})}},p=g=>{g.target===e&&(a.current=Kh(r.current))};return e.addEventListener("animationstart",p),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(u),e.removeEventListener("animationstart",p),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:m.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function Kh(t){return(t==null?void 0:t.animationName)||"none"}function W5(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var H5=Py[" useInsertionEffect ".trim().toString()]||ln;function Va({prop:t,defaultProp:e,onChange:n=()=>{},caller:r}){const[s,a,o]=q5({defaultProp:e,onChange:n}),l=t!==void 0,c=l?t:s;{const h=m.useRef(t!==void 0);m.useEffect(()=>{const f=h.current;f!==l&&console.warn(`${r} is changing from ${f?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,r])}const u=m.useCallback(h=>{var f;if(l){const p=K5(h)?h(t):h;p!==t&&((f=o.current)==null||f.call(o,p))}else a(h)},[l,t,a,o]);return[c,u]}function q5({defaultProp:t,onChange:e}){const[n,r]=m.useState(t),s=m.useRef(n),a=m.useRef(e);return H5(()=>{a.current=e},[e]),m.useEffect(()=>{var o;s.current!==n&&((o=a.current)==null||o.call(a,n),s.current=n)},[n,s]),[n,r,a]}function K5(t){return typeof t=="function"}var aS=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),G5="VisuallyHidden",lp=m.forwardRef((t,e)=>i.jsx(je.span,{...t,ref:e,style:{...aS,...t.style}}));lp.displayName=G5;var Q5=lp,_v="ToastProvider",[Ev,Y5,X5]=op("Toast"),[oS,TK]=Fr("Toast",[X5]),[J5,cp]=oS(_v),lS=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=t,[l,c]=m.useState(null),[u,h]=m.useState(0),f=m.useRef(!1),p=m.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${_v}\`. Expected non-empty \`string\`.`),i.jsx(Ev.Provider,{scope:e,children:i.jsx(J5,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:m.useCallback(()=>h(g=>g+1),[]),onToastRemove:m.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:p,children:o})})};lS.displayName=_v;var cS="ToastViewport",Z5=["F8"],Ex="toast.viewportPause",jx="toast.viewportResume",uS=m.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Z5,label:s="Notifications ({hotkey})",...a}=t,o=cp(cS,n),l=Y5(n),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),f=m.useRef(null),p=rt(e,f,o.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=o.toastCount>0;m.useEffect(()=>{const b=_=>{var v;r.length!==0&&r.every(C=>_[C]||_.code===C)&&((v=f.current)==null||v.focus())};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),m.useEffect(()=>{const b=c.current,_=f.current;if(N&&b&&_){const w=()=>{if(!o.isClosePausedRef.current){const R=new CustomEvent(Ex);_.dispatchEvent(R),o.isClosePausedRef.current=!0}},v=()=>{if(o.isClosePausedRef.current){const R=new CustomEvent(jx);_.dispatchEvent(R),o.isClosePausedRef.current=!1}},C=R=>{!b.contains(R.relatedTarget)&&v()},I=()=>{b.contains(document.activeElement)||v()};return b.addEventListener("focusin",w),b.addEventListener("focusout",C),b.addEventListener("pointermove",w),b.addEventListener("pointerleave",I),window.addEventListener("blur",w),window.addEventListener("focus",v),()=>{b.removeEventListener("focusin",w),b.removeEventListener("focusout",C),b.removeEventListener("pointermove",w),b.removeEventListener("pointerleave",I),window.removeEventListener("blur",w),window.removeEventListener("focus",v)}}},[N,o.isClosePausedRef]);const x=m.useCallback(({tabbingDirection:b})=>{const w=l().map(v=>{const C=v.ref.current,I=[C,...h3(C)];return b==="forwards"?I:I.reverse()});return(b==="forwards"?w.reverse():w).flat()},[l]);return m.useEffect(()=>{const b=f.current;if(b){const _=w=>{var I,R,j;const v=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!v){const S=document.activeElement,T=w.shiftKey;if(w.target===b&&T){(I=u.current)==null||I.focus();return}const D=x({tabbingDirection:T?"backwards":"forwards"}),M=D.findIndex($=>$===S);t0(D.slice(M+1))?w.preventDefault():T?(R=u.current)==null||R.focus():(j=h.current)==null||j.focus()}};return b.addEventListener("keydown",_),()=>b.removeEventListener("keydown",_)}},[l,x]),i.jsxs(U5,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&i.jsx(Sx,{ref:u,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"forwards"});t0(b)}}),i.jsx(Ev.Slot,{scope:n,children:i.jsx(je.ol,{tabIndex:-1,...a,ref:p})}),N&&i.jsx(Sx,{ref:h,onFocusFromOutsideViewport:()=>{const b=x({tabbingDirection:"backwards"});t0(b)}})]})});uS.displayName=cS;var dS="ToastFocusProxy",Sx=m.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,a=cp(dS,n);return i.jsx(lp,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=a.viewport)!=null&&u.contains(l))&&r()}})});Sx.displayName=dS;var Hd="Toast",e3="toast.swipeStart",t3="toast.swipeMove",n3="toast.swipeCancel",r3="toast.swipeEnd",hS=m.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...o}=t,[l,c]=Va({prop:r,defaultProp:s??!0,onChange:a,caller:Hd});return i.jsx(Ps,{present:n||l,children:i.jsx(a3,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:nr(t.onPause),onResume:nr(t.onResume),onSwipeStart:ce(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ce(t.onSwipeMove,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ce(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ce(t.onSwipeEnd,u=>{const{x:h,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});hS.displayName=Hd;var[s3,i3]=oS(Hd,{onClose(){}}),a3=m.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:p,onSwipeEnd:g,...N}=t,x=cp(Hd,n),[b,_]=m.useState(null),w=rt(e,$=>_($)),v=m.useRef(null),C=m.useRef(null),I=s||x.duration,R=m.useRef(0),j=m.useRef(I),S=m.useRef(0),{onToastAdd:T,onToastRemove:P}=x,A=nr(()=>{var se;(b==null?void 0:b.contains(document.activeElement))&&((se=x.viewport)==null||se.focus()),o()}),D=m.useCallback($=>{!$||$===1/0||(window.clearTimeout(S.current),R.current=new Date().getTime(),S.current=window.setTimeout(A,$))},[A]);m.useEffect(()=>{const $=x.viewport;if($){const se=()=>{D(j.current),u==null||u()},W=()=>{const X=new Date().getTime()-R.current;j.current=j.current-X,window.clearTimeout(S.current),c==null||c()};return $.addEventListener(Ex,W),$.addEventListener(jx,se),()=>{$.removeEventListener(Ex,W),$.removeEventListener(jx,se)}}},[x.viewport,I,c,u,D]),m.useEffect(()=>{a&&!x.isClosePausedRef.current&&D(I)},[a,I,x.isClosePausedRef,D]),m.useEffect(()=>(T(),()=>P()),[T,P]);const M=m.useMemo(()=>b?vS(b):null,[b]);return x.viewport?i.jsxs(i.Fragment,{children:[M&&i.jsx(o3,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:M}),i.jsx(s3,{scope:n,onClose:A,children:al.createPortal(i.jsx(Ev.ItemSlot,{scope:n,children:i.jsx(V5,{asChild:!0,onEscapeKeyDown:ce(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||A(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(je.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":x.swipeDirection,...N,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:ce(t.onKeyDown,$=>{$.key==="Escape"&&(l==null||l($.nativeEvent),$.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,A()))}),onPointerDown:ce(t.onPointerDown,$=>{$.button===0&&(v.current={x:$.clientX,y:$.clientY})}),onPointerMove:ce(t.onPointerMove,$=>{if(!v.current)return;const se=$.clientX-v.current.x,W=$.clientY-v.current.y,X=!!C.current,U=["left","right"].includes(x.swipeDirection),L=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,Q=U?L(0,se):0,he=U?0:L(0,W),ne=$.pointerType==="touch"?10:2,me={x:Q,y:he},Ne={originalEvent:$,delta:me};X?(C.current=me,Gh(t3,f,Ne,{discrete:!1})):Xb(me,x.swipeDirection,ne)?(C.current=me,Gh(e3,h,Ne,{discrete:!1}),$.target.setPointerCapture($.pointerId)):(Math.abs(se)>ne||Math.abs(W)>ne)&&(v.current=null)}),onPointerUp:ce(t.onPointerUp,$=>{const se=C.current,W=$.target;if(W.hasPointerCapture($.pointerId)&&W.releasePointerCapture($.pointerId),C.current=null,v.current=null,se){const X=$.currentTarget,U={originalEvent:$,delta:se};Xb(se,x.swipeDirection,x.swipeThreshold)?Gh(r3,g,U,{discrete:!0}):Gh(n3,p,U,{discrete:!0}),X.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),o3=t=>{const{__scopeToast:e,children:n,...r}=t,s=cp(Hd,e),[a,o]=m.useState(!1),[l,c]=m.useState(!1);return u3(()=>o(!0)),m.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Wd,{asChild:!0,children:i.jsx(lp,{...r,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},l3="ToastTitle",fS=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(je.div,{...r,ref:e})});fS.displayName=l3;var c3="ToastDescription",mS=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(je.div,{...r,ref:e})});mS.displayName=c3;var pS="ToastAction",gS=m.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?i.jsx(yS,{altText:n,asChild:!0,children:i.jsx(jv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${pS}\`. Expected non-empty \`string\`.`),null)});gS.displayName=pS;var xS="ToastClose",jv=m.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=i3(xS,n);return i.jsx(yS,{asChild:!0,children:i.jsx(je.button,{type:"button",...r,ref:e,onClick:ce(t.onClick,s.onClose)})})});jv.displayName=xS;var yS=m.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return i.jsx(je.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function vS(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),d3(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...vS(r))}}),e}function Gh(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Nv(s,a):s.dispatchEvent(a)}var Xb=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),a=r>s;return e==="left"||e==="right"?a&&r>n:!a&&s>n};function u3(t=()=>{}){const e=nr(t);ln(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function d3(t){return t.nodeType===t.ELEMENT_NODE}function h3(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function t0(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var f3=lS,wS=uS,bS=hS,NS=fS,_S=mS,ES=gS,jS=jv;function SS(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=SS(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function TS(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=SS(t))&&(r&&(r+=" "),r+=e);return r}const Jb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Zb=TS,qd=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return Zb(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:a}=e,o=Object.keys(s).map(u=>{const h=n==null?void 0:n[u],f=a==null?void 0:a[u];if(h===null)return null;const p=Jb(h)||Jb(f);return s[u][p]}),l=n&&Object.entries(n).reduce((u,h)=>{let[f,p]=h;return p===void 0||(u[f]=p),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,h)=>{let{class:f,className:p,...g}=h;return Object.entries(g).every(N=>{let[x,b]=N;return Array.isArray(b)?b.includes({...a,...l}[x]):{...a,...l}[x]===b})?[...u,f,p]:u},[]);return Zb(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IS=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=m.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...p3,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:IS("lucide",s),...l},[...o.map(([u,h])=>m.createElement(u,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=(t,e)=>{const n=m.forwardRef(({className:r,...s},a)=>m.createElement(g3,{ref:a,iconNode:e,className:IS(`lucide-${m3(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hu=ae("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=ae("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=ae("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const up=ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _f=ae("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=ae("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=ae("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=ae("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=ae("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=ae("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=ae("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=ae("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=ae("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AS=ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=ae("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=ae("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=ae("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=ae("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=ae("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=ae("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=ae("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=ae("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=ae("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=ae("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=ae("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=ae("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=ae("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=ae("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=ae("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=ae("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=ae("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PS=ae("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=ae("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=ae("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=ae("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=ae("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=ae("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=ae("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=ae("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=ae("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kS=ae("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=ae("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=ae("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=ae("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=ae("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hp=ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=ae("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=ae("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=ae("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=ae("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=ae("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=ae("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=ae("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=ae("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=ae("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=ae("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jf=ae("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=ae("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=ae("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=ae("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=ae("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ae("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=ae("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=ae("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=ae("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=ae("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Pv="-",U3=t=>{const e=B3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Pv);return l[0]===""&&l.length!==1&&l.shift(),OS(l,e)||$3(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},OS=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?OS(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const a=t.join(Pv);return(o=e.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},nN=/^\[(.+)\]$/,$3=t=>{if(nN.test(t)){const e=nN.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},B3=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return W3(Object.entries(t.classGroups),n).forEach(([a,o])=>{Cx(o,r,a,e)}),r},Cx=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const a=s===""?e:rN(e,s);a.classGroupId=n;return}if(typeof s=="function"){if(z3(s)){Cx(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([a,o])=>{Cx(o,rN(e,a),n,r)})})},rN=(t,e)=>{let n=t;return e.split(Pv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},z3=t=>t.isThemeGetter,W3=(t,e)=>e?t.map(([n,r])=>{const s=r.map(a=>typeof a=="string"?e+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[e+o,l])):a);return[n,s]}):t,H3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(a,o)=>{n.set(a,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(a){let o=n.get(a);if(o!==void 0)return o;if((o=r.get(a))!==void 0)return s(a,o),o},set(a,o){n.has(a)?n.set(a,o):s(a,o)}}},LS="!",q3=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],a=e.length,o=l=>{const c=[];let u=0,h=0,f;for(let b=0;b<l.length;b++){let _=l[b];if(u===0){if(_===s&&(r||l.slice(b,b+a)===e)){c.push(l.slice(h,b)),h=b+a;continue}if(_==="/"){f=b;continue}}_==="["?u++:_==="]"&&u--}const p=c.length===0?l:l.substring(h),g=p.startsWith(LS),N=g?p.substring(1):p,x=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:N,maybePostfixModifierPosition:x}};return n?l=>n({className:l,parseClassName:o}):o},K3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},G3=t=>({cache:H3(t.cacheSize),parseClassName:q3(t),...U3(t)}),Q3=/\s+/,Y3=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,a=[],o=t.trim().split(Q3);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let N=!!g,x=r(N?p.substring(0,g):p);if(!x){if(!N){l=u+(l.length>0?" "+l:l);continue}if(x=r(p),!x){l=u+(l.length>0?" "+l:l);continue}N=!1}const b=K3(h).join(":"),_=f?b+LS:b,w=_+x;if(a.includes(w))continue;a.push(w);const v=s(x,N);for(let C=0;C<v.length;++C){const I=v[C];a.push(_+I)}l=u+(l.length>0?" "+l:l)}return l};function X3(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=FS(e))&&(r&&(r+=" "),r+=n);return r}const FS=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=FS(t[r]))&&(n&&(n+=" "),n+=e);return n};function J3(t,...e){let n,r,s,a=o;function o(c){const u=e.reduce((h,f)=>f(h),t());return n=G3(u),r=n.cache.get,s=n.cache.set,a=l,l(c)}function l(c){const u=r(c);if(u)return u;const h=Y3(c,n);return s(c,h),h}return function(){return a(X3.apply(null,arguments))}}const jt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},VS=/^\[(?:([a-z-]+):)?(.+)\]$/i,Z3=/^\d+\/\d+$/,eM=new Set(["px","full","screen"]),tM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,iM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,hi=t=>lc(t)||eM.has(t)||Z3.test(t),Ji=t=>Wc(t,"length",fM),lc=t=>!!t&&!Number.isNaN(Number(t)),r0=t=>Wc(t,"number",lc),Nu=t=>!!t&&Number.isInteger(Number(t)),aM=t=>t.endsWith("%")&&lc(t.slice(0,-1)),qe=t=>VS.test(t),Zi=t=>tM.test(t),oM=new Set(["length","size","percentage"]),lM=t=>Wc(t,oM,US),cM=t=>Wc(t,"position",US),uM=new Set(["image","url"]),dM=t=>Wc(t,uM,pM),hM=t=>Wc(t,"",mM),_u=()=>!0,Wc=(t,e,n)=>{const r=VS.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},fM=t=>nM.test(t)&&!rM.test(t),US=()=>!1,mM=t=>sM.test(t),pM=t=>iM.test(t),gM=()=>{const t=jt("colors"),e=jt("spacing"),n=jt("blur"),r=jt("brightness"),s=jt("borderColor"),a=jt("borderRadius"),o=jt("borderSpacing"),l=jt("borderWidth"),c=jt("contrast"),u=jt("grayscale"),h=jt("hueRotate"),f=jt("invert"),p=jt("gap"),g=jt("gradientColorStops"),N=jt("gradientColorStopPositions"),x=jt("inset"),b=jt("margin"),_=jt("opacity"),w=jt("padding"),v=jt("saturate"),C=jt("scale"),I=jt("sepia"),R=jt("skew"),j=jt("space"),S=jt("translate"),T=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],A=()=>["auto",qe,e],D=()=>[qe,e],M=()=>["",hi,Ji],$=()=>["auto",lc,qe],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],W=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",qe],Q=()=>["auto","avoid","all","avoid-page","page","left","right","column"],he=()=>[lc,qe];return{cacheSize:500,separator:":",theme:{colors:[_u],spacing:[hi,Ji],blur:["none","",Zi,qe],brightness:he(),borderColor:[t],borderRadius:["none","","full",Zi,qe],borderSpacing:D(),borderWidth:M(),contrast:he(),grayscale:L(),hueRotate:he(),invert:L(),gap:D(),gradientColorStops:[t],gradientColorStopPositions:[aM,Ji],inset:A(),margin:A(),opacity:he(),padding:D(),saturate:he(),scale:he(),sepia:L(),skew:he(),space:D(),translate:D()},classGroups:{aspect:[{aspect:["auto","square","video",qe]}],container:["container"],columns:[{columns:[Zi]}],"break-after":[{"break-after":Q()}],"break-before":[{"break-before":Q()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),qe]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nu,qe]}],basis:[{basis:A()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",qe]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Nu,qe]}],"grid-cols":[{"grid-cols":[_u]}],"col-start-end":[{col:["auto",{span:["full",Nu,qe]},qe]}],"col-start":[{"col-start":$()}],"col-end":[{"col-end":$()}],"grid-rows":[{"grid-rows":[_u]}],"row-start-end":[{row:["auto",{span:[Nu,qe]},qe]}],"row-start":[{"row-start":$()}],"row-end":[{"row-end":$()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",qe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",qe]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[b]}],mx:[{mx:[b]}],my:[{my:[b]}],ms:[{ms:[b]}],me:[{me:[b]}],mt:[{mt:[b]}],mr:[{mr:[b]}],mb:[{mb:[b]}],ml:[{ml:[b]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",qe,e]}],"min-w":[{"min-w":[qe,e,"min","max","fit"]}],"max-w":[{"max-w":[qe,e,"none","full","min","max","fit","prose",{screen:[Zi]},Zi]}],h:[{h:[qe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[qe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[qe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Zi,Ji]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",r0]}],"font-family":[{font:[_u]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",qe]}],"line-clamp":[{"line-clamp":["none",lc,r0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",hi,qe]}],"list-image":[{"list-image":["none",qe]}],"list-style-type":[{list:["none","disc","decimal",qe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...W(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",hi,Ji]}],"underline-offset":[{"underline-offset":["auto",hi,qe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:D()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",qe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",qe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),cM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",lM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...W(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:W()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...W()]}],"outline-offset":[{"outline-offset":[hi,qe]}],"outline-w":[{outline:[hi,Ji]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:M()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[hi,Ji]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Zi,hM]}],"shadow-color":[{shadow:[_u]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Zi,qe]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[v]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",qe]}],duration:[{duration:he()}],ease:[{ease:["linear","in","out","in-out",qe]}],delay:[{delay:he()}],animate:[{animate:["none","spin","ping","pulse","bounce",qe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Nu,qe]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[R]}],"skew-y":[{"skew-y":[R]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",qe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",qe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":D()}],"scroll-mx":[{"scroll-mx":D()}],"scroll-my":[{"scroll-my":D()}],"scroll-ms":[{"scroll-ms":D()}],"scroll-me":[{"scroll-me":D()}],"scroll-mt":[{"scroll-mt":D()}],"scroll-mr":[{"scroll-mr":D()}],"scroll-mb":[{"scroll-mb":D()}],"scroll-ml":[{"scroll-ml":D()}],"scroll-p":[{"scroll-p":D()}],"scroll-px":[{"scroll-px":D()}],"scroll-py":[{"scroll-py":D()}],"scroll-ps":[{"scroll-ps":D()}],"scroll-pe":[{"scroll-pe":D()}],"scroll-pt":[{"scroll-pt":D()}],"scroll-pr":[{"scroll-pr":D()}],"scroll-pb":[{"scroll-pb":D()}],"scroll-pl":[{"scroll-pl":D()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",qe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[hi,Ji,r0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},xM=J3(gM);function Se(...t){return xM(TS(t))}const yM=f3,$S=m.forwardRef(({className:t,...e},n)=>i.jsx(wS,{ref:n,className:Se("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));$S.displayName=wS.displayName;const vM=qd("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),BS=m.forwardRef(({className:t,variant:e,...n},r)=>i.jsx(bS,{ref:r,className:Se(vM({variant:e}),t),...n}));BS.displayName=bS.displayName;const wM=m.forwardRef(({className:t,...e},n)=>i.jsx(ES,{ref:n,className:Se("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));wM.displayName=ES.displayName;const zS=m.forwardRef(({className:t,...e},n)=>i.jsx(jS,{ref:n,className:Se("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx($a,{className:"h-4 w-4"})}));zS.displayName=jS.displayName;const WS=m.forwardRef(({className:t,...e},n)=>i.jsx(NS,{ref:n,className:Se("text-sm font-semibold",t),...e}));WS.displayName=NS.displayName;const HS=m.forwardRef(({className:t,...e},n)=>i.jsx(_S,{ref:n,className:Se("text-sm opacity-90",t),...e}));HS.displayName=_S.displayName;function bM(){const{toasts:t}=_n();return i.jsxs(yM,{children:[t.map(function({id:e,title:n,description:r,action:s,...a}){return i.jsxs(BS,{...a,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(WS,{children:n}),r&&i.jsx(HS,{children:r})]}),s,i.jsx(zS,{})]},e)}),i.jsx($S,{})]})}var sN=["light","dark"],NM="(prefers-color-scheme: dark)",_M=m.createContext(void 0),EM={setTheme:t=>{},themes:[]},jM=()=>{var t;return(t=m.useContext(_M))!=null?t:EM};m.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:a,value:o,attrs:l,nonce:c})=>{let u=a==="system",h=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,f=s?sN.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",p=(N,x=!1,b=!0)=>{let _=o?o[N]:N,w=x?N+"|| ''":`'${_}'`,v="";return s&&b&&!x&&sN.includes(N)&&(v+=`d.style.colorScheme = '${N}';`),n==="class"?x||_?v+=`c.add(${w})`:v+="null":_&&(v+=`d[s](n,${w})`),v},g=t?`!function(){${h}${p(t)}}()`:r?`!function(){try{${h}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${u})){var t='${NM}',m=window.matchMedia(t);if(m.media!==t||m.matches){${p("dark")}}else{${p("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}${u?"":"else{"+p(a,!1,!1)+"}"}${f}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${e}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${p(o?"x[e]":"e",!0)}}else{${p(a,!1,!1)};}${f}}catch(t){}}();`;return m.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:g}})});var SM=t=>{switch(t){case"success":return CM;case"info":return PM;case"warning":return AM;case"error":return RM;default:return null}},TM=Array(12).fill(0),IM=({visible:t,className:e})=>te.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},te.createElement("div",{className:"sonner-spinner"},TM.map((n,r)=>te.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),CM=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),AM=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),PM=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),RM=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},te.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),kM=te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},te.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),te.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),DM=()=>{let[t,e]=te.useState(document.hidden);return te.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Ax=1,MM=class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;let{message:r,...s}=e,a=typeof(e==null?void 0:e.id)=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Ax++,o=this.toasts.find(c=>c.id===a),l=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(c=>c.id===a?(this.publish({...c,...e,id:a,title:r}),{...c,...e,id:a,dismissible:l,title:r}):c):this.addToast({title:r,...s,dismissible:l,id:a}),a},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),this.subscribers.forEach(n=>n({id:e,dismiss:!0})),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));let s=e instanceof Promise?e:e(),a=r!==void 0,o,l=s.then(async u=>{if(o=["resolve",u],te.isValidElement(u))a=!1,this.create({id:r,type:"default",message:u});else if(LM(u)&&!u.ok){a=!1;let h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,f=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description;this.create({id:r,type:"error",message:h,description:f})}else if(n.success!==void 0){a=!1;let h=typeof n.success=="function"?await n.success(u):n.success,f=typeof n.description=="function"?await n.description(u):n.description;this.create({id:r,type:"success",message:h,description:f})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){a=!1;let h=typeof n.error=="function"?await n.error(u):n.error,f=typeof n.description=="function"?await n.description(u):n.description;this.create({id:r,type:"error",message:h,description:f})}}).finally(()=>{var u;a&&(this.dismiss(r),r=void 0),(u=n.finally)==null||u.call(n)}),c=()=>new Promise((u,h)=>l.then(()=>o[0]==="reject"?h(o[1]):u(o[1])).catch(h));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(e,n)=>{let r=(n==null?void 0:n.id)||Ax++;return this.create({jsx:e(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},lr=new MM,OM=(t,e)=>{let n=(e==null?void 0:e.id)||Ax++;return lr.addToast({title:t,...e,id:n}),n},LM=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",FM=OM,VM=()=>lr.toasts,UM=()=>lr.getActiveToasts(),Nr=Object.assign(FM,{success:lr.success,info:lr.info,warning:lr.warning,error:lr.error,custom:lr.custom,message:lr.message,promise:lr.promise,dismiss:lr.dismiss,loading:lr.loading},{getHistory:VM,getToasts:UM});function $M(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",e==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}$M(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Qh(t){return t.label!==void 0}var BM=3,zM="32px",WM="16px",iN=4e3,HM=356,qM=14,KM=20,GM=200;function cs(...t){return t.filter(Boolean).join(" ")}function QM(t){let[e,n]=t.split("-"),r=[];return e&&r.push(e),n&&r.push(n),r}var YM=t=>{var e,n,r,s,a,o,l,c,u,h,f;let{invert:p,toast:g,unstyled:N,interacting:x,setHeights:b,visibleToasts:_,heights:w,index:v,toasts:C,expanded:I,removeToast:R,defaultRichColors:j,closeButton:S,style:T,cancelButtonStyle:P,actionButtonStyle:A,className:D="",descriptionClassName:M="",duration:$,position:se,gap:W,loadingIcon:X,expandByDefault:U,classNames:L,icons:Q,closeButtonAriaLabel:he="Close toast",pauseWhenPageIsHidden:ne}=t,[me,Ne]=te.useState(null),[We,He]=te.useState(null),[Z,z]=te.useState(!1),[oe,le]=te.useState(!1),[ve,Ee]=te.useState(!1),[Be,ht]=te.useState(!1),[st,gt]=te.useState(!1),[Ct,En]=te.useState(0),[Qn,ns]=te.useState(0),Vr=te.useRef(g.duration||$||iN),qi=te.useRef(null),Rn=te.useRef(null),rs=v===0,Ur=v+1<=_,Oe=g.type,Ke=g.dismissible!==!1,Et=g.className||"",Y=g.descriptionClassName||"",we=te.useMemo(()=>w.findIndex(Pe=>Pe.toastId===g.id)||0,[w,g.id]),ut=te.useMemo(()=>{var Pe;return(Pe=g.closeButton)!=null?Pe:S},[g.closeButton,S]),At=te.useMemo(()=>g.duration||$||iN,[g.duration,$]),Dt=te.useRef(0),xt=te.useRef(0),ar=te.useRef(0),$r=te.useRef(null),[Ki,li]=se.split("-"),Ds=te.useMemo(()=>w.reduce((Pe,Ge,it)=>it>=we?Pe:Pe+Ge.height,0),[w,we]),nn=DM(),Yn=g.invert||p,vr=Oe==="loading";xt.current=te.useMemo(()=>we*W+Ds,[we,Ds]),te.useEffect(()=>{Vr.current=At},[At]),te.useEffect(()=>{z(!0)},[]),te.useEffect(()=>{let Pe=Rn.current;if(Pe){let Ge=Pe.getBoundingClientRect().height;return ns(Ge),b(it=>[{toastId:g.id,height:Ge,position:g.position},...it]),()=>b(it=>it.filter(ft=>ft.toastId!==g.id))}},[b,g.id]),te.useLayoutEffect(()=>{if(!Z)return;let Pe=Rn.current,Ge=Pe.style.height;Pe.style.height="auto";let it=Pe.getBoundingClientRect().height;Pe.style.height=Ge,ns(it),b(ft=>ft.find(kn=>kn.toastId===g.id)?ft.map(kn=>kn.toastId===g.id?{...kn,height:it}:kn):[{toastId:g.id,height:it,position:g.position},...ft])},[Z,g.title,g.description,b,g.id]);let Gt=te.useCallback(()=>{le(!0),En(xt.current),b(Pe=>Pe.filter(Ge=>Ge.toastId!==g.id)),setTimeout(()=>{R(g)},GM)},[g,R,b,xt]);te.useEffect(()=>{if(g.promise&&Oe==="loading"||g.duration===1/0||g.type==="loading")return;let Pe;return I||x||ne&&nn?(()=>{if(ar.current<Dt.current){let Ge=new Date().getTime()-Dt.current;Vr.current=Vr.current-Ge}ar.current=new Date().getTime()})():Vr.current!==1/0&&(Dt.current=new Date().getTime(),Pe=setTimeout(()=>{var Ge;(Ge=g.onAutoClose)==null||Ge.call(g,g),Gt()},Vr.current)),()=>clearTimeout(Pe)},[I,x,g,Oe,ne,nn,Gt]),te.useEffect(()=>{g.delete&&Gt()},[Gt,g.delete]);function Br(){var Pe,Ge,it;return Q!=null&&Q.loading?te.createElement("div",{className:cs(L==null?void 0:L.loader,(Pe=g==null?void 0:g.classNames)==null?void 0:Pe.loader,"sonner-loader"),"data-visible":Oe==="loading"},Q.loading):X?te.createElement("div",{className:cs(L==null?void 0:L.loader,(Ge=g==null?void 0:g.classNames)==null?void 0:Ge.loader,"sonner-loader"),"data-visible":Oe==="loading"},X):te.createElement(IM,{className:cs(L==null?void 0:L.loader,(it=g==null?void 0:g.classNames)==null?void 0:it.loader),visible:Oe==="loading"})}return te.createElement("li",{tabIndex:0,ref:Rn,className:cs(D,Et,L==null?void 0:L.toast,(e=g==null?void 0:g.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[Oe],(n=g==null?void 0:g.classNames)==null?void 0:n[Oe]),"data-sonner-toast":"","data-rich-colors":(r=g.richColors)!=null?r:j,"data-styled":!(g.jsx||g.unstyled||N),"data-mounted":Z,"data-promise":!!g.promise,"data-swiped":st,"data-removed":oe,"data-visible":Ur,"data-y-position":Ki,"data-x-position":li,"data-index":v,"data-front":rs,"data-swiping":ve,"data-dismissible":Ke,"data-type":Oe,"data-invert":Yn,"data-swipe-out":Be,"data-swipe-direction":We,"data-expanded":!!(I||U&&Z),style:{"--index":v,"--toasts-before":v,"--z-index":C.length-v,"--offset":`${oe?Ct:xt.current}px`,"--initial-height":U?"auto":`${Qn}px`,...T,...g.style},onDragEnd:()=>{Ee(!1),Ne(null),$r.current=null},onPointerDown:Pe=>{vr||!Ke||(qi.current=new Date,En(xt.current),Pe.target.setPointerCapture(Pe.pointerId),Pe.target.tagName!=="BUTTON"&&(Ee(!0),$r.current={x:Pe.clientX,y:Pe.clientY}))},onPointerUp:()=>{var Pe,Ge,it,ft;if(Be||!Ke)return;$r.current=null;let kn=Number(((Pe=Rn.current)==null?void 0:Pe.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),wt=Number(((Ge=Rn.current)==null?void 0:Ge.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),zr=new Date().getTime()-((it=qi.current)==null?void 0:it.getTime()),cn=me==="x"?kn:wt,Dn=Math.abs(cn)/zr;if(Math.abs(cn)>=KM||Dn>.11){En(xt.current),(ft=g.onDismiss)==null||ft.call(g,g),He(me==="x"?kn>0?"right":"left":wt>0?"down":"up"),Gt(),ht(!0),gt(!1);return}Ee(!1),Ne(null)},onPointerMove:Pe=>{var Ge,it,ft,kn;if(!$r.current||!Ke||((Ge=window.getSelection())==null?void 0:Ge.toString().length)>0)return;let wt=Pe.clientY-$r.current.y,zr=Pe.clientX-$r.current.x,cn=(it=t.swipeDirections)!=null?it:QM(se);!me&&(Math.abs(zr)>1||Math.abs(wt)>1)&&Ne(Math.abs(zr)>Math.abs(wt)?"x":"y");let Dn={x:0,y:0};me==="y"?(cn.includes("top")||cn.includes("bottom"))&&(cn.includes("top")&&wt<0||cn.includes("bottom")&&wt>0)&&(Dn.y=wt):me==="x"&&(cn.includes("left")||cn.includes("right"))&&(cn.includes("left")&&zr<0||cn.includes("right")&&zr>0)&&(Dn.x=zr),(Math.abs(Dn.x)>0||Math.abs(Dn.y)>0)&&gt(!0),(ft=Rn.current)==null||ft.style.setProperty("--swipe-amount-x",`${Dn.x}px`),(kn=Rn.current)==null||kn.style.setProperty("--swipe-amount-y",`${Dn.y}px`)}},ut&&!g.jsx?te.createElement("button",{"aria-label":he,"data-disabled":vr,"data-close-button":!0,onClick:vr||!Ke?()=>{}:()=>{var Pe;Gt(),(Pe=g.onDismiss)==null||Pe.call(g,g)},className:cs(L==null?void 0:L.closeButton,(s=g==null?void 0:g.classNames)==null?void 0:s.closeButton)},(a=Q==null?void 0:Q.close)!=null?a:kM):null,g.jsx||m.isValidElement(g.title)?g.jsx?g.jsx:typeof g.title=="function"?g.title():g.title:te.createElement(te.Fragment,null,Oe||g.icon||g.promise?te.createElement("div",{"data-icon":"",className:cs(L==null?void 0:L.icon,(o=g==null?void 0:g.classNames)==null?void 0:o.icon)},g.promise||g.type==="loading"&&!g.icon?g.icon||Br():null,g.type!=="loading"?g.icon||(Q==null?void 0:Q[Oe])||SM(Oe):null):null,te.createElement("div",{"data-content":"",className:cs(L==null?void 0:L.content,(l=g==null?void 0:g.classNames)==null?void 0:l.content)},te.createElement("div",{"data-title":"",className:cs(L==null?void 0:L.title,(c=g==null?void 0:g.classNames)==null?void 0:c.title)},typeof g.title=="function"?g.title():g.title),g.description?te.createElement("div",{"data-description":"",className:cs(M,Y,L==null?void 0:L.description,(u=g==null?void 0:g.classNames)==null?void 0:u.description)},typeof g.description=="function"?g.description():g.description):null),m.isValidElement(g.cancel)?g.cancel:g.cancel&&Qh(g.cancel)?te.createElement("button",{"data-button":!0,"data-cancel":!0,style:g.cancelButtonStyle||P,onClick:Pe=>{var Ge,it;Qh(g.cancel)&&Ke&&((it=(Ge=g.cancel).onClick)==null||it.call(Ge,Pe),Gt())},className:cs(L==null?void 0:L.cancelButton,(h=g==null?void 0:g.classNames)==null?void 0:h.cancelButton)},g.cancel.label):null,m.isValidElement(g.action)?g.action:g.action&&Qh(g.action)?te.createElement("button",{"data-button":!0,"data-action":!0,style:g.actionButtonStyle||A,onClick:Pe=>{var Ge,it;Qh(g.action)&&((it=(Ge=g.action).onClick)==null||it.call(Ge,Pe),!Pe.defaultPrevented&&Gt())},className:cs(L==null?void 0:L.actionButton,(f=g==null?void 0:g.classNames)==null?void 0:f.actionButton)},g.action.label):null))};function aN(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function XM(t,e){let n={};return[t,e].forEach((r,s)=>{let a=s===1,o=a?"--mobile-offset":"--offset",l=a?WM:zM;function c(u){["top","right","bottom","left"].forEach(h=>{n[`${o}-${h}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=l:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):c(l)}),n}var JM=m.forwardRef(function(t,e){let{invert:n,position:r="bottom-right",hotkey:s=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:c,mobileOffset:u,theme:h="light",richColors:f,duration:p,style:g,visibleToasts:N=BM,toastOptions:x,dir:b=aN(),gap:_=qM,loadingIcon:w,icons:v,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:I}=t,[R,j]=te.useState([]),S=te.useMemo(()=>Array.from(new Set([r].concat(R.filter(ne=>ne.position).map(ne=>ne.position)))),[R,r]),[T,P]=te.useState([]),[A,D]=te.useState(!1),[M,$]=te.useState(!1),[se,W]=te.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),X=te.useRef(null),U=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=te.useRef(null),Q=te.useRef(!1),he=te.useCallback(ne=>{j(me=>{var Ne;return(Ne=me.find(We=>We.id===ne.id))!=null&&Ne.delete||lr.dismiss(ne.id),me.filter(({id:We})=>We!==ne.id)})},[]);return te.useEffect(()=>lr.subscribe(ne=>{if(ne.dismiss){j(me=>me.map(Ne=>Ne.id===ne.id?{...Ne,delete:!0}:Ne));return}setTimeout(()=>{eS.flushSync(()=>{j(me=>{let Ne=me.findIndex(We=>We.id===ne.id);return Ne!==-1?[...me.slice(0,Ne),{...me[Ne],...ne},...me.slice(Ne+1)]:[ne,...me]})})})}),[]),te.useEffect(()=>{if(h!=="system"){W(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?W("dark"):W("light")),typeof window>"u")return;let ne=window.matchMedia("(prefers-color-scheme: dark)");try{ne.addEventListener("change",({matches:me})=>{W(me?"dark":"light")})}catch{ne.addListener(({matches:Ne})=>{try{W(Ne?"dark":"light")}catch(We){console.error(We)}})}},[h]),te.useEffect(()=>{R.length<=1&&D(!1)},[R]),te.useEffect(()=>{let ne=me=>{var Ne,We;s.every(He=>me[He]||me.code===He)&&(D(!0),(Ne=X.current)==null||Ne.focus()),me.code==="Escape"&&(document.activeElement===X.current||(We=X.current)!=null&&We.contains(document.activeElement))&&D(!1)};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[s]),te.useEffect(()=>{if(X.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,Q.current=!1)}},[X.current]),te.createElement("section",{ref:e,"aria-label":`${C} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},S.map((ne,me)=>{var Ne;let[We,He]=ne.split("-");return R.length?te.createElement("ol",{key:ne,dir:b==="auto"?aN():b,tabIndex:-1,ref:X,className:l,"data-sonner-toaster":!0,"data-theme":se,"data-y-position":We,"data-lifted":A&&R.length>1&&!a,"data-x-position":He,style:{"--front-toast-height":`${((Ne=T[0])==null?void 0:Ne.height)||0}px`,"--width":`${HM}px`,"--gap":`${_}px`,...g,...XM(c,u)},onBlur:Z=>{Q.current&&!Z.currentTarget.contains(Z.relatedTarget)&&(Q.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||Q.current||(Q.current=!0,L.current=Z.relatedTarget)},onMouseEnter:()=>D(!0),onMouseMove:()=>D(!0),onMouseLeave:()=>{M||D(!1)},onDragEnd:()=>D(!1),onPointerDown:Z=>{Z.target instanceof HTMLElement&&Z.target.dataset.dismissible==="false"||$(!0)},onPointerUp:()=>$(!1)},R.filter(Z=>!Z.position&&me===0||Z.position===ne).map((Z,z)=>{var oe,le;return te.createElement(YM,{key:Z.id,icons:v,index:z,toast:Z,defaultRichColors:f,duration:(oe=x==null?void 0:x.duration)!=null?oe:p,className:x==null?void 0:x.className,descriptionClassName:x==null?void 0:x.descriptionClassName,invert:n,visibleToasts:N,closeButton:(le=x==null?void 0:x.closeButton)!=null?le:o,interacting:M,position:ne,style:x==null?void 0:x.style,unstyled:x==null?void 0:x.unstyled,classNames:x==null?void 0:x.classNames,cancelButtonStyle:x==null?void 0:x.cancelButtonStyle,actionButtonStyle:x==null?void 0:x.actionButtonStyle,removeToast:he,toasts:R.filter(ve=>ve.position==Z.position),heights:T.filter(ve=>ve.position==Z.position),setHeights:P,expandByDefault:a,gap:_,loadingIcon:w,expanded:A,pauseWhenPageIsHidden:I,swipeDirections:t.swipeDirections})})):null}))});const ZM=({...t})=>{const{theme:e="system"}=jM();return i.jsx(JM,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var e6=Py[" useId ".trim().toString()]||(()=>{}),t6=0;function Xs(t){const[e,n]=m.useState(e6());return ln(()=>{n(r=>r??String(t6++))},[t]),e?`radix-${e}`:""}const n6=["top","right","bottom","left"],Ba=Math.min,jr=Math.max,um=Math.round,Yh=Math.floor,Js=t=>({x:t,y:t}),r6={left:"right",right:"left",bottom:"top",top:"bottom"},s6={start:"end",end:"start"};function Px(t,e,n){return jr(t,Ba(e,n))}function Di(t,e){return typeof t=="function"?t(e):t}function Mi(t){return t.split("-")[0]}function Hc(t){return t.split("-")[1]}function Rv(t){return t==="x"?"y":"x"}function kv(t){return t==="y"?"height":"width"}const i6=new Set(["top","bottom"]);function Ks(t){return i6.has(Mi(t))?"y":"x"}function Dv(t){return Rv(Ks(t))}function a6(t,e,n){n===void 0&&(n=!1);const r=Hc(t),s=Dv(t),a=kv(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[a]>e.floating[a]&&(o=dm(o)),[o,dm(o)]}function o6(t){const e=dm(t);return[Rx(t),e,Rx(e)]}function Rx(t){return t.replace(/start|end/g,e=>s6[e])}const oN=["left","right"],lN=["right","left"],l6=["top","bottom"],c6=["bottom","top"];function u6(t,e,n){switch(t){case"top":case"bottom":return n?e?lN:oN:e?oN:lN;case"left":case"right":return e?l6:c6;default:return[]}}function d6(t,e,n,r){const s=Hc(t);let a=u6(Mi(t),n==="start",r);return s&&(a=a.map(o=>o+"-"+s),e&&(a=a.concat(a.map(Rx)))),a}function dm(t){return t.replace(/left|right|bottom|top/g,e=>r6[e])}function h6(t){return{top:0,right:0,bottom:0,left:0,...t}}function qS(t){return typeof t!="number"?h6(t):{top:t,right:t,bottom:t,left:t}}function hm(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function cN(t,e,n){let{reference:r,floating:s}=t;const a=Ks(e),o=Dv(e),l=kv(o),c=Mi(e),u=a==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:h,y:r.y-s.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-s.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Hc(e)){case"start":g[o]-=p*(n&&u?-1:1);break;case"end":g[o]+=p*(n&&u?-1:1);break}return g}const f6=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:o}=n,l=a.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let u=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=cN(u,r,c),p=r,g={},N=0;for(let x=0;x<l.length;x++){const{name:b,fn:_}=l[x],{x:w,y:v,data:C,reset:I}=await _({x:h,y:f,initialPlacement:r,placement:p,strategy:s,middlewareData:g,rects:u,platform:o,elements:{reference:t,floating:e}});h=w??h,f=v??f,g={...g,[b]:{...g[b],...C}},I&&N<=50&&(N++,typeof I=="object"&&(I.placement&&(p=I.placement),I.rects&&(u=I.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):I.rects),{x:h,y:f}=cN(u,p,c)),x=-1)}return{x:h,y:f,placement:p,strategy:s,middlewareData:g}};async function xd(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:a,rects:o,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=Di(e,t),N=qS(g),b=l[p?f==="floating"?"reference":"floating":f],_=hm(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(b)))==null||n?b:b.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:h,strategy:c})),w=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,v=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(v))?await(a.getScale==null?void 0:a.getScale(v))||{x:1,y:1}:{x:1,y:1},I=hm(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:v,strategy:c}):w);return{top:(_.top-I.top+N.top)/C.y,bottom:(I.bottom-_.bottom+N.bottom)/C.y,left:(_.left-I.left+N.left)/C.x,right:(I.right-_.right+N.right)/C.x}}const m6=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:a,platform:o,elements:l,middlewareData:c}=e,{element:u,padding:h=0}=Di(t,e)||{};if(u==null)return{};const f=qS(h),p={x:n,y:r},g=Dv(s),N=kv(g),x=await o.getDimensions(u),b=g==="y",_=b?"top":"left",w=b?"bottom":"right",v=b?"clientHeight":"clientWidth",C=a.reference[N]+a.reference[g]-p[g]-a.floating[N],I=p[g]-a.reference[g],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let j=R?R[v]:0;(!j||!await(o.isElement==null?void 0:o.isElement(R)))&&(j=l.floating[v]||a.floating[N]);const S=C/2-I/2,T=j/2-x[N]/2-1,P=Ba(f[_],T),A=Ba(f[w],T),D=P,M=j-x[N]-A,$=j/2-x[N]/2+S,se=Px(D,$,M),W=!c.arrow&&Hc(s)!=null&&$!==se&&a.reference[N]/2-($<D?P:A)-x[N]/2<0,X=W?$<D?$-D:$-M:0;return{[g]:p[g]+X,data:{[g]:se,centerOffset:$-se-X,...W&&{alignmentOffset:X}},reset:W}}}),p6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:x=!0,...b}=Di(t,e);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const _=Mi(s),w=Ks(l),v=Mi(l)===l,C=await(c.isRTL==null?void 0:c.isRTL(u.floating)),I=p||(v||!x?[dm(l)]:o6(l)),R=N!=="none";!p&&R&&I.push(...d6(l,x,N,C));const j=[l,...I],S=await xd(e,b),T=[];let P=((r=a.flip)==null?void 0:r.overflows)||[];if(h&&T.push(S[_]),f){const $=a6(s,o,C);T.push(S[$[0]],S[$[1]])}if(P=[...P,{placement:s,overflows:T}],!T.every($=>$<=0)){var A,D;const $=(((A=a.flip)==null?void 0:A.index)||0)+1,se=j[$];if(se&&(!(f==="alignment"?w!==Ks(se):!1)||P.every(U=>U.overflows[0]>0&&Ks(U.placement)===w)))return{data:{index:$,overflows:P},reset:{placement:se}};let W=(D=P.filter(X=>X.overflows[0]<=0).sort((X,U)=>X.overflows[1]-U.overflows[1])[0])==null?void 0:D.placement;if(!W)switch(g){case"bestFit":{var M;const X=(M=P.filter(U=>{if(R){const L=Ks(U.placement);return L===w||L==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(L=>L>0).reduce((L,Q)=>L+Q,0)]).sort((U,L)=>U[1]-L[1])[0])==null?void 0:M[0];X&&(W=X);break}case"initialPlacement":W=l;break}if(s!==W)return{reset:{placement:W}}}return{}}}};function uN(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function dN(t){return n6.some(e=>t[e]>=0)}const g6=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Di(t,e);switch(r){case"referenceHidden":{const a=await xd(e,{...s,elementContext:"reference"}),o=uN(a,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:dN(o)}}}case"escaped":{const a=await xd(e,{...s,altBoundary:!0}),o=uN(a,n.floating);return{data:{escapedOffsets:o,escaped:dN(o)}}}default:return{}}}}},KS=new Set(["left","top"]);async function x6(t,e){const{placement:n,platform:r,elements:s}=t,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Mi(n),l=Hc(n),c=Ks(n)==="y",u=KS.has(o)?-1:1,h=a&&c?-1:1,f=Di(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:N}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof N=="number"&&(g=l==="end"?N*-1:N),c?{x:g*h,y:p*u}:{x:p*u,y:g*h}}const y6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:a,placement:o,middlewareData:l}=e,c=await x6(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:o}}}}},v6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:b=>{let{x:_,y:w}=b;return{x:_,y:w}}},...c}=Di(t,e),u={x:n,y:r},h=await xd(e,c),f=Ks(Mi(s)),p=Rv(f);let g=u[p],N=u[f];if(a){const b=p==="y"?"top":"left",_=p==="y"?"bottom":"right",w=g+h[b],v=g-h[_];g=Px(w,g,v)}if(o){const b=f==="y"?"top":"left",_=f==="y"?"bottom":"right",w=N+h[b],v=N-h[_];N=Px(w,N,v)}const x=l.fn({...e,[p]:g,[f]:N});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:a,[f]:o}}}}}},w6=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:a,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Di(t,e),h={x:n,y:r},f=Ks(s),p=Rv(f);let g=h[p],N=h[f];const x=Di(l,e),b=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const v=p==="y"?"height":"width",C=a.reference[p]-a.floating[v]+b.mainAxis,I=a.reference[p]+a.reference[v]-b.mainAxis;g<C?g=C:g>I&&(g=I)}if(u){var _,w;const v=p==="y"?"width":"height",C=KS.has(Mi(s)),I=a.reference[f]-a.floating[v]+(C&&((_=o.offset)==null?void 0:_[f])||0)+(C?0:b.crossAxis),R=a.reference[f]+a.reference[v]+(C?0:((w=o.offset)==null?void 0:w[f])||0)-(C?b.crossAxis:0);N<I?N=I:N>R&&(N=R)}return{[p]:g,[f]:N}}}},b6=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:a,platform:o,elements:l}=e,{apply:c=()=>{},...u}=Di(t,e),h=await xd(e,u),f=Mi(s),p=Hc(s),g=Ks(s)==="y",{width:N,height:x}=a.floating;let b,_;f==="top"||f==="bottom"?(b=f,_=p===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=f,b=p==="end"?"top":"bottom");const w=x-h.top-h.bottom,v=N-h.left-h.right,C=Ba(x-h[b],w),I=Ba(N-h[_],v),R=!e.middlewareData.shift;let j=C,S=I;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=v),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(j=w),R&&!p){const P=jr(h.left,0),A=jr(h.right,0),D=jr(h.top,0),M=jr(h.bottom,0);g?S=N-2*(P!==0||A!==0?P+A:jr(h.left,h.right)):j=x-2*(D!==0||M!==0?D+M:jr(h.top,h.bottom))}await c({...e,availableWidth:S,availableHeight:j});const T=await o.getDimensions(l.floating);return N!==T.width||x!==T.height?{reset:{rects:!0}}:{}}}};function fp(){return typeof window<"u"}function qc(t){return GS(t)?(t.nodeName||"").toLowerCase():"#document"}function Dr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function oi(t){var e;return(e=(GS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function GS(t){return fp()?t instanceof Node||t instanceof Dr(t).Node:!1}function Ts(t){return fp()?t instanceof Element||t instanceof Dr(t).Element:!1}function ii(t){return fp()?t instanceof HTMLElement||t instanceof Dr(t).HTMLElement:!1}function hN(t){return!fp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Dr(t).ShadowRoot}const N6=new Set(["inline","contents"]);function Qd(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Is(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!N6.has(s)}const _6=new Set(["table","td","th"]);function E6(t){return _6.has(qc(t))}const j6=[":popover-open",":modal"];function mp(t){return j6.some(e=>{try{return t.matches(e)}catch{return!1}})}const S6=["transform","translate","scale","rotate","perspective"],T6=["transform","translate","scale","rotate","perspective","filter"],I6=["paint","layout","strict","content"];function Mv(t){const e=Ov(),n=Ts(t)?Is(t):t;return S6.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||T6.some(r=>(n.willChange||"").includes(r))||I6.some(r=>(n.contain||"").includes(r))}function C6(t){let e=za(t);for(;ii(e)&&!Pc(e);){if(Mv(e))return e;if(mp(e))return null;e=za(e)}return null}function Ov(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const A6=new Set(["html","body","#document"]);function Pc(t){return A6.has(qc(t))}function Is(t){return Dr(t).getComputedStyle(t)}function pp(t){return Ts(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function za(t){if(qc(t)==="html")return t;const e=t.assignedSlot||t.parentNode||hN(t)&&t.host||oi(t);return hN(e)?e.host:e}function QS(t){const e=za(t);return Pc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ii(e)&&Qd(e)?e:QS(e)}function yd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=QS(t),a=s===((r=t.ownerDocument)==null?void 0:r.body),o=Dr(s);if(a){const l=kx(o);return e.concat(o,o.visualViewport||[],Qd(s)?s:[],l&&n?yd(l):[])}return e.concat(s,yd(s,[],n))}function kx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function YS(t){const e=Is(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=ii(t),a=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=um(n)!==a||um(r)!==o;return l&&(n=a,r=o),{width:n,height:r,$:l}}function Lv(t){return Ts(t)?t:t.contextElement}function cc(t){const e=Lv(t);if(!ii(e))return Js(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:a}=YS(e);let o=(a?um(n.width):n.width)/r,l=(a?um(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const P6=Js(0);function XS(t){const e=Dr(t);return!Ov()||!e.visualViewport?P6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function R6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Dr(t)?!1:e}function qo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),a=Lv(t);let o=Js(1);e&&(r?Ts(r)&&(o=cc(r)):o=cc(t));const l=R6(a,n,r)?XS(a):Js(0);let c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(a){const p=Dr(a),g=r&&Ts(r)?Dr(r):r;let N=p,x=kx(N);for(;x&&r&&g!==N;){const b=cc(x),_=x.getBoundingClientRect(),w=Is(x),v=_.left+(x.clientLeft+parseFloat(w.paddingLeft))*b.x,C=_.top+(x.clientTop+parseFloat(w.paddingTop))*b.y;c*=b.x,u*=b.y,h*=b.x,f*=b.y,c+=v,u+=C,N=Dr(x),x=kx(N)}}return hm({width:h,height:f,x:c,y:u})}function Fv(t,e){const n=pp(t).scrollLeft;return e?e.left+n:qo(oi(t)).left+n}function JS(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:Fv(t,r)),a=r.top+e.scrollTop;return{x:s,y:a}}function k6(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const a=s==="fixed",o=oi(r),l=e?mp(e.floating):!1;if(r===o||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Js(1);const h=Js(0),f=ii(r);if((f||!f&&!a)&&((qc(r)!=="body"||Qd(o))&&(c=pp(r)),ii(r))){const g=qo(r);u=cc(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=o&&!f&&!a?JS(o,c,!0):Js(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+h.x+p.x,y:n.y*u.y-c.scrollTop*u.y+h.y+p.y}}function D6(t){return Array.from(t.getClientRects())}function M6(t){const e=oi(t),n=pp(t),r=t.ownerDocument.body,s=jr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),a=jr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Fv(t);const l=-n.scrollTop;return Is(r).direction==="rtl"&&(o+=jr(e.clientWidth,r.clientWidth)-s),{width:s,height:a,x:o,y:l}}function O6(t,e){const n=Dr(t),r=oi(t),s=n.visualViewport;let a=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){a=s.width,o=s.height;const u=Ov();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:o,x:l,y:c}}const L6=new Set(["absolute","fixed"]);function F6(t,e){const n=qo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,a=ii(t)?cc(t):Js(1),o=t.clientWidth*a.x,l=t.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:o,height:l,x:c,y:u}}function fN(t,e,n){let r;if(e==="viewport")r=O6(t,n);else if(e==="document")r=M6(oi(t));else if(Ts(e))r=F6(e,n);else{const s=XS(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return hm(r)}function ZS(t,e){const n=za(t);return n===e||!Ts(n)||Pc(n)?!1:Is(n).position==="fixed"||ZS(n,e)}function V6(t,e){const n=e.get(t);if(n)return n;let r=yd(t,[],!1).filter(l=>Ts(l)&&qc(l)!=="body"),s=null;const a=Is(t).position==="fixed";let o=a?za(t):t;for(;Ts(o)&&!Pc(o);){const l=Is(o),c=Mv(o);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&L6.has(s.position)||Qd(o)&&!c&&ZS(t,o))?r=r.filter(h=>h!==o):s=l,o=za(o)}return e.set(t,r),r}function U6(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?mp(e)?[]:V6(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((u,h)=>{const f=fN(e,h,s);return u.top=jr(f.top,u.top),u.right=Ba(f.right,u.right),u.bottom=Ba(f.bottom,u.bottom),u.left=jr(f.left,u.left),u},fN(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function $6(t){const{width:e,height:n}=YS(t);return{width:e,height:n}}function B6(t,e,n){const r=ii(e),s=oi(e),a=n==="fixed",o=qo(t,!0,a,e);let l={scrollLeft:0,scrollTop:0};const c=Js(0);function u(){c.x=Fv(s)}if(r||!r&&!a)if((qc(e)!=="body"||Qd(s))&&(l=pp(e)),r){const g=qo(e,!0,a,e);c.x=g.x+e.clientLeft,c.y=g.y+e.clientTop}else s&&u();a&&!r&&s&&u();const h=s&&!r&&!a?JS(s,l):Js(0),f=o.left+l.scrollLeft-c.x-h.x,p=o.top+l.scrollTop-c.y-h.y;return{x:f,y:p,width:o.width,height:o.height}}function s0(t){return Is(t).position==="static"}function mN(t,e){if(!ii(t)||Is(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return oi(t)===n&&(n=n.ownerDocument.body),n}function eT(t,e){const n=Dr(t);if(mp(t))return n;if(!ii(t)){let s=za(t);for(;s&&!Pc(s);){if(Ts(s)&&!s0(s))return s;s=za(s)}return n}let r=mN(t,e);for(;r&&E6(r)&&s0(r);)r=mN(r,e);return r&&Pc(r)&&s0(r)&&!Mv(r)?n:r||C6(t)||n}const z6=async function(t){const e=this.getOffsetParent||eT,n=this.getDimensions,r=await n(t.floating);return{reference:B6(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function W6(t){return Is(t).direction==="rtl"}const H6={convertOffsetParentRelativeRectToViewportRelativeRect:k6,getDocumentElement:oi,getClippingRect:U6,getOffsetParent:eT,getElementRects:z6,getClientRects:D6,getDimensions:$6,getScale:cc,isElement:Ts,isRTL:W6};function tT(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function q6(t,e){let n=null,r;const s=oi(t);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=t.getBoundingClientRect(),{left:h,top:f,width:p,height:g}=u;if(l||e(),!p||!g)return;const N=Yh(f),x=Yh(s.clientWidth-(h+p)),b=Yh(s.clientHeight-(f+g)),_=Yh(h),v={rootMargin:-N+"px "+-x+"px "+-b+"px "+-_+"px",threshold:jr(0,Ba(1,c))||1};let C=!0;function I(R){const j=R[0].intersectionRatio;if(j!==c){if(!C)return o();j?o(!1,j):r=setTimeout(()=>{o(!1,1e-7)},1e3)}j===1&&!tT(u,t.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(I,{...v,root:s.ownerDocument})}catch{n=new IntersectionObserver(I,v)}n.observe(t)}return o(!0),a}function K6(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Lv(t),h=s||a?[...u?yd(u):[],...yd(e)]:[];h.forEach(_=>{s&&_.addEventListener("scroll",n,{passive:!0}),a&&_.addEventListener("resize",n)});const f=u&&l?q6(u,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(_=>{let[w]=_;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var v;(v=g)==null||v.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let N,x=c?qo(t):null;c&&b();function b(){const _=qo(t);x&&!tT(x,_)&&n(),x=_,N=requestAnimationFrame(b)}return n(),()=>{var _;h.forEach(w=>{s&&w.removeEventListener("scroll",n),a&&w.removeEventListener("resize",n)}),f==null||f(),(_=g)==null||_.disconnect(),g=null,c&&cancelAnimationFrame(N)}}const G6=y6,Q6=v6,Y6=p6,X6=b6,J6=g6,pN=m6,Z6=w6,eO=(t,e,n)=>{const r=new Map,s={platform:H6,...n},a={...s.platform,_c:r};return f6(t,e,{...s,platform:a})};var tO=typeof document<"u",nO=function(){},Sf=tO?m.useLayoutEffect:nO;function fm(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!fm(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&t.$$typeof)&&!fm(t[a],e[a]))return!1}return!0}return t!==t&&e!==e}function nT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function gN(t,e){const n=nT(t);return Math.round(e*n)/n}function i0(t){const e=m.useRef(t);return Sf(()=>{e.current=t}),e}function rO(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[h,f]=m.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=m.useState(r);fm(p,r)||g(r);const[N,x]=m.useState(null),[b,_]=m.useState(null),w=m.useCallback(U=>{U!==R.current&&(R.current=U,x(U))},[]),v=m.useCallback(U=>{U!==j.current&&(j.current=U,_(U))},[]),C=a||N,I=o||b,R=m.useRef(null),j=m.useRef(null),S=m.useRef(h),T=c!=null,P=i0(c),A=i0(s),D=i0(u),M=m.useCallback(()=>{if(!R.current||!j.current)return;const U={placement:e,strategy:n,middleware:p};A.current&&(U.platform=A.current),eO(R.current,j.current,U).then(L=>{const Q={...L,isPositioned:D.current!==!1};$.current&&!fm(S.current,Q)&&(S.current=Q,al.flushSync(()=>{f(Q)}))})},[p,e,n,A,D]);Sf(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[u]);const $=m.useRef(!1);Sf(()=>($.current=!0,()=>{$.current=!1}),[]),Sf(()=>{if(C&&(R.current=C),I&&(j.current=I),C&&I){if(P.current)return P.current(C,I,M);M()}},[C,I,M,P,T]);const se=m.useMemo(()=>({reference:R,floating:j,setReference:w,setFloating:v}),[w,v]),W=m.useMemo(()=>({reference:C,floating:I}),[C,I]),X=m.useMemo(()=>{const U={position:n,left:0,top:0};if(!W.floating)return U;const L=gN(W.floating,h.x),Q=gN(W.floating,h.y);return l?{...U,transform:"translate("+L+"px, "+Q+"px)",...nT(W.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:L,top:Q}},[n,l,W.floating,h.x,h.y]);return m.useMemo(()=>({...h,update:M,refs:se,elements:W,floatingStyles:X}),[h,M,se,W,X])}const sO=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?pN({element:r.current,padding:s}).fn(n):{}:r?pN({element:r,padding:s}).fn(n):{}}}},iO=(t,e)=>({...G6(t),options:[t,e]}),aO=(t,e)=>({...Q6(t),options:[t,e]}),oO=(t,e)=>({...Z6(t),options:[t,e]}),lO=(t,e)=>({...Y6(t),options:[t,e]}),cO=(t,e)=>({...X6(t),options:[t,e]}),uO=(t,e)=>({...J6(t),options:[t,e]}),dO=(t,e)=>({...sO(t),options:[t,e]});var hO="Arrow",rT=m.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...a}=t;return i.jsx(je.svg,{...a,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});rT.displayName=hO;var fO=rT;function sT(t){const[e,n]=m.useState(void 0);return ln(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let o,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;o=u.inlineSize,l=u.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Vv="Popper",[iT,Kc]=Fr(Vv),[mO,aT]=iT(Vv),oT=t=>{const{__scopePopper:e,children:n}=t,[r,s]=m.useState(null);return i.jsx(mO,{scope:e,anchor:r,onAnchorChange:s,children:n})};oT.displayName=Vv;var lT="PopperAnchor",cT=m.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,a=aT(lT,n),o=m.useRef(null),l=rt(e,o);return m.useEffect(()=>{a.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:i.jsx(je.div,{...s,ref:l})});cT.displayName=lT;var Uv="PopperContent",[pO,gO]=iT(Uv),uT=m.forwardRef((t,e)=>{var Z,z,oe,le,ve,Ee;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:N,...x}=t,b=aT(Uv,n),[_,w]=m.useState(null),v=rt(e,Be=>w(Be)),[C,I]=m.useState(null),R=sT(C),j=(R==null?void 0:R.width)??0,S=(R==null?void 0:R.height)??0,T=r+(a!=="center"?"-"+a:""),P=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},A=Array.isArray(u)?u:[u],D=A.length>0,M={padding:P,boundary:A.filter(yO),altBoundary:D},{refs:$,floatingStyles:se,placement:W,isPositioned:X,middlewareData:U}=rO({strategy:"fixed",placement:T,whileElementsMounted:(...Be)=>K6(...Be,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[iO({mainAxis:s+S,alignmentAxis:o}),c&&aO({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?oO():void 0,...M}),c&&lO({...M}),cO({...M,apply:({elements:Be,rects:ht,availableWidth:st,availableHeight:gt})=>{const{width:Ct,height:En}=ht.reference,Qn=Be.floating.style;Qn.setProperty("--radix-popper-available-width",`${st}px`),Qn.setProperty("--radix-popper-available-height",`${gt}px`),Qn.setProperty("--radix-popper-anchor-width",`${Ct}px`),Qn.setProperty("--radix-popper-anchor-height",`${En}px`)}}),C&&dO({element:C,padding:l}),vO({arrowWidth:j,arrowHeight:S}),p&&uO({strategy:"referenceHidden",...M})]}),[L,Q]=fT(W),he=nr(N);ln(()=>{X&&(he==null||he())},[X,he]);const ne=(Z=U.arrow)==null?void 0:Z.x,me=(z=U.arrow)==null?void 0:z.y,Ne=((oe=U.arrow)==null?void 0:oe.centerOffset)!==0,[We,He]=m.useState();return ln(()=>{_&&He(window.getComputedStyle(_).zIndex)},[_]),i.jsx("div",{ref:$.setFloating,"data-radix-popper-content-wrapper":"",style:{...se,transform:X?se.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:We,"--radix-popper-transform-origin":[(le=U.transformOrigin)==null?void 0:le.x,(ve=U.transformOrigin)==null?void 0:ve.y].join(" "),...((Ee=U.hide)==null?void 0:Ee.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(pO,{scope:n,placedSide:L,onArrowChange:I,arrowX:ne,arrowY:me,shouldHideArrow:Ne,children:i.jsx(je.div,{"data-side":L,"data-align":Q,...x,ref:v,style:{...x.style,animation:X?void 0:"none"}})})})});uT.displayName=Uv;var dT="PopperArrow",xO={top:"bottom",right:"left",bottom:"top",left:"right"},hT=m.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,a=gO(dT,r),o=xO[a.placedSide];return i.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:i.jsx(fO,{...s,ref:n,style:{...s.style,display:"block"}})})});hT.displayName=dT;function yO(t){return t!==null}var vO=t=>({name:"transformOrigin",options:t,fn(e){var b,_,w;const{placement:n,rects:r,middlewareData:s}=e,o=((b=s.arrow)==null?void 0:b.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[u,h]=fT(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((_=s.arrow)==null?void 0:_.x)??0)+l/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let N="",x="";return u==="bottom"?(N=o?f:`${p}px`,x=`${-c}px`):u==="top"?(N=o?f:`${p}px`,x=`${r.floating.height+c}px`):u==="right"?(N=`${-c}px`,x=o?f:`${g}px`):u==="left"&&(N=`${r.floating.width+c}px`,x=o?f:`${g}px`),{data:{x:N,y:x}}}});function fT(t){const[e,n="center"]=t.split("-");return[e,n]}var mT=oT,$v=cT,Bv=uT,zv=hT,[gp,CK]=Fr("Tooltip",[Kc]),Wv=Kc(),pT="TooltipProvider",wO=700,xN="tooltip.open",[bO,gT]=gp(pT),xT=t=>{const{__scopeTooltip:e,delayDuration:n=wO,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=t,o=m.useRef(!0),l=m.useRef(!1),c=m.useRef(0);return m.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(bO,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:m.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};xT.displayName=pT;var yT="Tooltip",[AK,xp]=gp(yT),Dx="TooltipTrigger",NO=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=xp(Dx,n),a=gT(Dx,n),o=Wv(n),l=m.useRef(null),c=rt(e,l,s.onTriggerChange),u=m.useRef(!1),h=m.useRef(!1),f=m.useCallback(()=>u.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),i.jsx($v,{asChild:!0,...o,children:i.jsx(je.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:ce(t.onPointerMove,p=>{p.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:ce(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:ce(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ce(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:ce(t.onBlur,s.onClose),onClick:ce(t.onClick,s.onClose)})})});NO.displayName=Dx;var _O="TooltipPortal",[PK,EO]=gp(_O,{forceMount:void 0}),Rc="TooltipContent",vT=m.forwardRef((t,e)=>{const n=EO(Rc,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=t,o=xp(Rc,t.__scopeTooltip);return i.jsx(Ps,{present:r||o.open,children:o.disableHoverableContent?i.jsx(wT,{side:s,...a,ref:e}):i.jsx(jO,{side:s,...a,ref:e})})}),jO=m.forwardRef((t,e)=>{const n=xp(Rc,t.__scopeTooltip),r=gT(Rc,t.__scopeTooltip),s=m.useRef(null),a=rt(e,s),[o,l]=m.useState(null),{trigger:c,onClose:u}=n,h=s.current,{onPointerInTransitChange:f}=r,p=m.useCallback(()=>{l(null),f(!1)},[f]),g=m.useCallback((N,x)=>{const b=N.currentTarget,_={x:N.clientX,y:N.clientY},w=AO(_,b.getBoundingClientRect()),v=PO(_,w),C=RO(x.getBoundingClientRect()),I=DO([...v,...C]);l(I),f(!0)},[f]);return m.useEffect(()=>()=>p(),[p]),m.useEffect(()=>{if(c&&h){const N=b=>g(b,h),x=b=>g(b,c);return c.addEventListener("pointerleave",N),h.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",N),h.removeEventListener("pointerleave",x)}}},[c,h,g,p]),m.useEffect(()=>{if(o){const N=x=>{const b=x.target,_={x:x.clientX,y:x.clientY},w=(c==null?void 0:c.contains(b))||(h==null?void 0:h.contains(b)),v=!kO(_,o);w?p():v&&(p(),u())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[c,h,o,u,p]),i.jsx(wT,{...t,ref:a})}),[SO,TO]=gp(yT,{isInside:!1}),IO=T5("TooltipContent"),wT=m.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=t,c=xp(Rc,n),u=Wv(n),{onClose:h}=c;return m.useEffect(()=>(document.addEventListener(xN,h),()=>document.removeEventListener(xN,h)),[h]),m.useEffect(()=>{if(c.trigger){const f=p=>{const g=p.target;g!=null&&g.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),i.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:i.jsxs(Bv,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(IO,{children:r}),i.jsx(SO,{scope:n,isInside:!0,children:i.jsx(Q5,{id:c.contentId,role:"tooltip",children:s||r})})]})})});vT.displayName=Rc;var bT="TooltipArrow",CO=m.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Wv(n);return TO(bT,n).isInside?null:i.jsx(zv,{...s,...r,ref:e})});CO.displayName=bT;function AO(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),a=Math.abs(e.left-t.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function PO(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function RO(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function kO(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,h=l.y,f=c.x,p=c.y;h>r!=p>r&&n<(f-u)*(r-h)/(p-h)+u&&(s=!s)}return s}function DO(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),MO(e)}function MO(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const a=e[e.length-1],o=e[e.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const a=n[n.length-1],o=n[n.length-2];if((a.x-o.x)*(s.y-o.y)>=(a.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var OO=xT,NT=vT;const LO=OO,FO=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(NT,{ref:r,sideOffset:e,className:Se("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));FO.displayName=NT.displayName;var yp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},vp=typeof window>"u"||"Deno"in globalThis;function hs(){}function VO(t,e){return typeof t=="function"?t(e):t}function UO(t){return typeof t=="number"&&t>=0&&t!==1/0}function $O(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Mx(t,e){return typeof t=="function"?t(e):t}function BO(t,e){return typeof t=="function"?t(e):t}function yN(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Hv(o,e.options))return!1}else if(!wd(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||a&&!a(e))}function vN(t,e){const{exact:n,status:r,predicate:s,mutationKey:a}=t;if(a){if(!e.options.mutationKey)return!1;if(n){if(vd(e.options.mutationKey)!==vd(a))return!1}else if(!wd(e.options.mutationKey,a))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Hv(t,e){return((e==null?void 0:e.queryKeyHashFn)||vd)(t)}function vd(t){return JSON.stringify(t,(e,n)=>Ox(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function wd(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>wd(t[n],e[n])):!1}function _T(t,e){if(t===e)return t;const n=wN(t)&&wN(e);if(n||Ox(t)&&Ox(e)){const r=n?t:Object.keys(t),s=r.length,a=n?e:Object.keys(e),o=a.length,l=n?[]:{},c=new Set(r);let u=0;for(let h=0;h<o;h++){const f=n?h:a[h];(!n&&c.has(f)||n)&&t[f]===void 0&&e[f]===void 0?(l[f]=void 0,u++):(l[f]=_T(t[f],e[f]),l[f]===t[f]&&t[f]!==void 0&&u++)}return s===o&&u===s?t:l}return e}function wN(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Ox(t){if(!bN(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!bN(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function bN(t){return Object.prototype.toString.call(t)==="[object Object]"}function zO(t){return new Promise(e=>{setTimeout(e,t)})}function WO(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?_T(t,e):e}function HO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function qO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var qv=Symbol();function ET(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===qv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var To,fa,gc,kE,KO=(kE=class extends yp{constructor(){super();lt(this,To);lt(this,fa);lt(this,gc);Ue(this,gc,e=>{if(!vp&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){K(this,fa)||this.setEventListener(K(this,gc))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,fa))==null||e.call(this),Ue(this,fa,void 0))}setEventListener(e){var n;Ue(this,gc,e),(n=K(this,fa))==null||n.call(this),Ue(this,fa,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){K(this,To)!==e&&(Ue(this,To,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof K(this,To)=="boolean"?K(this,To):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},To=new WeakMap,fa=new WeakMap,gc=new WeakMap,kE),jT=new KO,xc,ma,yc,DE,GO=(DE=class extends yp{constructor(){super();lt(this,xc,!0);lt(this,ma);lt(this,yc);Ue(this,yc,e=>{if(!vp&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){K(this,ma)||this.setEventListener(K(this,yc))}onUnsubscribe(){var e;this.hasListeners()||((e=K(this,ma))==null||e.call(this),Ue(this,ma,void 0))}setEventListener(e){var n;Ue(this,yc,e),(n=K(this,ma))==null||n.call(this),Ue(this,ma,e(this.setOnline.bind(this)))}setOnline(e){K(this,xc)!==e&&(Ue(this,xc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return K(this,xc)}},xc=new WeakMap,ma=new WeakMap,yc=new WeakMap,DE),mm=new GO;function QO(){let t,e;const n=new Promise((s,a)=>{t=s,e=a});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function YO(t){return Math.min(1e3*2**t,3e4)}function ST(t){return(t??"online")==="online"?mm.isOnline():!0}var TT=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function a0(t){return t instanceof TT}function IT(t){let e=!1,n=0,r=!1,s;const a=QO(),o=x=>{var b;r||(p(new TT(x)),(b=t.abort)==null||b.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>jT.isFocused()&&(t.networkMode==="always"||mm.isOnline())&&t.canRun(),h=()=>ST(t.networkMode)&&t.canRun(),f=x=>{var b;r||(r=!0,(b=t.onSuccess)==null||b.call(t,x),s==null||s(),a.resolve(x))},p=x=>{var b;r||(r=!0,(b=t.onError)==null||b.call(t,x),s==null||s(),a.reject(x))},g=()=>new Promise(x=>{var b;s=_=>{(r||u())&&x(_)},(b=t.onPause)==null||b.call(t)}).then(()=>{var x;s=void 0,r||(x=t.onContinue)==null||x.call(t)}),N=()=>{if(r)return;let x;const b=n===0?t.initialPromise:void 0;try{x=b??t.fn()}catch(_){x=Promise.reject(_)}Promise.resolve(x).then(f).catch(_=>{var R;if(r)return;const w=t.retry??(vp?0:3),v=t.retryDelay??YO,C=typeof v=="function"?v(n,_):v,I=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(e||!I){p(_);return}n++,(R=t.onFail)==null||R.call(t,n,_),zO(C).then(()=>u()?void 0:g()).then(()=>{e?p(_):N()})})};return{promise:a,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?N():g().then(N),a)}}var XO=t=>setTimeout(t,0);function JO(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=XO;const a=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{a(()=>{l(...c)})},schedule:a,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var Zn=JO(),Io,ME,CT=(ME=class{constructor(){lt(this,Io)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),UO(this.gcTime)&&Ue(this,Io,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(vp?1/0:5*60*1e3))}clearGcTimeout(){K(this,Io)&&(clearTimeout(K(this,Io)),Ue(this,Io,void 0))}},Io=new WeakMap,ME),vc,Co,Hr,Ao,$n,Ld,Po,fs,fi,OE,ZO=(OE=class extends CT{constructor(n){super();lt(this,fs);lt(this,vc);lt(this,Co);lt(this,Hr);lt(this,Ao);lt(this,$n);lt(this,Ld);lt(this,Po);Ue(this,Po,!1),Ue(this,Ld,n.defaultOptions),this.setOptions(n.options),this.observers=[],Ue(this,Ao,n.client),Ue(this,Hr,K(this,Ao).getQueryCache()),this.queryKey=n.queryKey,this.queryHash=n.queryHash,Ue(this,vc,tL(this.options)),this.state=n.state??K(this,vc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=K(this,$n))==null?void 0:n.promise}setOptions(n){this.options={...K(this,Ld),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&K(this,Hr).remove(this)}setData(n,r){const s=WO(this.state.data,n,this.options);return Ln(this,fs,fi).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){Ln(this,fs,fi).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,a;const r=(s=K(this,$n))==null?void 0:s.promise;return(a=K(this,$n))==null||a.cancel(n),r?r.then(hs).catch(hs):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(K(this,vc))}isActive(){return this.observers.some(n=>BO(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(n=>Mx(n.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(n=0){return this.state.data===void 0?!0:n==="static"?!1:this.state.isInvalidated?!0:!$O(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,$n))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=K(this,$n))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),K(this,Hr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(K(this,$n)&&(K(this,Po)?K(this,$n).cancel({revert:!0}):K(this,$n).cancelRetry()),this.scheduleGc()),K(this,Hr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ln(this,fs,fi).call(this,{type:"invalidate"})}fetch(n,r){var h,f,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(K(this,$n))return K(this,$n).continueRetry(),K(this,$n).promise}if(n&&this.setOptions(n),!this.options.queryFn){const g=this.observers.find(N=>N.options.queryFn);g&&this.setOptions(g.options)}const s=new AbortController,a=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(Ue(this,Po,!0),s.signal)})},o=()=>{const g=ET(this.options,r),x=(()=>{const b={client:K(this,Ao),queryKey:this.queryKey,meta:this.meta};return a(b),b})();return Ue(this,Po,!1),this.options.persister?this.options.persister(g,x,this):g(x)},c=(()=>{const g={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:K(this,Ao),state:this.state,fetchFn:o};return a(g),g})();(h=this.options.behavior)==null||h.onFetch(c,this),Ue(this,Co,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=c.fetchOptions)==null?void 0:f.meta))&&Ln(this,fs,fi).call(this,{type:"fetch",meta:(p=c.fetchOptions)==null?void 0:p.meta});const u=g=>{var N,x,b,_;a0(g)&&g.silent||Ln(this,fs,fi).call(this,{type:"error",error:g}),a0(g)||((x=(N=K(this,Hr).config).onError)==null||x.call(N,g,this),(_=(b=K(this,Hr).config).onSettled)==null||_.call(b,this.state.data,g,this)),this.scheduleGc()};return Ue(this,$n,IT({initialPromise:r==null?void 0:r.initialPromise,fn:c.fetchFn,abort:s.abort.bind(s),onSuccess:g=>{var N,x,b,_;if(g===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(w){u(w);return}(x=(N=K(this,Hr).config).onSuccess)==null||x.call(N,g,this),(_=(b=K(this,Hr).config).onSettled)==null||_.call(b,g,this.state.error,this),this.scheduleGc()},onError:u,onFail:(g,N)=>{Ln(this,fs,fi).call(this,{type:"failed",failureCount:g,error:N})},onPause:()=>{Ln(this,fs,fi).call(this,{type:"pause"})},onContinue:()=>{Ln(this,fs,fi).call(this,{type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0})),K(this,$n).start()}},vc=new WeakMap,Co=new WeakMap,Hr=new WeakMap,Ao=new WeakMap,$n=new WeakMap,Ld=new WeakMap,Po=new WeakMap,fs=new WeakSet,fi=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...eL(s.data,this.options),fetchMeta:n.meta??null};case"success":return Ue(this,Co,void 0),{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=n.error;return a0(a)&&a.revert&&K(this,Co)?{...K(this,Co),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),Zn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),K(this,Hr).notify({query:this,type:"updated",action:n})})},OE);function eL(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ST(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function tL(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var $s,LE,nL=(LE=class extends yp{constructor(e={}){super();lt(this,$s);this.config=e,Ue(this,$s,new Map)}build(e,n,r){const s=n.queryKey,a=n.queryHash??Hv(s,n);let o=this.get(a);return o||(o=new ZO({client:e,queryKey:s,queryHash:a,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){K(this,$s).has(e.queryHash)||(K(this,$s).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=K(this,$s).get(e.queryHash);n&&(e.destroy(),n===e&&K(this,$s).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Zn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return K(this,$s).get(e)}getAll(){return[...K(this,$s).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>yN(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>yN(e,r)):n}notify(e){Zn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Zn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Zn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},$s=new WeakMap,LE),Bs,Xn,Ro,zs,ta,FE,rL=(FE=class extends CT{constructor(n){super();lt(this,zs);lt(this,Bs);lt(this,Xn);lt(this,Ro);this.mutationId=n.mutationId,Ue(this,Xn,n.mutationCache),Ue(this,Bs,[]),this.state=n.state||sL(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){K(this,Bs).includes(n)||(K(this,Bs).push(n),this.clearGcTimeout(),K(this,Xn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){Ue(this,Bs,K(this,Bs).filter(r=>r!==n)),this.scheduleGc(),K(this,Xn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){K(this,Bs).length||(this.state.status==="pending"?this.scheduleGc():K(this,Xn).remove(this))}continue(){var n;return((n=K(this,Ro))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,l,c,u,h,f,p,g,N,x,b,_,w,v,C,I,R,j,S,T;const r=()=>{Ln(this,zs,ta).call(this,{type:"continue"})};Ue(this,Ro,IT({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(P,A)=>{Ln(this,zs,ta).call(this,{type:"failed",failureCount:P,error:A})},onPause:()=>{Ln(this,zs,ta).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>K(this,Xn).canRun(this)}));const s=this.state.status==="pending",a=!K(this,Ro).canStart();try{if(s)r();else{Ln(this,zs,ta).call(this,{type:"pending",variables:n,isPaused:a}),await((l=(o=K(this,Xn).config).onMutate)==null?void 0:l.call(o,n,this));const A=await((u=(c=this.options).onMutate)==null?void 0:u.call(c,n));A!==this.state.context&&Ln(this,zs,ta).call(this,{type:"pending",context:A,variables:n,isPaused:a})}const P=await K(this,Ro).start();return await((f=(h=K(this,Xn).config).onSuccess)==null?void 0:f.call(h,P,n,this.state.context,this)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,P,n,this.state.context)),await((x=(N=K(this,Xn).config).onSettled)==null?void 0:x.call(N,P,null,this.state.variables,this.state.context,this)),await((_=(b=this.options).onSettled)==null?void 0:_.call(b,P,null,n,this.state.context)),Ln(this,zs,ta).call(this,{type:"success",data:P}),P}catch(P){try{throw await((v=(w=K(this,Xn).config).onError)==null?void 0:v.call(w,P,n,this.state.context,this)),await((I=(C=this.options).onError)==null?void 0:I.call(C,P,n,this.state.context)),await((j=(R=K(this,Xn).config).onSettled)==null?void 0:j.call(R,void 0,P,this.state.variables,this.state.context,this)),await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,P,n,this.state.context)),P}finally{Ln(this,zs,ta).call(this,{type:"error",error:P})}}finally{K(this,Xn).runNext(this)}}},Bs=new WeakMap,Xn=new WeakMap,Ro=new WeakMap,zs=new WeakSet,ta=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Zn.batch(()=>{K(this,Bs).forEach(s=>{s.onMutationUpdate(n)}),K(this,Xn).notify({mutation:this,type:"updated",action:n})})},FE);function sL(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var gi,ms,Fd,VE,iL=(VE=class extends yp{constructor(e={}){super();lt(this,gi);lt(this,ms);lt(this,Fd);this.config=e,Ue(this,gi,new Set),Ue(this,ms,new Map),Ue(this,Fd,0)}build(e,n,r){const s=new rL({mutationCache:this,mutationId:++Ch(this,Fd)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){K(this,gi).add(e);const n=Xh(e);if(typeof n=="string"){const r=K(this,ms).get(n);r?r.push(e):K(this,ms).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(K(this,gi).delete(e)){const n=Xh(e);if(typeof n=="string"){const r=K(this,ms).get(n);if(r)if(r.length>1){const s=r.indexOf(e);s!==-1&&r.splice(s,1)}else r[0]===e&&K(this,ms).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Xh(e);if(typeof n=="string"){const r=K(this,ms).get(n),s=r==null?void 0:r.find(a=>a.state.status==="pending");return!s||s===e}else return!0}runNext(e){var r;const n=Xh(e);if(typeof n=="string"){const s=(r=K(this,ms).get(n))==null?void 0:r.find(a=>a!==e&&a.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Zn.batch(()=>{K(this,gi).forEach(e=>{this.notify({type:"removed",mutation:e})}),K(this,gi).clear(),K(this,ms).clear()})}getAll(){return Array.from(K(this,gi))}find(e){const n={exact:!0,...e};return this.getAll().find(r=>vN(n,r))}findAll(e={}){return this.getAll().filter(n=>vN(e,n))}notify(e){Zn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Zn.batch(()=>Promise.all(e.map(n=>n.continue().catch(hs))))}},gi=new WeakMap,ms=new WeakMap,Fd=new WeakMap,VE);function Xh(t){var e;return(e=t.options.scope)==null?void 0:e.id}function NN(t){return{onFetch:(e,n)=>{var h,f,p,g,N;const r=e.options,s=(p=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:p.direction,a=((g=e.state.data)==null?void 0:g.pages)||[],o=((N=e.state.data)==null?void 0:N.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let x=!1;const b=v=>{Object.defineProperty(v,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},_=ET(e.options,e.fetchOptions),w=async(v,C,I)=>{if(x)return Promise.reject();if(C==null&&v.pages.length)return Promise.resolve(v);const j=(()=>{const A={client:e.client,queryKey:e.queryKey,pageParam:C,direction:I?"backward":"forward",meta:e.options.meta};return b(A),A})(),S=await _(j),{maxPages:T}=e.options,P=I?qO:HO;return{pages:P(v.pages,S,T),pageParams:P(v.pageParams,C,T)}};if(s&&a.length){const v=s==="backward",C=v?aL:_N,I={pages:a,pageParams:o},R=C(r,I);l=await w(I,R,v)}else{const v=t??a.length;do{const C=c===0?o[0]??r.initialPageParam:_N(r,l);if(c>0&&C==null)break;l=await w(l,C),c++}while(c<v)}return l};e.options.persister?e.fetchFn=()=>{var x,b;return(b=(x=e.options).persister)==null?void 0:b.call(x,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function _N(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function aL(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var $t,pa,ga,wc,bc,xa,Nc,_c,UE,oL=(UE=class{constructor(t={}){lt(this,$t);lt(this,pa);lt(this,ga);lt(this,wc);lt(this,bc);lt(this,xa);lt(this,Nc);lt(this,_c);Ue(this,$t,t.queryCache||new nL),Ue(this,pa,t.mutationCache||new iL),Ue(this,ga,t.defaultOptions||{}),Ue(this,wc,new Map),Ue(this,bc,new Map),Ue(this,xa,0)}mount(){Ch(this,xa)._++,K(this,xa)===1&&(Ue(this,Nc,jT.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,$t).onFocus())})),Ue(this,_c,mm.subscribe(async t=>{t&&(await this.resumePausedMutations(),K(this,$t).onOnline())})))}unmount(){var t,e;Ch(this,xa)._--,K(this,xa)===0&&((t=K(this,Nc))==null||t.call(this),Ue(this,Nc,void 0),(e=K(this,_c))==null||e.call(this),Ue(this,_c,void 0))}isFetching(t){return K(this,$t).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return K(this,pa).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,$t).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=K(this,$t).build(this,e),r=n.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(Mx(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return K(this,$t).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=K(this,$t).get(r.queryHash),a=s==null?void 0:s.state.data,o=VO(e,a);if(o!==void 0)return K(this,$t).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return Zn.batch(()=>K(this,$t).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=K(this,$t).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=K(this,$t);Zn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=K(this,$t);return Zn.batch(()=>(n.findAll(t).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},r=Zn.batch(()=>K(this,$t).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(hs).catch(hs)}invalidateQueries(t,e={}){return Zn.batch(()=>(K(this,$t).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},r=Zn.batch(()=>K(this,$t).findAll(t).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(hs)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(hs)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=K(this,$t).build(this,e);return n.isStaleByTime(Mx(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(hs).catch(hs)}fetchInfiniteQuery(t){return t.behavior=NN(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(hs).catch(hs)}ensureInfiniteQueryData(t){return t.behavior=NN(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return mm.isOnline()?K(this,pa).resumePausedMutations():Promise.resolve()}getQueryCache(){return K(this,$t)}getMutationCache(){return K(this,pa)}getDefaultOptions(){return K(this,ga)}setDefaultOptions(t){Ue(this,ga,t)}setQueryDefaults(t,e){K(this,wc).set(vd(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...K(this,wc).values()],n={};return e.forEach(r=>{wd(t,r.queryKey)&&Object.assign(n,r.defaultOptions)}),n}setMutationDefaults(t,e){K(this,bc).set(vd(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...K(this,bc).values()],n={};return e.forEach(r=>{wd(t,r.mutationKey)&&Object.assign(n,r.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...K(this,ga).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Hv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===qv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...K(this,ga).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){K(this,$t).clear(),K(this,pa).clear()}},$t=new WeakMap,pa=new WeakMap,ga=new WeakMap,wc=new WeakMap,bc=new WeakMap,xa=new WeakMap,Nc=new WeakMap,_c=new WeakMap,UE),lL=m.createContext(void 0),cL=({client:t,children:e})=>(m.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(lL.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bd(){return bd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bd.apply(this,arguments)}var ba;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ba||(ba={}));const EN="popstate";function uL(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:l}=r.location;return Lx("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:pm(s)}return hL(e,n,null,t)}function tn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function AT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dL(){return Math.random().toString(36).substr(2,8)}function jN(t,e){return{usr:t.state,key:t.key,idx:e}}function Lx(t,e,n,r){return n===void 0&&(n=null),bd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Gc(e):e,{state:n,key:e&&e.key||r||dL()})}function pm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Gc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function hL(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,l=ba.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(bd({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function f(){l=ba.Pop;let b=h(),_=b==null?null:b-u;u=b,c&&c({action:l,location:x.location,delta:_})}function p(b,_){l=ba.Push;let w=Lx(x.location,b,_);u=h()+1;let v=jN(w,u),C=x.createHref(w);try{o.pushState(v,"",C)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(C)}a&&c&&c({action:l,location:x.location,delta:1})}function g(b,_){l=ba.Replace;let w=Lx(x.location,b,_);u=h();let v=jN(w,u),C=x.createHref(w);o.replaceState(v,"",C),a&&c&&c({action:l,location:x.location,delta:0})}function N(b){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:pm(b);return w=w.replace(/ $/,"%20"),tn(_,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,_)}let x={get action(){return l},get location(){return t(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(EN,f),c=b,()=>{s.removeEventListener(EN,f),c=null}},createHref(b){return e(s,b)},createURL:N,encodeLocation(b){let _=N(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:p,replace:g,go(b){return o.go(b)}};return x}var SN;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(SN||(SN={}));function fL(t,e,n){return n===void 0&&(n="/"),mL(t,e,n,!1)}function mL(t,e,n,r){let s=typeof e=="string"?Gc(e):e,a=Kv(s.pathname||"/",n);if(a==null)return null;let o=PT(t);pL(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=SL(a);l=EL(o[c],u,r)}return l}function PT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(tn(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=Pa([r,c.relativePath]),h=n.concat(c);a.children&&a.children.length>0&&(tn(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),PT(a.children,e,h,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:NL(u,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of RT(a.path))s(a,o,c)}),e}function RT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=RT(r.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function pL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_L(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gL=/^:[\w-]+$/,xL=3,yL=2,vL=1,wL=10,bL=-2,TN=t=>t==="*";function NL(t,e){let n=t.split("/"),r=n.length;return n.some(TN)&&(r+=bL),e&&(r+=yL),n.filter(s=>!TN(s)).reduce((s,a)=>s+(gL.test(a)?xL:a===""?vL:wL),r)}function _L(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function EL(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=IN({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),p=c.route;if(!f&&u&&n&&!r[r.length-1].route.index&&(f=IN({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Pa([a,f.pathname]),pathnameBase:AL(Pa([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=Pa([a,f.pathnameBase]))}return o}function IN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jL(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,h,f)=>{let{paramName:p,isOptional:g}=h;if(p==="*"){let x=l[f]||"";o=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const N=l[f];return g&&!N?u[p]=void 0:u[p]=(N||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function jL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),AT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function SL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return AT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Kv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function TL(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Gc(t):t;return{pathname:n?n.startsWith("/")?n:IL(n,e):e,search:PL(r),hash:RL(s)}}function IL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function o0(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CL(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gv(t,e){let n=CL(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Qv(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Gc(t):(s=bd({},t),tn(!s.pathname||!s.pathname.includes("?"),o0("?","pathname","search",s)),tn(!s.pathname||!s.pathname.includes("#"),o0("#","pathname","hash",s)),tn(!s.search||!s.search.includes("#"),o0("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let c=TL(s,l),u=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Pa=t=>t.join("/").replace(/\/\/+/g,"/"),AL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),PL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kT=["post","put","patch","delete"];new Set(kT);const DL=["get",...kT];new Set(DL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nd(){return Nd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nd.apply(this,arguments)}const Yv=m.createContext(null),ML=m.createContext(null),eo=m.createContext(null),wp=m.createContext(null),to=m.createContext({outlet:null,matches:[],isDataRoute:!1}),DT=m.createContext(null);function OL(t,e){let{relative:n}=e===void 0?{}:e;Qc()||tn(!1);let{basename:r,navigator:s}=m.useContext(eo),{hash:a,pathname:o,search:l}=OT(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Pa([r,o])),s.createHref({pathname:c,search:l,hash:a})}function Qc(){return m.useContext(wp)!=null}function ol(){return Qc()||tn(!1),m.useContext(wp).location}function MT(t){m.useContext(eo).static||m.useLayoutEffect(t)}function Gn(){let{isDataRoute:t}=m.useContext(to);return t?QL():LL()}function LL(){Qc()||tn(!1);let t=m.useContext(Yv),{basename:e,future:n,navigator:r}=m.useContext(eo),{matches:s}=m.useContext(to),{pathname:a}=ol(),o=JSON.stringify(Gv(s,n.v7_relativeSplatPath)),l=m.useRef(!1);return MT(()=>{l.current=!0}),m.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=Qv(u,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Pa([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,a,t])}function OT(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=m.useContext(eo),{matches:s}=m.useContext(to),{pathname:a}=ol(),o=JSON.stringify(Gv(s,r.v7_relativeSplatPath));return m.useMemo(()=>Qv(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function FL(t,e){return VL(t,e)}function VL(t,e,n,r){Qc()||tn(!1);let{navigator:s}=m.useContext(eo),{matches:a}=m.useContext(to),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ol(),h;if(e){var f;let b=typeof e=="string"?Gc(e):e;c==="/"||(f=b.pathname)!=null&&f.startsWith(c)||tn(!1),h=b}else h=u;let p=h.pathname||"/",g=p;if(c!=="/"){let b=c.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(b.length).join("/")}let N=fL(t,{pathname:g}),x=WL(N&&N.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Pa([c,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:Pa([c,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,n,r);return e&&x?m.createElement(wp.Provider,{value:{location:Nd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ba.Pop}},x):x}function UL(){let t=GL(),e=kL(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},e),n?m.createElement("pre",{style:s},n):null,null)}const $L=m.createElement(UL,null);class BL extends m.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?m.createElement(to.Provider,{value:this.props.routeContext},m.createElement(DT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zL(t){let{routeContext:e,match:n,children:r}=t,s=m.useContext(Yv);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),m.createElement(to.Provider,{value:e},r)}function WL(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||tn(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=h),f.route.id){let{loaderData:p,errors:g}=n,N=f.route.loader&&p[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||N){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,f,p)=>{let g,N=!1,x=null,b=null;n&&(g=l&&f.route.id?l[f.route.id]:void 0,x=f.route.errorElement||$L,c&&(u<0&&p===0?(N=!0,b=null):u===p&&(N=!0,b=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,p+1)),w=()=>{let v;return g?v=x:N?v=b:f.route.Component?v=m.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=h,m.createElement(zL,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:v})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?m.createElement(BL,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):w()},null)}var LT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(LT||{}),gm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gm||{});function HL(t){let e=m.useContext(Yv);return e||tn(!1),e}function qL(t){let e=m.useContext(ML);return e||tn(!1),e}function KL(t){let e=m.useContext(to);return e||tn(!1),e}function FT(t){let e=KL(),n=e.matches[e.matches.length-1];return n.route.id||tn(!1),n.route.id}function GL(){var t;let e=m.useContext(DT),n=qL(gm.UseRouteError),r=FT(gm.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function QL(){let{router:t}=HL(LT.UseNavigateStable),e=FT(gm.UseNavigateStable),n=m.useRef(!1);return MT(()=>{n.current=!0}),m.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Nd({fromRouteId:e},a)))},[t,e])}function YL(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function VT(t){let{to:e,replace:n,state:r,relative:s}=t;Qc()||tn(!1);let{future:a,static:o}=m.useContext(eo),{matches:l}=m.useContext(to),{pathname:c}=ol(),u=Gn(),h=Qv(e,Gv(l,a.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return m.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function Qt(t){tn(!1)}function XL(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ba.Pop,navigator:a,static:o=!1,future:l}=t;Qc()&&tn(!1);let c=e.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:a,static:o,future:Nd({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof r=="string"&&(r=Gc(r));let{pathname:h="/",search:f="",hash:p="",state:g=null,key:N="default"}=r,x=m.useMemo(()=>{let b=Kv(h,c);return b==null?null:{location:{pathname:b,search:f,hash:p,state:g,key:N},navigationType:s}},[c,h,f,p,g,N,s]);return x==null?null:m.createElement(eo.Provider,{value:u},m.createElement(wp.Provider,{children:n,value:x}))}function UT(t){let{children:e,location:n}=t;return FL(Fx(e),n)}new Promise(()=>{});function Fx(t,e){e===void 0&&(e=[]);let n=[];return m.Children.forEach(t,(r,s)=>{if(!m.isValidElement(r))return;let a=[...e,s];if(r.type===m.Fragment){n.push.apply(n,Fx(r.props.children,a));return}r.type!==Qt&&tn(!1),!r.props.index||!r.props.children||tn(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Fx(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vx(){return Vx=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vx.apply(this,arguments)}function JL(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function ZL(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eF(t,e){return t.button===0&&(!e||e==="_self")&&!ZL(t)}function Ux(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function tF(t,e){let n=Ux(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const nF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rF="6";try{window.__reactRouterVersion=rF}catch{}const sF="startTransition",CN=Py[sF];function iF(t){let{basename:e,children:n,future:r,window:s}=t,a=m.useRef();a.current==null&&(a.current=uL({window:s,v5Compat:!0}));let o=a.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=m.useCallback(f=>{u&&CN?CN(()=>c(f)):c(f)},[c,u]);return m.useLayoutEffect(()=>o.listen(h),[o,h]),m.useEffect(()=>YL(r),[r]),m.createElement(XL,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const aF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Er=m.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,p=JL(e,nF),{basename:g}=m.useContext(eo),N,x=!1;if(typeof u=="string"&&oF.test(u)&&(N=u,aF))try{let v=new URL(window.location.href),C=u.startsWith("//")?new URL(v.protocol+u):new URL(u),I=Kv(C.pathname,g);C.origin===v.origin&&I!=null?u=I+C.search+C.hash:x=!0}catch{}let b=OL(u,{relative:s}),_=lF(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});function w(v){r&&r(v),v.defaultPrevented||_(v)}return m.createElement("a",Vx({},p,{href:N||b,onClick:x||a?r:w,ref:n,target:c}))});var AN;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(AN||(AN={}));var PN;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(PN||(PN={}));function lF(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=Gn(),u=ol(),h=OT(t,{relative:o});return m.useCallback(f=>{if(eF(f,n)){f.preventDefault();let p=r!==void 0?r:pm(u)===pm(h);c(t,{replace:p,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,h,r,s,n,t,a,o,l])}function $T(t){let e=m.useRef(Ux(t)),n=m.useRef(!1),r=ol(),s=m.useMemo(()=>tF(r.search,n.current?null:e.current),[r.search]),a=Gn(),o=m.useCallback((l,c)=>{const u=Ux(typeof l=="function"?l(s):l);n.current=!0,a("?"+u,c)},[a,s]);return[s,o]}const cF=()=>{};var RN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},uF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},zT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=a>>2,f=(a&3)<<4|l>>4;let p=(l&15)<<2|u>>6,g=u&63;c||(g=64,o||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(BT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||u==null||f==null)throw new dF;const p=a<<2|l>>4;if(r.push(p),u!==64){const g=l<<4&240|u>>2;if(r.push(g),f!==64){const N=u<<6&192|f;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class dF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hF=function(t){const e=BT(t);return zT.encodeByteArray(e,!0)},xm=function(t){return hF(t).replace(/\./g,"")},WT=function(t){try{return zT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mF=()=>fF().__FIREBASE_DEFAULTS__,pF=()=>{if(typeof process>"u"||typeof RN>"u")return;const t=RN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&WT(t[1]);return e&&JSON.parse(e)},bp=()=>{try{return cF()||mF()||pF()||gF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},HT=t=>{var e,n;return(n=(e=bp())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},qT=t=>{const e=HT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},KT=()=>{var t;return(t=bp())==null?void 0:t.config},GT=t=>{var e;return(e=bp())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[xm(JSON.stringify(n)),xm(JSON.stringify(o)),""].join(".")}const Ku={};function vF(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ku))Ku[e]?t.emulator.push(e):t.prod.push(e);return t}function wF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let kN=!1;function Jv(t,e){if(typeof window>"u"||typeof document>"u"||!ll(window.location.host)||Ku[t]===e||Ku[t]||kN)return;Ku[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",a=vF().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{kN=!0,o()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=wF(r),g=n("text"),N=document.getElementById(g)||document.createElement("span"),x=n("learnmore"),b=document.getElementById(x)||document.createElement("a"),_=n("preprendIcon"),w=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const v=p.element;l(v),h(b,x);const C=u();c(w,_),v.append(w,N,b,C),document.body.appendChild(v)}a?(N.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function NF(){var e;const t=(e=bp())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _F(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function EF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function jF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SF(){const t=Kn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TF(){return!NF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IF(){try{return typeof indexedDB=="object"}catch{return!1}}function CF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AF="FirebaseError";class zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AF,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yd.prototype.create)}}class Yd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?PF(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new zi(s,l,r)}}function PF(t,e){return t.replace(RF,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const RF=/\{\$([^}]+)}/g;function kF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ko(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(DN(a)&&DN(o)){if(!Ko(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function DN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Iu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Cu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DF(t,e){const n=new MF(t,e);return n.subscribe.bind(n)}class MF{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");OF(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=l0),s.error===void 0&&(s.error=l0),s.complete===void 0&&(s.complete=l0);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function l0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(t){return t&&t._delegate?t._delegate:t}class Wa{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const No="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new xF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(VF(e))try{this.getOrInitializeService({instanceIdentifier:No})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=No){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=No){return this.instances.has(e)}getOptions(e=No){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=No){return this.component?this.component.multipleInstances?e:No:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FF(t){return t===No?void 0:t}function VF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new LF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ye||(Ye={}));const $F={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},BF=Ye.INFO,zF={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},WF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=zF[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zv{constructor(e){this.name=e,this._logLevel=BF,this._logHandler=WF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$F[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const HF=(t,e)=>e.some(n=>t instanceof n);let MN,ON;function qF(){return MN||(MN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KF(){return ON||(ON=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QT=new WeakMap,$x=new WeakMap,YT=new WeakMap,c0=new WeakMap,ew=new WeakMap;function GF(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Ra(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&QT.set(n,t)}).catch(()=>{}),ew.set(e,t),e}function QF(t){if($x.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});$x.set(t,e)}let Bx={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return $x.get(t);if(e==="objectStoreNames")return t.objectStoreNames||YT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ra(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YF(t){Bx=t(Bx)}function XF(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(u0(this),e,...n);return YT.set(r,e.sort?e.sort():[e]),Ra(r)}:KF().includes(t)?function(...e){return t.apply(u0(this),e),Ra(QT.get(this))}:function(...e){return Ra(t.apply(u0(this),e))}}function JF(t){return typeof t=="function"?XF(t):(t instanceof IDBTransaction&&QF(t),HF(t,qF())?new Proxy(t,Bx):t)}function Ra(t){if(t instanceof IDBRequest)return GF(t);if(c0.has(t))return c0.get(t);const e=JF(t);return e!==t&&(c0.set(t,e),ew.set(e,t)),e}const u0=t=>ew.get(t);function ZF(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=Ra(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ra(o.result),c.oldVersion,c.newVersion,Ra(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const eV=["get","getKey","getAll","getAllKeys","count"],tV=["put","add","delete","clear"],d0=new Map;function LN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(d0.get(e))return d0.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=tV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||eV.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return d0.set(e,a),a}YF(t=>({...t,get:(e,n,r)=>LN(e,n)||t.get(e,n,r),has:(e,n)=>!!LN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rV(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zx="@firebase/app",FN="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=new Zv("@firebase/app"),sV="@firebase/app-compat",iV="@firebase/analytics-compat",aV="@firebase/analytics",oV="@firebase/app-check-compat",lV="@firebase/app-check",cV="@firebase/auth",uV="@firebase/auth-compat",dV="@firebase/database",hV="@firebase/data-connect",fV="@firebase/database-compat",mV="@firebase/functions",pV="@firebase/functions-compat",gV="@firebase/installations",xV="@firebase/installations-compat",yV="@firebase/messaging",vV="@firebase/messaging-compat",wV="@firebase/performance",bV="@firebase/performance-compat",NV="@firebase/remote-config",_V="@firebase/remote-config-compat",EV="@firebase/storage",jV="@firebase/storage-compat",SV="@firebase/firestore",TV="@firebase/ai",IV="@firebase/firestore-compat",CV="firebase",AV="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="[DEFAULT]",PV={[zx]:"fire-core",[sV]:"fire-core-compat",[aV]:"fire-analytics",[iV]:"fire-analytics-compat",[lV]:"fire-app-check",[oV]:"fire-app-check-compat",[cV]:"fire-auth",[uV]:"fire-auth-compat",[dV]:"fire-rtdb",[hV]:"fire-data-connect",[fV]:"fire-rtdb-compat",[mV]:"fire-fn",[pV]:"fire-fn-compat",[gV]:"fire-iid",[xV]:"fire-iid-compat",[yV]:"fire-fcm",[vV]:"fire-fcm-compat",[wV]:"fire-perf",[bV]:"fire-perf-compat",[NV]:"fire-rc",[_V]:"fire-rc-compat",[EV]:"fire-gcs",[jV]:"fire-gcs-compat",[SV]:"fire-fst",[IV]:"fire-fst-compat",[TV]:"fire-vertex","fire-js":"fire-js",[CV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d=new Map,RV=new Map,Hx=new Map;function VN(t,e){try{t.container.addComponent(e)}catch(n){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Go(t){const e=t.name;if(Hx.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;Hx.set(e,t);for(const n of _d.values())VN(n,t);for(const n of RV.values())VN(n,t);return!0}function Np(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Sr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ka=new Yd("app","Firebase",kV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ka.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc=AV;function XT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Wx,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ka.create("bad-app-name",{appName:String(s)});if(n||(n=KT()),!n)throw ka.create("no-options");const a=_d.get(s);if(a){if(Ko(n,a.options)&&Ko(r,a.config))return a;throw ka.create("duplicate-app",{appName:s})}const o=new UF(s);for(const c of Hx.values())o.addComponent(c);const l=new DV(n,r,o);return _d.set(s,l),l}function tw(t=Wx){const e=_d.get(t);if(!e&&t===Wx&&KT())return XT();if(!e)throw ka.create("no-app",{appName:t});return e}function UN(){return Array.from(_d.values())}function Zs(t,e,n){let r=PV[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(o.join(" "));return}Go(new Wa(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV="firebase-heartbeat-database",OV=1,Ed="firebase-heartbeat-store";let h0=null;function JT(){return h0||(h0=ZF(MV,OV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ed)}catch(n){console.warn(n)}}}}).catch(t=>{throw ka.create("idb-open",{originalErrorMessage:t.message})})),h0}async function LV(t){try{const n=(await JT()).transaction(Ed),r=await n.objectStore(Ed).get(ZT(t));return await n.done,r}catch(e){if(e instanceof zi)Oi.warn(e.message);else{const n=ka.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(n.message)}}}async function $N(t,e){try{const r=(await JT()).transaction(Ed,"readwrite");await r.objectStore(Ed).put(e,ZT(t)),await r.done}catch(n){if(n instanceof zi)Oi.warn(n.message);else{const r=ka.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Oi.warn(r.message)}}}function ZT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=1024,VV=30;class UV{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new BV(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=BN();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>VV){const o=zV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Oi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=BN(),{heartbeatsToSend:r,unsentEntries:s}=$V(this._heartbeatsCache.heartbeats),a=xm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Oi.warn(n),""}}}function BN(){return new Date().toISOString().substring(0,10)}function $V(t,e=FV){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),zN(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),zN(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class BV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IF()?CF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await LV(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $N(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return $N(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function zN(t){return xm(JSON.stringify({version:2,heartbeats:t})).length}function zV(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WV(t){Go(new Wa("platform-logger",e=>new nV(e),"PRIVATE")),Go(new Wa("heartbeat",e=>new UV(e),"PRIVATE")),Zs(zx,FN,t),Zs(zx,FN,"esm2020"),Zs("fire-js","")}WV("");var HV="firebase",qV="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zs(HV,qV,"app");function eI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const KV=eI,tI=new Yd("auth","Firebase",eI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=new Zv("@firebase/auth");function GV(t,...e){ym.logLevel<=Ye.WARN&&ym.warn(`Auth (${Yc}): ${t}`,...e)}function Tf(t,...e){ym.logLevel<=Ye.ERROR&&ym.error(`Auth (${Yc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(t,...e){throw nw(t,...e)}function ei(t,...e){return nw(t,...e)}function nI(t,e,n){const r={...KV(),[e]:n};return new Yd("auth","Firebase",r).create(e,{appName:t.name})}function Ei(t){return nI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nw(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tI.create(t,...e)}function Ce(t,e,...n){if(!t)throw nw(e,...n)}function vi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Tf(e),new Error(e)}function Li(t,e){t||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function QV(){return WN()==="http:"||WN()==="https:"}function WN(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(QV()||EF()||"connection"in navigator)?navigator.onLine:!0}function XV(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,n){this.shortDelay=e,this.longDelay=n,Li(n>e,"Short delay should be less than long delay!"),this.isMobile=bF()||jF()}get(){return YV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(t,e){Li(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],e9=new Jd(3e4,6e4);function Wi(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Rs(t,e,n,r,s={}){return sI(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const l=Xd({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...a};return _F()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&ll(t.emulatorConfig.host)&&(u.credentials="include"),rI.fetch()(await iI(t,t.config.apiHost,n,l),u)})}async function sI(t,e,n){t._canInitEmulator=!1;const r={...JV,...e};try{const s=new n9(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Jh(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jh(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Jh(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Jh(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw nI(t,h,u);Cs(t,h)}}catch(s){if(s instanceof zi)throw s;Cs(t,"network-request-failed",{message:String(s)})}}async function Zd(t,e,n,r,s={}){const a=await Rs(t,e,n,r,s);return"mfaPendingCredential"in a&&Cs(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function iI(t,e,n,r){const s=`${e}${n}?${r}`,a=t,o=a.config.emulator?rw(t.config,s):`${t.config.apiScheme}://${s}`;return ZV.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(o).toString():o}function t9(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class n9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ei(this.auth,"network-request-failed")),e9.get())})}}function Jh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ei(t,e,r);return s.customData._tokenResponse=n,s}function HN(t){return t!==void 0&&t.enterprise!==void 0}class r9{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return t9(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function s9(t,e){return Rs(t,"GET","/v2/recaptchaConfig",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i9(t,e){return Rs(t,"POST","/v1/accounts:delete",e)}async function vm(t,e){return Rs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function a9(t,e=!1){const n=kt(t),r=await n.getIdToken(e),s=sw(r);Ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:Gu(f0(s.auth_time)),issuedAtTime:Gu(f0(s.iat)),expirationTime:Gu(f0(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function f0(t){return Number(t)*1e3}function sw(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Tf("JWT malformed, contained fewer than 3 sections"),null;try{const s=WT(n);return s?JSON.parse(s):(Tf("Failed to decode base64 JWT payload"),null)}catch(s){return Tf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function qN(t){const e=sw(t);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qo(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof zi&&o9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function o9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gu(this.lastLoginAt),this.creationTime=Gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wm(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Qo(t,vm(e,{idToken:n}));Ce(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const a=(f=s.providerUserInfo)!=null&&f.length?aI(s.providerUserInfo):[],o=u9(t.providerData,a),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Kx(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function c9(t){const e=kt(t);await wm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function u9(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function aI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d9(t,e){const n=await sI(t,{},async()=>{const r=Xd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=await iI(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&ll(t.emulatorConfig.host)&&(c.credentials="include"),rI.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function h9(t,e){return Rs(t,"POST","/v2/accounts:revokeToken",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const n=qN(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await d9(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new uc;return r&&(Ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(Ce(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uc,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(t,e){Ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ys{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new l9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Kx(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Qo(this,this.stsTokenManager.getToken(this.auth,e));return Ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return a9(this,e)}reload(){return c9(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ys({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await wm(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(Ei(this.auth));const e=await this.getIdToken();return await Qo(this,i9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,a=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:p,isAnonymous:g,providerData:N,stsTokenManager:x}=n;Ce(f&&x,e,"internal-error");const b=uc.fromJSON(this.name,x);Ce(typeof f=="string",e,"internal-error"),ea(r,e.name),ea(s,e.name),Ce(typeof p=="boolean",e,"internal-error"),Ce(typeof g=="boolean",e,"internal-error"),ea(a,e.name),ea(o,e.name),ea(l,e.name),ea(c,e.name),ea(u,e.name),ea(h,e.name);const _=new ys({uid:f,auth:e,email:s,emailVerified:p,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:a,tenantId:l,stsTokenManager:b,createdAt:u,lastLoginAt:h});return N&&Array.isArray(N)&&(_.providerData=N.map(w=>({...w}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new uc;s.updateFromServerResponse(n);const a=new ys({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await wm(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ce(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?aI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new uc;l.updateFromIdToken(r);const c=new ys({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Kx(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=new Map;function wi(t){Li(t instanceof Function,"Expected a class definition");let e=KN.get(t);return e?(Li(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,KN.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oI.type="NONE";const GN=oI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t,e,n){return`firebase:${t}:${e}:${n}`}class dc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=If(this.userKey,s.apiKey,a),this.fullPersistenceKey=If("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await vm(this.auth,{idToken:e}).catch(()=>{});return n?ys._fromGetAccountInfoResponse(this.auth,n,e):null}return ys._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new dc(wi(GN),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let a=s[0]||wi(GN);const o=If(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const h=await u._get(o);if(h){let f;if(typeof h=="string"){const p=await vm(e,{idToken:h}).catch(()=>{});if(!p)break;f=await ys._fromGetAccountInfoResponse(e,p,h)}else f=ys._fromJSON(e,h);u!==a&&(l=f),a=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!a._shouldAllowMigration||!c.length?new dc(a,e,r):(a=c[0],l&&await a._set(o,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==a)try{await u._remove(o)}catch{}})),new dc(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fI(e))return"Blackberry";if(mI(e))return"Webos";if(cI(e))return"Safari";if((e.includes("chrome/")||uI(e))&&!e.includes("edge/"))return"Chrome";if(hI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lI(t=Kn()){return/firefox\//i.test(t)}function cI(t=Kn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uI(t=Kn()){return/crios\//i.test(t)}function dI(t=Kn()){return/iemobile/i.test(t)}function hI(t=Kn()){return/android/i.test(t)}function fI(t=Kn()){return/blackberry/i.test(t)}function mI(t=Kn()){return/webos/i.test(t)}function iw(t=Kn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function f9(t=Kn()){var e;return iw(t)&&!!((e=window.navigator)!=null&&e.standalone)}function m9(){return SF()&&document.documentMode===10}function pI(t=Kn()){return iw(t)||hI(t)||mI(t)||fI(t)||/windows phone/i.test(t)||dI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t,e=[]){let n;switch(t){case"Browser":n=QN(Kn());break;case"Worker":n=`${QN(Kn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,l)=>{try{const c=e(a);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g9(t,e={}){return Rs(t,"GET","/v2/passwordPolicy",Wi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9=6;class y9{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??x9,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v9{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new YN(this),this.idTokenSubscription=new YN(this),this.beforeStateQueue=new p9(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=wi(n)),this._initializationPromise=this.queue(async()=>{var r,s,a;if(!this._deleted&&(this.persistenceManager=await dc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await vm(this,{idToken:e}),r=await ys._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Sr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(a=this.redirectUser)==null?void 0:a._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await wm(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(Ei(this));const n=e?kt(e):null;return n&&Ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(Ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(Ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(wi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await g9(this),n=new y9(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await h9(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&wi(e)||this._popupRedirectResolver;Ce(n,this,"argument-error"),this.redirectPersistenceManager=await dc.create(this,[wi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&GV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function no(t){return kt(t)}class YN{constructor(e){this.auth=e,this.observer=null,this.addObserver=DF(n=>this.observer=n)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _p={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function w9(t){_p=t}function xI(t){return _p.loadJS(t)}function b9(){return _p.recaptchaEnterpriseScript}function N9(){return _p.gapiScript}function _9(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class E9{constructor(){this.enterprise=new j9}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class j9{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const S9="recaptcha-enterprise",yI="NO_RECAPTCHA";class T9{constructor(e){this.type=S9,this.auth=no(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{s9(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new r9(c);return a.tenantId==null?a._agentRecaptchaConfig=u:a._tenantRecaptchaConfigs[a.tenantId]=u,o(u.siteKey)}}).catch(c=>{l(c)})})}function s(a,o,l){const c=window.grecaptcha;HN(c)?c.enterprise.ready(()=>{c.enterprise.execute(a,{action:e}).then(u=>{o(u)}).catch(()=>{o(yI)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new E9().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{r(this.auth).then(l=>{if(!n&&HN(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=b9();c.length!==0&&(c+=l),xI(c).then(()=>{s(l,a,o)}).catch(u=>{o(u)})}}).catch(l=>{o(l)})})}}async function XN(t,e,n,r=!1,s=!1){const a=new T9(t);let o;if(s)o=yI;else try{o=await a.verify(n)}catch{o=await a.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function bm(t,e,n,r,s){var a;if((a=t._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await XN(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await XN(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I9(t,e){const n=Np(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(Ko(a,e??{}))return s;Cs(s,"already-initialized")}return n.initialize({options:e})}function C9(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function A9(t,e,n){const r=no(t);Ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),a=vI(e),{host:o,port:l}=P9(e),c=l===null?"":`:${l}`,u={url:`${a}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ce(Ko(u,r.config.emulator)&&Ko(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ll(o)?(Xv(`${a}//${o}${c}`),Jv("Auth",!0)):R9()}function vI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P9(t){const e=vI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:JN(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:JN(o)}}}function JN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function R9(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,n){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function k9(t,e){return Rs(t,"POST","/v1/accounts:update",e)}async function D9(t,e){return Rs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M9(t,e){return Zd(t,"POST","/v1/accounts:signInWithPassword",Wi(t,e))}async function O9(t,e){return Rs(t,"POST","/v1/accounts:sendOobCode",Wi(t,e))}async function L9(t,e){return O9(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F9(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",Wi(t,e))}async function V9(t,e){return Zd(t,"POST","/v1/accounts:signInWithEmailLink",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends aw{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new jd(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new jd(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bm(e,n,"signInWithPassword",M9);case"emailLink":return F9(e,{email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return bm(e,r,"signUpPassword",D9);case"emailLink":return V9(e,{idToken:n,email:this._email,oobCode:this._password});default:Cs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t,e){return Zd(t,"POST","/v1/accounts:signInWithIdp",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9="http://localhost";class Yo extends aw{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Yo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...a}=n;if(!r||!s)return null;const o=new Yo(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return hc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,hc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,hc(e,n)}buildRequest(){const e={requestUri:U9,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xd(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $9(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function B9(t){const e=Iu(Cu(t)).link,n=e?Iu(Cu(e)).deep_link_id:null,r=Iu(Cu(t)).deep_link_id;return(r?Iu(Cu(r)).link:null)||r||n||e||t}class ow{constructor(e){const n=Iu(Cu(e)),r=n.apiKey??null,s=n.oobCode??null,a=$9(n.mode??null);Ce(r&&s&&a,"argument-error"),this.apiKey=r,this.operation=a,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=B9(e);try{return new ow(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(){this.providerId=cl.PROVIDER_ID}static credential(e,n){return jd._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ow.parseLink(n);return Ce(r,"argument-error"),jd._fromEmailAndCode(e,r.code,r.tenantId)}}cl.PROVIDER_ID="password";cl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";cl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh extends wI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends eh{constructor(){super("facebook.com")}static credential(e){return Yo._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com";la.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends eh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Yo._fromParams({providerId:ca.PROVIDER_ID,signInMethod:ca.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ca.credentialFromTaggedObject(e)}static credentialFromError(e){return ca.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ca.credential(n,r)}catch{return null}}}ca.GOOGLE_SIGN_IN_METHOD="google.com";ca.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends eh{constructor(){super("github.com")}static credential(e){return Yo._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.GITHUB_SIGN_IN_METHOD="github.com";ua.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends eh{constructor(){super("twitter.com")}static credential(e,n){return Yo._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return da.credential(n,r)}catch{return null}}}da.TWITTER_SIGN_IN_METHOD="twitter.com";da.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z9(t,e){return Zd(t,"POST","/v1/accounts:signUp",Wi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await ys._fromIdTokenResponse(e,r,s),o=ZN(r);return new Xo({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ZN(r);return new Xo({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ZN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm extends zi{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Nm.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Nm(e,n,r,s)}}function bI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Nm._fromErrorAndOperation(t,a,e,r):a})}async function W9(t,e,n=!1){const r=await Qo(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Xo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NI(t,e,n=!1){const{auth:r}=t;if(Sr(r.app))return Promise.reject(Ei(r));const s="reauthenticate";try{const a=await Qo(t,bI(r,s,e,t),n);Ce(a.idToken,r,"internal-error");const o=sw(a.idToken);Ce(o,r,"internal-error");const{sub:l}=o;return Ce(t.uid===l,r,"user-mismatch"),Xo._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Cs(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _I(t,e,n=!1){if(Sr(t.app))return Promise.reject(Ei(t));const r="signIn",s=await bI(t,r,e),a=await Xo._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function H9(t,e){return _I(no(t),e)}async function q9(t,e){return NI(kt(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t){const e=no(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function K9(t,e,n){const r=no(t);await bm(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",L9)}async function Gx(t,e,n){if(Sr(t.app))return Promise.reject(Ei(t));const r=no(t),o=await bm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",z9).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&EI(t),c}),l=await Xo._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function lw(t,e,n){return Sr(t.app)?Promise.reject(Ei(t)):H9(kt(t),cl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&EI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G9(t,e){return Rs(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e_(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=kt(t),a={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Qo(r,G9(r.auth,a));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Q9(t,e){return Y9(kt(t),null,e)}async function Y9(t,e,n){const{auth:r}=t,a={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(a.password=n);const o=await Qo(t,k9(r,a));await t._updateTokensIfNecessary(o,!0)}function X9(t,e,n,r){return kt(t).onIdTokenChanged(e,n,r)}function J9(t,e,n){return kt(t).beforeAuthStateChanged(e,n)}function Qx(t,e,n,r){return kt(t).onAuthStateChanged(e,n,r)}function Yx(t){return kt(t).signOut()}const _m="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(_m,"1"),this.storage.removeItem(_m),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z9=1e3,eU=10;class SI extends jI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);m9()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,eU):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Z9)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SI.type="LOCAL";const tU=SI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI extends jI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TI.type="SESSION";const II=TI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ep(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(n.origin,a)),c=await nU(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ep.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,c)=>{const u=cw("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(h),clearTimeout(a),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(){return window}function sU(t){ti().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(){return typeof ti().WorkerGlobalScope<"u"&&typeof ti().importScripts=="function"}async function iU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aU(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function oU(){return CI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="firebaseLocalStorageDb",lU=1,Em="firebaseLocalStorage",PI="fbase_key";class th{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jp(t,e){return t.transaction([Em],e?"readwrite":"readonly").objectStore(Em)}function cU(){const t=indexedDB.deleteDatabase(AI);return new th(t).toPromise()}function Xx(){const t=indexedDB.open(AI,lU);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Em,{keyPath:PI})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Em)?e(r):(r.close(),await cU(),e(await Xx()))})})}async function t_(t,e,n){const r=jp(t,!0).put({[PI]:e,value:n});return new th(r).toPromise()}async function uU(t,e){const n=jp(t,!1).get(e),r=await new th(n).toPromise();return r===void 0?null:r.value}function n_(t,e){const n=jp(t,!0).delete(e);return new th(n).toPromise()}const dU=800,hU=3;class RI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>hU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ep._getInstance(oU()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await iU(),!this.activeServiceWorker)return;this.sender=new rU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xx();return await t_(e,_m,"1"),await n_(e,_m),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>t_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>uU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>n_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=jp(s,!1).getAll();return new th(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RI.type="LOCAL";const fU=RI;new Jd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mU(t,e){return e?wi(e):(Ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw extends aw{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return hc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return hc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return hc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function pU(t){return _I(t.auth,new uw(t),t.bypassAuthState)}function gU(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),NI(n,new uw(t),t.bypassAuthState)}async function xU(t){const{auth:e,user:n}=t;return Ce(n,e,"internal-error"),W9(n,new uw(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return pU;case"linkViaPopup":case"linkViaRedirect":return xU;case"reauthViaPopup":case"reauthViaRedirect":return gU;default:Cs(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=new Jd(2e3,1e4);class Xl extends kI{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,Xl.currentPopupAction&&Xl.currentPopupAction.cancel(),Xl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=cw();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ei(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ei(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ei(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yU.get())};e()}}Xl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vU="pendingRedirect",Cf=new Map;class wU extends kI{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Cf.get(this.auth._key());if(!e){try{const r=await bU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Cf.set(this.auth._key(),e)}return this.bypassAuthState||Cf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bU(t,e){const n=EU(e),r=_U(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function NU(t,e){Cf.set(t._key(),e)}function _U(t){return wi(t._redirectPersistence)}function EU(t){return If(vU,t.config.apiKey,t.name)}async function jU(t,e,n=!1){if(Sr(t.app))return Promise.reject(Ei(t));const r=no(t),s=mU(r,e),o=await new wU(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=10*60*1e3;class TU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!IU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!DI(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(ei(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=SU&&this.cachedEventUids.clear(),this.cachedEventUids.has(r_(e))}saveEventToCache(e){this.cachedEventUids.add(r_(e)),this.lastProcessedEventTime=Date.now()}}function r_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function IU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CU(t,e={}){return Rs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,PU=/^https?/;async function RU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await CU(t);for(const n of e)try{if(kU(n))return}catch{}Cs(t,"unauthorized-domain")}function kU(t){const e=qx(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!PU.test(n))return!1;if(AU.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=new Jd(3e4,6e4);function s_(){const t=ti().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function MU(t){return new Promise((e,n)=>{var s,a,o;function r(){s_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s_(),n(ei(t,"network-request-failed"))},timeout:DU.get()})}if((a=(s=ti().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((o=ti().gapi)!=null&&o.load)r();else{const l=_9("iframefcb");return ti()[l]=()=>{gapi.load?r():n(ei(t,"network-request-failed"))},xI(`${N9()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Af=null,e})}let Af=null;function OU(t){return Af=Af||MU(t),Af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=new Jd(5e3,15e3),FU="__/auth/iframe",VU="emulator/auth/iframe",UU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$U=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BU(t){const e=t.config;Ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?rw(e,VU):`https://${t.config.authDomain}/${FU}`,r={apiKey:e.apiKey,appName:t.name,v:Yc},s=$U.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Xd(r).slice(1)}`}async function zU(t){const e=await OU(t),n=ti().gapi;return Ce(n,t,"internal-error"),e.open({where:document.body,url:BU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UU,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=ei(t,"network-request-failed"),l=ti().setTimeout(()=>{a(o)},LU.get());function c(){ti().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HU=500,qU=600,KU="_blank",GU="http://localhost";class i_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QU(t,e,n,r=HU,s=qU){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...WU,width:r.toString(),height:s.toString(),top:a,left:o},u=Kn().toLowerCase();n&&(l=uI(u)?KU:n),lI(u)&&(e=e||GU,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,N])=>`${p}${g}=${N},`,"");if(f9(u)&&l!=="_self")return YU(e||"",l),new i_(null);const f=window.open(e||"",l,h);Ce(f,t,"popup-blocked");try{f.focus()}catch{}return new i_(f)}function YU(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU="__/auth/handler",JU="emulator/auth/handler",ZU=encodeURIComponent("fac");async function a_(t,e,n,r,s,a){Ce(t.config.authDomain,t,"auth-domain-config-required"),Ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Yc,eventId:s};if(e instanceof wI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",kF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof eh){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),u=c?`#${ZU}=${encodeURIComponent(c)}`:"";return`${e8(t)}?${Xd(l).slice(1)}${u}`}function e8({config:t}){return t.emulator?rw(t,JU):`https://${t.authDomain}/${XU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0="webStorageSupport";class t8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=II,this._completeRedirectFn=jU,this._overrideRedirectResult=NU}async _openPopup(e,n,r,s){var o;Li((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await a_(e,n,r,qx(),s);return QU(e,a,cw())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await a_(e,n,r,qx(),s);return sU(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Li(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await zU(e),r=new TU(e);return n.register("authEvent",s=>(Ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(m0,{type:m0},s=>{var o;const a=(o=s==null?void 0:s[0])==null?void 0:o[m0];a!==void 0&&n(!!a),Cs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=RU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return pI()||cI()||iw()}}const n8=t8;var o_="@firebase/auth",l_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i8(t){Go(new Wa("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gI(t)},u=new v9(r,s,a,c);return C9(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Go(new Wa("auth-internal",e=>{const n=no(e.getProvider("auth").getImmediate());return(r=>new r8(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zs(o_,l_,s8(t)),Zs(o_,l_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8=5*60,o8=GT("authIdTokenMaxAge")||a8;let c_=null;const l8=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>o8)return;const s=n==null?void 0:n.token;c_!==s&&(c_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function c8(t=tw()){const e=Np(t,"auth");if(e.isInitialized())return e.getImmediate();const n=I9(t,{popupRedirectResolver:n8,persistence:[fU,tU,II]}),r=GT("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=l8(a.toString());J9(n,o,()=>o(n.currentUser)),X9(n,l=>o(l))}}const s=HT("auth");return s&&A9(n,`http://${s}`),n}function u8(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}w9({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=ei("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",u8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i8("Browser");var u_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Da,MI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,S){function T(){}T.prototype=S.prototype,j.D=S.prototype,j.prototype=new T,j.prototype.constructor=j,j.C=function(P,A,D){for(var M=Array(arguments.length-2),$=2;$<arguments.length;$++)M[$-2]=arguments[$];return S.prototype[A].apply(P,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,S,T){T||(T=0);var P=Array(16);if(typeof S=="string")for(var A=0;16>A;++A)P[A]=S.charCodeAt(T++)|S.charCodeAt(T++)<<8|S.charCodeAt(T++)<<16|S.charCodeAt(T++)<<24;else for(A=0;16>A;++A)P[A]=S[T++]|S[T++]<<8|S[T++]<<16|S[T++]<<24;S=j.g[0],T=j.g[1],A=j.g[2];var D=j.g[3],M=S+(D^T&(A^D))+P[0]+3614090360&4294967295;S=T+(M<<7&4294967295|M>>>25),M=D+(A^S&(T^A))+P[1]+3905402710&4294967295,D=S+(M<<12&4294967295|M>>>20),M=A+(T^D&(S^T))+P[2]+606105819&4294967295,A=D+(M<<17&4294967295|M>>>15),M=T+(S^A&(D^S))+P[3]+3250441966&4294967295,T=A+(M<<22&4294967295|M>>>10),M=S+(D^T&(A^D))+P[4]+4118548399&4294967295,S=T+(M<<7&4294967295|M>>>25),M=D+(A^S&(T^A))+P[5]+1200080426&4294967295,D=S+(M<<12&4294967295|M>>>20),M=A+(T^D&(S^T))+P[6]+2821735955&4294967295,A=D+(M<<17&4294967295|M>>>15),M=T+(S^A&(D^S))+P[7]+4249261313&4294967295,T=A+(M<<22&4294967295|M>>>10),M=S+(D^T&(A^D))+P[8]+1770035416&4294967295,S=T+(M<<7&4294967295|M>>>25),M=D+(A^S&(T^A))+P[9]+2336552879&4294967295,D=S+(M<<12&4294967295|M>>>20),M=A+(T^D&(S^T))+P[10]+4294925233&4294967295,A=D+(M<<17&4294967295|M>>>15),M=T+(S^A&(D^S))+P[11]+2304563134&4294967295,T=A+(M<<22&4294967295|M>>>10),M=S+(D^T&(A^D))+P[12]+1804603682&4294967295,S=T+(M<<7&4294967295|M>>>25),M=D+(A^S&(T^A))+P[13]+4254626195&4294967295,D=S+(M<<12&4294967295|M>>>20),M=A+(T^D&(S^T))+P[14]+2792965006&4294967295,A=D+(M<<17&4294967295|M>>>15),M=T+(S^A&(D^S))+P[15]+1236535329&4294967295,T=A+(M<<22&4294967295|M>>>10),M=S+(A^D&(T^A))+P[1]+4129170786&4294967295,S=T+(M<<5&4294967295|M>>>27),M=D+(T^A&(S^T))+P[6]+3225465664&4294967295,D=S+(M<<9&4294967295|M>>>23),M=A+(S^T&(D^S))+P[11]+643717713&4294967295,A=D+(M<<14&4294967295|M>>>18),M=T+(D^S&(A^D))+P[0]+3921069994&4294967295,T=A+(M<<20&4294967295|M>>>12),M=S+(A^D&(T^A))+P[5]+3593408605&4294967295,S=T+(M<<5&4294967295|M>>>27),M=D+(T^A&(S^T))+P[10]+38016083&4294967295,D=S+(M<<9&4294967295|M>>>23),M=A+(S^T&(D^S))+P[15]+3634488961&4294967295,A=D+(M<<14&4294967295|M>>>18),M=T+(D^S&(A^D))+P[4]+3889429448&4294967295,T=A+(M<<20&4294967295|M>>>12),M=S+(A^D&(T^A))+P[9]+568446438&4294967295,S=T+(M<<5&4294967295|M>>>27),M=D+(T^A&(S^T))+P[14]+3275163606&4294967295,D=S+(M<<9&4294967295|M>>>23),M=A+(S^T&(D^S))+P[3]+4107603335&4294967295,A=D+(M<<14&4294967295|M>>>18),M=T+(D^S&(A^D))+P[8]+1163531501&4294967295,T=A+(M<<20&4294967295|M>>>12),M=S+(A^D&(T^A))+P[13]+2850285829&4294967295,S=T+(M<<5&4294967295|M>>>27),M=D+(T^A&(S^T))+P[2]+4243563512&4294967295,D=S+(M<<9&4294967295|M>>>23),M=A+(S^T&(D^S))+P[7]+1735328473&4294967295,A=D+(M<<14&4294967295|M>>>18),M=T+(D^S&(A^D))+P[12]+2368359562&4294967295,T=A+(M<<20&4294967295|M>>>12),M=S+(T^A^D)+P[5]+4294588738&4294967295,S=T+(M<<4&4294967295|M>>>28),M=D+(S^T^A)+P[8]+2272392833&4294967295,D=S+(M<<11&4294967295|M>>>21),M=A+(D^S^T)+P[11]+1839030562&4294967295,A=D+(M<<16&4294967295|M>>>16),M=T+(A^D^S)+P[14]+4259657740&4294967295,T=A+(M<<23&4294967295|M>>>9),M=S+(T^A^D)+P[1]+2763975236&4294967295,S=T+(M<<4&4294967295|M>>>28),M=D+(S^T^A)+P[4]+1272893353&4294967295,D=S+(M<<11&4294967295|M>>>21),M=A+(D^S^T)+P[7]+4139469664&4294967295,A=D+(M<<16&4294967295|M>>>16),M=T+(A^D^S)+P[10]+3200236656&4294967295,T=A+(M<<23&4294967295|M>>>9),M=S+(T^A^D)+P[13]+681279174&4294967295,S=T+(M<<4&4294967295|M>>>28),M=D+(S^T^A)+P[0]+3936430074&4294967295,D=S+(M<<11&4294967295|M>>>21),M=A+(D^S^T)+P[3]+3572445317&4294967295,A=D+(M<<16&4294967295|M>>>16),M=T+(A^D^S)+P[6]+76029189&4294967295,T=A+(M<<23&4294967295|M>>>9),M=S+(T^A^D)+P[9]+3654602809&4294967295,S=T+(M<<4&4294967295|M>>>28),M=D+(S^T^A)+P[12]+3873151461&4294967295,D=S+(M<<11&4294967295|M>>>21),M=A+(D^S^T)+P[15]+530742520&4294967295,A=D+(M<<16&4294967295|M>>>16),M=T+(A^D^S)+P[2]+3299628645&4294967295,T=A+(M<<23&4294967295|M>>>9),M=S+(A^(T|~D))+P[0]+4096336452&4294967295,S=T+(M<<6&4294967295|M>>>26),M=D+(T^(S|~A))+P[7]+1126891415&4294967295,D=S+(M<<10&4294967295|M>>>22),M=A+(S^(D|~T))+P[14]+2878612391&4294967295,A=D+(M<<15&4294967295|M>>>17),M=T+(D^(A|~S))+P[5]+4237533241&4294967295,T=A+(M<<21&4294967295|M>>>11),M=S+(A^(T|~D))+P[12]+1700485571&4294967295,S=T+(M<<6&4294967295|M>>>26),M=D+(T^(S|~A))+P[3]+2399980690&4294967295,D=S+(M<<10&4294967295|M>>>22),M=A+(S^(D|~T))+P[10]+4293915773&4294967295,A=D+(M<<15&4294967295|M>>>17),M=T+(D^(A|~S))+P[1]+2240044497&4294967295,T=A+(M<<21&4294967295|M>>>11),M=S+(A^(T|~D))+P[8]+1873313359&4294967295,S=T+(M<<6&4294967295|M>>>26),M=D+(T^(S|~A))+P[15]+4264355552&4294967295,D=S+(M<<10&4294967295|M>>>22),M=A+(S^(D|~T))+P[6]+2734768916&4294967295,A=D+(M<<15&4294967295|M>>>17),M=T+(D^(A|~S))+P[13]+1309151649&4294967295,T=A+(M<<21&4294967295|M>>>11),M=S+(A^(T|~D))+P[4]+4149444226&4294967295,S=T+(M<<6&4294967295|M>>>26),M=D+(T^(S|~A))+P[11]+3174756917&4294967295,D=S+(M<<10&4294967295|M>>>22),M=A+(S^(D|~T))+P[2]+718787259&4294967295,A=D+(M<<15&4294967295|M>>>17),M=T+(D^(A|~S))+P[9]+3951481745&4294967295,j.g[0]=j.g[0]+S&4294967295,j.g[1]=j.g[1]+(A+(M<<21&4294967295|M>>>11))&4294967295,j.g[2]=j.g[2]+A&4294967295,j.g[3]=j.g[3]+D&4294967295}r.prototype.u=function(j,S){S===void 0&&(S=j.length);for(var T=S-this.blockSize,P=this.B,A=this.h,D=0;D<S;){if(A==0)for(;D<=T;)s(this,j,D),D+=this.blockSize;if(typeof j=="string"){for(;D<S;)if(P[A++]=j.charCodeAt(D++),A==this.blockSize){s(this,P),A=0;break}}else for(;D<S;)if(P[A++]=j[D++],A==this.blockSize){s(this,P),A=0;break}}this.h=A,this.o+=S},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var S=1;S<j.length-8;++S)j[S]=0;var T=8*this.o;for(S=j.length-8;S<j.length;++S)j[S]=T&255,T/=256;for(this.u(j),j=Array(16),S=T=0;4>S;++S)for(var P=0;32>P;P+=8)j[T++]=this.g[S]>>>P&255;return j};function a(j,S){var T=l;return Object.prototype.hasOwnProperty.call(T,j)?T[j]:T[j]=S(j)}function o(j,S){this.h=S;for(var T=[],P=!0,A=j.length-1;0<=A;A--){var D=j[A]|0;P&&D==S||(T[A]=D,P=!1)}this.g=T}var l={};function c(j){return-128<=j&&128>j?a(j,function(S){return new o([S|0],0>S?-1:0)}):new o([j|0],0>j?-1:0)}function u(j){if(isNaN(j)||!isFinite(j))return f;if(0>j)return b(u(-j));for(var S=[],T=1,P=0;j>=T;P++)S[P]=j/T|0,T*=4294967296;return new o(S,0)}function h(j,S){if(j.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(j.charAt(0)=="-")return b(h(j.substring(1),S));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(S,8)),P=f,A=0;A<j.length;A+=8){var D=Math.min(8,j.length-A),M=parseInt(j.substring(A,A+D),S);8>D?(D=u(Math.pow(S,D)),P=P.j(D).add(u(M))):(P=P.j(T),P=P.add(u(M)))}return P}var f=c(0),p=c(1),g=c(16777216);t=o.prototype,t.m=function(){if(x(this))return-b(this).m();for(var j=0,S=1,T=0;T<this.g.length;T++){var P=this.i(T);j+=(0<=P?P:4294967296+P)*S,S*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(N(this))return"0";if(x(this))return"-"+b(this).toString(j);for(var S=u(Math.pow(j,6)),T=this,P="";;){var A=C(T,S).g;T=_(T,A.j(S));var D=((0<T.g.length?T.g[0]:T.h)>>>0).toString(j);if(T=A,N(T))return D+P;for(;6>D.length;)D="0"+D;P=D+P}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function N(j){if(j.h!=0)return!1;for(var S=0;S<j.g.length;S++)if(j.g[S]!=0)return!1;return!0}function x(j){return j.h==-1}t.l=function(j){return j=_(this,j),x(j)?-1:N(j)?0:1};function b(j){for(var S=j.g.length,T=[],P=0;P<S;P++)T[P]=~j.g[P];return new o(T,~j.h).add(p)}t.abs=function(){return x(this)?b(this):this},t.add=function(j){for(var S=Math.max(this.g.length,j.g.length),T=[],P=0,A=0;A<=S;A++){var D=P+(this.i(A)&65535)+(j.i(A)&65535),M=(D>>>16)+(this.i(A)>>>16)+(j.i(A)>>>16);P=M>>>16,D&=65535,M&=65535,T[A]=M<<16|D}return new o(T,T[T.length-1]&-2147483648?-1:0)};function _(j,S){return j.add(b(S))}t.j=function(j){if(N(this)||N(j))return f;if(x(this))return x(j)?b(this).j(b(j)):b(b(this).j(j));if(x(j))return b(this.j(b(j)));if(0>this.l(g)&&0>j.l(g))return u(this.m()*j.m());for(var S=this.g.length+j.g.length,T=[],P=0;P<2*S;P++)T[P]=0;for(P=0;P<this.g.length;P++)for(var A=0;A<j.g.length;A++){var D=this.i(P)>>>16,M=this.i(P)&65535,$=j.i(A)>>>16,se=j.i(A)&65535;T[2*P+2*A]+=M*se,w(T,2*P+2*A),T[2*P+2*A+1]+=D*se,w(T,2*P+2*A+1),T[2*P+2*A+1]+=M*$,w(T,2*P+2*A+1),T[2*P+2*A+2]+=D*$,w(T,2*P+2*A+2)}for(P=0;P<S;P++)T[P]=T[2*P+1]<<16|T[2*P];for(P=S;P<2*S;P++)T[P]=0;return new o(T,0)};function w(j,S){for(;(j[S]&65535)!=j[S];)j[S+1]+=j[S]>>>16,j[S]&=65535,S++}function v(j,S){this.g=j,this.h=S}function C(j,S){if(N(S))throw Error("division by zero");if(N(j))return new v(f,f);if(x(j))return S=C(b(j),S),new v(b(S.g),b(S.h));if(x(S))return S=C(j,b(S)),new v(b(S.g),S.h);if(30<j.g.length){if(x(j)||x(S))throw Error("slowDivide_ only works with positive integers.");for(var T=p,P=S;0>=P.l(j);)T=I(T),P=I(P);var A=R(T,1),D=R(P,1);for(P=R(P,2),T=R(T,2);!N(P);){var M=D.add(P);0>=M.l(j)&&(A=A.add(T),D=M),P=R(P,1),T=R(T,1)}return S=_(j,A.j(S)),new v(A,S)}for(A=f;0<=j.l(S);){for(T=Math.max(1,Math.floor(j.m()/S.m())),P=Math.ceil(Math.log(T)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),D=u(T),M=D.j(S);x(M)||0<M.l(j);)T-=P,D=u(T),M=D.j(S);N(D)&&(D=p),A=A.add(D),j=_(j,M)}return new v(A,j)}t.A=function(j){return C(this,j).h},t.and=function(j){for(var S=Math.max(this.g.length,j.g.length),T=[],P=0;P<S;P++)T[P]=this.i(P)&j.i(P);return new o(T,this.h&j.h)},t.or=function(j){for(var S=Math.max(this.g.length,j.g.length),T=[],P=0;P<S;P++)T[P]=this.i(P)|j.i(P);return new o(T,this.h|j.h)},t.xor=function(j){for(var S=Math.max(this.g.length,j.g.length),T=[],P=0;P<S;P++)T[P]=this.i(P)^j.i(P);return new o(T,this.h^j.h)};function I(j){for(var S=j.g.length+1,T=[],P=0;P<S;P++)T[P]=j.i(P)<<1|j.i(P-1)>>>31;return new o(T,j.h)}function R(j,S){var T=S>>5;S%=32;for(var P=j.g.length-T,A=[],D=0;D<P;D++)A[D]=0<S?j.i(D+T)>>>S|j.i(D+T+1)<<32-S:j.i(D+T);return new o(A,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,MI=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Da=o}).apply(typeof u_<"u"?u_:typeof self<"u"?self:typeof window<"u"?window:{});var Zh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OI,Au,LI,Pf,Jx,FI,VI,UI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,E){return d==Array.prototype||d==Object.prototype||(d[y]=E.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Zh=="object"&&Zh];for(var y=0;y<d.length;++y){var E=d[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=n(this);function s(d,y){if(y)e:{var E=r;d=d.split(".");for(var k=0;k<d.length-1;k++){var F=d[k];if(!(F in E))break e;E=E[F]}d=d[d.length-1],k=E[d],y=y(k),y!=k&&y!=null&&e(E,d,{configurable:!0,writable:!0,value:y})}}function a(d,y){d instanceof String&&(d+="");var E=0,k=!1,F={next:function(){if(!k&&E<d.length){var B=E++;return{value:y(B,d[B]),done:!1}}return k=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(d){return d||function(){return a(this,function(y,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function u(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function h(d,y,E){return d.call.apply(d.bind,arguments)}function f(d,y,E){if(!d)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,k),d.apply(y,F)}}return function(){return d.apply(y,arguments)}}function p(d,y,E){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(d,y){var E=Array.prototype.slice.call(arguments,1);return function(){var k=E.slice();return k.push.apply(k,arguments),d.apply(this,k)}}function N(d,y){function E(){}E.prototype=y.prototype,d.aa=y.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(k,F,B){for(var ie=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)ie[vt-2]=arguments[vt];return y.prototype[F].apply(k,ie)}}function x(d){const y=d.length;if(0<y){const E=Array(y);for(let k=0;k<y;k++)E[k]=d[k];return E}return[]}function b(d,y){for(let E=1;E<arguments.length;E++){const k=arguments[E];if(c(k)){const F=d.length||0,B=k.length||0;d.length=F+B;for(let ie=0;ie<B;ie++)d[F+ie]=k[ie]}else d.push(k)}}class _{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function w(d){return/^[\s\xa0]*$/.test(d)}function v(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function C(d){return C[" "](d),d}C[" "]=function(){};var I=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function R(d,y,E){for(const k in d)y.call(E,d[k],k,d)}function j(d,y){for(const E in d)y.call(void 0,d[E],E,d)}function S(d){const y={};for(const E in d)y[E]=d[E];return y}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,y){let E,k;for(let F=1;F<arguments.length;F++){k=arguments[F];for(E in k)d[E]=k[E];for(let B=0;B<T.length;B++)E=T[B],Object.prototype.hasOwnProperty.call(k,E)&&(d[E]=k[E])}}function A(d){var y=1;d=d.split(":");const E=[];for(;0<y&&d.length;)E.push(d.shift()),y--;return d.length&&E.push(d.join(":")),E}function D(d){l.setTimeout(()=>{throw d},0)}function M(){var d=L;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class ${constructor(){this.h=this.g=null}add(y,E){const k=se.get();k.set(y,E),this.h?this.h.next=k:this.g=k,this.h=k}}var se=new _(()=>new W,d=>d.reset());class W{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let X,U=!1,L=new $,Q=()=>{const d=l.Promise.resolve(void 0);X=()=>{d.then(he)}};var he=()=>{for(var d;d=M();){try{d.h.call(d.g)}catch(E){D(E)}var y=se;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}U=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,y),l.removeEventListener("test",E,y)}catch{}return d}();function We(d,y){if(me.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,k=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(I){e:{try{C(y.nodeName);var F=!0;break e}catch{}F=!1}F||(y=null)}}else E=="mouseover"?y=d.fromElement:E=="mouseout"&&(y=d.toElement);this.relatedTarget=y,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:He[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&We.aa.h.call(this)}}N(We,me);var He={2:"touch",3:"pen",4:"mouse"};We.prototype.h=function(){We.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Z="closure_listenable_"+(1e6*Math.random()|0),z=0;function oe(d,y,E,k,F){this.listener=d,this.proxy=null,this.src=y,this.type=E,this.capture=!!k,this.ha=F,this.key=++z,this.da=this.fa=!1}function le(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ve(d){this.src=d,this.g={},this.h=0}ve.prototype.add=function(d,y,E,k,F){var B=d.toString();d=this.g[B],d||(d=this.g[B]=[],this.h++);var ie=Be(d,y,k,F);return-1<ie?(y=d[ie],E||(y.fa=!1)):(y=new oe(y,this.src,B,!!k,F),y.fa=E,d.push(y)),y};function Ee(d,y){var E=y.type;if(E in d.g){var k=d.g[E],F=Array.prototype.indexOf.call(k,y,void 0),B;(B=0<=F)&&Array.prototype.splice.call(k,F,1),B&&(le(y),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Be(d,y,E,k){for(var F=0;F<d.length;++F){var B=d[F];if(!B.da&&B.listener==y&&B.capture==!!E&&B.ha==k)return F}return-1}var ht="closure_lm_"+(1e6*Math.random()|0),st={};function gt(d,y,E,k,F){if(Array.isArray(y)){for(var B=0;B<y.length;B++)gt(d,y[B],E,k,F);return null}return E=Ur(E),d&&d[Z]?d.K(y,E,u(k)?!!k.capture:!!k,F):Ct(d,y,E,!1,k,F)}function Ct(d,y,E,k,F,B){if(!y)throw Error("Invalid event type");var ie=u(F)?!!F.capture:!!F,vt=Rn(d);if(vt||(d[ht]=vt=new ve(d)),E=vt.add(y,E,k,ie,B),E.proxy)return E;if(k=En(),E.proxy=k,k.src=d,k.listener=E,d.addEventListener)Ne||(F=ie),F===void 0&&(F=!1),d.addEventListener(y.toString(),k,F);else if(d.attachEvent)d.attachEvent(Vr(y.toString()),k);else if(d.addListener&&d.removeListener)d.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return E}function En(){function d(E){return y.call(d.src,d.listener,E)}const y=qi;return d}function Qn(d,y,E,k,F){if(Array.isArray(y))for(var B=0;B<y.length;B++)Qn(d,y[B],E,k,F);else k=u(k)?!!k.capture:!!k,E=Ur(E),d&&d[Z]?(d=d.i,y=String(y).toString(),y in d.g&&(B=d.g[y],E=Be(B,E,k,F),-1<E&&(le(B[E]),Array.prototype.splice.call(B,E,1),B.length==0&&(delete d.g[y],d.h--)))):d&&(d=Rn(d))&&(y=d.g[y.toString()],d=-1,y&&(d=Be(y,E,k,F)),(E=-1<d?y[d]:null)&&ns(E))}function ns(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[Z])Ee(y.i,d);else{var E=d.type,k=d.proxy;y.removeEventListener?y.removeEventListener(E,k,d.capture):y.detachEvent?y.detachEvent(Vr(E),k):y.addListener&&y.removeListener&&y.removeListener(k),(E=Rn(y))?(Ee(E,d),E.h==0&&(E.src=null,y[ht]=null)):le(d)}}}function Vr(d){return d in st?st[d]:st[d]="on"+d}function qi(d,y){if(d.da)d=!0;else{y=new We(y,this);var E=d.listener,k=d.ha||d.src;d.fa&&ns(d),d=E.call(k,y)}return d}function Rn(d){return d=d[ht],d instanceof ve?d:null}var rs="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ur(d){return typeof d=="function"?d:(d[rs]||(d[rs]=function(y){return d.handleEvent(y)}),d[rs])}function Oe(){ne.call(this),this.i=new ve(this),this.M=this,this.F=null}N(Oe,ne),Oe.prototype[Z]=!0,Oe.prototype.removeEventListener=function(d,y,E,k){Qn(this,d,y,E,k)};function Ke(d,y){var E,k=d.F;if(k)for(E=[];k;k=k.F)E.push(k);if(d=d.M,k=y.type||y,typeof y=="string")y=new me(y,d);else if(y instanceof me)y.target=y.target||d;else{var F=y;y=new me(k,d),P(y,F)}if(F=!0,E)for(var B=E.length-1;0<=B;B--){var ie=y.g=E[B];F=Et(ie,k,!0,y)&&F}if(ie=y.g=d,F=Et(ie,k,!0,y)&&F,F=Et(ie,k,!1,y)&&F,E)for(B=0;B<E.length;B++)ie=y.g=E[B],F=Et(ie,k,!1,y)&&F}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var E=d.g[y],k=0;k<E.length;k++)le(E[k]);delete d.g[y],d.h--}}this.F=null},Oe.prototype.K=function(d,y,E,k){return this.i.add(String(d),y,!1,E,k)},Oe.prototype.L=function(d,y,E,k){return this.i.add(String(d),y,!0,E,k)};function Et(d,y,E,k){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var F=!0,B=0;B<y.length;++B){var ie=y[B];if(ie&&!ie.da&&ie.capture==E){var vt=ie.listener,jn=ie.ha||ie.src;ie.fa&&Ee(d.i,ie),F=vt.call(jn,k)!==!1&&F}}return F&&!k.defaultPrevented}function Y(d,y,E){if(typeof d=="function")E&&(d=p(d,E));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:l.setTimeout(d,y||0)}function we(d){d.g=Y(()=>{d.g=null,d.i&&(d.i=!1,we(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class ut extends ne{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:we(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function At(d){ne.call(this),this.h=d,this.g={}}N(At,ne);var Dt=[];function xt(d){R(d.g,function(y,E){this.g.hasOwnProperty(E)&&ns(y)},d),d.g={}}At.prototype.N=function(){At.aa.N.call(this),xt(this)},At.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ar=l.JSON.stringify,$r=l.JSON.parse,Ki=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function li(){}li.prototype.h=null;function Ds(d){return d.h||(d.h=d.i())}function nn(){}var Yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vr(){me.call(this,"d")}N(vr,me);function Gt(){me.call(this,"c")}N(Gt,me);var Br={},Pe=null;function Ge(){return Pe=Pe||new Oe}Br.La="serverreachability";function it(d){me.call(this,Br.La,d)}N(it,me);function ft(d){const y=Ge();Ke(y,new it(y))}Br.STAT_EVENT="statevent";function kn(d,y){me.call(this,Br.STAT_EVENT,d),this.stat=y}N(kn,me);function wt(d){const y=Ge();Ke(y,new kn(y,d))}Br.Ma="timingevent";function zr(d,y){me.call(this,Br.Ma,d),this.size=y}N(zr,me);function cn(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},y)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function hg(d,y,E,k,F,B){d.info(function(){if(d.g)if(B)for(var ie="",vt=B.split("&"),jn=0;jn<vt.length;jn++){var ot=vt[jn].split("=");if(1<ot.length){var Mn=ot[0];ot=ot[1];var On=Mn.split("_");ie=2<=On.length&&On[1]=="type"?ie+(Mn+"="+ot+"&"):ie+(Mn+"=redacted&")}}else ie=null;else ie=B;return"XMLHTTP REQ ("+k+") [attempt "+F+"]: "+y+`
`+E+`
`+ie})}function fg(d,y,E,k,F,B,ie){d.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+F+"]: "+y+`
`+E+`
`+B+" "+ie})}function Gi(d,y,E,k){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+gl(d,E)+(k?" "+k:"")})}function pl(d,y){d.info(function(){return"TIMEOUT: "+y})}Dn.prototype.info=function(){};function gl(d,y){if(!d.g)return y;if(!y)return null;try{var E=JSON.parse(y);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var k=E[d];if(!(2>k.length)){var F=k[1];if(Array.isArray(F)&&!(1>F.length)){var B=F[0];if(B!="noop"&&B!="stop"&&B!="close")for(var ie=1;ie<F.length;ie++)F[ie]=""}}}}return ar(E)}catch{return y}}var Qi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},oo;function lo(){}N(lo,li),lo.prototype.g=function(){return new XMLHttpRequest},lo.prototype.i=function(){return{}},oo=new lo;function ss(d,y,E,k){this.j=d,this.i=y,this.l=E,this.R=k||1,this.U=new At(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vh}function vh(){this.i=null,this.g="",this.h=!1}var co={},yl={};function uo(d,y,E){d.L=1,d.v=Ls(is(y)),d.m=E,d.P=!0,su(d,null)}function su(d,y){d.F=Date.now(),ho(d),d.A=is(d.v);var E=d.A,k=d.R;Array.isArray(k)||(k=[String(k)]),H(E.i,"t",k),d.C=0,E=d.j.J,d.h=new vh,d.g=k1(d.j,E?y:null,!d.m),0<d.O&&(d.M=new ut(p(d.Y,d,d.g),d.O)),y=d.U,E=d.g,k=d.ca;var F="readystatechange";Array.isArray(F)||(F&&(Dt[0]=F.toString()),F=Dt);for(var B=0;B<F.length;B++){var ie=gt(E,F[B],k||y.handleEvent,!1,y.h||y);if(!ie)break;y.g[ie.key]=ie}y=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),ft(),hg(d.i,d.u,d.A,d.l,d.R,d.m)}ss.prototype.ca=function(d){d=d.target;const y=this.M;y&&di(d)==3?y.j():this.Y(d)},ss.prototype.Y=function(d){try{if(d==this.g)e:{const On=di(this.g);var y=this.g.Ba();const Sl=this.g.Z();if(!(3>On)&&(On!=3||this.g&&(this.h.h||this.g.oa()||N1(this.g)))){this.J||On!=4||y==7||(y==8||0>=Sl?ft(3):ft(2)),au(this);var E=this.g.Z();this.X=E;t:if(vl(this)){var k=N1(this.g);d="";var F=k.length,B=di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wr(this),fo(this);var ie="";break t}this.h.i=new l.TextDecoder}for(y=0;y<F;y++)this.h.h=!0,d+=this.h.i.decode(k[y],{stream:!(B&&y==F-1)});k.length=0,this.h.g+=d,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=E==200,fg(this.i,this.u,this.A,this.l,this.R,On,E),this.o){if(this.T&&!this.K){t:{if(this.g){var vt,jn=this.g;if((vt=jn.g?jn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(vt)){var ot=vt;break t}}ot=null}if(E=ot)Gi(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wl(this,E);else{this.o=!1,this.s=3,wt(12),Wr(this),fo(this);break e}}if(this.P){E=!0;let os;for(;!this.J&&this.C<ie.length;)if(os=wh(this,ie),os==yl){On==4&&(this.s=4,wt(14),E=!1),Gi(this.i,this.l,null,"[Incomplete Response]");break}else if(os==co){this.s=4,wt(15),Gi(this.i,this.l,ie,"[Invalid Chunk]"),E=!1;break}else Gi(this.i,this.l,os,null),wl(this,os);if(vl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||ie.length!=0||this.h.h||(this.s=1,wt(16),E=!1),this.o=this.o&&E,!E)Gi(this.i,this.l,ie,"[Invalid Chunked Response]"),Wr(this),fo(this);else if(0<ie.length&&!this.W){this.W=!0;var Mn=this.j;Mn.g==this&&Mn.ba&&!Mn.M&&(Mn.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),_g(Mn),Mn.M=!0,wt(11))}}else Gi(this.i,this.l,ie,null),wl(this,ie);On==4&&Wr(this),this.o&&!this.J&&(On==4?C1(this.j,this):(this.o=!1,ho(this)))}else Bk(this.g),E==400&&0<ie.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),Wr(this),fo(this)}}}catch{}finally{}};function vl(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function wh(d,y){var E=d.C,k=y.indexOf(`
`,E);return k==-1?yl:(E=Number(y.substring(E,k)),isNaN(E)?co:(k+=1,k+E>y.length?yl:(y=y.slice(k,k+E),d.C=k+E,y)))}ss.prototype.cancel=function(){this.J=!0,Wr(this)};function ho(d){d.S=Date.now()+d.I,iu(d,d.I)}function iu(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=cn(p(d.ba,d),y)}function au(d){d.B&&(l.clearTimeout(d.B),d.B=null)}ss.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(pl(this.i,this.A),this.L!=2&&(ft(),wt(17)),Wr(this),this.s=2,fo(this)):iu(this,this.S-d)};function fo(d){d.j.G==0||d.J||C1(d.j,d)}function Wr(d){au(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,xt(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function wl(d,y){try{var E=d.j;if(E.G!=0&&(E.g==d||po(E.h,d))){if(!d.K&&po(E.h,d)&&E.G==3){try{var k=E.Da.g.parse(y)}catch{k=null}if(Array.isArray(k)&&k.length==3){var F=k;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Sh(E),Eh(E);else break e;Ng(E),wt(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=cn(p(E.Za,E),6e3));if(1>=Nl(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else yo(E,11)}else if((d.K||E.g==d)&&Sh(E),!w(y))for(F=E.Da.g.parse(y),y=0;y<F.length;y++){let ot=F[y];if(E.T=ot[0],ot=ot[1],E.G==2)if(ot[0]=="c"){E.K=ot[1],E.ia=ot[2];const Mn=ot[3];Mn!=null&&(E.la=Mn,E.j.info("VER="+E.la));const On=ot[4];On!=null&&(E.Aa=On,E.j.info("SVER="+E.Aa));const Sl=ot[5];Sl!=null&&typeof Sl=="number"&&0<Sl&&(k=1.5*Sl,E.L=k,E.j.info("backChannelRequestTimeoutMs_="+k)),k=E;const os=d.g;if(os){const Ih=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ih){var B=k.h;B.g||Ih.indexOf("spdy")==-1&&Ih.indexOf("quic")==-1&&Ih.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(ou(B,B.h),B.h=null))}if(k.D){const Eg=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Eg&&(k.ya=Eg,yt(k.I,k.D,Eg))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),k=E;var ie=d;if(k.qa=R1(k,k.J?k.ia:null,k.W),ie.K){_l(k.h,ie);var vt=ie,jn=k.L;jn&&(vt.I=jn),vt.B&&(au(vt),ho(vt)),k.g=ie}else T1(k);0<E.i.length&&jh(E)}else ot[0]!="stop"&&ot[0]!="close"||yo(E,7);else E.G==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?yo(E,7):bg(E):ot[0]!="noop"&&E.l&&E.l.ta(ot),E.v=0)}}ft(4)}catch{}}var bl=class{constructor(d,y){this.g=d,this.map=y}};function bh(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Nl(d){return d.h?1:d.g?d.g.size:0}function po(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function ou(d,y){d.g?d.g.add(y):d.h=y}function _l(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}bh.prototype.cancel=function(){if(this.i=lu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function lu(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const E of d.g.values())y=y.concat(E.D);return y}return x(d.i)}function El(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var y=[],E=d.length,k=0;k<E;k++)y.push(d[k]);return y}y=[],E=0;for(k in d)y[E++]=d[k];return y}function mg(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var y=[];d=d.length;for(var E=0;E<d;E++)y.push(E);return y}y=[],E=0;for(const k in d)y[E++]=k;return y}}}function cu(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var E=mg(d),k=El(d),F=k.length,B=0;B<F;B++)y.call(void 0,k[B],E&&E[B],d)}var go=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pg(d,y){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var k=d[E].indexOf("="),F=null;if(0<=k){var B=d[E].substring(0,k);F=d[E].substring(k+1)}else B=d[E];y(B,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ms(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ms){this.h=d.h,ci(this,d.j),this.o=d.o,this.g=d.g,Os(this,d.s),this.l=d.l;var y=d.i,E=new xo;E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),uu(this,E),this.m=d.m}else d&&(y=String(d).match(go))?(this.h=!1,ci(this,y[1]||"",!0),this.o=ui(y[2]||""),this.g=ui(y[3]||"",!0),Os(this,y[4]),this.l=ui(y[5]||"",!0),uu(this,y[6]||"",!0),this.m=ui(y[7]||"")):(this.h=!1,this.i=new xo(null,this.h))}Ms.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Yi(y,Nh,!0),":");var E=this.g;return(E||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Yi(y,Nh,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Yi(E,E.charAt(0)=="/"?yg:xg,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Yi(E,wg)),d.join("")};function is(d){return new Ms(d)}function ci(d,y,E){d.j=E?ui(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function Os(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function uu(d,y,E){y instanceof xo?(d.i=y,re(d.i,d.h)):(E||(y=Yi(y,vg)),d.i=new xo(y,d.h))}function yt(d,y,E){d.i.set(y,E)}function Ls(d){return yt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ui(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Yi(d,y,E){return typeof d=="string"?(d=encodeURI(d).replace(y,gg),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function gg(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Nh=/[#\/\?@]/g,xg=/[#\?:]/g,yg=/[#\?]/g,vg=/[#\?@]/g,wg=/#/g;function xo(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function as(d){d.g||(d.g=new Map,d.h=0,d.i&&pg(d.i,function(y,E){d.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}t=xo.prototype,t.add=function(d,y){as(this),this.i=null,d=ee(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(y),this.h+=1,this};function du(d,y){as(d),y=ee(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function O(d,y){return as(d),y=ee(d,y),d.g.has(y)}t.forEach=function(d,y){as(this),this.g.forEach(function(E,k){E.forEach(function(F){d.call(y,F,k,this)},this)},this)},t.na=function(){as(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),E=[];for(let k=0;k<y.length;k++){const F=d[k];for(let B=0;B<F.length;B++)E.push(y[k])}return E},t.V=function(d){as(this);let y=[];if(typeof d=="string")O(this,d)&&(y=y.concat(this.g.get(ee(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)y=y.concat(d[E])}return y},t.set=function(d,y){return as(this),this.i=null,d=ee(this,d),O(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},t.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function H(d,y,E){du(d,y),0<E.length&&(d.i=null,d.g.set(ee(d,y),x(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var E=0;E<y.length;E++){var k=y[E];const B=encodeURIComponent(String(k)),ie=this.V(k);for(k=0;k<ie.length;k++){var F=B;ie[k]!==""&&(F+="="+encodeURIComponent(String(ie[k]))),d.push(F)}}return this.i=d.join("&")};function ee(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function re(d,y){y&&!d.j&&(as(d),d.i=null,d.g.forEach(function(E,k){var F=k.toLowerCase();k!=F&&(du(this,k),H(this,F,E))},d)),d.j=y}function pe(d,y){const E=new Dn;if(l.Image){const k=new Image;k.onload=g(Ie,E,"TestLoadImage: loaded",!0,y,k),k.onerror=g(Ie,E,"TestLoadImage: error",!1,y,k),k.onabort=g(Ie,E,"TestLoadImage: abort",!1,y,k),k.ontimeout=g(Ie,E,"TestLoadImage: timeout",!1,y,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=d}else y(!1)}function at(d,y){const E=new Dn,k=new AbortController,F=setTimeout(()=>{k.abort(),Ie(E,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:k.signal}).then(B=>{clearTimeout(F),B.ok?Ie(E,"TestPingServer: ok",!0,y):Ie(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),Ie(E,"TestPingServer: error",!1,y)})}function Ie(d,y,E,k,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),k(E)}catch{}}function Fe(){this.g=new Ki}function ze(d,y,E){const k=E||"";try{cu(d,function(F,B){let ie=F;u(F)&&(ie=ar(F)),y.push(k+B+"="+encodeURIComponent(ie))})}catch(F){throw y.push(k+"type="+encodeURIComponent("_badmap")),F}}function ke(d){this.l=d.Ub||null,this.j=d.eb||!1}N(ke,li),ke.prototype.g=function(){return new xe(this.l,this.j)},ke.prototype.i=function(d){return function(){return d}}({});function xe(d,y){Oe.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(xe,Oe),t=xe.prototype,t.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,ye(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||l).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Re(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ye(this)),this.g&&(this.readyState=3,ye(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ve(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ve(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?Re(this):ye(this),this.readyState==3&&Ve(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Re(this))},t.Qa=function(d){this.g&&(this.response=d,Re(this))},t.ga=function(){this.g&&Re(this)};function Re(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ye(d)}t.setRequestHeader=function(d,y){this.u.append(d,y)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=y.next();return d.join(`\r
`)};function ye(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(xe.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function pn(d){let y="";return R(d,function(E,k){y+=k,y+=":",y+=E,y+=`\r
`}),y}function wr(d,y,E){e:{for(k in E){var k=!1;break e}k=!0}k||(E=pn(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):yt(d,y,E))}function Ut(d){Oe.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ut,Oe);var Uk=/^https?$/i,$k=["POST","PUT"];t=Ut.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,y,E,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oo.g(),this.v=this.o?Ds(this.o):Ds(oo),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(B){y1(this,B);return}if(d=E||"",E=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var F in k)E.set(F,k[F]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const B of k.keys())E.set(B,k.get(B));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(E.keys()).find(B=>B.toLowerCase()=="content-type"),F=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call($k,y,void 0))||k||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,ie]of E)this.g.setRequestHeader(B,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{b1(this),this.u=!0,this.g.send(d),this.u=!1}catch(B){y1(this,B)}};function y1(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,v1(d),_h(d)}function v1(d){d.A||(d.A=!0,Ke(d,"complete"),Ke(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ke(this,"complete"),Ke(this,"abort"),_h(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_h(this,!0)),Ut.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?w1(this):this.bb())},t.bb=function(){w1(this)};function w1(d){if(d.h&&typeof o<"u"&&(!d.v[1]||di(d)!=4||d.Z()!=2)){if(d.u&&di(d)==4)Y(d.Ea,0,d);else if(Ke(d,"readystatechange"),di(d)==4){d.h=!1;try{const ie=d.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var k;if(k=ie===0){var F=String(d.D).match(go)[1]||null;!F&&l.self&&l.self.location&&(F=l.self.location.protocol.slice(0,-1)),k=!Uk.test(F?F.toLowerCase():"")}E=k}if(E)Ke(d,"complete"),Ke(d,"success");else{d.m=6;try{var B=2<di(d)?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.Z()+"]",v1(d)}}finally{_h(d)}}}}function _h(d,y){if(d.g){b1(d);const E=d.g,k=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Ke(d,"ready");try{E.onreadystatechange=k}catch{}}}function b1(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function di(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<di(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),$r(y)}};function N1(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Bk(d){const y={};d=(d.g&&2<=di(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<d.length;k++){if(w(d[k]))continue;var E=A(d[k]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const B=y[F]||[];y[F]=B,B.push(E)}j(y,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hu(d,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||y}function _1(d){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hu("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hu("baseRetryDelayMs",5e3,d),this.cb=hu("retryDelaySeedMs",1e4,d),this.Wa=hu("forwardChannelMaxRetries",2,d),this.wa=hu("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new bh(d&&d.concurrentRequestLimit),this.Da=new Fe,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_1.prototype,t.la=8,t.G=1,t.connect=function(d,y,E,k){wt(0),this.W=d,this.H=y||{},E&&k!==void 0&&(this.H.OSID=E,this.H.OAID=k),this.F=this.X,this.I=R1(this,null,this.W),jh(this)};function bg(d){if(E1(d),d.G==3){var y=d.U++,E=is(d.I);if(yt(E,"SID",d.K),yt(E,"RID",y),yt(E,"TYPE","terminate"),fu(d,E),y=new ss(d,d.j,y),y.L=2,y.v=Ls(is(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(y.v.toString(),"")}catch{}!E&&l.Image&&(new Image().src=y.v,E=!0),E||(y.g=k1(y.j,null),y.g.ea(y.v)),y.F=Date.now(),ho(y)}P1(d)}function Eh(d){d.g&&(_g(d),d.g.cancel(),d.g=null)}function E1(d){Eh(d),d.u&&(l.clearTimeout(d.u),d.u=null),Sh(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function jh(d){if(!mo(d.h)&&!d.s){d.s=!0;var y=d.Ga;X||Q(),U||(X(),U=!0),L.add(y,d),d.B=0}}function zk(d,y){return Nl(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=cn(p(d.Ga,d,y),A1(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const F=new ss(this,this.j,d);let B=this.o;if(this.S&&(B?(B=S(B),P(B,this.S)):B=this.S),this.m!==null||this.O||(F.H=B,B=null),this.P)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var k=this.i[E];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(y+=k,4096<y){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=S1(this,F,y),E=is(this.I),yt(E,"RID",d),yt(E,"CVER",22),this.D&&yt(E,"X-HTTP-Session-Id",this.D),fu(this,E),B&&(this.O?y="headers="+encodeURIComponent(String(pn(B)))+"&"+y:this.m&&wr(E,this.m,B)),ou(this.h,F),this.Ua&&yt(E,"TYPE","init"),this.P?(yt(E,"$req",y),yt(E,"SID","null"),F.T=!0,uo(F,E,null)):uo(F,E,y),this.G=2}}else this.G==3&&(d?j1(this,d):this.i.length==0||mo(this.h)||j1(this))};function j1(d,y){var E;y?E=y.l:E=d.U++;const k=is(d.I);yt(k,"SID",d.K),yt(k,"RID",E),yt(k,"AID",d.T),fu(d,k),d.m&&d.o&&wr(k,d.m,d.o),E=new ss(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),y&&(d.i=y.D.concat(d.i)),y=S1(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ou(d.h,E),uo(E,k,y)}function fu(d,y){d.H&&R(d.H,function(E,k){yt(y,k,E)}),d.l&&cu({},function(E,k){yt(y,k,E)})}function S1(d,y,E){E=Math.min(d.i.length,E);var k=d.l?p(d.l.Na,d.l,d):null;e:{var F=d.i;let B=-1;for(;;){const ie=["count="+E];B==-1?0<E?(B=F[0].g,ie.push("ofs="+B)):B=0:ie.push("ofs="+B);let vt=!0;for(let jn=0;jn<E;jn++){let ot=F[jn].g;const Mn=F[jn].map;if(ot-=B,0>ot)B=Math.max(0,F[jn].g-100),vt=!1;else try{ze(Mn,ie,"req"+ot+"_")}catch{k&&k(Mn)}}if(vt){k=ie.join("&");break e}}}return d=d.i.splice(0,E),y.D=d,k}function T1(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;X||Q(),U||(X(),U=!0),L.add(y,d),d.v=0}}function Ng(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=cn(p(d.Fa,d),A1(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,I1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=cn(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Eh(this),I1(this))};function _g(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function I1(d){d.g=new ss(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=is(d.qa);yt(y,"RID","rpc"),yt(y,"SID",d.K),yt(y,"AID",d.T),yt(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&yt(y,"TO",d.ja),yt(y,"TYPE","xmlhttp"),fu(d,y),d.m&&d.o&&wr(y,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Ls(is(y)),E.m=null,E.P=!0,su(E,d)}t.Za=function(){this.C!=null&&(this.C=null,Eh(this),Ng(this),wt(19))};function Sh(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function C1(d,y){var E=null;if(d.g==y){Sh(d),_g(d),d.g=null;var k=2}else if(po(d.h,y))E=y.D,_l(d.h,y),k=1;else return;if(d.G!=0){if(y.o)if(k==1){E=y.m?y.m.length:0,y=Date.now()-y.F;var F=d.B;k=Ge(),Ke(k,new zr(k,E)),jh(d)}else T1(d);else if(F=y.s,F==3||F==0&&0<y.X||!(k==1&&zk(d,y)||k==2&&Ng(d)))switch(E&&0<E.length&&(y=d.h,y.i=y.i.concat(E)),F){case 1:yo(d,5);break;case 4:yo(d,10);break;case 3:yo(d,6);break;default:yo(d,2)}}}function A1(d,y){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*y}function yo(d,y){if(d.j.info("Error code "+y),y==2){var E=p(d.fb,d),k=d.Xa;const F=!k;k=new Ms(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ci(k,"https"),Ls(k),F?pe(k.toString(),E):at(k.toString(),E)}else wt(2);d.G=0,d.l&&d.l.sa(y),P1(d),E1(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function P1(d){if(d.G=0,d.ka=[],d.l){const y=lu(d.h);(y.length!=0||d.i.length!=0)&&(b(d.ka,y),b(d.ka,d.i),d.h.i.length=0,x(d.i),d.i.length=0),d.l.ra()}}function R1(d,y,E){var k=E instanceof Ms?is(E):new Ms(E);if(k.g!="")y&&(k.g=y+"."+k.g),Os(k,k.s);else{var F=l.location;k=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;var B=new Ms(null);k&&ci(B,k),y&&(B.g=y),F&&Os(B,F),E&&(B.l=E),k=B}return E=d.D,y=d.ya,E&&y&&yt(k,E,y),yt(k,"VER",d.la),fu(d,k),k}function k1(d,y,E){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Ut(new ke({eb:E})):new Ut(d.pa),y.Ha(d.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function D1(){}t=D1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Th(){}Th.prototype.g=function(d,y){return new br(d,y)};function br(d,y){Oe.call(this),this.g=new _1(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!w(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!w(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new jl(this)}N(br,Oe),br.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},br.prototype.close=function(){bg(this.g)},br.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=ar(d),d=E);y.i.push(new bl(y.Ya++,d)),y.G==3&&jh(y)},br.prototype.N=function(){this.g.l=null,delete this.j,bg(this.g),delete this.g,br.aa.N.call(this)};function M1(d){vr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const E in y){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}N(M1,vr);function O1(){Gt.call(this),this.status=1}N(O1,Gt);function jl(d){this.g=d}N(jl,D1),jl.prototype.ua=function(){Ke(this.g,"a")},jl.prototype.ta=function(d){Ke(this.g,new M1(d))},jl.prototype.sa=function(d){Ke(this.g,new O1)},jl.prototype.ra=function(){Ke(this.g,"b")},Th.prototype.createWebChannel=Th.prototype.g,br.prototype.send=br.prototype.o,br.prototype.open=br.prototype.m,br.prototype.close=br.prototype.close,UI=function(){return new Th},VI=function(){return Ge()},FI=Br,Jx={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Qi.NO_ERROR=0,Qi.TIMEOUT=8,Qi.HTTP_ERROR=6,Pf=Qi,xl.COMPLETE="complete",LI=xl,nn.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,Au=nn,Ut.prototype.listenOnce=Ut.prototype.L,Ut.prototype.getLastError=Ut.prototype.Ka,Ut.prototype.getLastErrorCode=Ut.prototype.Ba,Ut.prototype.getStatus=Ut.prototype.Z,Ut.prototype.getResponseJson=Ut.prototype.Oa,Ut.prototype.getResponseText=Ut.prototype.oa,Ut.prototype.send=Ut.prototype.ea,Ut.prototype.setWithCredentials=Ut.prototype.Ha,OI=Ut}).apply(typeof Zh<"u"?Zh:typeof self<"u"?self:typeof window<"u"?window:{});const d_="@firebase/firestore",h_="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bn.UNAUTHENTICATED=new Bn(null),Bn.GOOGLE_CREDENTIALS=new Bn("google-credentials-uid"),Bn.FIRST_PARTY=new Bn("first-party-uid"),Bn.MOCK_USER=new Bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new Zv("@firebase/firestore");function Rl(){return Jo.logLevel}function fe(t,...e){if(Jo.logLevel<=Ye.DEBUG){const n=e.map(dw);Jo.debug(`Firestore (${Xc}): ${t}`,...n)}}function Fi(t,...e){if(Jo.logLevel<=Ye.ERROR){const n=e.map(dw);Jo.error(`Firestore (${Xc}): ${t}`,...n)}}function Zo(t,...e){if(Jo.logLevel<=Ye.WARN){const n=e.map(dw);Jo.warn(`Firestore (${Xc}): ${t}`,...n)}}function dw(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$I(t,r,n)}function $I(t,e,n){let r=`FIRESTORE (${Xc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Fi(r),new Error(r)}function dt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||$I(e,s,r)}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bn.UNAUTHENTICATED))}shutdown(){}}class d8{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class h8{constructor(e){this.t=e,this.currentUser=Bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){dt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new ji;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ji,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ji)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt(typeof r.accessToken=="string",31837,{l:r}),new BI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return dt(e===null||typeof e=="string",2055,{h:e}),new Bn(e)}}class f8{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class m8{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new f8(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p8{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Sr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){dt(this.o===void 0,3512);const r=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new f_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(dt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new f_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g8(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=g8(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function Xe(t,e){return t<e?-1:t>e?1:0}function Zx(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return p0(s)===p0(a)?Xe(s,a):p0(s)?1:-1}return Xe(t.length,e.length)}const x8=55296,y8=57343;function p0(t){const e=t.charCodeAt(0);return e>=x8&&e<=y8}function kc(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="__name__";class Us{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Us.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Us?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=Us.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Xe(e.length,n.length)}static compareSegments(e,n){const r=Us.isNumericId(e),s=Us.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Us.extractNumericId(e).compare(Us.extractNumericId(n)):Zx(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Da.fromString(e.substring(4,e.length-2))}}class Nt extends Us{construct(e,n,r){return new Nt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Nt(n)}static emptyPath(){return new Nt([])}}const v8=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends Us{construct(e,n,r){return new yn(e,n,r)}static isValidIdentifier(e){return v8.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===m_}static keyField(){return new yn([m_])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ue(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ue(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new ue(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Nt.fromString(e))}static fromName(e){return new _e(Nt.fromString(e).popFirst(5))}static empty(){return new _e(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Nt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(t,e,n){if(!n)throw new ue(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HI(t,e,n,r){if(e===!0&&r===!0)throw new ue(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function p_(t){if(!_e.isDocumentKey(t))throw new ue(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function g_(t){if(_e.isDocumentKey(t))throw new ue(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function qI(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Tp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ae(12329,{type:typeof t})}function An(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tp(t);throw new ue(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,e){const n={typeString:t};return e&&(n.value=e),n}function nh(t,e){if(!qI(t))throw new ue(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ue(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=-62135596800,y_=1e6;class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*y_);return new pt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<x_)throw new ue(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/y_}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:pt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nh(e,pt._jsonSchema))return new pt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-x_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:on("string",pt._jsonSchemaVersion),seconds:on("number"),nanoseconds:on("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{static fromTimestamp(e){return new Me(e)}static min(){return new Me(new pt(0,0))}static max(){return new Me(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=-1;function w8(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Me.fromTimestamp(r===1e9?new pt(n+1,0):new pt(n,r));return new Ha(s,_e.empty(),e)}function b8(t){return new Ha(t.readTime,t.key,Sd)}class Ha{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ha(Me.min(),_e.empty(),Sd)}static max(){return new Ha(Me.max(),_e.empty(),Sd)}}function N8(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(t.documentKey,e.documentKey),n!==0?n:Xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jc(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==_8)throw t;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},c=>r(c))}),o=!0,a===s&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(s=>s?G.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new G((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===a&&r(o)},h=>s(h))}})}static doWhile(e,n){return new G((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function j8(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Zc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ip.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=-1;function Cp(t){return t==null}function jm(t){return t===0&&1/t==-1/0}function S8(t){return typeof t=="number"&&Number.isInteger(t)&&!jm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="";function T8(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=v_(e)),e=I8(t.get(n),e);return v_(e)}function I8(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case KI:n+="";break;default:n+=a}}return n}function v_(t){return t+KI+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ro(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){this.comparator=e,this.root=n||Tn.EMPTY}insert(e,n){return new Vt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tn.BLACK,null,null))}remove(e){return new Vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ef(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ef(this.root,e,this.comparator,!1)}getReverseIterator(){return new ef(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ef(this.root,e,this.comparator,!0)}}class ef{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tn{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Tn.RED,this.left=s??Tn.EMPTY,this.right=a??Tn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Tn(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Tn.EMPTY=null,Tn.RED=!0,Tn.BLACK=!1;Tn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Tn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.comparator=e,this.data=new Vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new b_(this.data.getIterator())}getIteratorFrom(e){return new b_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new fn(this.comparator);return n.data=e,n}}class b_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new Ar([])}unionWith(e){let n=new fn(yn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ar(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return kc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new QI("Invalid base64 string: "+a):a}}(e);return new Nn(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Nn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nn.EMPTY_BYTE_STRING=new Nn("");const C8=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qa(t){if(dt(!!t,39018),typeof t=="string"){let e=0;const n=C8.exec(t);if(dt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yt(t.seconds),nanos:Yt(t.nanos)}}function Yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ka(t){return typeof t=="string"?Nn.fromBase64String(t):Nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="server_timestamp",XI="__type__",JI="__previous_value__",ZI="__local_write_time__";function fw(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[XI])==null?void 0:r.stringValue)===YI}function Ap(t){const e=t.mapValue.fields[JI];return fw(e)?Ap(e):e}function Td(t){const e=qa(t.mapValue.fields[ZI].timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A8{constructor(e,n,r,s,a,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Sm="(default)";class Dc{constructor(e,n){this.projectId=e,this.database=n||Sm}static empty(){return new Dc("","")}get isDefaultDatabase(){return this.database===Sm}isEqual(e){return e instanceof Dc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="__type__",tC="__max__",tf={mapValue:{fields:{__type__:{stringValue:tC}}}},nC="__vector__",Tm="value";function Ga(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?fw(t)?4:R8(t)?9007199254740991:P8(t)?10:11:Ae(28295,{value:t})}function ai(t,e){if(t===e)return!0;const n=Ga(t);if(n!==Ga(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Td(t).isEqual(Td(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=qa(s.timestampValue),l=qa(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Ka(s.bytesValue).isEqual(Ka(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Yt(s.geoPointValue.latitude)===Yt(a.geoPointValue.latitude)&&Yt(s.geoPointValue.longitude)===Yt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Yt(s.integerValue)===Yt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Yt(s.doubleValue),l=Yt(a.doubleValue);return o===l?jm(o)===jm(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return kc(t.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(w_(o)!==w_(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!ai(o[c],l[c])))return!1;return!0}(t,e);default:return Ae(52216,{left:t})}}function Id(t,e){return(t.values||[]).find(n=>ai(n,e))!==void 0}function Mc(t,e){if(t===e)return 0;const n=Ga(t),r=Ga(e);if(n!==r)return Xe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xe(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=Yt(a.integerValue||a.doubleValue),c=Yt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return N_(t.timestampValue,e.timestampValue);case 4:return N_(Td(t),Td(e));case 5:return Zx(t.stringValue,e.stringValue);case 6:return function(a,o){const l=Ka(a),c=Ka(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Xe(l[u],c[u]);if(h!==0)return h}return Xe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Xe(Yt(a.latitude),Yt(o.latitude));return l!==0?l:Xe(Yt(a.longitude),Yt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return __(t.arrayValue,e.arrayValue);case 10:return function(a,o){var p,g,N,x;const l=a.fields||{},c=o.fields||{},u=(p=l[Tm])==null?void 0:p.arrayValue,h=(g=c[Tm])==null?void 0:g.arrayValue,f=Xe(((N=u==null?void 0:u.values)==null?void 0:N.length)||0,((x=h==null?void 0:h.values)==null?void 0:x.length)||0);return f!==0?f:__(u,h)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===tf.mapValue&&o===tf.mapValue)return 0;if(a===tf.mapValue)return 1;if(o===tf.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=Zx(c[f],h[f]);if(p!==0)return p;const g=Mc(l[c[f]],u[h[f]]);if(g!==0)return g}return Xe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Ae(23264,{he:n})}}function N_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Xe(t,e);const n=qa(t),r=qa(e),s=Xe(n.seconds,r.seconds);return s!==0?s:Xe(n.nanos,r.nanos)}function __(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Mc(n[s],r[s]);if(a)return a}return Xe(n.length,r.length)}function Oc(t){return ey(t)}function ey(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=qa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ka(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return _e.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=ey(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${ey(n.fields[o])}`;return s+"}"}(t.mapValue):Ae(61005,{value:t})}function Rf(t){switch(Ga(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ap(t);return e?16+Rf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ka(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Rf(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return ro(r.fields,(a,o)=>{s+=a.length+Rf(o)}),s}(t.mapValue);default:throw Ae(13486,{value:t})}}function E_(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ty(t){return!!t&&"integerValue"in t}function mw(t){return!!t&&"arrayValue"in t}function j_(t){return!!t&&"nullValue"in t}function S_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kf(t){return!!t&&"mapValue"in t}function P8(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[eC])==null?void 0:r.stringValue)===nC}function Qu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ro(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Qu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Qu(t.arrayValue.values[n]);return e}return{...t}}function R8(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.value=e}static empty(){return new hr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qu(n)}setAll(e){let n=yn.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Qu(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());kf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];kf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ro(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new hr(Qu(this.value))}}function rC(t){const e=[];return ro(t.fields,(n,r)=>{const s=new yn([n]);if(kf(r)){const a=rC(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Ar(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Hn(e,0,Me.min(),Me.min(),Me.min(),hr.empty(),0)}static newFoundDocument(e,n,r,s){return new Hn(e,1,n,Me.min(),r,s,0)}static newNoDocument(e,n){return new Hn(e,2,n,Me.min(),Me.min(),hr.empty(),0)}static newUnknownDocument(e,n){return new Hn(e,3,n,Me.min(),Me.min(),hr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.position=e,this.inclusive=n}}function T_(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=_e.comparator(_e.fromName(o.referenceValue),n.key):r=Mc(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function I_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ai(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e,n="asc"){this.field=e,this.dir=n}}function k8(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{}class an extends sC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new M8(e,n,r):n==="array-contains"?new F8(e,r):n==="in"?new V8(e,r):n==="not-in"?new U8(e,r):n==="array-contains-any"?new $8(e,r):new an(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new O8(e,r):new L8(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Mc(n,this.value)):n!==null&&Ga(this.value)===Ga(n)&&this.matchesComparison(Mc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class As extends sC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new As(e,n)}matches(e){return iC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function iC(t){return t.op==="and"}function aC(t){return D8(t)&&iC(t)}function D8(t){for(const e of t.filters)if(e instanceof As)return!1;return!0}function ny(t){if(t instanceof an)return t.field.canonicalString()+t.op.toString()+Oc(t.value);if(aC(t))return t.filters.map(e=>ny(e)).join(",");{const e=t.filters.map(n=>ny(n)).join(",");return`${t.op}(${e})`}}function oC(t,e){return t instanceof an?function(r,s){return s instanceof an&&r.op===s.op&&r.field.isEqual(s.field)&&ai(r.value,s.value)}(t,e):t instanceof As?function(r,s){return s instanceof As&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&oC(o,s.filters[l]),!0):!1}(t,e):void Ae(19439)}function lC(t){return t instanceof an?function(n){return`${n.field.canonicalString()} ${n.op} ${Oc(n.value)}`}(t):t instanceof As?function(n){return n.op.toString()+" {"+n.getFilters().map(lC).join(" ,")+"}"}(t):"Filter"}class M8 extends an{constructor(e,n,r){super(e,n,r),this.key=_e.fromName(r.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class O8 extends an{constructor(e,n){super(e,"in",n),this.keys=cC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class L8 extends an{constructor(e,n){super(e,"not-in",n),this.keys=cC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>_e.fromName(r.referenceValue))}class F8 extends an{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return mw(n)&&Id(n.arrayValue,this.value)}}class V8 extends an{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Id(this.value.arrayValue,n)}}class U8 extends an{constructor(e,n){super(e,"not-in",n)}matches(e){if(Id(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Id(this.value.arrayValue,n)}}class $8 extends an{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!mw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Id(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function C_(t,e=null,n=[],r=[],s=null,a=null,o=null){return new B8(t,e,n,r,s,a,o)}function pw(t){const e=De(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ny(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Cp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oc(r)).join(",")),e.Te=n}return e.Te}function gw(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!k8(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!oC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!I_(t.startAt,e.startAt)&&I_(t.endAt,e.endAt)}function ry(t){return _e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function z8(t,e,n,r,s,a,o,l){return new eu(t,e,n,r,s,a,o,l)}function Pp(t){return new eu(t)}function A_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uC(t){return t.collectionGroup!==null}function Yu(t){const e=De(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new fn(yn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Cd(a,r))}),n.has(yn.keyField().canonicalString())||e.Ie.push(new Cd(yn.keyField(),r))}return e.Ie}function ni(t){const e=De(t);return e.Ee||(e.Ee=W8(e,Yu(t))),e.Ee}function W8(t,e){if(t.limitType==="F")return C_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Cd(s.field,a)});const n=t.endAt?new Im(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Im(t.startAt.position,t.startAt.inclusive):null;return C_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function sy(t,e){const n=t.filters.concat([e]);return new eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function iy(t,e,n){return new eu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rp(t,e){return gw(ni(t),ni(e))&&t.limitType===e.limitType}function dC(t){return`${pw(ni(t))}|lt:${t.limitType}`}function kl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>lC(s)).join(", ")}]`),Cp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Oc(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Oc(s)).join(",")),`Target(${r})`}(ni(t))}; limitType=${t.limitType})`}function kp(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):_e.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of Yu(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=T_(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Yu(r),s)||r.endAt&&!function(o,l,c){const u=T_(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Yu(r),s))}(t,e)}function H8(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hC(t){return(e,n)=>{let r=!1;for(const s of Yu(t)){const a=q8(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function q8(t,e,n){const r=t.field.isKeyField()?_e.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?Mc(c,u):Ae(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ae(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ro(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return GI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=new Vt(_e.comparator);function Vi(){return K8}const fC=new Vt(_e.comparator);function Pu(...t){let e=fC;for(const n of t)e=e.insert(n.key,n);return e}function mC(t){let e=fC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function So(){return Xu()}function pC(){return Xu()}function Xu(){return new ul(t=>t.toString(),(t,e)=>t.isEqual(e))}const G8=new Vt(_e.comparator),Q8=new fn(_e.comparator);function Je(...t){let e=Q8;for(const n of t)e=e.add(n);return e}const Y8=new fn(Xe);function X8(){return Y8}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jm(e)?"-0":e}}function gC(t){return{integerValue:""+t}}function J8(t,e){return S8(e)?gC(e):xw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(){this._=void 0}}function Z8(t,e,n){return t instanceof Ad?function(s,a){const o={fields:{[XI]:{stringValue:YI},[ZI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&fw(a)&&(a=Ap(a)),a&&(o.fields[JI]=a),{mapValue:o}}(n,e):t instanceof Pd?yC(t,e):t instanceof Rd?vC(t,e):function(s,a){const o=xC(s,a),l=P_(o)+P_(s.Ae);return ty(o)&&ty(s.Ae)?gC(l):xw(s.serializer,l)}(t,e)}function e7(t,e,n){return t instanceof Pd?yC(t,e):t instanceof Rd?vC(t,e):n}function xC(t,e){return t instanceof Cm?function(r){return ty(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ad extends Dp{}class Pd extends Dp{constructor(e){super(),this.elements=e}}function yC(t,e){const n=wC(e);for(const r of t.elements)n.some(s=>ai(s,r))||n.push(r);return{arrayValue:{values:n}}}class Rd extends Dp{constructor(e){super(),this.elements=e}}function vC(t,e){let n=wC(e);for(const r of t.elements)n=n.filter(s=>!ai(s,r));return{arrayValue:{values:n}}}class Cm extends Dp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function P_(t){return Yt(t.integerValue||t.doubleValue)}function wC(t){return mw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(e,n){this.field=e,this.transform=n}}function n7(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Pd&&s instanceof Pd||r instanceof Rd&&s instanceof Rd?kc(r.elements,s.elements,ai):r instanceof Cm&&s instanceof Cm?ai(r.Ae,s.Ae):r instanceof Ad&&s instanceof Ad}(t.transform,e.transform)}class r7{constructor(e,n){this.version=e,this.transformResults=n}}class Yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yr}static exists(e){return new Yr(void 0,e)}static updateTime(e){return new Yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Df(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mp{}function bC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new yw(t.key,Yr.none()):new rh(t.key,t.data,Yr.none());{const n=t.data,r=hr.empty();let s=new fn(yn.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new so(t.key,r,new Ar(s.toArray()),Yr.none())}}function s7(t,e,n){t instanceof rh?function(s,a,o){const l=s.value.clone(),c=k_(s.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof so?function(s,a,o){if(!Df(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=k_(s.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(NC(s)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ju(t,e,n,r){return t instanceof rh?function(a,o,l,c){if(!Df(a.precondition,o))return l;const u=a.value.clone(),h=D_(a.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof so?function(a,o,l,c){if(!Df(a.precondition,o))return l;const u=D_(a.fieldTransforms,c,o),h=o.data;return h.setAll(NC(a)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(a,o,l){return Df(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function i7(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=xC(r.transform,s||null);a!=null&&(n===null&&(n=hr.empty()),n.set(r.field,a))}return n||null}function R_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&kc(r,s,(a,o)=>n7(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class rh extends Mp{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class so extends Mp{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function NC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function k_(t,e,n){const r=new Map;dt(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,e7(o,l,n[s]))}return r}function D_(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,Z8(a,o,e))}return r}class yw extends Mp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class a7 extends Mp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o7{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&s7(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ju(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ju(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pC();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const c=bC(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Je())}isEqual(e){return this.batchId===e.batchId&&kc(this.mutations,e.mutations,(n,r)=>R_(n,r))&&kc(this.baseMutations,e.baseMutations,(n,r)=>R_(n,r))}}class vw{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){dt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return G8}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new vw(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l7=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rn,et;function u7(t){switch(t){case q.OK:return Ae(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return Ae(15467,{code:t})}}function _C(t){if(t===void 0)return Fi("GRPC error has no .code"),q.UNKNOWN;switch(t){case rn.OK:return q.OK;case rn.CANCELLED:return q.CANCELLED;case rn.UNKNOWN:return q.UNKNOWN;case rn.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case rn.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case rn.INTERNAL:return q.INTERNAL;case rn.UNAVAILABLE:return q.UNAVAILABLE;case rn.UNAUTHENTICATED:return q.UNAUTHENTICATED;case rn.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case rn.NOT_FOUND:return q.NOT_FOUND;case rn.ALREADY_EXISTS:return q.ALREADY_EXISTS;case rn.PERMISSION_DENIED:return q.PERMISSION_DENIED;case rn.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case rn.ABORTED:return q.ABORTED;case rn.OUT_OF_RANGE:return q.OUT_OF_RANGE;case rn.UNIMPLEMENTED:return q.UNIMPLEMENTED;case rn.DATA_LOSS:return q.DATA_LOSS;default:return Ae(39323,{code:t})}}(et=rn||(rn={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d7(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h7=new Da([4294967295,4294967295],0);function M_(t){const e=d7().encode(t),n=new MI;return n.update(e),new Uint8Array(n.digest())}function O_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Da([n,r],0),new Da([s,a],0)]}class ww{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ru(`Invalid padding: ${n}`);if(r<0)throw new Ru(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ru(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ru(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Da.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Da.fromNumber(r)));return s.compare(h7)===1&&(s=new Da([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=M_(e),[r,s]=O_(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new ww(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=M_(e),[r,s]=O_(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ru extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,sh.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Op(Me.min(),s,new Vt(Xe),Vi(),Je())}}class sh{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sh(r,n,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class EC{constructor(e,n){this.targetId=e,this.Ce=n}}class jC{constructor(e,n,r=Nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class L_{constructor(){this.ve=0,this.Fe=F_(),this.Me=Nn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),r=Je();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ae(38017,{changeType:a})}}),new sh(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=F_()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,dt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class f7{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vi(),this.Je=nf(),this.He=nf(),this.Ye=new Vt(Xe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(ry(a))if(r===0){const o=new _e(a.path);this.et(n,o,Hn.newNoDocument(o,Me.min()))}else dt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=Ka(r).toUint8Array()}catch(c){if(c instanceof QI)return Zo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new ww(o,s,a)}catch(c){return Zo(c instanceof Ru?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&ry(l.target)){const c=new _e(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Hn.newNoDocument(c,e))}a.Be&&(n.set(o,a.ke()),a.qe())}});let r=Je();this.He.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new Op(e,n,this.Ye,this.je,r);return this.je=Vi(),this.Je=nf(),this.He=nf(),this.Ye=new Vt(Xe),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new L_,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new fn(Xe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new fn(Xe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new L_),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function nf(){return new Vt(_e.comparator)}function F_(){return new Vt(_e.comparator)}const m7={asc:"ASCENDING",desc:"DESCENDING"},p7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g7={and:"AND",or:"OR"};class x7{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ay(t,e){return t.useProto3Json||Cp(e)?e:{value:e}}function Am(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function SC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function y7(t,e){return Am(t,e.toTimestamp())}function ri(t){return dt(!!t,49232),Me.fromTimestamp(function(n){const r=qa(n);return new pt(r.seconds,r.nanos)}(t))}function bw(t,e){return oy(t,e).canonicalString()}function oy(t,e){const n=function(s){return new Nt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TC(t){const e=Nt.fromString(t);return dt(RC(e),10190,{key:e.toString()}),e}function ly(t,e){return bw(t.databaseId,e.path)}function g0(t,e){const n=TC(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new _e(CC(n))}function IC(t,e){return bw(t.databaseId,e)}function v7(t){const e=TC(t);return e.length===4?Nt.emptyPath():CC(e)}function cy(t){return new Nt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function CC(t){return dt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function V_(t,e,n){return{name:ly(t,e),fields:n.value.mapValue.fields}}function w7(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ae(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,h){return u.useProto3Json?(dt(h===void 0||typeof h=="string",58123),Nn.fromBase64String(h||"")):(dt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Nn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?q.UNKNOWN:_C(u.code);return new ue(h,u.message||"")}(o);n=new jC(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=g0(t,r.document.name),a=ri(r.document.updateTime),o=r.document.createTime?ri(r.document.createTime):Me.min(),l=new hr({mapValue:{fields:r.document.fields}}),c=Hn.newFoundDocument(s,a,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Mf(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=g0(t,r.document),a=r.readTime?ri(r.readTime):Me.min(),o=Hn.newNoDocument(s,a),l=r.removedTargetIds||[];n=new Mf([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=g0(t,r.document),a=r.removedTargetIds||[];n=new Mf([],a,s,null)}else{if(!("filter"in e))return Ae(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new c7(s,a),l=r.targetId;n=new EC(l,o)}}return n}function b7(t,e){let n;if(e instanceof rh)n={update:V_(t,e.key,e.value)};else if(e instanceof yw)n={delete:ly(t,e.key)};else if(e instanceof so)n={update:V_(t,e.key,e.data),updateMask:A7(e.fieldMask)};else{if(!(e instanceof a7))return Ae(16599,{Vt:e.type});n={verify:ly(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof Ad)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Pd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Rd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Cm)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Ae(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:y7(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae(27497)}(t,e.precondition)),n}function N7(t,e){return t&&t.length>0?(dt(e!==void 0,14353),t.map(n=>function(s,a){let o=s.updateTime?ri(s.updateTime):ri(a);return o.isEqual(Me.min())&&(o=ri(a)),new r7(o,s.transformResults||[])}(n,e))):[]}function _7(t,e){return{documents:[IC(t,e.path)]}}function E7(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=IC(t,s);const a=function(u){if(u.length!==0)return PC(As.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(h=>function(p){return{field:Dl(p.field),direction:T7(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=ay(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function j7(t){let e=v7(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){dt(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(f){const p=AC(f);return p instanceof As&&aC(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(N){return new Cd(Ml(N.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Cp(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(f){const p=!!f.before,g=f.values||[];return new Im(g,p)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const p=!f.before,g=f.values||[];return new Im(g,p)}(n.endAt)),z8(e,s,o,a,l,"F",c,u)}function S7(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function AC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ml(n.unaryFilter.field);return an.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ml(n.unaryFilter.field);return an.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ml(n.unaryFilter.field);return an.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ml(n.unaryFilter.field);return an.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}}(t):t.fieldFilter!==void 0?function(n){return an.create(Ml(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return As.create(n.compositeFilter.filters.map(r=>AC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}}(n.compositeFilter.op))}(t):Ae(30097,{filter:t})}function T7(t){return m7[t]}function I7(t){return p7[t]}function C7(t){return g7[t]}function Dl(t){return{fieldPath:t.canonicalString()}}function Ml(t){return yn.fromServerFormat(t.fieldPath)}function PC(t){return t instanceof an?function(n){if(n.op==="=="){if(S_(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NAN"}};if(j_(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(S_(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NOT_NAN"}};if(j_(n.value))return{unaryFilter:{field:Dl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Dl(n.field),op:I7(n.op),value:n.value}}}(t):t instanceof As?function(n){const r=n.getFilters().map(s=>PC(s));return r.length===1?r[0]:{compositeFilter:{op:C7(n.op),filters:r}}}(t):Ae(54877,{filter:t})}function A7(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function RC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e,n,r,s,a=Me.min(),o=Me.min(),l=Nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Na(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Na(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(e){this.yt=e}}function R7(t){const e=j7({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?iy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k7{constructor(){this.Cn=new D7}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Ha.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Ha.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class D7{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new fn(Nt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new fn(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kC=41943040;class cr{static withCacheSize(e){return new cr(e,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr.DEFAULT_COLLECTION_PERCENTILE=10,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cr.DEFAULT=new cr(kC,cr.DEFAULT_COLLECTION_PERCENTILE,cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cr.DISABLED=new cr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Lc(0)}static cr(){return new Lc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="LruGarbageCollector",M7=1048576;function B_([t,e],[n,r]){const s=Xe(t,n);return s===0?Xe(e,r):s}class O7{constructor(e){this.Ir=e,this.buffer=new fn(B_),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();B_(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class L7{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe($_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Zc(n)?fe($_,"Ignoring IndexedDB error during garbage collection: ",n):await Jc(n)}await this.Vr(3e5)})}}class F7{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(Ip.ce);const r=new O7(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(U_)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),U_):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(a=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Rl()<=Ye.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:f})))}}function V7(t,e){return new F7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U7{constructor(){this.changes=new ul(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Hn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Ju(r.mutation,s,Ar.empty(),pt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Je()){const s=So();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=Pu();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=So();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Je()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=Vi();const o=Xu(),l=function(){return Xu()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof so)?a=a.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ju(h.mutation,u,h.mutation.getFieldMask(),pt.now())):o.set(u.key,Ar.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new $7(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Xu();let s=new Vt((o,l)=>o-l),a=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Ar.empty();h=l.applyToLocalView(u,h),r.set(c,h);const f=(s.get(l.batchId)||Je()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,f=pC();h.forEach(p=>{if(!a.has(p)){const g=bC(n.get(p),r.get(p));g!==null&&f.set(p,g),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return _e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):G.resolve(So());let l=Sd,c=a;return o.next(u=>G.forEach(u,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,Je())).next(h=>({batchId:l,changes:mC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next(r=>{let s=Pu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=Pu();return this.indexManager.getCollectionParents(e,a).next(l=>G.forEach(l,c=>{const u=function(f,p){return new eu(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Hn.newInvalidDocument(h)))});let l=Pu();return o.forEach((c,u)=>{const h=a.get(c);h!==void 0&&Ju(h.mutation,u,Ar.empty(),pt.now()),kp(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z7{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ri(s.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:R7(s.bundledQuery),readTime:ri(s.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(){this.overlays=new Vt(_e.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=So();return G.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const s=So(),a=n.length+1,o=new _e(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&s.set(c.getKey(),c)}return G.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Vt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=a.get(u.largestBatchId);h===null&&(h=So(),a=a.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=So(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return G.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new l7(n,r));let a=this.qr.get(n);a===void 0&&(a=Je(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this.sessionToken=Nn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.Qr=new fn(gn.$r),this.Ur=new fn(gn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new gn(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new gn(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new _e(new Nt([])),r=new gn(n,e),s=new gn(n,e+1),a=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new _e(new Nt([])),r=new gn(n,e),s=new gn(n,e+1);let a=Je();return this.Ur.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new gn(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gn{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return _e.comparator(e.key,n.key)||Xe(e.Yr,n.Yr)}static Kr(e,n){return Xe(e.Yr,n.Yr)||_e.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new fn(gn.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new o7(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new gn(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return G.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?hw:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gn(n,0),s=new gn(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);a.push(l)}),G.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new fn(Xe);return n.forEach(s=>{const a=new gn(s,0),o=new gn(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],l=>{r=r.add(l.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;_e.isDocumentKey(a)||(a=a.child(""));const o=new gn(new _e(a),0);let l=new fn(Xe);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){dt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(n.mutations,s=>{const a=new gn(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new gn(n,0),s=this.Zr.firstAfterOrEqual(r);return G.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K7{constructor(e){this.ri=e,this.docs=function(){return new Vt(_e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Hn.newInvalidDocument(n))}getEntries(e,n){let r=Vi();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Hn.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Vi();const o=n.path,l=new _e(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||N8(b8(h),r)<=0||(s.has(h.key)||kp(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return G.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Ae(9500)}ii(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new G7(this)}getSize(e){return G.resolve(this.size)}}class G7 extends U7{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e){this.persistence=e,this.si=new ul(n=>pw(n),gw),this.lastRemoteSnapshotVersion=Me.min(),this.highestTargetId=0,this.oi=0,this._i=new Nw,this.targetCount=0,this.ai=Lc.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Lc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),G.waitFor(a).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ip(0),this.li=!1,this.li=!0,this.hi=new H7,this.referenceDelegate=e(this),this.Pi=new Q7(this),this.indexManager=new k7,this.remoteDocumentCache=function(s){return new K7(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new P7(n),this.Ii=new z7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new W7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new q7(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){fe("MemoryPersistence","Starting transaction:",e);const s=new Y7(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Y7 extends E8{constructor(e){super(),this.currentSequenceNumber=e}}class _w{constructor(e){this.persistence=e,this.Ri=new Nw,this.Vi=null}static mi(e){return new _w(e)}get fi(){if(this.Vi)return this.Vi;throw Ae(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{const s=_e.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,Me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Pm{constructor(e,n){this.persistence=e,this.pi=new ul(r=>T8(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=V7(this,n)}static mi(e,n){return new Pm(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?G.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,a.removeEntry(o,Me.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Rf(e.data.value)),n}br(e,n,r){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Je(),s=Je();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Ew(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return TF()?8:j8(Kn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new X7;return this.Ss(e,n,o).next(l=>{if(a.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Rl()<=Ye.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",kl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Rl()<=Ye.DEBUG&&fe("QueryEngine","Query:",kl(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Rl()<=Ye.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",kl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(n))):G.resolve())}ys(e,n){if(A_(n))return G.resolve(null);let r=ni(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=iy(n,null,"F"),r=ni(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Je(...a);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,iy(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return A_(n)||s.isEqual(Me.min())?G.resolve(null):this.ps.getDocuments(e,r).next(a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,s)?G.resolve(null):(Rl()<=Ye.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),kl(n)),this.vs(e,o,n,w8(s,Sd)).next(l=>l))})}Ds(e,n){let r=new fn(hC(e));return n.forEach((s,a)=>{kp(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Rl()<=Ye.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",kl(n)),this.ps.getDocumentsMatchingQuery(e,n,Ha.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="LocalStore",Z7=3e8;class e${constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Vt(Xe),this.xs=new ul(a=>pw(a),gw),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new B7(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function t$(t,e,n,r){return new e$(t,e,n,r)}async function MC(t,e){const n=De(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=Je();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of a){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function n$(t,e){const n=De(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const f=u.batch,p=f.keys();let g=G.resolve();return p.forEach(N=>{g=g.next(()=>h.getEntry(c,N)).next(x=>{const b=u.docVersions.get(N);dt(b!==null,48541),x.version.compareTo(b)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),h.addEntry(x)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Je();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function OC(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function r$(t,e){const n=De(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(a,h.addedDocuments,f)));let g=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(Nn.EMPTY_BYTE_STRING,Me.min()).withLastLimboFreeSnapshotVersion(Me.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),function(x,b,_){return x.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=Z7?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,g,h)&&l.push(n.Pi.updateTargetData(a,g))});let c=Vi(),u=Je();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(s$(a,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Me.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next(f=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(h)}return G.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.Ms=s,a))}function s$(t,e,n){let r=Je(),s=Je();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Vi();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Me.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):fe(jw,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function i$(t,e){const n=De(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=hw),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function a$(t,e){const n=De(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,G.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Na(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function uy(t,e,n){const r=De(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Zc(o))throw o;fe(jw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function z_(t,e,n){const r=De(t);let s=Me.min(),a=Je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const f=De(c),p=f.xs.get(h);return p!==void 0?G.resolve(f.Ms.get(p)):f.Pi.getTargetData(u,h)}(r,o,ni(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Me.min(),n?a:Je())).next(l=>(o$(r,H8(e),l),{documents:l,Qs:a})))}function o$(t,e,n){let r=t.Os.get(e)||Me.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class W_{constructor(){this.activeTargetIds=X8()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class l${constructor(){this.Mo=new W_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new W_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c${Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="ConnectivityMonitor";class q_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(H_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(H_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf=null;function dy(){return rf===null?rf=function(){return 268435456+Math.round(2147483648*Math.random())}():rf++,"0x"+rf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="RestConnection",u$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class d${get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Sm?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const o=dy(),l=this.zo(e,n.toUriEncodedString());fe(x0,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,a);const{host:u}=new URL(l),h=ll(u);return this.Jo(e,l,c,r,h).then(f=>(fe(x0,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Zo(x0,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,a,o){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=u$[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h${constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un="WebChannelConnection";class f$ extends d${constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const o=dy();return new Promise((l,c)=>{const u=new OI;u.setWithCredentials(!0),u.listenOnce(LI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Pf.NO_ERROR:const f=u.getResponseJson();fe(Un,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Pf.TIMEOUT:fe(Un,`RPC '${e}' ${o} timed out`),c(new ue(q.DEADLINE_EXCEEDED,"Request time out"));break;case Pf.HTTP_ERROR:const p=u.getStatus();if(fe(Un,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const N=g==null?void 0:g.error;if(N&&N.status&&N.message){const x=function(_){const w=_.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(w)>=0?w:q.UNKNOWN}(N.status);c(new ue(x,N.message))}else c(new ue(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ue(q.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{fe(Un,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);fe(Un,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=dy(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=UI(),l=VI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=a.join("");fe(Un,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let p=!1,g=!1;const N=new h$({Yo:b=>{g?fe(Un,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(p||(fe(Un,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),fe(Un,`RPC '${e}' stream ${s} sending:`,b),f.send(b))},Zo:()=>f.close()}),x=(b,_,w)=>{b.listen(_,v=>{try{w(v)}catch(C){setTimeout(()=>{throw C},0)}})};return x(f,Au.EventType.OPEN,()=>{g||(fe(Un,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),x(f,Au.EventType.CLOSE,()=>{g||(g=!0,fe(Un,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(f))}),x(f,Au.EventType.ERROR,b=>{g||(g=!0,Zo(Un,`RPC '${e}' stream ${s} transport errored. Name:`,b.name,"Message:",b.message),N.a_(new ue(q.UNAVAILABLE,"The operation could not be completed")))}),x(f,Au.EventType.MESSAGE,b=>{var _;if(!g){const w=b.data[0];dt(!!w,16349);const v=w,C=(v==null?void 0:v.error)||((_=v[0])==null?void 0:_.error);if(C){fe(Un,`RPC '${e}' stream ${s} received error:`,C);const I=C.status;let R=function(T){const P=rn[T];if(P!==void 0)return _C(P)}(I),j=C.message;R===void 0&&(R=q.INTERNAL,j="Unknown error status: "+I+" with message "+C.message),g=!0,N.a_(new ue(R,j)),f.close()}else fe(Un,`RPC '${e}' stream ${s} received:`,w),N.u_(w)}}),x(l,FI.STAT_EVENT,b=>{b.stat===Jx.PROXY?fe(Un,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===Jx.NOPROXY&&fe(Un,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function y0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(t){return new x7(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="PersistentStream";class FC{constructor(e,n,r,s,a,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new LC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Fi(n.toString()),Fi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ue(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return fe(K_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(fe(K_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class m$ extends FC{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=w7(this.serializer,e),r=function(a){if(!("targetChange"in a))return Me.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Me.min():o.readTime?ri(o.readTime):Me.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=cy(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=ry(c)?{documents:_7(a,c)}:{query:E7(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=SC(a,o.resumeToken);const u=ay(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Me.min())>0){l.readTime=Am(a,o.snapshotVersion.toTimestamp());const u=ay(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=S7(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=cy(this.serializer),n.removeTarget=e,this.q_(n)}}class p$ extends FC{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return dt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,dt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){dt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=N7(e.writeResults,e.commitTime),r=ri(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=cy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>b7(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g${}class x$ extends g${constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ue(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,oy(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(q.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,oy(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(q.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class y${constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fi(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el="RemoteStore";class v${constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{dl(this)&&(fe(el,"Restarting streams for network reachability change."),await async function(c){const u=De(c);u.Ea.add(4),await tu(u),u.Ra.set("Unknown"),u.Ea.delete(4),await ih(u)}(this))})}),this.Ra=new y$(r,s)}}async function ih(t){if(dl(t))for(const e of t.da)await e(!0)}async function tu(t){for(const e of t.da)await e(!1)}function VC(t,e){const n=De(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Cw(n)?Iw(n):nu(n).O_()&&Tw(n,e))}function Sw(t,e){const n=De(t),r=nu(n);n.Ia.delete(e),r.O_()&&UC(n,e),n.Ia.size===0&&(r.O_()?r.L_():dl(n)&&n.Ra.set("Unknown"))}function Tw(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}nu(t).Y_(e)}function UC(t,e){t.Va.Ue(e),nu(t).Z_(e)}function Iw(t){t.Va=new f7({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),nu(t).start(),t.Ra.ua()}function Cw(t){return dl(t)&&!nu(t).x_()&&t.Ia.size>0}function dl(t){return De(t).Ea.size===0}function $C(t){t.Va=void 0}async function w$(t){t.Ra.set("Online")}async function b$(t){t.Ia.forEach((e,n)=>{Tw(t,e)})}async function N$(t,e){$C(t),Cw(t)?(t.Ra.ha(e),Iw(t)):t.Ra.set("Unknown")}async function _$(t,e,n){if(t.Ra.set("Online"),e instanceof jC&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){fe(el,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rm(t,r)}else if(e instanceof Mf?t.Va.Ze(e):e instanceof EC?t.Va.st(e):t.Va.tt(e),!n.isEqual(Me.min()))try{const r=await OC(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=a.Ia.get(u);h&&a.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=a.Ia.get(c);if(!h)return;a.Ia.set(c,h.withResumeToken(Nn.EMPTY_BYTE_STRING,h.snapshotVersion)),UC(a,c);const f=new Na(h.target,c,u,h.sequenceNumber);Tw(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){fe(el,"Failed to raise snapshot:",r),await Rm(t,r)}}async function Rm(t,e,n){if(!Zc(e))throw e;t.Ea.add(1),await tu(t),t.Ra.set("Offline"),n||(n=()=>OC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{fe(el,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ih(t)})}function BC(t,e){return e().catch(n=>Rm(t,n,e))}async function Fp(t){const e=De(t),n=Qa(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hw;for(;E$(e);)try{const s=await i$(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,j$(e,s)}catch(s){await Rm(e,s)}zC(e)&&WC(e)}function E$(t){return dl(t)&&t.Ta.length<10}function j$(t,e){t.Ta.push(e);const n=Qa(t);n.O_()&&n.X_&&n.ea(e.mutations)}function zC(t){return dl(t)&&!Qa(t).x_()&&t.Ta.length>0}function WC(t){Qa(t).start()}async function S$(t){Qa(t).ra()}async function T$(t){const e=Qa(t);for(const n of t.Ta)e.ea(n.mutations)}async function I$(t,e,n){const r=t.Ta.shift(),s=vw.from(r,e,n);await BC(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Fp(t)}async function C$(t,e){e&&Qa(t).X_&&await async function(r,s){if(function(o){return u7(o)&&o!==q.ABORTED}(s.code)){const a=r.Ta.shift();Qa(r).B_(),await BC(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Fp(r)}}(t,e),zC(t)&&WC(t)}async function G_(t,e){const n=De(t);n.asyncQueue.verifyOperationInProgress(),fe(el,"RemoteStore received new credentials");const r=dl(n);n.Ea.add(3),await tu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ih(n)}async function A$(t,e){const n=De(t);e?(n.Ea.delete(2),await ih(n)):e||(n.Ea.add(2),await tu(n),n.Ra.set("Unknown"))}function nu(t){return t.ma||(t.ma=function(n,r,s){const a=De(n);return a.sa(),new m$(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:w$.bind(null,t),t_:b$.bind(null,t),r_:N$.bind(null,t),H_:_$.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Cw(t)?Iw(t):t.Ra.set("Unknown")):(await t.ma.stop(),$C(t))})),t.ma}function Qa(t){return t.fa||(t.fa=function(n,r,s){const a=De(n);return a.sa(),new p$(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:S$.bind(null,t),r_:C$.bind(null,t),ta:T$.bind(null,t),na:I$.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Fp(t)):(await t.fa.stop(),t.Ta.length>0&&(fe(el,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new ji,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new Aw(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pw(t,e){if(Fi("AsyncQueue",`${e}: ${t}`),Zc(t))return new ue(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{static emptySet(e){return new fc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||_e.comparator(n.key,r.key):(n,r)=>_e.comparator(n.key,r.key),this.keyedMap=Pu(),this.sortedSet=new Vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.ga=new Vt(_e.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ae(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fc{constructor(e,n,r,s,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Fc(e,n,fc.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class R${constructor(){this.queries=Y_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=De(n),a=s.queries;s.queries=Y_(),a.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ue(q.ABORTED,"Firestore shutting down"))}}function Y_(){return new ul(t=>dC(t),Rp)}async function Rw(t,e){const n=De(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new P$,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Pw(o,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Dw(n)}async function kw(t,e){const n=De(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k$(t,e){const n=De(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Dw(n)}function D$(t,e,n){const r=De(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function Dw(t){t.Ca.forEach(e=>{e.next()})}var hy,X_;(X_=hy||(hy={})).Ma="default",X_.Cache="cache";class Mw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==hy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.key=e}}class qC{constructor(e){this.key=e}}class M${constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=hC(e),this.tu=new fc(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Q_,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=kp(this.query,f)?f:null,N=!!p&&this.mutatedKeys.has(p.key),x=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let b=!1;p&&g?p.data.isEqual(g.data)?N!==x&&(r.track({type:3,doc:g}),b=!0):this.su(p,g)||(r.track({type:2,doc:g}),b=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!p&&g?(r.track({type:0,doc:g}),b=!0):p&&!g&&(r.track({type:1,doc:p}),b=!0,(c||u)&&(l=!0)),b&&(g?(o=o.add(g),a=x?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(g,N){const x=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Rt:b})}};return x(g)-x(N)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new Fc(this.query,e.tu,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Q_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new qC(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new HC(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fc.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ow="SyncEngine";class O${constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class L${constructor(e){this.key=e,this.hu=!1}}class F${constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ul(l=>dC(l),Rp),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(_e.comparator),this.Au=new Map,this.Ru=new Nw,this.Vu={},this.mu=new Map,this.fu=Lc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function V$(t,e,n=!0){const r=JC(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await KC(r,e,n,!0),s}async function U$(t,e){const n=JC(t);await KC(n,e,!0,!1)}async function KC(t,e,n,r){const s=await a$(t.localStore,ni(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await $$(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&VC(t.remoteStore,s),l}async function $$(t,e,n,r,s){t.pu=(f,p,g)=>async function(x,b,_,w){let v=b.view.ru(_);v.Cs&&(v=await z_(x.localStore,b.query,!1).then(({documents:j})=>b.view.ru(j,v)));const C=w&&w.targetChanges.get(b.targetId),I=w&&w.targetMismatches.get(b.targetId)!=null,R=b.view.applyChanges(v,x.isPrimaryClient,C,I);return Z_(x,b.targetId,R.au),R.snapshot}(t,f,p,g);const a=await z_(t.localStore,e,!0),o=new M$(e,a.Qs),l=o.ru(a.documents),c=sh.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);Z_(t,n,u.au);const h=new O$(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function B$(t,e,n){const r=De(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(o=>!Rp(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await uy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Sw(r.remoteStore,s.targetId),fy(r,s.targetId)}).catch(Jc)):(fy(r,s.targetId),await uy(r.localStore,s.targetId,!0))}async function z$(t,e){const n=De(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sw(n.remoteStore,r.targetId))}async function W$(t,e,n){const r=X$(t);try{const s=await function(o,l){const c=De(o),u=pt.now(),h=l.reduce((g,N)=>g.add(N.key),Je());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let N=Vi(),x=Je();return c.Ns.getEntries(g,h).next(b=>{N=b,N.forEach((_,w)=>{w.isValidDocument()||(x=x.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,N)).next(b=>{f=b;const _=[];for(const w of l){const v=i7(w,f.get(w.key).overlayedDocument);v!=null&&_.push(new so(w.key,v,rC(v.value.mapValue),Yr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,_,l)}).next(b=>{p=b;const _=b.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(g,b.batchId,_)})}).then(()=>({batchId:p.batchId,changes:mC(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new Vt(Xe)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await ah(r,s.changes),await Fp(r.remoteStore)}catch(s){const a=Pw(s,"Failed to persist write");n.reject(a)}}async function GC(t,e){const n=De(t);try{const r=await r$(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Au.get(a);o&&(dt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?dt(o.hu,14607):s.removedDocuments.size>0&&(dt(o.hu,42227),o.hu=!1))}),await ah(n,r,e)}catch(r){await Jc(r)}}function J_(t,e,n){const r=De(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=De(o);c.onlineState=l;let u=!1;c.queries.forEach((h,f)=>{for(const p of f.Sa)p.va(l)&&(u=!0)}),u&&Dw(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function H$(t,e,n){const r=De(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new Vt(_e.comparator);o=o.insert(a,Hn.newNoDocument(a,Me.min()));const l=Je().add(a),c=new Op(Me.min(),new Map,new Vt(Xe),o,l);await GC(r,c),r.du=r.du.remove(a),r.Au.delete(e),Lw(r)}else await uy(r.localStore,e,!1).then(()=>fy(r,e,n)).catch(Jc)}async function q$(t,e){const n=De(t),r=e.batch.batchId;try{const s=await n$(n.localStore,e);YC(n,r,null),QC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ah(n,s)}catch(s){await Jc(s)}}async function K$(t,e,n){const r=De(t);try{const s=await function(o,l){const c=De(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(f=>(dt(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);YC(r,e,n),QC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ah(r,s)}catch(s){await Jc(s)}}function QC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function YC(t,e,n){const r=De(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function fy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||XC(t,r)})}function XC(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Sw(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Lw(t))}function Z_(t,e,n){for(const r of n)r instanceof HC?(t.Ru.addReference(r.key,e),G$(t,r)):r instanceof qC?(fe(Ow,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||XC(t,r.key)):Ae(19791,{wu:r})}function G$(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(fe(Ow,"New document in limbo: "+n),t.Eu.add(r),Lw(t))}function Lw(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new _e(Nt.fromString(e)),r=t.fu.next();t.Au.set(r,new L$(n)),t.du=t.du.insert(n,r),VC(t.remoteStore,new Na(ni(Pp(n.path)),r,"TargetPurposeLimboResolution",Ip.ce))}}async function ah(t,e,n){const r=De(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Ew.As(c.targetId,u);a.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=De(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>G.forEach(u,p=>G.forEach(p.Es,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>G.forEach(p.ds,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Zc(f))throw f;fe(jw,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Ms.get(p),N=g.snapshotVersion,x=g.withLastLimboFreeSnapshotVersion(N);h.Ms=h.Ms.insert(p,x)}}}(r.localStore,a))}async function Q$(t,e){const n=De(t);if(!n.currentUser.isEqual(e)){fe(Ow,"User change. New user:",e.toKey());const r=await MC(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new ue(q.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ah(n,r.Ls)}}function Y$(t,e){const n=De(t),r=n.Au.get(e);if(r&&r.hu)return Je().add(r.key);{let s=Je();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function JC(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=GC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Y$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H$.bind(null,e),e.Pu.H_=k$.bind(null,e.eventManager),e.Pu.yu=D$.bind(null,e.eventManager),e}function X$(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=q$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K$.bind(null,e),e}class km{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return t$(this.persistence,new J7,e.initialUser,this.serializer)}Cu(e){return new DC(_w.mi,this.serializer)}Du(e){return new l$}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}km.provider={build:()=>new km};class J$ extends km{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){dt(this.persistence.referenceDelegate instanceof Pm,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new L7(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?cr.withCacheSize(this.cacheSizeBytes):cr.DEFAULT;return new DC(r=>Pm.mi(r,n),this.serializer)}}class my{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>J_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q$.bind(null,this.syncEngine),await A$(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new R$}()}createDatastore(e){const n=Lp(e.databaseInfo.databaseId),r=function(a){return new f$(a)}(e.databaseInfo);return function(a,o,l,c){return new x$(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new v$(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>J_(this.syncEngine,n,0),function(){return q_.v()?new q_:new c$}())}createSyncEngine(e,n){return function(s,a,o,l,c,u,h){const f=new F$(s,a,o,l,c,u);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=De(s);fe(el,"RemoteStore shutting down."),a.Ea.add(5),await tu(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}my.provider={build:()=>new my};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya="FirestoreClient";class Z${constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Bn.UNAUTHENTICATED,this.clientId=Sp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{fe(Ya,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(fe(Ya,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ji;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Pw(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function v0(t,e){t.asyncQueue.verifyOperationInProgress(),fe(Ya,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await MC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function eE(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ZC(t);fe(Ya,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>G_(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>G_(e.remoteStore,s)),t._onlineComponents=e}async function ZC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){fe(Ya,"Using user provided OfflineComponentProvider");try{await v0(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Zo("Error using user provided cache. Falling back to memory cache: "+n),await v0(t,new km)}}else fe(Ya,"Using default OfflineComponentProvider"),await v0(t,new J$(void 0));return t._offlineComponents}async function Vw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(fe(Ya,"Using user provided OnlineComponentProvider"),await eE(t,t._uninitializedComponentsProvider._online)):(fe(Ya,"Using default OnlineComponentProvider"),await eE(t,new my))),t._onlineComponents}function eA(t){return ZC(t).then(e=>e.persistence)}function tA(t){return Vw(t).then(e=>e.remoteStore)}function eB(t){return Vw(t).then(e=>e.syncEngine)}async function Dm(t){const e=await Vw(t),n=e.eventManager;return n.onListen=V$.bind(null,e.syncEngine),n.onUnlisten=B$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z$.bind(null,e.syncEngine),n}function tB(t){return t.asyncQueue.enqueue(async()=>{const e=await eA(t),n=await tA(t);return e.setNetworkEnabled(!0),function(s){const a=De(s);return a.Ea.delete(0),ih(a)}(n)})}function nB(t){return t.asyncQueue.enqueue(async()=>{const e=await eA(t),n=await tA(t);return e.setNetworkEnabled(!1),async function(s){const a=De(s);a.Ea.add(0),await tu(a),a.Ra.set("Offline")}(n)})}function rB(t,e,n={}){const r=new ji;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const h=new Fw({next:p=>{h.Nu(),o.enqueueAndForget(()=>kw(a,f));const g=p.docs.has(l);!g&&p.fromCache?u.reject(new ue(q.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new ue(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Mw(Pp(l.path),h,{includeMetadataChanges:!0,qa:!0});return Rw(a,f)}(await Dm(t),t.asyncQueue,e,n,r)),r.promise}function sB(t,e,n={}){const r=new ji;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const h=new Fw({next:p=>{h.Nu(),o.enqueueAndForget(()=>kw(a,f)),p.fromCache&&c.source==="server"?u.reject(new ue(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Mw(l,h,{includeMetadataChanges:!0,qa:!0});return Rw(a,f)}(await Dm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firestore.googleapis.com",nE=!0;class rE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rA,this.ssl=nE}else this.host=e.host,this.ssl=e.ssl??nE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<M7)throw new ue(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nA(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zI;switch(r.type){case"firstParty":return new m8(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tE.get(n);r&&(fe("ComponentProvider","Removing Datastore"),tE.delete(n),r.terminate())}(this),Promise.resolve()}}function sA(t,e,n,r={}){var u;t=An(t,Vp);const s=ll(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Xv(`https://${l}`),Jv("Firestore",!0)),a.host!==rA&&a.host!==l&&Zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:s,emulatorOptions:r};if(!Ko(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Bn.MOCK_USER;else{h=yF(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ue(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Bn(p)}t._authCredentials=new d8(new BI(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hi(this.firestore,e,this._query)}}class Ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nh(n,Ot._jsonSchema))return new Ot(e,r||null,new _e(Nt.fromString(n.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:on("string",Ot._jsonSchemaVersion),referencePath:on("string")};class Si extends Hi{constructor(e,n,r){super(e,n,Pp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new _e(e))}withConverter(e){return new Si(this.firestore,e,this._path)}}function vn(t,e,...n){if(t=kt(t),WI("collection","path",e),t instanceof Vp){const r=Nt.fromString(e,...n);return g_(r),new Si(t,null,r)}{if(!(t instanceof Ot||t instanceof Si))throw new ue(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Nt.fromString(e,...n));return g_(r),new Si(t.firestore,null,r)}}function tt(t,e,...n){if(t=kt(t),arguments.length===1&&(e=Sp.newId()),WI("doc","path",e),t instanceof Vp){const r=Nt.fromString(e,...n);return p_(r),new Ot(t,null,new _e(r))}{if(!(t instanceof Ot||t instanceof Si))throw new ue(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Nt.fromString(e,...n));return p_(r),new Ot(t.firestore,t instanceof Si?t.converter:null,new _e(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE="AsyncQueue";class iE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new LC(this,"async_queue_retry"),this._c=()=>{const r=y0();r&&fe(sE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=y0();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=y0();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ji;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zc(e))throw e;fe(sE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Fi("INTERNAL UNHANDLED ERROR: ",aE(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Aw.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Ae(47125,{Pc:aE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function aE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class ts extends Vp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new iE,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iE(e),this._firestoreClient=void 0,await e}}}function iA(t,e){const n=typeof t=="object"?t:tw(),r=typeof t=="string"?t:Sm,s=Np(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=qT("firestore");a&&sA(s,...a)}return s}function hl(t){if(t._terminated)throw new ue(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iB(t),t._firestoreClient}function iB(t){var r,s,a;const e=t._freezeSettings(),n=function(l,c,u,h){return new A8(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,nA(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Z$(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}function aA(t){return tB(hl(t=An(t,ts)))}function oA(t){return nB(hl(t=An(t,ts)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(Nn.fromBase64String(e))}catch(n){throw new ue(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tr(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nh(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:on("string",Tr._jsonSchemaVersion),bytes:on("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ns._jsonSchemaVersion}}static fromJSON(e){if(nh(e,Ns._jsonSchema))return new Ns(e.latitude,e.longitude)}}Ns._jsonSchemaVersion="firestore/geoPoint/1.0",Ns._jsonSchema={type:on("string",Ns._jsonSchemaVersion),latitude:on("number"),longitude:on("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:_s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nh(e,_s._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new _s(e.vectorValues);throw new ue(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}_s._jsonSchemaVersion="firestore/vectorValue/1.0",_s._jsonSchema={type:on("string",_s._jsonSchemaVersion),vectorValues:on("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB=/^__.*__$/;class oB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new so(e,this.data,this.fieldMask,n,this.fieldTransforms):new rh(e,this.data,n,this.fieldTransforms)}}class lA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new so(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{Ac:t})}}class Uw{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Uw({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Mm(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(cA(this.Ac)&&aB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class lB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lp(e)}Cc(e,n,r,s=!1){return new Uw({Ac:e,methodName:n,Dc:r,path:yn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Up(t){const e=t._freezeSettings(),n=Lp(t._databaseId);return new lB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uA(t,e,n,r,s,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);Bw("Data must be an object, but it was:",o,r);const l=dA(r,o);let c,u;if(a.merge)c=new Ar(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const f of a.mergeFields){const p=py(e,f,n);if(!o.contains(p))throw new ue(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);fA(h,p)||h.push(p)}c=new Ar(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new oB(new hr(l),c,u)}class $p extends lh{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $p}}class $w extends lh{_toFieldTransform(e){return new t7(e.path,new Ad)}isEqual(e){return e instanceof $w}}function cB(t,e,n,r){const s=t.Cc(1,e,n);Bw("Data must be an object, but it was:",s,r);const a=[],o=hr.empty();ro(r,(c,u)=>{const h=zw(e,c,n);u=kt(u);const f=s.yc(h);if(u instanceof $p)a.push(h);else{const p=ch(u,f);p!=null&&(a.push(h),o.set(h,p))}});const l=new Ar(a);return new lA(o,l,s.fieldTransforms)}function uB(t,e,n,r,s,a){const o=t.Cc(1,e,n),l=[py(e,r,n)],c=[s];if(a.length%2!=0)throw new ue(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(py(e,a[p])),c.push(a[p+1]);const u=[],h=hr.empty();for(let p=l.length-1;p>=0;--p)if(!fA(u,l[p])){const g=l[p];let N=c[p];N=kt(N);const x=o.yc(g);if(N instanceof $p)u.push(g);else{const b=ch(N,x);b!=null&&(u.push(g),h.set(g,b))}}const f=new Ar(u);return new lA(h,f,o.fieldTransforms)}function dB(t,e,n,r=!1){return ch(n,t.Cc(r?4:3,e))}function ch(t,e){if(hA(t=kt(t)))return Bw("Unsupported field value:",e,t),dA(t,e);if(t instanceof lh)return function(r,s){if(!cA(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let c=ch(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=kt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return J8(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=pt.fromDate(r);return{timestampValue:Am(s.serializer,a)}}if(r instanceof pt){const a=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Am(s.serializer,a)}}if(r instanceof Ns)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tr)return{bytesValue:SC(s.serializer,r._byteString)};if(r instanceof Ot){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:bw(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof _s)return function(o,l){return{mapValue:{fields:{[eC]:{stringValue:nC},[Tm]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return xw(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Tp(r)}`)}(t,e)}function dA(t,e){const n={};return GI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(t,(r,s)=>{const a=ch(s,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function hA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof pt||t instanceof Ns||t instanceof Tr||t instanceof Ot||t instanceof lh||t instanceof _s)}function Bw(t,e,n){if(!hA(n)||!qI(n)){const r=Tp(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function py(t,e,n){if((e=kt(e))instanceof oh)return e._internalPath;if(typeof e=="string")return zw(t,e);throw Mm("Field path arguments must be of type string or ",t,!1,void 0,n)}const hB=new RegExp("[~\\*/\\[\\]]");function zw(t,e,n){if(e.search(hB)>=0)throw Mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new oh(...e.split("."))._internalPath}catch{throw Mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mm(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new ue(q.INVALID_ARGUMENT,l+t+c)}function fA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new fB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class fB extends mA{data(){return super.data()}}function Bp(t,e){return typeof e=="string"?zw(t,e):e instanceof oh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ww{}class Hw extends Ww{}function Pr(t,e,...n){let r=[];e instanceof Ww&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof zp).length,l=a.filter(c=>c instanceof uh).length;if(o>1||o>0&&l>0)throw new ue(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uh extends Hw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uh(e,n,r)}_apply(e){const n=this._parse(e);return gA(e._query,n),new Hi(e.firestore,e.converter,sy(e._query,n))}_parse(e){const n=Up(e.firestore);return function(a,o,l,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ue(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){cE(f,h);const N=[];for(const x of f)N.push(lE(c,a,x));p={arrayValue:{values:N}}}else p=lE(c,a,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||cE(f,h),p=dB(l,o,f,h==="in"||h==="not-in");return an.create(u,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function er(t,e,n){const r=e,s=Bp("where",t);return uh._create(s,r,n)}class zp extends Ww{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new zp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:As.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const c of l)gA(o,c),o=sy(o,c)}(e._query,n),new Hi(e.firestore,e.converter,sy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Wp extends Hw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Wp(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new ue(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ue(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cd(a,o)}(e._query,this._field,this._direction);return new Hi(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new eu(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function mc(t,e="asc"){const n=e,r=Bp("orderBy",t);return Wp._create(r,n)}function lE(t,e,n){if(typeof(n=kt(n))=="string"){if(n==="")throw new ue(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uC(e)&&n.indexOf("/")!==-1)throw new ue(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Nt.fromString(n));if(!_e.isDocumentKey(r))throw new ue(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return E_(t,new _e(r))}if(n instanceof Ot)return E_(t,n._key);throw new ue(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tp(n)}.`)}function cE(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gA(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xA{convertValue(e,n="none"){switch(Ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ka(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ro(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[Tm].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>Yt(o.doubleValue));return new _s(n)}convertGeoPoint(e){return new Ns(Yt(e.latitude),Yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ap(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Td(e));default:return null}}convertTimestamp(e){const n=qa(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Nt.fromString(e);dt(RC(r),9688,{name:e});const s=new Dc(r.get(1),r.get(3)),a=new _e(r.popFirst(5));return s.isEqual(n)||Fi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ma extends mA{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ma._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ma._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ma._jsonSchema={type:on("string",Ma._jsonSchemaVersion),bundleSource:on("string","DocumentSnapshot"),bundleName:on("string"),bundle:on("string")};class Zu extends Ma{data(e={}){return super.data(e)}}class Oa{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Jl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zu(this._firestore,this._userDataWriter,r.key,r,new Jl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Zu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Jl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new Zu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Jl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:mB(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function mB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){t=An(t,Ot);const e=An(t.firestore,ts);return rB(hl(e),t._key).then(n=>wA(e,t,n))}Oa._jsonSchemaVersion="firestore/querySnapshot/1.0",Oa._jsonSchema={type:on("string",Oa._jsonSchemaVersion),bundleSource:on("string","QuerySnapshot"),bundleName:on("string"),bundle:on("string")};class qw extends xA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,n)}}function Rr(t){t=An(t,Hi);const e=An(t.firestore,ts),n=hl(e),r=new qw(e);return pA(t._query),sB(n,t._query).then(s=>new Oa(e,r,t,s))}function Ir(t,e,n){t=An(t,Ot);const r=An(t.firestore,ts),s=yA(t.converter,e,n);return hh(r,[uA(Up(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Yr.none())])}function Ui(t,e,n,...r){t=An(t,Ot);const s=An(t.firestore,ts),a=Up(s);let o;return o=typeof(e=kt(e))=="string"||e instanceof oh?uB(a,"updateDoc",t._key,e,n,r):cB(a,"updateDoc",t._key,e),hh(s,[o.toMutation(t._key,Yr.exists(!0))])}function Om(t){return hh(An(t.firestore,ts),[new yw(t._key,Yr.none())])}function dh(t,e){const n=An(t.firestore,ts),r=tt(t),s=yA(t.converter,e);return hh(n,[uA(Up(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Yr.exists(!1))]).then(()=>r)}function vA(t,...e){var c,u,h;t=kt(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||oE(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(oE(e[r])){const f=e[r];e[r]=(c=f.next)==null?void 0:c.bind(f),e[r+1]=(u=f.error)==null?void 0:u.bind(f),e[r+2]=(h=f.complete)==null?void 0:h.bind(f)}let a,o,l;if(t instanceof Ot)o=An(t.firestore,ts),l=Pp(t._key.path),a={next:f=>{e[r]&&e[r](wA(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=An(t,Hi);o=An(f.firestore,ts),l=f._query;const p=new qw(o);a={next:g=>{e[r]&&e[r](new Oa(o,p,f,g))},error:e[r+1],complete:e[r+2]},pA(t._query)}return function(p,g,N,x){const b=new Fw(x),_=new Mw(g,b,N);return p.asyncQueue.enqueueAndForget(async()=>Rw(await Dm(p),_)),()=>{b.Nu(),p.asyncQueue.enqueueAndForget(async()=>kw(await Dm(p),_))}}(hl(o),l,s,a)}function hh(t,e){return function(r,s){const a=new ji;return r.asyncQueue.enqueueAndForget(async()=>W$(await eB(r),s,a)),a.promise}(hl(t),e)}function wA(t,e,n){const r=n.docs.get(e._key),s=new qw(t);return new Ma(t,s,e._key,r,new Jl(n.hasPendingWrites,n.fromCache),e.converter)}function Tt(){return new $w("serverTimestamp")}(function(e,n=!0){(function(s){Xc=s})(Yc),Go(new Wa("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new ts(new h8(r.getProvider("auth-internal")),new p8(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ue(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dc(u.options.projectId,h)}(o,s),o);return a={useFetchStreams:n,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Zs(d_,h_,e),Zs(d_,h_,"esm2020")})();const Il=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xA,Bytes:Tr,CollectionReference:Si,DocumentReference:Ot,DocumentSnapshot:Ma,FieldPath:oh,FieldValue:lh,Firestore:ts,FirestoreError:ue,GeoPoint:Ns,Query:Hi,QueryCompositeFilterConstraint:zp,QueryConstraint:Hw,QueryDocumentSnapshot:Zu,QueryFieldFilterConstraint:uh,QueryOrderByConstraint:Wp,QuerySnapshot:Oa,SnapshotMetadata:Jl,Timestamp:pt,VectorValue:_s,_AutoId:Sp,_ByteString:Nn,_DatabaseId:Dc,_DocumentKey:_e,_EmptyAuthCredentialsProvider:zI,_FieldPath:yn,_cast:An,_logWarn:Zo,_validateIsNotUsedTogether:HI,addDoc:dh,collection:vn,connectFirestoreEmulator:sA,deleteDoc:Om,disableNetwork:oA,doc:tt,enableNetwork:aA,ensureFirestoreConfigured:hl,executeWrite:hh,getDoc:mn,getDocs:Rr,getFirestore:iA,onSnapshot:vA,orderBy:mc,query:Pr,serverTimestamp:Tt,setDoc:Ir,updateDoc:Ui,where:er},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Sr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(a=>this.auth=a,()=>{}),this.messaging||r.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy="us-central1";class gB{constructor(e,n,r,s,a=gy,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new pB(e,n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=gy}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function xB(t,e,n){const r=ll(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Xv(t.emulatorOrigin+"/backends"),Jv("Functions",!0))}const uE="@firebase/functions",dE="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB="auth-internal",vB="app-check-internal",wB="messaging-internal";function bB(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(yB),o=n.getProvider(wB),l=n.getProvider(vB);return new gB(s,a,o,l,r)};Go(new Wa(bA,e,"PUBLIC").setMultipleInstances(!0)),Zs(uE,dE,t),Zs(uE,dE,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NB(t=tw(),e=gy){const r=Np(kt(t),bA).getImmediate({identifier:e}),s=qT("functions");return s&&_B(r,...s),r}function _B(t,e,n){xB(kt(t),e,n)}bB();const xy={apiKey:"AIzaSyBRYf_nDTQC-wzWZWjFyWjUKKWc5UHOe-I",authDomain:"voda-45a7f.firebaseapp.com",projectId:"voda-45a7f",storageBucket:"voda-45a7f.firebasestorage.app",messagingSenderId:"522881129909",appId:"1:522881129909:web:19e0984be3f2e73533cdfc",measurementId:"G-31XWYDVG3Y"},Kw=UN().length?UN()[0]:XT(xy),bt=c8(Kw),Te=iA(Kw);console.log("🔥 Firebase initialized with config:",{projectId:xy.projectId,authDomain:xy.authDomain});const EB=t=>{var e;console.error("🔥 Firestore connection error:",t),(t.code==="unavailable"||(e=t.message)!=null&&e.includes("ERR_ABORTED"))&&(console.log("🔥 Attempting to reconnect to Firestore..."),oA(Te).then(()=>aA(Te)).catch(n=>{console.error("🔥 Failed to reconnect:",n)}))};window.addEventListener("unhandledrejection",t=>{var e,n,r,s;((n=(e=t.reason)==null?void 0:e.message)!=null&&n.includes("firestore")||(s=(r=t.reason)==null?void 0:r.message)!=null&&s.includes("ERR_ABORTED"))&&(EB(t.reason),t.preventDefault())});NB(Kw,"us-central1");console.log("Using Firebase Production Environment");const Ol=Object.freeze(Object.defineProperty({__proto__:null,auth:bt,db:Te},Symbol.toStringTag,{value:"Module"})),jB="modulepreload",SB=function(t){return"/"+t},hE={},or=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=SB(c),c in hE)return;hE[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":jB,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},dn=t=>t&&t.toDate?t.toDate():new Date,xs={async create(t){await Ir(tt(Te,"profiles",t.userId),{userId:t.userId,shopId:t.shopId,role:t.role,fullName:t.fullName,phone:t.phone,createdAt:Tt()})},async getById(t){const e=tt(Te,"profiles",t),n=await mn(e);if(n.exists()){const r=n.data();return{userId:n.id,...r,createdAt:dn(r.createdAt)}}return null},async update(t,e){const n=tt(Te,"profiles",t);await Ui(n,{...e,updatedAt:Tt()})},async getByShopId(t){const e=Pr(vn(Te,"profiles"),er("shopId","==",t));return(await Rr(e)).docs.map(r=>{const s=r.data();return{userId:r.id,...s,createdAt:dn(s.createdAt)}})}},TB={async create(t){return(await dh(vn(Te,"shops"),{...t,createdAt:Tt(),updatedAt:Tt()})).id},async getAll(){try{console.log("Getting all shops...");const t=await Rr(vn(Te,"shops"));console.log("Shops snapshot size:",t.size);const e=t.docs.map(n=>{const r=n.data();return console.log("Shop data:",{id:n.id,...r}),{id:n.id,...r,createdAt:dn(r.createdAt),updatedAt:dn(r.updatedAt)}});return console.log("Returning shops:",e),e}catch(t){throw console.error("Error in shopService.getAll:",t),t}},async getById(t){const e=tt(Te,"shops",t),n=await mn(e);if(n.exists()){const r=n.data();return{id:n.id,...r,createdAt:dn(r.createdAt),updatedAt:dn(r.updatedAt)}}return null},async update(t,e){const n=tt(Te,"shops",t);await Ui(n,{...e,updatedAt:Tt()})}},mr={async create(t){return(await dh(vn(Te,"merchantWallets"),{...t,transferLimit:t.transferLimit||2e5,withdrawLimit:t.withdrawLimit||2e5,transferUsage:t.transferUsage||0,withdrawUsage:t.withdrawUsage||0,createdAt:Tt(),updatedAt:Tt()})).id},async getByMerchantId(t){const e=Pr(vn(Te,"merchantWallets"),er("merchantUserId","==",t),mc("createdAt","desc"));return(await Rr(e)).docs.map(r=>{const s=r.data();return{id:r.id,...s,transferLimit:s.transferLimit||2e5,withdrawLimit:s.withdrawLimit||2e5,transferUsage:s.transferUsage||0,withdrawUsage:s.withdrawUsage||0,createdAt:dn(s.createdAt),updatedAt:dn(s.updatedAt)}})},async getById(t){const e=tt(Te,"merchantWallets",t),n=await mn(e);if(n.exists()){const r=n.data();return{id:n.id,...r,transferLimit:r.transferLimit||2e5,withdrawLimit:r.withdrawLimit||2e5,transferUsage:r.transferUsage||0,withdrawUsage:r.withdrawUsage||0,createdAt:dn(r.createdAt),updatedAt:dn(r.updatedAt)}}return null},async update(t,e){const n=tt(Te,"merchantWallets",t);await Ui(n,{...e,updatedAt:Tt()})},async updateUsage(t,e,n){const r=tt(Te,"merchantWallets",t),s={updatedAt:Tt()};e!==void 0&&(s.transferUsage=e),n!==void 0&&(s.withdrawUsage=n),await Ui(r,s)},async resetDailyUsage(t){const n=(await this.getByMerchantId(t)).map(r=>this.updateUsage(r.id,0,0));await Promise.all(n)},async delete(t){const e=tt(Te,"merchantWallets",t);await Om(e)}},fh={async create(t){try{console.log("Creating transaction:",t);const{calculateCommission:e,calculateProfit:n}=await or(async()=>{const{calculateCommission:l,calculateProfit:c}=await import("./commissionCalculator-DbNVJv5a.js");return{calculateCommission:l,calculateProfit:c}},[]),r=e(t.amount,t.txnType),s=n(t.amount,t.txnType),a={...t,commission:r,profit:s,createdAt:Tt(),confirmedAt:t.confirmedAt?Tt():null},o=await dh(vn(Te,"transactions"),a);return console.log("Transaction created with ID:",o.id,"Profit:",s),await this.updateLineUsage(t.lineId,t.amount),o.id}catch(e){throw console.error("Error creating transaction:",e),e}},async updateLineUsage(t,e){try{console.log("Updating line usage:",{lineId:t,amount:e})}catch(n){console.error("Error updating line usage:",n)}},async getByShopId(t){const e=Pr(vn(Te,"transactions"),er("shopId","==",t),mc("createdAt","desc"));return(await Rr(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:dn(r.data().createdAt),confirmedAt:r.data().confirmedAt?dn(r.data().confirmedAt):void 0}))},async getByMerchantId(t){const e=Pr(vn(Te,"transactions"),er("merchantUserId","==",t),mc("createdAt","desc"));return(await Rr(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:dn(r.data().createdAt),confirmedAt:r.data().confirmedAt?dn(r.data().confirmedAt):void 0}))},async getByUserId(t){const e=Pr(vn(Te,"transactions"),er("merchantUserId","==",t),mc("createdAt","desc"));return(await Rr(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:dn(r.data().createdAt),confirmedAt:r.data().confirmedAt?dn(r.data().confirmedAt):void 0}))},async updateStatus(t,e,n){const r=tt(Te,"transactions",t);await Ui(r,{status:e,confirmedAt:n?Tt():null})}},Pt={async getUserData(t){try{console.log("🔍 محاولة الحصول على بيانات المستخدم:",{userId:t});const e=tt(Te,"users",t),n=await mn(e);if(n.exists()){const r=n.data();return console.log("✅ تم العثور على بيانات المستخدم:",r),{...r,createdAt:dn(r.createdAt),updatedAt:dn(r.updatedAt)}}else{console.log("⚠️ لا توجد بيانات للمستخدم، إنشاء بيانات افتراضية");const r={cashBalance:0,walletBalances:{"wallet-1":1e4,"wallet-2":5e3},createdAt:new Date,updatedAt:new Date};return await this.saveUserData(t,r),console.log("✅ تم إنشاء وحفظ البيانات الافتراضية"),r}}catch(e){return console.error("❌ خطأ في الحصول على بيانات المستخدم:",e),{cashBalance:0,walletBalances:{"wallet-1":1e4,"wallet-2":5e3},createdAt:new Date,updatedAt:new Date}}},async saveUserData(t,e){try{const n=tt(Te,"users",t);await Ir(n,{...e,updatedAt:Tt()},{merge:!0})}catch(n){throw console.error("Error saving user data:",n),n}},async updateUserData(t,e){try{console.log("🔄 بدء تحديث بيانات المستخدم في Firebase:",{userId:t,data:e});const n=tt(Te,"users",t);let r={};try{const o=await mn(n);r=o.exists()?o.data():{},console.log("📥 البيانات الحالية:",r)}catch(o){console.warn("⚠️ تعذر الحصول على البيانات الحالية، استخدام البيانات الجديدة فقط:",o)}const s={...r,...e,updatedAt:Tt()};console.log("📝 البيانات المدمجة للحفظ:",s);let a=3;for(;a>0;)try{await Ir(n,s),console.log("✅ تم تحديث بيانات المستخدم بنجاح");return}catch(o){if(a--,console.warn(`⚠️ فشل في الحفظ، المحاولات المتبقية: ${a}`,o),a===0)throw o;await new Promise(l=>setTimeout(l,1e3))}}catch(n){throw console.error("❌ خطأ في تحديث بيانات المستخدم:",n),n instanceof Error&&(n.message.includes("network")?console.error("🌐 خطأ في الشبكة - تحقق من الاتصال بالإنترنت"):n.message.includes("permission")?console.error("🔒 خطأ في الصلاحيات - تحقق من قواعد Firestore"):n.message.includes("quota")&&console.error("📊 تم تجاوز حد الاستخدام - تحقق من حصة Firebase")),n}},async getUserWallets(t){try{const e=await this.getUserData(t);return(e==null?void 0:e.wallets)||[]}catch(e){return console.error("Error getting user wallets:",e),[]}},async getUserTransactions(t){try{const e=Pr(vn(Te,"userTransactions"),er("userId","==",t),mc("createdAt","desc"));return(await Rr(e)).docs.map(r=>({id:r.id,...r.data(),createdAt:dn(r.data().createdAt)}))}catch(e){return console.error("Error getting user transactions:",e),[]}},async saveUserTransaction(t,e){try{return(await dh(vn(Te,"userTransactions"),{...e,userId:t,createdAt:Tt()})).id}catch(n){throw console.error("Error saving user transaction:",n),n}},async removeUserTransaction(t,e){try{console.log("🗑️ محاولة حذف المعاملة من userTransactions:",{userId:t,transactionId:e});let n=Pr(vn(Te,"userTransactions"),er("userId","==",t),er("id","==",e)),r=await Rr(n);if(r.empty&&(console.log("🔍 البحث الثاني: البحث بـ transactionId كحقل"),n=Pr(vn(Te,"userTransactions"),er("userId","==",t),er("transactionId","==",e)),r=await Rr(n)),r.empty){console.log("🔍 البحث الثالث: البحث في جميع معاملات المستخدم"),n=Pr(vn(Te,"userTransactions"),er("userId","==",t));const a=(await Rr(n)).docs.filter(o=>{const l=o.data();return l.id===e||l.transactionId===e||o.id===e});if(a.length>0){const o=a.map(l=>Om(l.ref));await Promise.all(o),console.log("✅ تم حذف المعاملة من userTransactions بنجاح (البحث اليدوي):",e);return}}else{const s=r.docs.map(a=>Om(a.ref));await Promise.all(s),console.log("✅ تم حذف المعاملة من userTransactions بنجاح:",e);return}console.warn("⚠️ لم يتم العثور على المعاملة في userTransactions:",e)}catch(n){throw console.error("❌ خطأ في حذف المعاملة من userTransactions:",n),n}}},IB=Object.freeze(Object.defineProperty({__proto__:null,merchantWalletService:mr,profileService:xs,shopService:TB,transactionService:fh,userDataService:Pt},Symbol.toStringTag,{value:"Module"})),NA=m.createContext(void 0);function CB({children:t}){const[e,n]=m.useState(null),[r,s]=m.useState(null),[a,o]=m.useState(!0),l=async g=>{try{o(!0);const N=await xs.getById(g);N?s(N):console.error("No profile found for user")}catch(N){console.error("Error fetching profile:",N)}finally{o(!1)}},c=async()=>{e&&await l(e.uid)};m.useEffect(()=>{const g=Qx(bt,async N=>{n(N),N?await l(N.uid):s(null),o(!1)});return()=>g()},[]);const p={user:e,profile:r,loading:a,signUp:async(g,N,x)=>{try{const b=await Gx(bt,g,N);return b.user&&await xs.create({userId:b.user.uid,role:"merchant",fullName:(x==null?void 0:x.fullName)||null,phone:(x==null?void 0:x.phone)||null,shopId:""}),{error:null}}catch(b){return console.error("Error during sign up:",b),{error:b}}},signIn:async(g,N)=>{try{return await lw(bt,g,N),{error:null}}catch(x){return console.error("Error during sign in:",x),{error:x}}},signOut:async()=>{try{await Yx(bt)}catch(g){console.error("Error during sign out:",g)}},refreshProfile:c};return i.jsx(NA.Provider,{value:p,children:t})}function _A(){const t=m.useContext(NA);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}var In=(t=>(t.MONTHLY="monthly",t.YEARLY="yearly",t.LIFETIME="lifetime",t))(In||{});const Lm=t=>{if(!t||!t.isActive)return!1;if(t.planType==="lifetime")return!0;if(!t.endDate)return!1;const e=new Date,n=new Date(t.endDate);return e<=n},EA=t=>{if(!t||!t.isActive)return null;if(t.planType==="lifetime")return-1;if(!t.endDate)return null;const e=new Date,r=new Date(t.endDate).getTime()-e.getTime(),s=Math.ceil(r/(1e3*60*60*24));return s>0?s:0},AB=async t=>{try{const e=tt(Te,"users",t),n=await mn(e);return n.exists()&&n.data().subscription||null}catch(e){return console.error("❌ خطأ في الحصول على بيانات الاشتراك:",e),null}},Gw=t=>{switch(t){case"monthly":return"شهرية";case"yearly":return"سنوية";case"lifetime":return"مدى الحياة";default:return"غير محدد"}},PB=t=>{if(!t)return"text-gray-500";if(!t.isActive)return"text-red-500";if(t.planType==="lifetime")return"text-green-600";const e=EA(t);return e===null||e<=0?"text-red-500":e<=7?"text-yellow-500":"text-green-500"},Zl=t=>t?(t instanceof Date?t:new Date(t)).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"}):"غير محدد",jA=m.createContext(void 0);function RB(){const t=m.useContext(jA);if(t===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return t}const Kt=RB,kB=({children:t})=>{const[e,n]=m.useState(null),[r,s]=m.useState(null),[a,o]=m.useState(null),[l,c]=m.useState(!1),[u,h]=m.useState(!0),f=async R=>{try{const j=await xs.getById(R);if(j){s(j);const{doc:S,onSnapshot:T}=await or(async()=>{const{doc:D,onSnapshot:M}=await Promise.resolve().then(()=>Il);return{doc:D,onSnapshot:M}},void 0),{db:P}=await or(async()=>{const{db:D}=await Promise.resolve().then(()=>Ol);return{db:D}},void 0);return T(S(P,"profiles",R),D=>{var M,$,se,W;if(D.exists()){const X=D.data(),U={userId:D.id,shopId:X.shopId,role:X.role,fullName:X.fullName,phone:X.phone,approved:X.approved,avatarId:X.avatarId,createdAt:((M=X.createdAt)==null?void 0:M.toDate())||new Date,updatedAt:(($=X.updatedAt)==null?void 0:$.toDate())||new Date,trialStarted:X.trialStarted||!1,trialStartDate:(se=X.trialStartDate)==null?void 0:se.toDate(),trialEndDate:(W=X.trialEndDate)==null?void 0:W.toDate(),trialExpired:X.trialExpired||!1};console.log("Profile updated via listener:",U),s(U)}})}else await p(R)}catch(j){console.error("Error fetching profile:",j),await p(R)}},p=async(R,j,S,T)=>{var P,A;try{console.log("Creating default profile for user:",R);const D={userId:R,shopId:"default-shop",role:"user",fullName:j||"مستخدم جديد",phone:S||null,shopName:T||null,approved:!1,createdAt:new Date,updatedAt:new Date};s(D),console.log("Created temporary profile:",D);try{const{doc:M,setDoc:$,serverTimestamp:se}=await or(async()=>{const{doc:Q,setDoc:he,serverTimestamp:ne}=await Promise.resolve().then(()=>Il);return{doc:Q,setDoc:he,serverTimestamp:ne}},void 0),{db:W}=await or(async()=>{const{db:Q}=await Promise.resolve().then(()=>Ol);return{db:Q}},void 0),X={email:((P=bt.currentUser)==null?void 0:P.email)||"",displayName:j||"مستخدم جديد",phone:S||null,shopName:T||null,isActive:!1,createdAt:se(),lastLogin:null,updatedAt:se()};console.log("Attempting to add user to admin collection with data:",X),await $(M(W,"users",R),X,{merge:!0}),console.log("✅ User successfully added to admin collection:",X);const{getDoc:U}=await or(async()=>{const{getDoc:Q}=await Promise.resolve().then(()=>Il);return{getDoc:Q}},void 0),L=await U(M(W,"users",R));if(L.exists())console.log("✅ User document verified in Firestore:",L.data());else throw console.error("❌ User document not found after creation"),new Error("Failed to verify user creation in Firestore")}catch(M){console.error("❌ Error adding user to admin collection:",M);try{console.log("🔄 Retrying user creation in admin collection...");const{doc:$,setDoc:se,serverTimestamp:W}=await or(async()=>{const{doc:L,setDoc:Q,serverTimestamp:he}=await Promise.resolve().then(()=>Il);return{doc:L,setDoc:Q,serverTimestamp:he}},void 0),{db:X}=await or(async()=>{const{db:L}=await Promise.resolve().then(()=>Ol);return{db:L}},void 0),U={email:((A=bt.currentUser)==null?void 0:A.email)||"",displayName:j||"مستخدم جديد",phone:S||null,shopName:T||null,isActive:!1,createdAt:W(),lastLogin:null,updatedAt:W()};await se($(X,"users",R),U,{merge:!0}),console.log("✅ User successfully added on retry:",U)}catch($){throw console.error("❌ Failed to add user even on retry:",$),$}}try{const{shopService:M}=await or(async()=>{const{shopService:W}=await Promise.resolve().then(()=>IB);return{shopService:W}},void 0);let $="default-shop";try{console.log("Attempting to get shops");const W=await M.getAll();console.log("Shops retrieved:",W),W.length>0?($=W[0].id,console.log("Using existing shop:",$)):(console.log("No shops found, creating default shop"),$=await M.create({name:T||"المحل الافتراضي",logoUrl:null}))}catch(W){console.error("Error getting/creating shop:",W),$="default-shop"}await xs.create({userId:R,shopId:$,role:"user",fullName:"مستخدم جديد",phone:null,approved:!1});const se=await xs.getById(R);se&&(s(se),console.log("Updated with Firebase profile:",se))}catch{console.log("Using local profile - Firebase unavailable")}}catch(D){console.error("Error creating default profile:",D)}};m.useEffect(()=>{console.log("Setting up auth state listener");const R=localStorage.getItem("demoUser"),j=localStorage.getItem("demoProfile");if(R&&j){console.log("🔐 Found demo user in localStorage");try{const T=JSON.parse(R),P=JSON.parse(j);n(T),s(P),h(!1);return}catch(T){console.error("Error parsing demo user data:",T),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile")}}const S=Qx(bt,async T=>{if(console.log("🔐 Auth state changed:",{uid:T==null?void 0:T.uid,email:T==null?void 0:T.email,emailVerified:T==null?void 0:T.emailVerified,timestamp:new Date().toISOString()}),n(T),T){console.log("📋 User authenticated, fetching profile for:",T.uid);const P=new Promise((A,D)=>setTimeout(()=>D(new Error("Profile fetch timeout")),5e3));try{await Promise.race([f(T.uid),P]),console.log("Profile fetched successfully"),await v()}catch(A){console.error("Error fetching profile:",A),console.log("Attempting to create default profile");try{await Promise.race([p(T.uid),P]),await v()}catch(D){console.error("Error creating default profile:",D),s({userId:T.uid,shopId:"temp-shop",role:"user",fullName:"مستخدم مؤقت",phone:null,createdAt:new Date,updatedAt:new Date}),await v()}}}else console.log("No user authenticated, setting profile to null"),s(null),o(null),c(!1);console.log("Setting loading to false"),h(!1)});return()=>{console.log("Cleaning up auth state listener"),S()}},[]);const g=async(R,j,S,T,P)=>{try{console.log("Starting user registration process...");const A=await Gx(bt,R,j);if(console.log("User created successfully:",A.user.uid),S)try{await e_(A.user,{displayName:S}),console.log("Display name updated successfully")}catch(D){console.error("Error updating display name:",D)}return console.log("Creating user profile in Firestore..."),await p(A.user.uid,S,T,P),console.log("User registration completed successfully"),{error:null}}catch(A){console.error("Sign up error:",A);let D="حدث خطأ أثناء التسجيل";return A.code==="auth/email-already-in-use"?D="البريد الإلكتروني مستخدم بالفعل":A.code==="auth/weak-password"?D="كلمة المرور ضعيفة جداً":A.code==="auth/invalid-email"&&(D="البريد الإلكتروني غير صحيح"),{error:{...A,message:D}}}},N=async(R,j)=>{try{if(console.log("🔐 Attempting to sign in with:",R),R==="test@example.com"&&j==="123456"){console.log("🔐 Using demo mode for test user");const T={uid:"demo-user-123",email:"test@example.com",emailVerified:!0},P={userId:"demo-user-123",shopId:"demo-shop-001",role:"user",fullName:"مستخدم تجريبي",phone:"01000000000",approved:!0,createdAt:new Date,updatedAt:new Date,trialStarted:!0,trialStartDate:new Date,trialEndDate:new Date(Date.now()+30*24*60*60*1e3),trialExpired:!1};return localStorage.setItem("demoUser",JSON.stringify(T)),localStorage.setItem("demoProfile",JSON.stringify(P)),n(T),s(P),h(!1),console.log("🔐 Demo user signed in successfully"),{error:null}}const S=await lw(bt,R,j);console.log("🔐 Sign in successful:",S.user.uid);try{if((await mn(tt(Te,"deletedUsers",S.user.uid))).exists())return console.log("🚫 User is deleted, signing out"),await Yx(bt),{error:{code:"auth/user-deleted",message:"تم حذف هذا الحساب من قبل الإدارة. لا يمكنك تسجيل الدخول."}}}catch(T){console.error("Error checking deleted users:",T)}return{error:null}}catch(S){if(console.error("🔐 Sign in error:",S),R==="test@example.com"&&S.code==="auth/user-not-found"){console.log("🔐 Creating test user...");try{const P=await Gx(bt,R,j);return console.log("🔐 Test user created:",P.user.uid),await p(P.user.uid,"مستخدم تجريبي","01000000000","متجر تجريبي"),{error:null}}catch(P){return console.error("🔐 Error creating test user:",P),{error:P}}}let T="حدث خطأ أثناء تسجيل الدخول";return S.code==="auth/invalid-credential"?T="البريد الإلكتروني أو كلمة المرور غير صحيحة":S.code==="auth/user-not-found"?T="لا يوجد حساب بهذا البريد الإلكتروني":S.code==="auth/wrong-password"?T="كلمة المرور غير صحيحة":S.code==="auth/too-many-requests"&&(T="تم تجاوز عدد المحاولات المسموح، حاول لاحقاً"),{error:{...S,message:T}}}},x=async()=>{try{localStorage.getItem("demoUser")?(console.log("🔐 Signing out demo user"),localStorage.removeItem("demoUser"),localStorage.removeItem("demoProfile"),n(null),s(null),h(!1)):await Yx(bt),window.location.pathname.includes("/user/dashboard")?window.location.href="/user/login":window.location.href="/landing"}catch(R){console.error("Sign out error:",R)}},b=async R=>{try{return await K9(bt,R),{error:null}}catch(j){console.error("Password reset error:",j);let S="حدث خطأ أثناء إرسال رابط إعادة تعيين كلمة المرور";return j.code==="auth/user-not-found"?S="لا يوجد حساب بهذا البريد الإلكتروني":j.code==="auth/invalid-email"?S="البريد الإلكتروني غير صحيح":j.code==="auth/too-many-requests"&&(S="تم تجاوز عدد المحاولات المسموح، حاول لاحقاً"),{error:{...j,message:S}}}},_=async R=>{if(!(!e||!r))try{R.fullName&&await e_(e,{displayName:R.fullName}),await xs.update(e.uid,{fullName:R.fullName||r.fullName,phone:R.phone||r.phone}),s({...r,fullName:R.fullName||r.fullName,phone:R.phone||r.phone})}catch(j){console.error("Error updating profile:",j)}},w=async R=>{if(!(!e||!r))try{await xs.update(e.uid,{avatarId:R}),s({...r,avatarId:R})}catch(j){console.error("Error updating avatar:",j)}},v=async()=>{var R,j,S,T,P,A;if(!e){console.log("No user found for subscription check"),o(null),c(!1);return}console.log("Checking subscription status for user:",e.uid);try{const{doc:D,getDoc:M}=await or(async()=>{const{doc:W,getDoc:X}=await Promise.resolve().then(()=>Il);return{doc:W,getDoc:X}},void 0),{db:$}=await or(async()=>{const{db:W}=await Promise.resolve().then(()=>Ol);return{db:W}},void 0),se=await M(D($,"users",e.uid));if(se.exists()){const W=se.data();o(W),console.log("📊 Subscription Data Details:",{userId:e.uid,userEmail:e.email,subscription:W.subscription,subscriptionExists:!!W.subscription,planType:(R=W.subscription)==null?void 0:R.planType,isActive:(j=W.subscription)==null?void 0:j.isActive,startDate:(S=W.subscription)==null?void 0:S.startDate,endDate:(T=W.subscription)==null?void 0:T.endDate,activatedBy:(P=W.subscription)==null?void 0:P.activatedBy,activatedAt:(A=W.subscription)==null?void 0:A.activatedAt});const X=Lm(W.subscription);c(X),console.log("✅ Subscription Validation Result:",{userId:e.uid,isValid:X,reason:W.subscription?W.subscription.isActive?W.subscription.planType==="lifetime"?"Lifetime plan":W.subscription.endDate?new Date>new Date(W.subscription.endDate)?"Expired":"Valid":"No end date":"Subscription not active":"No subscription data"})}else console.log("❌ User document not found in Firestore"),o(null),c(!1)}catch(D){console.error("Error checking subscription status:",D),o(null),c(!1)}},C=async()=>{if(e)try{console.log("Refreshing profile for user:",e.uid),await f(e.uid),await v()}catch(R){console.error("Error refreshing profile:",R)}};m.useEffect(()=>{const R=Qx(bt,async j=>{h(!0),n(j),j?(console.log("User authenticated:",j.uid),await f(j.uid),await v()):(console.log("User signed out"),s(null),o(null),c(!1)),h(!1)});return()=>R()},[]),m.useEffect(()=>{let R=null;return e!=null&&e.uid&&(async()=>{try{const{doc:S,onSnapshot:T}=await or(async()=>{const{doc:D,onSnapshot:M}=await Promise.resolve().then(()=>Il);return{doc:D,onSnapshot:M}},void 0),{db:P}=await or(async()=>{const{db:D}=await Promise.resolve().then(()=>Ol);return{db:D}},void 0),A=S(P,"users",e.uid);R=T(A,D=>{if(D.exists()){const M=D.data();console.log("Subscription data updated in real-time:",M.subscription),o(M);const $=Lm(M.subscription);c($),console.log("Real-time subscription status:",{userId:e.uid,isActive:$,subscription:M.subscription})}},D=>{console.error("Error in subscription listener:",D)})}catch(S){console.error("Error setting up subscription listener:",S)}})(),()=>{R&&R()}},[e==null?void 0:e.uid]);const I={user:e,profile:r,userSubscription:a,isSubscriptionActive:l,loading:u,signUp:g,signIn:N,signOut:x,resetPassword:b,updateUserProfile:_,updateAvatarId:w,refreshProfile:C,checkSubscriptionStatus:v};return i.jsx(jA.Provider,{value:I,children:t})},DB=()=>{const{user:t,profile:e,loading:n}=Kt(),r=Gn();return m.useEffect(()=>{if(console.log("Index: useEffect triggered",{loading:n,user:t==null?void 0:t.uid,profile:e==null?void 0:e.role}),!n)if(!t)console.log("Index: No user, navigating to landing"),r("/landing");else if(e){if(console.log("Index: Profile found, navigating based on role:",e.role),e.role==="user")if(e.approved===!1){r("/user/pending-approval");return}else{r("/user/dashboard");return}e.role==="merchant"?r("/merchant"):(r("/landing"),console.log("User role not supported:",e.role))}else console.log("Index: User exists but no profile yet, waiting...")},[t,e,n,r]),n?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})}):i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"جاري إعداد الحساب..."})]})})},MB=qd("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),V=m.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},a)=>{const o=r?j5:"button";return i.jsx(o,{className:Se(MB({variant:e,size:n,className:t})),ref:a,...s})});V.displayName="Button";const Le=m.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Se("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Le.displayName="Card";const Ze=m.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Se("flex flex-col space-y-1.5 p-6",t),...e}));Ze.displayName="CardHeader";const ct=m.forwardRef(({className:t,...e},n)=>i.jsx("h3",{ref:n,className:Se("text-2xl font-semibold leading-none tracking-tight",t),...e}));ct.displayName="CardTitle";const Hp=m.forwardRef(({className:t,...e},n)=>i.jsx("p",{ref:n,className:Se("text-sm text-muted-foreground",t),...e}));Hp.displayName="CardDescription";const $e=m.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Se("p-6 pt-0",t),...e}));$e.displayName="CardContent";const SA=m.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Se("flex items-center p-6 pt-0",t),...e}));SA.displayName="CardFooter";var OB=m.createContext(void 0);function qp(t){const e=m.useContext(OB);return t||e||"ltr"}var w0=0;function Qw(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??fE()),document.body.insertAdjacentElement("beforeend",t[1]??fE()),w0++,()=>{w0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),w0--}},[])}function fE(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var b0="focusScope.autoFocusOnMount",N0="focusScope.autoFocusOnUnmount",mE={bubbles:!1,cancelable:!0},LB="FocusScope",Kp=m.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...o}=t,[l,c]=m.useState(null),u=nr(s),h=nr(a),f=m.useRef(null),p=rt(e,x=>c(x)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let x=function(v){if(g.paused||!l)return;const C=v.target;l.contains(C)?f.current=C:na(f.current,{select:!0})},b=function(v){if(g.paused||!l)return;const C=v.relatedTarget;C!==null&&(l.contains(C)||na(f.current,{select:!0}))},_=function(v){if(document.activeElement===document.body)for(const I of v)I.removedNodes.length>0&&na(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",b);const w=new MutationObserver(_);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",b),w.disconnect()}}},[r,l,g.paused]),m.useEffect(()=>{if(l){gE.add(g);const x=document.activeElement;if(!l.contains(x)){const _=new CustomEvent(b0,mE);l.addEventListener(b0,u),l.dispatchEvent(_),_.defaultPrevented||(FB(zB(TA(l)),{select:!0}),document.activeElement===x&&na(l))}return()=>{l.removeEventListener(b0,u),setTimeout(()=>{const _=new CustomEvent(N0,mE);l.addEventListener(N0,h),l.dispatchEvent(_),_.defaultPrevented||na(x??document.body,{select:!0}),l.removeEventListener(N0,h),gE.remove(g)},0)}}},[l,u,h,g]);const N=m.useCallback(x=>{if(!n&&!r||g.paused)return;const b=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,_=document.activeElement;if(b&&_){const w=x.currentTarget,[v,C]=VB(w);v&&C?!x.shiftKey&&_===C?(x.preventDefault(),n&&na(v,{select:!0})):x.shiftKey&&_===v&&(x.preventDefault(),n&&na(C,{select:!0})):_===w&&x.preventDefault()}},[n,r,g.paused]);return i.jsx(je.div,{tabIndex:-1,...o,ref:p,onKeyDown:N})});Kp.displayName=LB;function FB(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(na(r,{select:e}),document.activeElement!==n)return}function VB(t){const e=TA(t),n=pE(e,t),r=pE(e.reverse(),t);return[n,r]}function TA(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function pE(t,e){for(const n of t)if(!UB(n,{upTo:e}))return n}function UB(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function $B(t){return t instanceof HTMLInputElement&&"select"in t}function na(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&$B(t)&&e&&t.select()}}var gE=BB();function BB(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=xE(t,e),t.unshift(e)},remove(e){var n;t=xE(t,e),(n=t[0])==null||n.resume()}}}function xE(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function zB(t){return t.filter(e=>e.tagName!=="A")}var _0="rovingFocusGroup.onEntryFocus",WB={bubbles:!1,cancelable:!0},mh="RovingFocusGroup",[yy,IA,HB]=op(mh),[qB,Gp]=Fr(mh,[HB]),[KB,GB]=qB(mh),CA=m.forwardRef((t,e)=>i.jsx(yy.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(yy.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(QB,{...t,ref:e})})}));CA.displayName=mh;var QB=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:h=!1,...f}=t,p=m.useRef(null),g=rt(e,p),N=qp(a),[x,b]=Va({prop:o,defaultProp:l??null,onChange:c,caller:mh}),[_,w]=m.useState(!1),v=nr(u),C=IA(n),I=m.useRef(!1),[R,j]=m.useState(0);return m.useEffect(()=>{const S=p.current;if(S)return S.addEventListener(_0,v),()=>S.removeEventListener(_0,v)},[v]),i.jsx(KB,{scope:n,orientation:r,dir:N,loop:s,currentTabStopId:x,onItemFocus:m.useCallback(S=>b(S),[b]),onItemShiftTab:m.useCallback(()=>w(!0),[]),onFocusableItemAdd:m.useCallback(()=>j(S=>S+1),[]),onFocusableItemRemove:m.useCallback(()=>j(S=>S-1),[]),children:i.jsx(je.div,{tabIndex:_||R===0?-1:0,"data-orientation":r,...f,ref:g,style:{outline:"none",...t.style},onMouseDown:ce(t.onMouseDown,()=>{I.current=!0}),onFocus:ce(t.onFocus,S=>{const T=!I.current;if(S.target===S.currentTarget&&T&&!_){const P=new CustomEvent(_0,WB);if(S.currentTarget.dispatchEvent(P),!P.defaultPrevented){const A=C().filter(W=>W.focusable),D=A.find(W=>W.active),M=A.find(W=>W.id===x),se=[D,M,...A].filter(Boolean).map(W=>W.ref.current);RA(se,h)}}I.current=!1}),onBlur:ce(t.onBlur,()=>w(!1))})})}),AA="RovingFocusGroupItem",PA=m.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:o,...l}=t,c=Xs(),u=a||c,h=GB(AA,n),f=h.currentTabStopId===u,p=IA(n),{onFocusableItemAdd:g,onFocusableItemRemove:N,currentTabStopId:x}=h;return m.useEffect(()=>{if(r)return g(),()=>N()},[r,g,N]),i.jsx(yy.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:i.jsx(je.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...l,ref:e,onMouseDown:ce(t.onMouseDown,b=>{r?h.onItemFocus(u):b.preventDefault()}),onFocus:ce(t.onFocus,()=>h.onItemFocus(u)),onKeyDown:ce(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){h.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const _=JB(b,h.orientation,h.dir);if(_!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let v=p().filter(C=>C.focusable).map(C=>C.ref.current);if(_==="last")v.reverse();else if(_==="prev"||_==="next"){_==="prev"&&v.reverse();const C=v.indexOf(b.currentTarget);v=h.loop?ZB(v,C+1):v.slice(C+1)}setTimeout(()=>RA(v))}}),children:typeof o=="function"?o({isCurrentTabStop:f,hasTabStop:x!=null}):o})})});PA.displayName=AA;var YB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function XB(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function JB(t,e,n){const r=XB(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return YB[r]}function RA(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function ZB(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var kA=CA,DA=PA,ez=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Cl=new WeakMap,sf=new WeakMap,af={},E0=0,MA=function(t){return t&&(t.host||MA(t.parentNode))},tz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=MA(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},nz=function(t,e,n,r){var s=tz(e,Array.isArray(t)?t:[t]);af[n]||(af[n]=new WeakMap);var a=af[n],o=[],l=new Set,c=new Set(s),u=function(f){!f||l.has(f)||(l.add(f),u(f.parentNode))};s.forEach(u);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(p){if(l.has(p))h(p);else try{var g=p.getAttribute(r),N=g!==null&&g!=="false",x=(Cl.get(p)||0)+1,b=(a.get(p)||0)+1;Cl.set(p,x),a.set(p,b),o.push(p),x===1&&N&&sf.set(p,!0),b===1&&p.setAttribute(n,"true"),N||p.setAttribute(r,"true")}catch(_){console.error("aria-hidden: cannot operate on ",p,_)}})};return h(e),l.clear(),E0++,function(){o.forEach(function(f){var p=Cl.get(f)-1,g=a.get(f)-1;Cl.set(f,p),a.set(f,g),p||(sf.has(f)||f.removeAttribute(r),sf.delete(f)),g||f.removeAttribute(n)}),E0--,E0||(Cl=new WeakMap,Cl=new WeakMap,sf=new WeakMap,af={})}},Yw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=ez(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),nz(r,s,n,"aria-hidden")):function(){return null}},qs=function(){return qs=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qs.apply(this,arguments)};function OA(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function rz(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,a;r<s;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var Of="right-scroll-bar-position",Lf="width-before-scroll-bar",sz="with-scroll-bars-hidden",iz="--removed-body-scroll-bar-size";function j0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function az(t,e){var n=m.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var oz=typeof window<"u"?m.useLayoutEffect:m.useEffect,yE=new WeakMap;function lz(t,e){var n=az(null,function(r){return t.forEach(function(s){return j0(s,r)})});return oz(function(){var r=yE.get(n);if(r){var s=new Set(r),a=new Set(t),o=n.current;s.forEach(function(l){a.has(l)||j0(l,null)}),a.forEach(function(l){s.has(l)||j0(l,o)})}yE.set(n,t)},[t]),n}function cz(t){return t}function uz(t,e){e===void 0&&(e=cz);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(a){var o=e(a,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(r=!0;n.length;){var o=n;n=[],o.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(a),o=n}var c=function(){var h=o;o=[],h.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(h){o.push(h),u()},filter:function(h){return o=o.filter(h),n}}}};return s}function dz(t){t===void 0&&(t={});var e=uz(null);return e.options=qs({async:!0,ssr:!1},t),e}var LA=function(t){var e=t.sideCar,n=OA(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,qs({},n))};LA.isSideCarExport=!0;function hz(t,e){return t.useMedium(e),LA}var FA=dz(),S0=function(){},Qp=m.forwardRef(function(t,e){var n=m.useRef(null),r=m.useState({onScrollCapture:S0,onWheelCapture:S0,onTouchMoveCapture:S0}),s=r[0],a=r[1],o=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,h=t.enabled,f=t.shards,p=t.sideCar,g=t.noRelative,N=t.noIsolation,x=t.inert,b=t.allowPinchZoom,_=t.as,w=_===void 0?"div":_,v=t.gapMode,C=OA(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=p,R=lz([n,e]),j=qs(qs({},C),s);return m.createElement(m.Fragment,null,h&&m.createElement(I,{sideCar:FA,removeScrollBar:u,shards:f,noRelative:g,noIsolation:N,inert:x,setCallbacks:a,allowPinchZoom:!!b,lockRef:n,gapMode:v}),o?m.cloneElement(m.Children.only(l),qs(qs({},j),{ref:R})):m.createElement(w,qs({},j,{className:c,ref:R}),l))});Qp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Qp.classNames={fullWidth:Lf,zeroRight:Of};var fz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function mz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=fz();return e&&t.setAttribute("nonce",e),t}function pz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function gz(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var xz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=mz())&&(pz(e,n),gz(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},yz=function(){var t=xz();return function(e,n){m.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},VA=function(){var t=yz(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},vz={left:0,top:0,right:0,gap:0},T0=function(t){return parseInt(t||"",10)||0},wz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[T0(n),T0(r),T0(s)]},bz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return vz;var e=wz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Nz=VA(),pc="data-scroll-locked",_z=function(t,e,n,r){var s=t.left,a=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(sz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(pc,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Of,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Lf,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Of," .").concat(Of,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Lf," .").concat(Lf,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(pc,`] {
    `).concat(iz,": ").concat(l,`px;
  }
`)},vE=function(){var t=parseInt(document.body.getAttribute(pc)||"0",10);return isFinite(t)?t:0},Ez=function(){m.useEffect(function(){return document.body.setAttribute(pc,(vE()+1).toString()),function(){var t=vE()-1;t<=0?document.body.removeAttribute(pc):document.body.setAttribute(pc,t.toString())}},[])},jz=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Ez();var a=m.useMemo(function(){return bz(s)},[s]);return m.createElement(Nz,{styles:_z(a,!e,s,n?"":"!important")})},vy=!1;if(typeof window<"u")try{var of=Object.defineProperty({},"passive",{get:function(){return vy=!0,!0}});window.addEventListener("test",of,of),window.removeEventListener("test",of,of)}catch{vy=!1}var Al=vy?{passive:!1}:!1,Sz=function(t){return t.tagName==="TEXTAREA"},UA=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Sz(t)&&n[e]==="visible")},Tz=function(t){return UA(t,"overflowY")},Iz=function(t){return UA(t,"overflowX")},wE=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=$A(t,r);if(s){var a=BA(t,r),o=a[1],l=a[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Cz=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},Az=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},$A=function(t,e){return t==="v"?Tz(e):Iz(e)},BA=function(t,e){return t==="v"?Cz(e):Az(e)},Pz=function(t,e){return t==="h"&&e==="rtl"?-1:1},Rz=function(t,e,n,r,s){var a=Pz(t,window.getComputedStyle(e).direction),o=a*r,l=n.target,c=e.contains(l),u=!1,h=o>0,f=0,p=0;do{if(!l)break;var g=BA(t,l),N=g[0],x=g[1],b=g[2],_=x-b-a*N;(N||_)&&$A(t,l)&&(f+=_,p+=N);var w=l.parentNode;l=w&&w.nodeType===Node.DOCUMENT_FRAGMENT_NODE?w.host:w}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(p)<1||!s))&&(u=!0),u},lf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},bE=function(t){return[t.deltaX,t.deltaY]},NE=function(t){return t&&"current"in t?t.current:t},kz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},Dz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Mz=0,Pl=[];function Oz(t){var e=m.useRef([]),n=m.useRef([0,0]),r=m.useRef(),s=m.useState(Mz++)[0],a=m.useState(VA)[0],o=m.useRef(t);m.useEffect(function(){o.current=t},[t]),m.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var x=rz([t.lockRef.current],(t.shards||[]).map(NE),!0).filter(Boolean);return x.forEach(function(b){return b.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),x.forEach(function(b){return b.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=m.useCallback(function(x,b){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var _=lf(x),w=n.current,v="deltaX"in x?x.deltaX:w[0]-_[0],C="deltaY"in x?x.deltaY:w[1]-_[1],I,R=x.target,j=Math.abs(v)>Math.abs(C)?"h":"v";if("touches"in x&&j==="h"&&R.type==="range")return!1;var S=wE(j,R);if(!S)return!0;if(S?I=j:(I=j==="v"?"h":"v",S=wE(j,R)),!S)return!1;if(!r.current&&"changedTouches"in x&&(v||C)&&(r.current=I),!I)return!0;var T=r.current||I;return Rz(T,b,x,T==="h"?v:C,!0)},[]),c=m.useCallback(function(x){var b=x;if(!(!Pl.length||Pl[Pl.length-1]!==a)){var _="deltaY"in b?bE(b):lf(b),w=e.current.filter(function(I){return I.name===b.type&&(I.target===b.target||b.target===I.shadowParent)&&kz(I.delta,_)})[0];if(w&&w.should){b.cancelable&&b.preventDefault();return}if(!w){var v=(o.current.shards||[]).map(NE).filter(Boolean).filter(function(I){return I.contains(b.target)}),C=v.length>0?l(b,v[0]):!o.current.noIsolation;C&&b.cancelable&&b.preventDefault()}}},[]),u=m.useCallback(function(x,b,_,w){var v={name:x,delta:b,target:_,should:w,shadowParent:Lz(_)};e.current.push(v),setTimeout(function(){e.current=e.current.filter(function(C){return C!==v})},1)},[]),h=m.useCallback(function(x){n.current=lf(x),r.current=void 0},[]),f=m.useCallback(function(x){u(x.type,bE(x),x.target,l(x,t.lockRef.current))},[]),p=m.useCallback(function(x){u(x.type,lf(x),x.target,l(x,t.lockRef.current))},[]);m.useEffect(function(){return Pl.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Al),document.addEventListener("touchmove",c,Al),document.addEventListener("touchstart",h,Al),function(){Pl=Pl.filter(function(x){return x!==a}),document.removeEventListener("wheel",c,Al),document.removeEventListener("touchmove",c,Al),document.removeEventListener("touchstart",h,Al)}},[]);var g=t.removeScrollBar,N=t.inert;return m.createElement(m.Fragment,null,N?m.createElement(a,{styles:Dz(s)}):null,g?m.createElement(jz,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Lz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Fz=hz(FA,Oz);var Yp=m.forwardRef(function(t,e){return m.createElement(Qp,qs({},t,{ref:e,sideCar:Fz}))});Yp.classNames=Qp.classNames;var wy=["Enter"," "],Vz=["ArrowDown","PageUp","Home"],zA=["ArrowUp","PageDown","End"],Uz=[...Vz,...zA],$z={ltr:[...wy,"ArrowRight"],rtl:[...wy,"ArrowLeft"]},Bz={ltr:["ArrowLeft"],rtl:["ArrowRight"]},ph="Menu",[kd,zz,Wz]=op(ph),[fl,WA]=Fr(ph,[Wz,Kc,Gp]),Xp=Kc(),HA=Gp(),[Hz,ml]=fl(ph),[qz,gh]=fl(ph),qA=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:a,modal:o=!0}=t,l=Xp(e),[c,u]=m.useState(null),h=m.useRef(!1),f=nr(a),p=qp(s);return m.useEffect(()=>{const g=()=>{h.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>h.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),i.jsx(mT,{...l,children:i.jsx(Hz,{scope:e,open:n,onOpenChange:f,content:c,onContentChange:u,children:i.jsx(qz,{scope:e,onClose:m.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:p,modal:o,children:r})})})};qA.displayName=ph;var Kz="MenuAnchor",Xw=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Xp(n);return i.jsx($v,{...s,...r,ref:e})});Xw.displayName=Kz;var Jw="MenuPortal",[Gz,KA]=fl(Jw,{forceMount:void 0}),GA=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,a=ml(Jw,e);return i.jsx(Gz,{scope:e,forceMount:n,children:i.jsx(Ps,{present:n||a.open,children:i.jsx(Wd,{asChild:!0,container:s,children:r})})})};GA.displayName=Jw;var Xr="MenuContent",[Qz,Zw]=fl(Xr),QA=m.forwardRef((t,e)=>{const n=KA(Xr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=ml(Xr,t.__scopeMenu),o=gh(Xr,t.__scopeMenu);return i.jsx(kd.Provider,{scope:t.__scopeMenu,children:i.jsx(Ps,{present:r||a.open,children:i.jsx(kd.Slot,{scope:t.__scopeMenu,children:o.modal?i.jsx(Yz,{...s,ref:e}):i.jsx(Xz,{...s,ref:e})})})})}),Yz=m.forwardRef((t,e)=>{const n=ml(Xr,t.__scopeMenu),r=m.useRef(null),s=rt(e,r);return m.useEffect(()=>{const a=r.current;if(a)return Yw(a)},[]),i.jsx(e1,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ce(t.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Xz=m.forwardRef((t,e)=>{const n=ml(Xr,t.__scopeMenu);return i.jsx(e1,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Jz=zo("MenuContent.ScrollLock"),e1=m.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:g,disableOutsideScroll:N,...x}=t,b=ml(Xr,n),_=gh(Xr,n),w=Xp(n),v=HA(n),C=zz(n),[I,R]=m.useState(null),j=m.useRef(null),S=rt(e,j,b.onContentChange),T=m.useRef(0),P=m.useRef(""),A=m.useRef(0),D=m.useRef(null),M=m.useRef("right"),$=m.useRef(0),se=N?Yp:m.Fragment,W=N?{as:Jz,allowPinchZoom:!0}:void 0,X=L=>{var Z,z;const Q=P.current+L,he=C().filter(oe=>!oe.disabled),ne=document.activeElement,me=(Z=he.find(oe=>oe.ref.current===ne))==null?void 0:Z.textValue,Ne=he.map(oe=>oe.textValue),We=uW(Ne,Q,me),He=(z=he.find(oe=>oe.textValue===We))==null?void 0:z.ref.current;(function oe(le){P.current=le,window.clearTimeout(T.current),le!==""&&(T.current=window.setTimeout(()=>oe(""),1e3))})(Q),He&&setTimeout(()=>He.focus())};m.useEffect(()=>()=>window.clearTimeout(T.current),[]),Qw();const U=m.useCallback(L=>{var he,ne;return M.current===((he=D.current)==null?void 0:he.side)&&hW(L,(ne=D.current)==null?void 0:ne.area)},[]);return i.jsx(Qz,{scope:n,searchRef:P,onItemEnter:m.useCallback(L=>{U(L)&&L.preventDefault()},[U]),onItemLeave:m.useCallback(L=>{var Q;U(L)||((Q=j.current)==null||Q.focus(),R(null))},[U]),onTriggerLeave:m.useCallback(L=>{U(L)&&L.preventDefault()},[U]),pointerGraceTimerRef:A,onPointerGraceIntentChange:m.useCallback(L=>{D.current=L},[]),children:i.jsx(se,{...W,children:i.jsx(Kp,{asChild:!0,trapped:s,onMountAutoFocus:ce(a,L=>{var Q;L.preventDefault(),(Q=j.current)==null||Q.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:i.jsx(zc,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:g,children:i.jsx(kA,{asChild:!0,...v,dir:_.dir,orientation:"vertical",loop:r,currentTabStopId:I,onCurrentTabStopIdChange:R,onEntryFocus:ce(c,L=>{_.isUsingKeyboardRef.current||L.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Bv,{role:"menu","aria-orientation":"vertical","data-state":dP(b.open),"data-radix-menu-content":"",dir:_.dir,...w,...x,ref:S,style:{outline:"none",...x.style},onKeyDown:ce(x.onKeyDown,L=>{const he=L.target.closest("[data-radix-menu-content]")===L.currentTarget,ne=L.ctrlKey||L.altKey||L.metaKey,me=L.key.length===1;he&&(L.key==="Tab"&&L.preventDefault(),!ne&&me&&X(L.key));const Ne=j.current;if(L.target!==Ne||!Uz.includes(L.key))return;L.preventDefault();const He=C().filter(Z=>!Z.disabled).map(Z=>Z.ref.current);zA.includes(L.key)&&He.reverse(),lW(He)}),onBlur:ce(t.onBlur,L=>{L.currentTarget.contains(L.target)||(window.clearTimeout(T.current),P.current="")}),onPointerMove:ce(t.onPointerMove,Dd(L=>{const Q=L.target,he=$.current!==L.clientX;if(L.currentTarget.contains(Q)&&he){const ne=L.clientX>$.current?"right":"left";M.current=ne,$.current=L.clientX}}))})})})})})})});QA.displayName=Xr;var Zz="MenuGroup",t1=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(je.div,{role:"group",...r,ref:e})});t1.displayName=Zz;var eW="MenuLabel",YA=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(je.div,{...r,ref:e})});YA.displayName=eW;var Fm="MenuItem",_E="menu.itemSelect",Jp=m.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,a=m.useRef(null),o=gh(Fm,t.__scopeMenu),l=Zw(Fm,t.__scopeMenu),c=rt(e,a),u=m.useRef(!1),h=()=>{const f=a.current;if(!n&&f){const p=new CustomEvent(_E,{bubbles:!0,cancelable:!0});f.addEventListener(_E,g=>r==null?void 0:r(g),{once:!0}),Nv(f,p),p.defaultPrevented?u.current=!1:o.onClose()}};return i.jsx(XA,{...s,ref:c,disabled:n,onClick:ce(t.onClick,h),onPointerDown:f=>{var p;(p=t.onPointerDown)==null||p.call(t,f),u.current=!0},onPointerUp:ce(t.onPointerUp,f=>{var p;u.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:ce(t.onKeyDown,f=>{const p=l.searchRef.current!=="";n||p&&f.key===" "||wy.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Jp.displayName=Fm;var XA=m.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=t,o=Zw(Fm,n),l=HA(n),c=m.useRef(null),u=rt(e,c),[h,f]=m.useState(!1),[p,g]=m.useState("");return m.useEffect(()=>{const N=c.current;N&&g((N.textContent??"").trim())},[a.children]),i.jsx(kd.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:i.jsx(DA,{asChild:!0,...l,focusable:!r,children:i.jsx(je.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:ce(t.onPointerMove,Dd(N=>{r?o.onItemLeave(N):(o.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ce(t.onPointerLeave,Dd(N=>o.onItemLeave(N))),onFocus:ce(t.onFocus,()=>f(!0)),onBlur:ce(t.onBlur,()=>f(!1))})})})}),tW="MenuCheckboxItem",JA=m.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(rP,{scope:t.__scopeMenu,checked:n,children:i.jsx(Jp,{role:"menuitemcheckbox","aria-checked":Vm(n)?"mixed":n,...s,ref:e,"data-state":r1(n),onSelect:ce(s.onSelect,()=>r==null?void 0:r(Vm(n)?!0:!n),{checkForDefaultPrevented:!1})})})});JA.displayName=tW;var ZA="MenuRadioGroup",[nW,rW]=fl(ZA,{value:void 0,onValueChange:()=>{}}),eP=m.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,a=nr(r);return i.jsx(nW,{scope:t.__scopeMenu,value:n,onValueChange:a,children:i.jsx(t1,{...s,ref:e})})});eP.displayName=ZA;var tP="MenuRadioItem",nP=m.forwardRef((t,e)=>{const{value:n,...r}=t,s=rW(tP,t.__scopeMenu),a=n===s.value;return i.jsx(rP,{scope:t.__scopeMenu,checked:a,children:i.jsx(Jp,{role:"menuitemradio","aria-checked":a,...r,ref:e,"data-state":r1(a),onSelect:ce(r.onSelect,()=>{var o;return(o=s.onValueChange)==null?void 0:o.call(s,n)},{checkForDefaultPrevented:!1})})})});nP.displayName=tP;var n1="MenuItemIndicator",[rP,sW]=fl(n1,{checked:!1}),sP=m.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,a=sW(n1,n);return i.jsx(Ps,{present:r||Vm(a.checked)||a.checked===!0,children:i.jsx(je.span,{...s,ref:e,"data-state":r1(a.checked)})})});sP.displayName=n1;var iW="MenuSeparator",iP=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(je.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});iP.displayName=iW;var aW="MenuArrow",aP=m.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Xp(n);return i.jsx(zv,{...s,...r,ref:e})});aP.displayName=aW;var oW="MenuSub",[OK,oP]=fl(oW),ku="MenuSubTrigger",lP=m.forwardRef((t,e)=>{const n=ml(ku,t.__scopeMenu),r=gh(ku,t.__scopeMenu),s=oP(ku,t.__scopeMenu),a=Zw(ku,t.__scopeMenu),o=m.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:t.__scopeMenu},h=m.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return m.useEffect(()=>h,[h]),m.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),c(null)}},[l,c]),i.jsx(Xw,{asChild:!0,...u,children:i.jsx(XA,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":dP(n.open),...t,ref:ap(e,s.onTriggerChange),onClick:f=>{var p;(p=t.onClick)==null||p.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ce(t.onPointerMove,Dd(f=>{a.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:ce(t.onPointerLeave,Dd(f=>{var g,N;h();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const x=(N=n.content)==null?void 0:N.dataset.side,b=x==="right",_=b?-5:5,w=p[b?"left":"right"],v=p[b?"right":"left"];a.onPointerGraceIntentChange({area:[{x:f.clientX+_,y:f.clientY},{x:w,y:p.top},{x:v,y:p.top},{x:v,y:p.bottom},{x:w,y:p.bottom}],side:x}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(f),f.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:ce(t.onKeyDown,f=>{var g;const p=a.searchRef.current!=="";t.disabled||p&&f.key===" "||$z[r.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});lP.displayName=ku;var cP="MenuSubContent",uP=m.forwardRef((t,e)=>{const n=KA(Xr,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,a=ml(Xr,t.__scopeMenu),o=gh(Xr,t.__scopeMenu),l=oP(cP,t.__scopeMenu),c=m.useRef(null),u=rt(e,c);return i.jsx(kd.Provider,{scope:t.__scopeMenu,children:i.jsx(Ps,{present:r||a.open,children:i.jsx(kd.Slot,{scope:t.__scopeMenu,children:i.jsx(e1,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;o.isUsingKeyboardRef.current&&((f=c.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:ce(t.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:ce(t.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:ce(t.onKeyDown,h=>{var g;const f=h.currentTarget.contains(h.target),p=Bz[o.dir].includes(h.key);f&&p&&(a.onOpenChange(!1),(g=l.trigger)==null||g.focus(),h.preventDefault())})})})})})});uP.displayName=cP;function dP(t){return t?"open":"closed"}function Vm(t){return t==="indeterminate"}function r1(t){return Vm(t)?"indeterminate":t?"checked":"unchecked"}function lW(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function cW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function uW(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=cW(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function dW(t,e){const{x:n,y:r}=t;let s=!1;for(let a=0,o=e.length-1;a<e.length;o=a++){const l=e[a],c=e[o],u=l.x,h=l.y,f=c.x,p=c.y;h>r!=p>r&&n<(f-u)*(r-h)/(p-h)+u&&(s=!s)}return s}function hW(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return dW(n,e)}function Dd(t){return e=>e.pointerType==="mouse"?t(e):void 0}var fW=qA,mW=Xw,pW=GA,gW=QA,xW=t1,yW=YA,vW=Jp,wW=JA,bW=eP,NW=nP,_W=sP,EW=iP,jW=aP,SW=lP,TW=uP,Zp="DropdownMenu",[IW,LK]=Fr(Zp,[WA]),ir=WA(),[CW,hP]=IW(Zp),fP=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:o,modal:l=!0}=t,c=ir(e),u=m.useRef(null),[h,f]=Va({prop:s,defaultProp:a??!1,onChange:o,caller:Zp});return i.jsx(CW,{scope:e,triggerId:Xs(),triggerRef:u,contentId:Xs(),open:h,onOpenChange:f,onOpenToggle:m.useCallback(()=>f(p=>!p),[f]),modal:l,children:i.jsx(fW,{...c,open:h,onOpenChange:f,dir:r,modal:l,children:n})})};fP.displayName=Zp;var mP="DropdownMenuTrigger",pP=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,a=hP(mP,n),o=ir(n);return i.jsx(mW,{asChild:!0,...o,children:i.jsx(je.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:ap(e,a.triggerRef),onPointerDown:ce(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:ce(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});pP.displayName=mP;var AW="DropdownMenuPortal",gP=t=>{const{__scopeDropdownMenu:e,...n}=t,r=ir(e);return i.jsx(pW,{...r,...n})};gP.displayName=AW;var xP="DropdownMenuContent",yP=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=hP(xP,n),a=ir(n),o=m.useRef(!1);return i.jsx(gW,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:e,onCloseAutoFocus:ce(t.onCloseAutoFocus,l=>{var c;o.current||(c=s.triggerRef.current)==null||c.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:ce(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,h=c.button===2||u;(!s.modal||h)&&(o.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});yP.displayName=xP;var PW="DropdownMenuGroup",RW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(xW,{...s,...r,ref:e})});RW.displayName=PW;var kW="DropdownMenuLabel",vP=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(yW,{...s,...r,ref:e})});vP.displayName=kW;var DW="DropdownMenuItem",wP=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(vW,{...s,...r,ref:e})});wP.displayName=DW;var MW="DropdownMenuCheckboxItem",bP=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(wW,{...s,...r,ref:e})});bP.displayName=MW;var OW="DropdownMenuRadioGroup",LW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(bW,{...s,...r,ref:e})});LW.displayName=OW;var FW="DropdownMenuRadioItem",NP=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(NW,{...s,...r,ref:e})});NP.displayName=FW;var VW="DropdownMenuItemIndicator",_P=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(_W,{...s,...r,ref:e})});_P.displayName=VW;var UW="DropdownMenuSeparator",EP=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(EW,{...s,...r,ref:e})});EP.displayName=UW;var $W="DropdownMenuArrow",BW=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(jW,{...s,...r,ref:e})});BW.displayName=$W;var zW="DropdownMenuSubTrigger",jP=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(SW,{...s,...r,ref:e})});jP.displayName=zW;var WW="DropdownMenuSubContent",SP=m.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=ir(n);return i.jsx(TW,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});SP.displayName=WW;var HW=fP,qW=pP,KW=gP,TP=yP,IP=vP,CP=wP,AP=bP,PP=NP,RP=_P,kP=EP,DP=jP,MP=SP;const s1=HW,i1=qW,GW=m.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(DP,{ref:s,className:Se("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",e&&"pl-8",t),...r,children:[n,i.jsx(b3,{className:"ml-auto h-4 w-4"})]}));GW.displayName=DP.displayName;const QW=m.forwardRef(({className:t,...e},n)=>i.jsx(MP,{ref:n,className:Se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...e}));QW.displayName=MP.displayName;const eg=m.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(KW,{children:i.jsx(TP,{ref:r,sideOffset:e,className:Se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));eg.displayName=TP.displayName;const Gs=m.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(CP,{ref:r,className:Se("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e&&"pl-8",t),...n}));Gs.displayName=CP.displayName;const YW=m.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(AP,{ref:s,className:Se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(RP,{children:i.jsx(AS,{className:"h-4 w-4"})})}),e]}));YW.displayName=AP.displayName;const XW=m.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(PP,{ref:r,className:Se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(RP,{children:i.jsx(_3,{className:"h-2 w-2 fill-current"})})}),e]}));XW.displayName=PP.displayName;const a1=m.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(IP,{ref:r,className:Se("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));a1.displayName=IP.displayName;const Md=m.forwardRef(({className:t,...e},n)=>i.jsx(kP,{ref:n,className:Se("-mx-1 my-1 h-px bg-muted",t),...e}));Md.displayName=kP.displayName;var OP={exports:{}},LP={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vc=m;function JW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ZW=typeof Object.is=="function"?Object.is:JW,eH=Vc.useState,tH=Vc.useEffect,nH=Vc.useLayoutEffect,rH=Vc.useDebugValue;function sH(t,e){var n=e(),r=eH({inst:{value:n,getSnapshot:e}}),s=r[0].inst,a=r[1];return nH(function(){s.value=n,s.getSnapshot=e,I0(s)&&a({inst:s})},[t,n,e]),tH(function(){return I0(s)&&a({inst:s}),t(function(){I0(s)&&a({inst:s})})},[t]),rH(n),n}function I0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ZW(t,n)}catch{return!0}}function iH(t,e){return e()}var aH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?iH:sH;LP.useSyncExternalStore=Vc.useSyncExternalStore!==void 0?Vc.useSyncExternalStore:aH;OP.exports=LP;var oH=OP.exports;function lH(){return oH.useSyncExternalStore(cH,()=>!0,()=>!1)}function cH(){return()=>{}}var o1="Avatar",[uH,FK]=Fr(o1),[dH,FP]=uH(o1),VP=m.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,a]=m.useState("idle");return i.jsx(dH,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:i.jsx(je.span,{...r,ref:e})})});VP.displayName=o1;var UP="AvatarImage",$P=m.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=t,o=FP(UP,n),l=hH(r,a),c=nr(u=>{s(u),o.onImageLoadingStatusChange(u)});return ln(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(je.img,{...a,ref:e,src:r}):null});$P.displayName=UP;var BP="AvatarFallback",zP=m.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,a=FP(BP,n),[o,l]=m.useState(r===void 0);return m.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&a.imageLoadingStatus!=="loaded"?i.jsx(je.span,{...s,ref:e}):null});zP.displayName=BP;function EE(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function hH(t,{referrerPolicy:e,crossOrigin:n}){const r=lH(),s=m.useRef(null),a=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=m.useState(()=>EE(a,t));return ln(()=>{l(EE(a,t))},[a,t]),ln(()=>{const c=f=>()=>{l(f)};if(!a)return;const u=c("loaded"),h=c("error");return a.addEventListener("load",u),a.addEventListener("error",h),e&&(a.referrerPolicy=e),typeof n=="string"&&(a.crossOrigin=n),()=>{a.removeEventListener("load",u),a.removeEventListener("error",h)}},[a,n,e]),o}var WP=VP,HP=$P,qP=zP;const KP=m.forwardRef(({className:t,...e},n)=>i.jsx(WP,{ref:n,className:Se("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));KP.displayName=WP.displayName;const GP=m.forwardRef(({className:t,...e},n)=>i.jsx(HP,{ref:n,className:Se("aspect-square h-full w-full",t),...e}));GP.displayName=HP.displayName;const QP=m.forwardRef(({className:t,...e},n)=>i.jsx(qP,{ref:n,className:Se("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));QP.displayName=qP.displayName;var tg="Dialog",[YP,VK]=Fr(tg),[fH,ks]=YP(tg),XP=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!0}=t,l=m.useRef(null),c=m.useRef(null),[u,h]=Va({prop:r,defaultProp:s??!1,onChange:a,caller:tg});return i.jsx(fH,{scope:e,triggerRef:l,contentRef:c,contentId:Xs(),titleId:Xs(),descriptionId:Xs(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};XP.displayName=tg;var JP="DialogTrigger",mH=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ks(JP,n),a=rt(e,s.triggerRef);return i.jsx(je.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":u1(s.open),...r,ref:a,onClick:ce(t.onClick,s.onOpenToggle)})});mH.displayName=JP;var l1="DialogPortal",[pH,ZP]=YP(l1,{forceMount:void 0}),eR=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,a=ks(l1,e);return i.jsx(pH,{scope:e,forceMount:n,children:m.Children.map(r,o=>i.jsx(Ps,{present:n||a.open,children:i.jsx(Wd,{asChild:!0,container:s,children:o})}))})};eR.displayName=l1;var Um="DialogOverlay",tR=m.forwardRef((t,e)=>{const n=ZP(Um,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=ks(Um,t.__scopeDialog);return a.modal?i.jsx(Ps,{present:r||a.open,children:i.jsx(xH,{...s,ref:e})}):null});tR.displayName=Um;var gH=zo("DialogOverlay.RemoveScroll"),xH=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ks(Um,n);return i.jsx(Yp,{as:gH,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(je.div,{"data-state":u1(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),tl="DialogContent",nR=m.forwardRef((t,e)=>{const n=ZP(tl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,a=ks(tl,t.__scopeDialog);return i.jsx(Ps,{present:r||a.open,children:a.modal?i.jsx(yH,{...s,ref:e}):i.jsx(vH,{...s,ref:e})})});nR.displayName=tl;var yH=m.forwardRef((t,e)=>{const n=ks(tl,t.__scopeDialog),r=m.useRef(null),s=rt(e,n.contentRef,r);return m.useEffect(()=>{const a=r.current;if(a)return Yw(a)},[]),i.jsx(rR,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ce(t.onCloseAutoFocus,a=>{var o;a.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ce(t.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:ce(t.onFocusOutside,a=>a.preventDefault())})}),vH=m.forwardRef((t,e)=>{const n=ks(tl,t.__scopeDialog),r=m.useRef(!1),s=m.useRef(!1);return i.jsx(rR,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,a),a.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),rR=m.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...o}=t,l=ks(tl,n),c=m.useRef(null),u=rt(e,c);return Qw(),i.jsxs(i.Fragment,{children:[i.jsx(Kp,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(zc,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":u1(l.open),...o,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(wH,{titleId:l.titleId}),i.jsx(NH,{contentRef:c,descriptionId:l.descriptionId})]})]})}),c1="DialogTitle",sR=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ks(c1,n);return i.jsx(je.h2,{id:s.titleId,...r,ref:e})});sR.displayName=c1;var iR="DialogDescription",aR=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ks(iR,n);return i.jsx(je.p,{id:s.descriptionId,...r,ref:e})});aR.displayName=iR;var oR="DialogClose",lR=m.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=ks(oR,n);return i.jsx(je.button,{type:"button",...r,ref:e,onClick:ce(t.onClick,()=>s.onOpenChange(!1))})});lR.displayName=oR;function u1(t){return t?"open":"closed"}var cR="DialogTitleWarning",[UK,uR]=_5(cR,{contentName:tl,titleName:c1,docsSlug:"dialog"}),wH=({titleId:t})=>{const e=uR(cR),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return m.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},bH="DialogDescriptionWarning",NH=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${uR(bH).contentName}}.`;return m.useEffect(()=>{var a;const s=(a=t.current)==null?void 0:a.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},_H=XP,EH=eR,dR=tR,hR=nR,fR=sR,mR=aR,jH=lR;const Zt=_H,SH=EH,pR=m.forwardRef(({className:t,...e},n)=>i.jsx(dR,{ref:n,className:Se("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));pR.displayName=dR.displayName;const zt=m.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(SH,{children:[i.jsx(pR,{}),i.jsxs(hR,{ref:r,className:Se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(jH,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx($a,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zt.displayName=hR.displayName;const Wt=({className:t,...e})=>i.jsx("div",{className:Se("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Wt.displayName="DialogHeader";const ia=({className:t,...e})=>i.jsx("div",{className:Se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});ia.displayName="DialogFooter";const Ht=m.forwardRef(({className:t,...e},n)=>i.jsx(fR,{ref:n,className:Se("text-lg font-semibold leading-none tracking-tight",t),...e}));Ht.displayName=fR.displayName;const gR=m.forwardRef(({className:t,...e},n)=>i.jsx(mR,{ref:n,className:Se("text-sm text-muted-foreground",t),...e}));gR.displayName=mR.displayName;const de=m.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:Se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));de.displayName="Input";var TH="Label",xR=m.forwardRef((t,e)=>i.jsx(je.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));xR.displayName=TH;var yR=xR;const IH=qd("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),be=m.forwardRef(({className:t,...e},n)=>i.jsx(yR,{ref:n,className:Se(IH(),t),...e}));be.displayName=yR.displayName;function CH({open:t,onOpenChange:e}){const{user:n}=_A(),{toast:r}=_n(),[s,a]=m.useState(!1),[o,l]=m.useState(!1),[c,u]=m.useState(!1),[h,f]=m.useState(!1),[p,g]=m.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[N,x]=m.useState({currentPassword:"",newPassword:"",confirmPassword:""}),b=()=>{const C={currentPassword:"",newPassword:"",confirmPassword:""};return p.currentPassword||(C.currentPassword="كلمة المرور الحالية مطلوبة"),p.newPassword?p.newPassword.length<6&&(C.newPassword="كلمة المرور يجب أن تكون 6 أحرف على الأقل"):C.newPassword="كلمة المرور الجديدة مطلوبة",p.confirmPassword?p.newPassword!==p.confirmPassword&&(C.confirmPassword="كلمات المرور غير متطابقة"):C.confirmPassword="تأكيد كلمة المرور مطلوب",x(C),!Object.values(C).some(I=>I!=="")},_=async C=>{if(C.preventDefault(),!(!b()||!n||!n.email)){a(!0);try{const I=cl.credential(n.email,p.currentPassword);await q9(n,I),await Q9(n,p.newPassword),r({title:"تم تغيير كلمة المرور بنجاح",description:"تم تحديث كلمة المرور الخاصة بك بنجاح"}),g({currentPassword:"",newPassword:"",confirmPassword:""}),x({currentPassword:"",newPassword:"",confirmPassword:""}),e(!1)}catch(I){console.error("خطأ في تغيير كلمة المرور:",I);let R="حدث خطأ أثناء تغيير كلمة المرور";if(I.code==="auth/wrong-password"){x(j=>({...j,currentPassword:"كلمة المرور الحالية غير صحيحة"}));return}else if(I.code==="auth/weak-password"){x(j=>({...j,newPassword:"كلمة المرور ضعيفة جداً"}));return}else I.code==="auth/requires-recent-login"&&(R="يجب تسجيل الدخول مرة أخرى لتغيير كلمة المرور");r({title:"خطأ في تغيير كلمة المرور",description:R,variant:"destructive"})}finally{a(!1)}}},w=C=>I=>{g(R=>({...R,[C]:I.target.value})),N[C]&&x(R=>({...R,[C]:""}))},v=()=>{g({currentPassword:"",newPassword:"",confirmPassword:""}),x({currentPassword:"",newPassword:"",confirmPassword:""}),e(!1)};return i.jsx(Zt,{open:t,onOpenChange:v,children:i.jsxs(zt,{className:"sm:max-w-[425px]",children:[i.jsxs(Wt,{children:[i.jsx(Ht,{children:"تغيير كلمة المرور"}),i.jsx(gR,{children:"أدخل كلمة المرور الحالية وكلمة المرور الجديدة لتحديث حسابك"})]}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"currentPassword",children:"كلمة المرور الحالية"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"currentPassword",type:o?"text":"password",value:p.currentPassword,onChange:w("currentPassword"),className:N.currentPassword?"border-red-500":"",disabled:s}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!o),disabled:s,children:o?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]}),N.currentPassword&&i.jsx("p",{className:"text-sm text-red-500",children:N.currentPassword})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"newPassword",children:"كلمة المرور الجديدة"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"newPassword",type:c?"text":"password",value:p.newPassword,onChange:w("newPassword"),className:N.newPassword?"border-red-500":"",disabled:s}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>u(!c),disabled:s,children:c?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]}),N.newPassword&&i.jsx("p",{className:"text-sm text-red-500",children:N.newPassword})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"confirmPassword",children:"تأكيد كلمة المرور الجديدة"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"confirmPassword",type:h?"text":"password",value:p.confirmPassword,onChange:w("confirmPassword"),className:N.confirmPassword?"border-red-500":"",disabled:s}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>f(!h),disabled:s,children:h?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]}),N.confirmPassword&&i.jsx("p",{className:"text-sm text-red-500",children:N.confirmPassword})]}),i.jsxs(ia,{children:[i.jsx(V,{type:"button",variant:"outline",onClick:v,disabled:s,children:"إلغاء"}),i.jsxs(V,{type:"submit",disabled:s,children:[s&&i.jsx(PS,{className:"mr-2 h-4 w-4 animate-spin"}),"تغيير كلمة المرور"]})]})]})]})})}const by=[{id:"boy1",name:"ولد مبتسم",component:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[i.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#FFE4B5",stroke:"#DEB887",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"40",r:"3",fill:"#333"}),i.jsx("circle",{cx:"65",cy:"40",r:"3",fill:"#333"}),i.jsx("path",{d:"M 35 60 Q 50 70 65 60",stroke:"#333",strokeWidth:"2",fill:"none"}),i.jsx("path",{d:"M 30 25 Q 50 15 70 25 Q 70 35 50 30 Q 30 35 30 25",fill:"#8B4513"}),i.jsx("circle",{cx:"45",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("circle",{cx:"55",cy:"50",r:"1",fill:"#FF69B4"})]})},{id:"girl1",name:"بنت جميلة",component:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[i.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#FFEAA7",stroke:"#FDCB6E",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"40",r:"3",fill:"#2D3436"}),i.jsx("circle",{cx:"65",cy:"40",r:"3",fill:"#2D3436"}),i.jsx("path",{d:"M 35 60 Q 50 70 65 60",stroke:"#E17055",strokeWidth:"2",fill:"none"}),i.jsx("path",{d:"M 25 20 Q 50 10 75 20 Q 75 40 50 35 Q 25 40 25 20",fill:"#6C5CE7"}),i.jsx("circle",{cx:"30",cy:"30",r:"3",fill:"#FF7675"}),i.jsx("circle",{cx:"70",cy:"30",r:"3",fill:"#FF7675"}),i.jsx("circle",{cx:"45",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("circle",{cx:"55",cy:"50",r:"1",fill:"#FF69B4"})]})},{id:"boy2",name:"ولد بنظارة",component:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[i.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#F0E68C",stroke:"#DAA520",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"40",r:"8",fill:"none",stroke:"#333",strokeWidth:"2"}),i.jsx("circle",{cx:"65",cy:"40",r:"8",fill:"none",stroke:"#333",strokeWidth:"2"}),i.jsx("line",{x1:"43",y1:"40",x2:"57",y2:"40",stroke:"#333",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"40",r:"2",fill:"#333"}),i.jsx("circle",{cx:"65",cy:"40",r:"2",fill:"#333"}),i.jsx("path",{d:"M 35 65 Q 50 75 65 65",stroke:"#333",strokeWidth:"2",fill:"none"}),i.jsx("path",{d:"M 30 20 Q 50 10 70 20 Q 70 30 50 25 Q 30 30 30 20",fill:"#FF6B35"})]})},{id:"girl2",name:"بنت بضفائر",component:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[i.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#FFB6C1",stroke:"#FF69B4",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"42",r:"3",fill:"#333"}),i.jsx("circle",{cx:"65",cy:"42",r:"3",fill:"#333"}),i.jsx("path",{d:"M 38 62 Q 50 72 62 62",stroke:"#FF1493",strokeWidth:"2",fill:"none"}),i.jsx("circle",{cx:"20",cy:"35",r:"8",fill:"#8B4513"}),i.jsx("circle",{cx:"80",cy:"35",r:"8",fill:"#8B4513"}),i.jsx("path",{d:"M 30 25 Q 50 15 70 25 Q 70 35 50 30 Q 30 35 30 25",fill:"#8B4513"}),i.jsx("circle",{cx:"45",cy:"52",r:"1",fill:"#FF69B4"}),i.jsx("circle",{cx:"55",cy:"52",r:"1",fill:"#FF69B4"}),i.jsx("path",{d:"M 40 35 Q 42 30 44 35",stroke:"#333",strokeWidth:"1",fill:"none"}),i.jsx("path",{d:"M 56 35 Q 58 30 60 35",stroke:"#333",strokeWidth:"1",fill:"none"})]})},{id:"boy3",name:"ولد رياضي",component:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[i.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#DEB887",stroke:"#CD853F",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"40",r:"3",fill:"#333"}),i.jsx("circle",{cx:"65",cy:"40",r:"3",fill:"#333"}),i.jsx("path",{d:"M 35 60 Q 50 70 65 60",stroke:"#333",strokeWidth:"2",fill:"none"}),i.jsx("path",{d:"M 35 20 Q 50 15 65 20 Q 65 30 50 25 Q 35 30 35 20",fill:"#2D3436"}),i.jsx("rect",{x:"40",y:"15",width:"20",height:"8",fill:"#00B894",rx:"2"}),i.jsx("circle",{cx:"45",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("circle",{cx:"55",cy:"50",r:"1",fill:"#FF69B4"})]})},{id:"girl3",name:"بنت أنيقة",component:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[i.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#FFEAA7",stroke:"#FDCB6E",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"40",r:"3",fill:"#2D3436"}),i.jsx("circle",{cx:"65",cy:"40",r:"3",fill:"#2D3436"}),i.jsx("path",{d:"M 35 60 Q 50 70 65 60",stroke:"#E84393",strokeWidth:"2",fill:"none"}),i.jsx("path",{d:"M 25 25 Q 50 10 75 25 Q 75 35 50 30 Q 25 35 25 25",fill:"#A29BFE"}),i.jsx("circle",{cx:"35",cy:"25",r:"2",fill:"#FDCB6E"}),i.jsx("circle",{cx:"65",cy:"25",r:"2",fill:"#FDCB6E"}),i.jsx("circle",{cx:"45",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("circle",{cx:"55",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("path",{d:"M 40 35 Q 42 32 44 35",stroke:"#333",strokeWidth:"1",fill:"none"}),i.jsx("path",{d:"M 56 35 Q 58 32 60 35",stroke:"#333",strokeWidth:"1",fill:"none"})]})},{id:"boy4",name:"ولد مرح",component:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[i.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#FFE4E1",stroke:"#FFC0CB",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"40",r:"3",fill:"#333"}),i.jsx("circle",{cx:"65",cy:"40",r:"3",fill:"#333"}),i.jsx("path",{d:"M 30 60 Q 50 75 70 60",stroke:"#333",strokeWidth:"2",fill:"none"}),i.jsx("path",{d:"M 30 25 Q 50 10 70 25 Q 70 35 50 30 Q 30 35 30 25",fill:"#FF6347"}),i.jsx("circle",{cx:"25",cy:"45",r:"3",fill:"#FF69B4"}),i.jsx("circle",{cx:"75",cy:"45",r:"3",fill:"#FF69B4"}),i.jsx("circle",{cx:"45",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("circle",{cx:"55",cy:"50",r:"1",fill:"#FF69B4"})]})},{id:"girl4",name:"بنت لطيفة",component:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[i.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#F8BBD9",stroke:"#E91E63",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"40",r:"3",fill:"#333"}),i.jsx("circle",{cx:"65",cy:"40",r:"3",fill:"#333"}),i.jsx("path",{d:"M 35 60 Q 50 70 65 60",stroke:"#E91E63",strokeWidth:"2",fill:"none"}),i.jsx("path",{d:"M 25 20 Q 50 5 75 20 Q 75 35 50 30 Q 25 35 25 20",fill:"#9C27B0"}),i.jsx("circle",{cx:"30",cy:"30",r:"4",fill:"#FF4081"}),i.jsx("circle",{cx:"70",cy:"30",r:"4",fill:"#FF4081"}),i.jsx("circle",{cx:"45",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("circle",{cx:"55",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("path",{d:"M 40 35 Q 42 30 44 35",stroke:"#333",strokeWidth:"1",fill:"none"}),i.jsx("path",{d:"M 56 35 Q 58 30 60 35",stroke:"#333",strokeWidth:"1",fill:"none"})]})},{id:"boy5",name:"ولد ذكي",component:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[i.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#E6E6FA",stroke:"#9370DB",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"40",r:"3",fill:"#333"}),i.jsx("circle",{cx:"65",cy:"40",r:"3",fill:"#333"}),i.jsx("path",{d:"M 35 60 Q 50 70 65 60",stroke:"#333",strokeWidth:"2",fill:"none"}),i.jsx("path",{d:"M 30 20 Q 50 10 70 20 Q 70 30 50 25 Q 30 30 30 20",fill:"#4169E1"}),i.jsx("rect",{x:"30",y:"35",width:"12",height:"8",fill:"none",stroke:"#333",strokeWidth:"1",rx:"6"}),i.jsx("rect",{x:"58",y:"35",width:"12",height:"8",fill:"none",stroke:"#333",strokeWidth:"1",rx:"6"}),i.jsx("line",{x1:"42",y1:"39",x2:"58",y2:"39",stroke:"#333",strokeWidth:"1"}),i.jsx("circle",{cx:"45",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("circle",{cx:"55",cy:"50",r:"1",fill:"#FF69B4"})]})},{id:"girl5",name:"بنت مبدعة",component:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[i.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"#FFE4B5",stroke:"#DEB887",strokeWidth:"2"}),i.jsx("circle",{cx:"35",cy:"40",r:"3",fill:"#333"}),i.jsx("circle",{cx:"65",cy:"40",r:"3",fill:"#333"}),i.jsx("path",{d:"M 35 60 Q 50 70 65 60",stroke:"#FF6347",strokeWidth:"2",fill:"none"}),i.jsx("path",{d:"M 20 25 Q 50 5 80 25 Q 80 40 50 35 Q 20 40 20 25",fill:"#FF69B4"}),i.jsx("circle",{cx:"25",cy:"20",r:"3",fill:"#FFD700"}),i.jsx("circle",{cx:"75",cy:"20",r:"3",fill:"#FFD700"}),i.jsx("circle",{cx:"50",cy:"15",r:"2",fill:"#FF1493"}),i.jsx("circle",{cx:"45",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("circle",{cx:"55",cy:"50",r:"1",fill:"#FF69B4"}),i.jsx("path",{d:"M 40 35 Q 42 30 44 35",stroke:"#333",strokeWidth:"1",fill:"none"}),i.jsx("path",{d:"M 56 35 Q 58 30 60 35",stroke:"#333",strokeWidth:"1",fill:"none"})]})}],AH=t=>by.find(e=>e.id===t);function d1({className:t}){const{user:e,profile:n,signOut:r}=Kt(),s=Gn(),[a,o]=m.useState(!1);if(!e)return null;const l=()=>n!=null&&n.fullName?n==null?void 0:n.fullName.split(" ").map(h=>h.charAt(0)).join("").toUpperCase().slice(0,2):e.email?e.email.charAt(0).toUpperCase():"U",c=n!=null&&n.avatarId?AH(n.avatarId):null;m.useEffect(()=>{console.log("Profile updated in ProfileIcon:",n==null?void 0:n.avatarId)},[n==null?void 0:n.avatarId]);const u=async()=>{try{await r()}catch(h){console.error("خطأ في تسجيل الخروج:",h)}};return i.jsxs(i.Fragment,{children:[i.jsxs(s1,{children:[i.jsx(i1,{asChild:!0,children:i.jsx(V,{variant:"ghost",className:`relative h-8 w-8 rounded-full p-0 hover:bg-transparent focus:ring-1 focus:ring-primary focus:ring-offset-1 transition-all duration-200 ${t}`,children:i.jsx(KP,{className:"h-8 w-8 border border-border shadow-sm hover:shadow-md transition-all duration-200 hover:scale-105",children:c?i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-900/20 dark:to-indigo-900/20 rounded-full overflow-hidden",children:i.jsx("div",{className:"w-full h-full flex items-center justify-center scale-[2.5]",children:c.component})}):i.jsxs(i.Fragment,{children:[i.jsx(GP,{src:e.photoURL||void 0,alt:(n==null?void 0:n.fullName)||e.email||"المستخدم",className:"object-cover"}),i.jsx(QP,{className:"bg-gradient-to-br from-primary to-primary/80 text-primary-foreground font-semibold text-lg border-0",children:l()})]})})})}),i.jsxs(eg,{className:"w-64",align:"end",forceMount:!0,children:[i.jsx(a1,{className:"font-normal",children:i.jsxs("div",{className:"flex flex-col space-y-1",children:[i.jsx("p",{className:"text-sm font-medium leading-none",children:(n==null?void 0:n.fullName)||"المستخدم"}),i.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:e.email}),(n==null?void 0:n.role)&&i.jsxs("p",{className:"text-xs leading-none text-muted-foreground",children:["الدور: ",n.role==="staff"?"موظف":n.role==="merchant"?"تاجر":"مستخدم"]})]})}),i.jsx(Md,{}),i.jsxs(Gs,{onClick:()=>o(!0),className:"cursor-pointer",children:[i.jsx(I3,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"تغيير كلمة المرور"})]}),i.jsxs(Gs,{onClick:()=>s("/profile-settings"),className:"cursor-pointer",children:[i.jsx(Ua,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"إعدادات البروفيل"})]}),((n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="staff")&&i.jsxs(Gs,{onClick:()=>s("/admin"),className:"cursor-pointer",children:[i.jsx(Ri,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"لوحة الإدارة"})]}),i.jsx(Md,{}),i.jsxs(Gs,{onClick:u,className:"cursor-pointer text-red-600 focus:text-red-600",children:[i.jsx(Gd,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"تسجيل الخروج"})]})]})]}),i.jsx(CH,{open:a,onOpenChange:o})]})}const vo={phoneNumber:"201000392539",defaultMessage:"مرحباً، أريد الاستفسار عن خدماتكم",isEnabled:!0,lastUpdated:new Date},vR="whatsapp-settings",wR="app-settings",jE=async()=>{var t;try{const e=tt(Te,wR,vR),n=await mn(e);if(n.exists()){const r=n.data();return{phoneNumber:r.phoneNumber||vo.phoneNumber,defaultMessage:r.defaultMessage||vo.defaultMessage,isEnabled:r.isEnabled!==void 0?r.isEnabled:vo.isEnabled,lastUpdated:((t=r.lastUpdated)==null?void 0:t.toDate())||vo.lastUpdated}}else return await bR(vo),vo}catch(e){return console.error("خطأ في تحميل إعدادات الواتساب:",e),vo}},bR=async t=>{try{const e=tt(Te,wR,vR),n={...t,lastUpdated:new Date};return await Ir(e,n,{merge:!0}),!0}catch(e){return console.error("خطأ في حفظ إعدادات الواتساب:",e),!1}},NR=t=>{const e=t.replace(/\D/g,"");if(e.length<10)throw new Error("رقم الهاتف يجب أن يحتوي على 10 أرقام على الأقل");return e},PH=t=>{try{const e=NR(t);return e.length>=10&&e.length<=15}catch{return!1}},h1=(t,e)=>{const n=NR(t),r=encodeURIComponent(e);return`https://wa.me/${n}?text=${r}`},ng=()=>{const[t,e]=te.useState(null),[n,r]=te.useState(!0),[s,a]=te.useState(null);return te.useEffect(()=>{(async()=>{try{r(!0);const c=await jE();e(c),a(null)}catch(c){a("فشل في تحميل إعدادات الواتساب"),console.error(c)}finally{r(!1)}})()},[]),{settings:t,loading:n,error:s,updateSettings:async l=>{try{return r(!0),await bR(l)&&t?(e({...t,...l,lastUpdated:new Date}),a(null),!0):(a("فشل في حفظ الإعدادات"),!1)}catch(c){return a("خطأ في تحديث الإعدادات"),console.error(c),!1}finally{r(!1)}},refreshSettings:()=>jE().then(e)}};function SE(){const{user:t}=Kt(),{settings:e}=ng(),n=()=>e?h1(e.phoneNumber,`مرحباً! أريد الاستفسار عن خدمات CashyLink لإدارة المحافظ الإلكترونية.

أرجو التواصل معي لمعرفة المزيد عن الباقات المتاحة وكيفية البدء.`):"#",r=[{icon:qu,title:"إدارة الخطوط والمحافظ",description:"تحكم كامل في خطوط المحل ومحافظ التجار مع تتبع الحدود اليومية والشهرية"},{icon:oc,title:"نظام عمولة مرن",description:"احسب العمولة تلقائياً حسب قواعد قابلة للتخصيص لكل مزود وتاجر"},{icon:Ri,title:"أمان متقدم",description:"حماية البيانات مع صلاحيات متدرجة وسجل مراجعة شامل"},{icon:Tv,title:"تقارير تفصيلية",description:"تقارير يومية وشهرية قابلة للتصدير مع رسوم بيانية تفاعلية"}],s=[{name:"Vodafone Cash",color:"provider-vodafone"},{name:"Etisalat Cash",color:"provider-etisalat"},{name:"Orange Cash",color:"provider-orange"},{name:"InstaPay",color:"provider-instapay"}];return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/20 to-background",children:[i.jsx("header",{className:"container mx-auto px-4 py-6",children:i.jsxs("nav",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-8 w-8 gradient-primary rounded-lg flex items-center justify-center",children:i.jsx(qu,{className:"h-5 w-5 text-white"})}),i.jsx("span",{className:"text-xl font-bold",children:"CashyLink"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(Er,{to:"/user/login",children:i.jsx(V,{variant:"ghost",children:"تسجيل الدخول"})}),i.jsx(Er,{to:"/user/register",children:i.jsxs(V,{className:"btn-primary",children:["تسجيل تاجر جديد",i.jsx(Mo,{className:"mr-2 h-4 w-4"})]})}),t&&i.jsx(d1,{})]})]})}),i.jsxs("section",{className:"container mx-auto px-4 py-20 text-center relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 -z-10",children:[i.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-400/20 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-purple-400/20 rounded-full blur-3xl animate-pulse",style:{animationDelay:"1s"}}),i.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-green-400/10 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]}),i.jsxs("div",{className:"max-w-4xl mx-auto relative",children:[i.jsx("div",{className:"absolute -top-10 -left-10 animate-bounce",style:{animationDelay:"0.5s"},children:i.jsx(Ef,{className:"h-8 w-8 text-yellow-400"})}),i.jsx("div",{className:"absolute -top-5 -right-5 animate-bounce",style:{animationDelay:"1.5s"},children:i.jsx(ac,{className:"h-6 w-6 text-blue-400"})}),i.jsx("div",{className:"absolute top-20 -right-20 animate-bounce",style:{animationDelay:"2.5s"},children:i.jsx(Wn,{className:"h-10 w-10 text-purple-400"})}),i.jsx("div",{className:"animate-fade-in-up",children:i.jsxs("h1",{className:"text-6xl md:text-7xl font-bold mb-6 gradient-hero bg-clip-text text-transparent leading-tight",children:["منصة إدارة شاملة",i.jsx("br",{}),i.jsx("span",{className:"text-5xl md:text-6xl",children:"لمحلات الموبايل"})]})}),i.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"0.3s"},children:i.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground mb-8 leading-relaxed max-w-3xl mx-auto",children:"أدر معاملات الأموال الإلكترونية بكفاءة وأمان مع تتبع دقيق للحدود والعمولات"})}),i.jsx("div",{className:"animate-fade-in-up mb-12",style:{animationDelay:"0.6s"},children:i.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:s.map((a,o)=>i.jsx("div",{className:`px-6 py-3 ${a.color} text-white rounded-full text-sm font-medium shadow-lg transform hover:scale-105 transition-all duration-300 animate-slide-in-right`,style:{animationDelay:`${.8+o*.1}s`},children:a.name},a.name))})}),i.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"1.2s"},children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center items-center",children:[i.jsx(Er,{to:"/subscriptions",children:i.jsxs(V,{size:"lg",className:"btn-primary shadow-elegant transform hover:scale-105 transition-all duration-300 group relative overflow-hidden",children:[i.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-yellow-400/20 to-orange-400/20 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300 origin-left"}),i.jsx(Wn,{className:"ml-2 h-5 w-5 group-hover:animate-pulse"}),"اشترك الآن",i.jsx(Ef,{className:"mr-2 h-5 w-5 group-hover:animate-spin"})]})}),i.jsx("a",{href:n(),target:"_blank",rel:"noopener noreferrer",children:i.jsxs(V,{size:"lg",className:"bg-green-500 hover:bg-green-600 text-white shadow-elegant transform hover:scale-105 transition-all duration-300",children:[i.jsx(Ho,{className:"ml-2 h-5 w-5"}),"اشترك عبر الواتساب"]})}),i.jsx(Er,{to:"/auth?mode=signup",children:i.jsxs(V,{size:"lg",className:"bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white shadow-elegant transform hover:scale-105 transition-all duration-300",children:["ابدأ مجاناً الآن",i.jsx(Mo,{className:"mr-2 h-5 w-5"})]})}),i.jsx(Er,{to:"/user/login",children:i.jsx(V,{size:"lg",variant:"outline",className:"border-primary text-primary hover:bg-primary/10 transform hover:scale-105 transition-all duration-300",children:"تسجيل الدخول"})})]})}),i.jsx("div",{className:"mt-16 animate-fade-in-up",style:{animationDelay:"1.5s"},children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-2xl mx-auto",children:[i.jsxs("div",{className:"text-center group",children:[i.jsx("div",{className:"text-3xl font-bold text-primary group-hover:scale-110 transition-transform duration-300",children:"500+"}),i.jsx("div",{className:"text-muted-foreground",children:"تاجر نشط"})]}),i.jsxs("div",{className:"text-center group",children:[i.jsx("div",{className:"text-3xl font-bold text-primary group-hover:scale-110 transition-transform duration-300",children:"1M+"}),i.jsx("div",{className:"text-muted-foreground",children:"معاملة شهرياً"})]}),i.jsxs("div",{className:"text-center group",children:[i.jsx("div",{className:"text-3xl font-bold text-primary group-hover:scale-110 transition-transform duration-300",children:"99.9%"}),i.jsx("div",{className:"text-muted-foreground",children:"وقت التشغيل"})]})]})})]})]}),i.jsxs("section",{className:"container mx-auto px-4 py-20 relative",children:[i.jsxs("div",{className:"text-center mb-16 animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary px-4 py-2 rounded-full text-sm font-medium mb-4",children:[i.jsx(Lo,{className:"h-4 w-4"}),"مميزات استثنائية"]}),i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4 gradient-hero bg-clip-text text-transparent",children:"مميزات المنصة"}),i.jsx("p",{className:"text-muted-foreground text-xl max-w-2xl mx-auto",children:"كل ما تحتاجه لإدارة عمليات التحويل بكفاءة وأمان تام"})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:r.map((a,o)=>i.jsxs(Le,{className:"card-glass hover:shadow-elegant transition-all duration-500 group relative overflow-hidden animate-fade-in-up border-0 bg-gradient-to-br from-white/80 to-white/40 backdrop-blur-sm",style:{animationDelay:`${o*.1}s`},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),i.jsxs($e,{className:"p-8 text-center relative z-10",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"h-16 w-16 gradient-primary rounded-2xl flex items-center justify-center mx-auto group-hover:scale-110 group-hover:rotate-6 transition-all duration-300 shadow-lg",children:i.jsx(a.icon,{className:"h-8 w-8 text-white"})}),i.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-yellow-400 rounded-full opacity-0 group-hover:opacity-100 group-hover:animate-ping transition-all duration-300"})]}),i.jsx("h3",{className:"text-xl font-bold mb-3 group-hover:text-primary transition-colors duration-300",children:a.title}),i.jsx("p",{className:"text-muted-foreground leading-relaxed",children:a.description})]})]},o))}),i.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-blue-400/10 rounded-full blur-xl animate-float"}),i.jsx("div",{className:"absolute bottom-10 right-10 w-32 h-32 bg-purple-400/10 rounded-full blur-xl animate-float",style:{animationDelay:"2s"}})]}),i.jsx("section",{className:"container mx-auto px-4 py-20 my-20 relative",children:i.jsxs("div",{className:"bg-gradient-to-br from-primary/5 via-purple-500/5 to-blue-500/5 rounded-3xl p-8 md:p-12 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 opacity-10",children:[i.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-primary rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-blue-500 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center relative z-10",children:[i.jsxs("div",{className:"animate-fade-in-up",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary px-4 py-2 rounded-full text-sm font-medium mb-6",children:[i.jsx(ac,{className:"h-4 w-4"}),"لماذا نحن الأفضل؟"]}),i.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-8 gradient-hero bg-clip-text text-transparent",children:"لماذا CashyLink؟"}),i.jsx("div",{className:"space-y-6",children:["تتبع دقيق للحدود اليومية والشهرية","تنبيهات تلقائية عند اقتراب الحدود","حساب عمولة ذكي ومرن","تقارير شاملة قابلة للتصدير","واجهات منفصلة للإدارة والتجار","أمان متقدم مع صلاحيات متدرجة"].map((a,o)=>i.jsxs("div",{className:"flex items-center gap-4 group animate-slide-in-left",style:{animationDelay:`${o*.1}s`},children:[i.jsx("div",{className:"h-8 w-8 bg-gradient-to-r from-green-400 to-blue-500 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform duration-300",children:i.jsx(wn,{className:"h-5 w-5 text-white"})}),i.jsx("span",{className:"text-foreground text-lg group-hover:text-primary transition-colors duration-300",children:a})]},o))})]}),i.jsx("div",{className:"relative animate-fade-in-up",style:{animationDelay:"0.3s"},children:i.jsxs("div",{className:"gradient-primary rounded-3xl p-8 shadow-2xl transform hover:scale-105 transition-all duration-500 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-400/20 to-orange-400/20 animate-pulse"}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-8 text-white relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"h-12 w-12 bg-white/20 rounded-full flex items-center justify-center",children:i.jsx(Lo,{className:"h-6 w-6 text-white"})}),i.jsx("h3",{className:"text-2xl font-bold",children:"ابدأ في دقائق"})]}),i.jsx("p",{className:"text-white/90 mb-8 text-lg leading-relaxed",children:"سجل حسابك، أضف محافظك، وابدأ في إجراء المعاملات فوراً مع أحدث التقنيات"}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-3 w-3 bg-white rounded-full animate-pulse"}),i.jsx("span",{className:"text-white/80",children:"تسجيل سريع وآمن"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-3 w-3 bg-white/60 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),i.jsx("span",{className:"text-white/80",children:"إعداد المحافظ"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"h-3 w-3 bg-white/40 rounded-full animate-pulse",style:{animationDelay:"0.4s"}}),i.jsx("span",{className:"text-white/80",children:"بدء المعاملات"})]})]}),i.jsx(Er,{to:"/subscriptions",children:i.jsxs(V,{className:"w-full bg-white text-primary hover:bg-white/90 font-bold py-3 transform hover:scale-105 transition-all duration-300",children:[i.jsx(Wn,{className:"ml-2 h-5 w-5"}),"اشترك الآن واحصل على مميزات حصرية"]})})]})]})})]})]})}),i.jsx("section",{className:"container mx-auto px-4 py-20 relative",children:i.jsxs("div",{className:"gradient-primary rounded-3xl p-12 text-center text-white shadow-2xl relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 opacity-20",children:[i.jsx("div",{className:"absolute top-10 left-10 w-20 h-20 bg-white rounded-full animate-bounce",style:{animationDelay:"0s"}}),i.jsx("div",{className:"absolute top-20 right-20 w-16 h-16 bg-yellow-300 rounded-full animate-bounce",style:{animationDelay:"0.5s"}}),i.jsx("div",{className:"absolute bottom-20 left-20 w-12 h-12 bg-blue-300 rounded-full animate-bounce",style:{animationDelay:"1s"}}),i.jsx("div",{className:"absolute bottom-10 right-10 w-24 h-24 bg-green-300 rounded-full animate-bounce",style:{animationDelay:"1.5s"}})]}),i.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[i.jsx(ac,{className:"absolute top-16 left-1/4 h-6 w-6 text-yellow-300 animate-pulse"}),i.jsx(Wn,{className:"absolute top-32 right-1/3 h-8 w-8 text-yellow-400 animate-pulse",style:{animationDelay:"0.3s"}}),i.jsx(Ef,{className:"absolute bottom-24 left-1/3 h-7 w-7 text-blue-300 animate-pulse",style:{animationDelay:"0.6s"}}),i.jsx(Lo,{className:"absolute bottom-16 right-1/4 h-6 w-6 text-green-300 animate-pulse",style:{animationDelay:"0.9s"}})]}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm px-6 py-3 rounded-full text-sm font-medium mb-8 animate-fade-in-up",children:[i.jsx(Wn,{className:"h-5 w-5 text-yellow-300"}),"عرض محدود - اشترك الآن!"]}),i.jsx("h2",{className:"text-5xl md:text-6xl font-bold mb-8 animate-fade-in-up",style:{animationDelay:"0.2s"},children:"جاهز لتحويل إدارة محافظك؟"}),i.jsx("p",{className:"text-xl md:text-2xl text-white/90 mb-12 max-w-3xl mx-auto leading-relaxed animate-fade-in-up",style:{animationDelay:"0.4s"},children:"انضم إلى آلاف التجار الذين يثقون في CashyLink لإدارة معاملاتهم المالية بكفاءة وأمان"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12 animate-fade-in-up",style:{animationDelay:"0.6s"},children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-yellow-300 mb-2",children:"5000+"}),i.jsx("div",{className:"text-white/80",children:"تاجر نشط"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-blue-300 mb-2",children:"99.9%"}),i.jsx("div",{className:"text-white/80",children:"وقت التشغيل"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-3xl font-bold text-green-300 mb-2",children:"24/7"}),i.jsx("div",{className:"text-white/80",children:"دعم فني"})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 justify-center animate-fade-in-up",style:{animationDelay:"0.8s"},children:[i.jsx(Er,{to:"/subscriptions",children:i.jsxs(V,{size:"lg",className:"bg-white text-primary hover:bg-white/90 font-bold px-8 py-4 text-lg transform hover:scale-105 transition-all duration-300 shadow-xl",children:[i.jsx(Wn,{className:"ml-2 h-6 w-6"}),"اشترك الآن - عرض خاص"]})}),i.jsx("a",{href:n(),target:"_blank",rel:"noopener noreferrer",children:i.jsxs(V,{size:"lg",className:"bg-green-500 hover:bg-green-600 text-white font-bold px-8 py-4 text-lg transform hover:scale-105 transition-all duration-300 shadow-xl",children:[i.jsx(Ho,{className:"ml-2 h-6 w-6"}),"تواصل عبر الواتساب"]})}),i.jsx(Er,{to:"/auth?mode=signup",children:i.jsxs(V,{size:"lg",variant:"outline",className:"border-2 border-white text-white hover:bg-white hover:text-primary font-bold px-8 py-4 text-lg transform hover:scale-105 transition-all duration-300",children:["إنشاء حساب مجاني",i.jsx(Mo,{className:"mr-2 h-6 w-6"})]})})]}),i.jsxs("div",{className:"mt-12 flex flex-wrap justify-center items-center gap-8 text-white/60 animate-fade-in-up",style:{animationDelay:"1s"},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wn,{className:"h-5 w-5 text-green-300"}),i.jsx("span",{children:"آمن ومشفر"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wn,{className:"h-5 w-5 text-green-300"}),i.jsx("span",{children:"بدون رسوم خفية"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wn,{className:"h-5 w-5 text-green-300"}),i.jsx("span",{children:"إلغاء في أي وقت"})]})]})]})]})}),i.jsx("footer",{className:"border-t border-border bg-card/50 py-8",children:i.jsxs("div",{className:"container mx-auto px-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[i.jsx("div",{className:"h-6 w-6 gradient-primary rounded flex items-center justify-center",children:i.jsx(qu,{className:"h-4 w-4 text-white"})}),i.jsx("span",{className:"font-semibold",children:"CashyLink"})]}),i.jsx("p",{className:"text-muted-foreground text-sm",children:"© 2024 CashyLink. جميع الحقوق محفوظة."})]})})]})}const RH=()=>{const{settings:t}=ng(),e=(r,s,a)=>{if(!t)return"#";const o=`مرحباً! أريد الاشتراك في باقة ${r} بسعر ${s}

المميزات المشمولة:
${a.map(l=>`✅ ${l}`).join(`
`)}

أرجو التواصل معي لإتمام عملية الاشتراك.`;return h1(t.phoneNumber,o)},n=[{id:"monthly",name:"الباقة الشهرية",price:"100 جنيه",period:"شهرياً",description:"مثالية للمبتدئين والتجار الصغار",icon:Pi,color:"from-blue-500 to-cyan-500",popular:!1,features:["إدارة محافظ متعددة","تتبع المعاملات اليومية","تقارير شهرية","دعم فني أساسي","واجهة سهلة الاستخدام"]},{id:"yearly",name:"الباقة السنوية",price:"700 جنيه",period:"سنوياً",description:"الأفضل للتجار المحترفين - وفر 42%",icon:ac,color:"from-purple-500 to-pink-500",popular:!0,features:["إدارة محافظ متعددة","تتبع المعاملات المتقدم","تقارير تفصيلية","دعم فني متقدم","تحليلات مالية","نسخ احتياطية تلقائية"]},{id:"lifetime",name:"الباقة مدى الحياة",price:"3500 جنيه",period:"دفعة واحدة",description:"استثمار واحد لحياة كاملة من الخدمات",icon:Wn,color:"from-yellow-500 to-orange-500",popular:!1,features:["جميع مميزات الباقة السنوية","محافظ غير محدودة","دعم فني مدى الحياة","تحديثات مجانية مدى الحياة","أولوية في الدعم الفني","مميزات حصرية جديدة"]}];return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[i.jsx("header",{className:"bg-white/80 backdrop-blur-sm border-b sticky top-0 z-50",children:i.jsx("div",{className:"container mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(Er,{to:"/",className:"flex items-center gap-2 text-primary hover:text-primary/80 transition-colors",children:[i.jsx(Mo,{className:"h-5 w-5"}),i.jsx("span",{className:"font-medium",children:"العودة للصفحة الرئيسية"})]}),i.jsx("div",{className:"text-2xl font-bold gradient-hero bg-clip-text text-transparent",children:"CashyLink"})]})})}),i.jsxs("section",{className:"container mx-auto px-4 py-16 text-center relative",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-200 rounded-full blur-3xl opacity-30 animate-pulse"}),i.jsx("div",{className:"absolute top-40 right-20 w-40 h-40 bg-purple-200 rounded-full blur-3xl opacity-30 animate-pulse",style:{animationDelay:"1s"}}),i.jsx("div",{className:"absolute bottom-20 left-1/3 w-36 h-36 bg-pink-200 rounded-full blur-3xl opacity-30 animate-pulse",style:{animationDelay:"2s"}})]}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary px-6 py-3 rounded-full text-sm font-medium mb-8 animate-fade-in-up",children:[i.jsx(Ef,{className:"h-5 w-5"}),"اختر الباقة المناسبة لك"]}),i.jsx("h1",{className:"text-5xl md:text-7xl font-bold mb-8 gradient-hero bg-clip-text text-transparent animate-fade-in-up",style:{animationDelay:"0.2s"},children:"باقات الاشتراك"}),i.jsx("p",{className:"text-xl md:text-2xl text-muted-foreground mb-12 max-w-3xl mx-auto leading-relaxed animate-fade-in-up",style:{animationDelay:"0.4s"},children:"اختر الباقة التي تناسب احتياجاتك وابدأ رحلتك مع CashyLink اليوم"}),i.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8 text-muted-foreground animate-fade-in-up",style:{animationDelay:"0.6s"},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wn,{className:"h-5 w-5 text-green-500"}),i.jsx("span",{children:"ضمان استرداد المال"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wn,{className:"h-5 w-5 text-green-500"}),i.jsx("span",{children:"إلغاء في أي وقت"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wn,{className:"h-5 w-5 text-green-500"}),i.jsx("span",{children:"دعم فني متميز"})]})]})]})]}),i.jsxs("section",{className:"container mx-auto px-4 pb-20",children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto",children:n.map((r,s)=>{const a=r.icon;return i.jsxs(Le,{className:`relative overflow-hidden transform hover:scale-105 transition-all duration-500 ${r.popular?"ring-2 ring-primary shadow-2xl":"shadow-xl hover:shadow-2xl"} animate-fade-in-up`,style:{animationDelay:`${s*.2}s`},children:[r.popular&&i.jsx("div",{className:"absolute top-0 left-0 right-0",children:i.jsx("div",{className:"bg-gradient-to-r from-primary to-purple-600 text-white text-center py-2 text-sm font-bold",children:"الأكثر شعبية ⭐"})}),i.jsxs(Ze,{className:`bg-gradient-to-br ${r.color} text-white relative ${r.popular?"pt-12":"pt-8"}`,children:[i.jsx("div",{className:"absolute top-4 right-4",children:i.jsx(a,{className:"h-8 w-8 text-white/80"})}),i.jsx(ct,{className:"text-2xl font-bold mb-2",children:r.name}),i.jsx(Hp,{className:"text-white/90 text-base",children:r.description}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex items-baseline gap-2",children:[i.jsx("span",{className:"text-4xl font-bold",children:r.price}),i.jsx("span",{className:"text-white/80",children:"جنيه"})]}),i.jsx("div",{className:"text-white/80 text-sm mt-1",children:r.id==="lifetime"?"دفعة واحدة":`لكل ${r.period}`})]})]}),i.jsx($e,{className:"p-8",children:i.jsx("ul",{className:"space-y-4",children:r.features.map((o,l)=>i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsx(wn,{className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"text-foreground",children:o})]},l))})}),i.jsx(SA,{className:"p-8 pt-0",children:i.jsxs("a",{href:e(r.name,r.price,r.features),target:"_blank",rel:"noopener noreferrer",className:`w-full py-6 text-lg font-bold transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-2 rounded-md bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700 ${r.popular?"shadow-2xl":"shadow-lg"}`,children:[i.jsx(Ho,{className:"h-6 w-6"}),r.id==="lifetime"?"اشترك مدى الحياة عبر الواتساب":"اشترك عبر الواتساب"]})})]},r.id)})}),i.jsx("div",{className:"mt-16 text-center",children:i.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl p-8 max-w-4xl mx-auto shadow-xl",children:[i.jsx("h3",{className:"text-2xl font-bold mb-6 text-foreground",children:"لديك أسئلة حول الباقات؟"}),i.jsx("p",{className:"text-muted-foreground mb-8 text-lg",children:"فريقنا جاهز لمساعدتك في اختيار الباقة المناسبة لاحتياجاتك"}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[i.jsx(V,{variant:"outline",size:"lg",className:"font-bold",children:"تواصل معنا"}),i.jsx(V,{variant:"ghost",size:"lg",className:"font-bold",children:"مقارنة الباقات"})]})]})})]})]})};function kH(){const[t]=$T(),e=Gn(),n=t.get("mode")||"signin",[r,s]=m.useState(n==="signup"),[a,o]=m.useState(!1),[l,c]=m.useState({email:"alkaptin7878@mail.ru",password:"01123456",fullName:"",phone:""}),{signIn:u,signUp:h,user:f}=Kt(),{toast:p}=_n();if(f)return i.jsx(VT,{to:"/dashboard-redirect",replace:!0});const g=async N=>{N.preventDefault(),o(!0);try{if(r){const{error:x}=await h(l.email,l.password,{full_name:l.fullName,phone:l.phone});if(x)throw x;p({title:"تم إنشاء الحساب بنجاح!",description:"تحقق من بريدك الإلكتروني لتفعيل الحساب"});const b=l.fullName||"التاجر الجديد";e(`/user/account-setup?user_name=${encodeURIComponent(b)}`)}else{const{error:x}=await u(l.email,l.password);if(x)throw x;p({title:"مرحباً بك!",description:"تم تسجيل الدخول بنجاح، جاري إعداد حسابك..."})}}catch(x){p({title:"خطأ",description:x.message||"حدث خطأ أثناء المعالجة",variant:"destructive"})}finally{o(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-secondary/10 flex items-center justify-center p-4",children:i.jsxs(Le,{className:"w-full max-w-md",children:[i.jsxs(Ze,{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[i.jsx("div",{className:"h-8 w-8 gradient-primary rounded-lg flex items-center justify-center",children:i.jsx(qu,{className:"h-5 w-5 text-white"})}),i.jsx("span",{className:"text-xl font-bold",children:"CashyLink"})]}),i.jsx(ct,{children:r?"إنشاء حساب جديد":"تسجيل الدخول"})]}),i.jsxs($e,{children:[i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[r&&i.jsxs(i.Fragment,{children:[i.jsx(de,{placeholder:"الاسم الكامل",value:l.fullName,onChange:N=>c({...l,fullName:N.target.value}),required:!0}),i.jsx(de,{placeholder:"رقم الهاتف",value:l.phone,onChange:N=>c({...l,phone:N.target.value})})]}),i.jsx(de,{type:"email",placeholder:"البريد الإلكتروني",value:l.email,onChange:N=>c({...l,email:N.target.value}),required:!0}),i.jsx(de,{type:"password",placeholder:"كلمة المرور",value:l.password,onChange:N=>c({...l,password:N.target.value}),required:!0}),i.jsx(V,{type:"submit",className:"w-full btn-primary",disabled:a,children:a?"جاري المعالجة...":r?"إنشاء الحساب":"تسجيل الدخول"}),i.jsx(V,{type:"button",variant:"secondary",className:"w-full mt-2",onClick:()=>{c({email:"alkaptin7878@mail.ru",password:"01123456",fullName:"",phone:""}),setTimeout(()=>{const N=document.querySelector("form");N&&N.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))},100)},children:"تسجيل دخول كمدير"})]}),i.jsxs("div",{className:"text-center mt-6",children:[i.jsx("span",{className:"text-muted-foreground",children:r?"لديك حساب؟":"ليس لديك حساب؟"}),i.jsx(V,{variant:"link",onClick:()=>s(!r),className:"text-primary",children:r?"تسجيل الدخول":"إنشاء حساب"})]}),i.jsx("div",{className:"text-center mt-4",children:i.jsx(Er,{to:"/",children:i.jsx(V,{variant:"ghost",className:"text-muted-foreground",children:"العودة للصفحة الرئيسية"})})})]})]})})}const DH=()=>{const[t,e]=m.useState(""),[n,r]=m.useState(""),[s,a]=m.useState(!1),[o,l]=m.useState(!1),[c,u]=m.useState(!1),{signIn:h,resetPassword:f}=Kt(),p=Gn(),g=async x=>{if(x.preventDefault(),console.log("🔐 بدء عملية تسجيل الدخول:",{email:t,password:"***"}),!t||!n){Nr.error("يرجى ملء جميع الحقول");return}l(!0);try{console.log("🔐 استدعاء signIn...");const{error:b}=await h(t,n);console.log("🔐 SignIn result:",{error:b}),b?(console.error("❌ خطأ في تسجيل الدخول:",b),Nr.error(b.message||"حدث خطأ أثناء تسجيل الدخول")):(console.log("✅ تم تسجيل الدخول بنجاح!"),Nr.success("تم تسجيل الدخول بنجاح!"),p("/dashboard-redirect"))}catch(b){console.error("❌ خطأ غير متوقع:",b),Nr.error("حدث خطأ غير متوقع")}finally{l(!1)}},N=async()=>{if(!t){Nr.error("يرجى إدخال البريد الإلكتروني أولاً");return}u(!0);try{const{error:x}=await f(t);x?Nr.error(x.message||"حدث خطأ أثناء إرسال رابط إعادة تعيين كلمة المرور"):Nr.success("تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني")}catch{Nr.error("حدث خطأ غير متوقع")}finally{u(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsxs(Le,{className:"w-full max-w-md",children:[i.jsxs(Ze,{className:"space-y-1 text-center",children:[i.jsx(ct,{className:"text-2xl font-bold text-gray-900",children:"تسجيل دخول المستخدم"}),i.jsx(Hp,{className:"text-gray-600",children:"أدخل بياناتك لتسجيل الدخول إلى حسابك"})]}),i.jsxs($e,{children:[i.jsxs("form",{onSubmit:g,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"email",className:"text-right block",children:"البريد الإلكتروني"}),i.jsx(de,{id:"email",type:"email",placeholder:"أدخل بريدك الإلكتروني",value:t,onChange:x=>e(x.target.value),className:"text-right",dir:"rtl",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"password",className:"text-right block",children:"كلمة المرور"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"password",type:s?"text":"password",placeholder:"أدخل كلمة المرور",value:n,onChange:x=>r(x.target.value),className:"text-right pr-10",dir:"rtl",required:!0}),i.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:s?i.jsx(en,{size:20}):i.jsx(qt,{size:20})})]})]}),i.jsx("div",{className:"flex justify-between items-center",children:i.jsxs(V,{type:"button",variant:"ghost",size:"sm",onClick:N,disabled:c,className:"text-blue-600 hover:text-blue-800 p-0 h-auto font-normal",children:[i.jsx(dp,{className:"w-4 h-4 ml-1"}),c?"جاري الإرسال...":"نسيت كلمة المرور؟"]})}),i.jsxs(V,{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700",disabled:o,children:[o?"جاري تسجيل الدخول...":"تسجيل الدخول",i.jsx(up,{className:"mr-2 h-4 w-4"})]}),i.jsx(V,{type:"button",variant:"outline",className:"w-full mt-2",disabled:o,onClick:()=>{e("test@example.com"),r("123456"),Nr.info("تم ملء بيانات المستخدم التجريبي")},children:"استخدام حساب تجريبي"})]}),i.jsxs("div",{className:"mt-6 text-center space-y-2",children:[i.jsxs("p",{className:"text-sm text-gray-600",children:["ليس لديك حساب؟"," ",i.jsx(Er,{to:"/user/register",className:"text-blue-600 hover:text-blue-800 font-medium",children:"إنشاء حساب جديد"})]}),i.jsx("p",{className:"text-sm",children:i.jsx(Er,{to:"/",className:"text-gray-500 hover:text-gray-700",children:"العودة إلى الصفحة الرئيسية"})})]})]})]})})},MH=qd("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),rg=m.forwardRef(({className:t,variant:e,...n},r)=>i.jsx("div",{ref:r,role:"alert",className:Se(MH({variant:e}),t),...n}));rg.displayName="Alert";const OH=m.forwardRef(({className:t,...e},n)=>i.jsx("h5",{ref:n,className:Se("mb-1 font-medium leading-none tracking-tight",t),...e}));OH.displayName="AlertTitle";const sg=m.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Se("text-sm [&_p]:leading-relaxed",t),...e}));sg.displayName="AlertDescription";const LH=()=>{const[t,e]=m.useState({name:"",email:"",password:"",confirmPassword:"",phone:"",shopName:""}),[n,r]=m.useState(!1),[s,a]=m.useState(!1),[o,l]=m.useState(!1),[c,u]=m.useState(""),{signUp:h}=Kt(),{toast:f}=_n(),p=Gn(),g=(b,_)=>{e(w=>({...w,[b]:_}))},N=()=>!t.name||!t.email||!t.password||!t.confirmPassword||!t.phone||!t.shopName?(u("يرجى ملء جميع الحقول"),!1):t.name.length<2?(u("يجب أن يكون الاسم أكثر من حرفين"),!1):t.shopName.length<2?(u("يجب أن يكون اسم المحل أكثر من حرفين"),!1):/^[0-9]{10,15}$/.test(t.phone)?t.password.length<6?(u("يجب أن تكون كلمة المرور 6 أحرف على الأقل"),!1):t.password!==t.confirmPassword?(u("كلمات المرور غير متطابقة"),!1):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.email)?!0:(u("البريد الإلكتروني غير صالح"),!1):(u("رقم الجوال يجب أن يكون من 10 إلى 15 رقم"),!1),x=async b=>{if(b.preventDefault(),u(""),!!N()){l(!0);try{await h(t.email,t.password,t.name,t.phone,t.shopName),f({title:"تم إنشاء الحساب بنجاح",description:"سيتم مراجعة حسابك من قبل الإدارة قبل تفعيله"}),p("/dashboard-redirect")}catch(_){console.error("Registration error:",_);let w="حدث خطأ أثناء إنشاء الحساب";_.code==="auth/email-already-in-use"?w="البريد الإلكتروني مستخدم بالفعل":_.code==="auth/invalid-email"?w="البريد الإلكتروني غير صالح":_.code==="auth/weak-password"?w="كلمة المرور ضعيفة جداً":_.code==="auth/operation-not-allowed"&&(w="إنشاء الحسابات غير مفعل حالياً"),u(w),f({title:"خطأ في إنشاء الحساب",description:w,variant:"destructive"})}finally{l(!1)}}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8 fade-in-up",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mb-4 shadow-lg",children:i.jsx(bs,{className:"h-8 w-8 text-white"})}),i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"كاشي لينك"}),i.jsx("p",{className:"text-gray-600",children:"نظام إدارة المحافظ الإلكترونية"})]}),i.jsxs(Le,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm card-glow fade-in-up",children:[i.jsxs(Ze,{className:"text-center pb-4",children:[i.jsxs(ct,{className:"text-2xl font-bold text-gray-900 flex items-center justify-center gap-2",children:[i.jsx(O3,{className:"h-6 w-6 text-green-600"}),"إنشاء حساب جديد"]}),i.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"أدخل بياناتك لإنشاء حساب جديد"})]}),i.jsxs($e,{className:"space-y-6",children:[c&&i.jsx(rg,{variant:"destructive",className:"fade-in-up",children:i.jsx(sg,{children:c})}),i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2 fade-in-up",children:[i.jsx(be,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"الاسم الكامل"}),i.jsxs("div",{className:"relative",children:[i.jsx(ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(de,{id:"name",type:"text",value:t.name,onChange:b=>g("name",b.target.value),placeholder:"أدخل اسمك الكامل",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:o})]})]}),i.jsxs("div",{className:"space-y-2 fade-in-up",children:[i.jsx(be,{htmlFor:"phone",className:"text-sm font-medium text-gray-700",children:"رقم الجوال"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(de,{id:"phone",type:"tel",value:t.phone,onChange:b=>g("phone",b.target.value),placeholder:"أدخل رقم الجوال (10-15 رقم)",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:o})]})]}),i.jsxs("div",{className:"space-y-2 fade-in-up",children:[i.jsx(be,{htmlFor:"shopName",className:"text-sm font-medium text-gray-700",children:"اسم المحل"}),i.jsxs("div",{className:"relative",children:[i.jsx(cm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(de,{id:"shopName",type:"text",value:t.shopName,onChange:b=>g("shopName",b.target.value),placeholder:"أدخل اسم المحل الخاص بك",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:o})]})]}),i.jsxs("div",{className:"space-y-2 fade-in-up",children:[i.jsx(be,{htmlFor:"email",className:"text-sm font-medium text-gray-700",children:"البريد الإلكتروني"}),i.jsxs("div",{className:"relative",children:[i.jsx(dp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(de,{id:"email",type:"email",value:t.email,onChange:b=>g("email",b.target.value),placeholder:"أدخل بريدك الإلكتروني",className:"pl-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:o})]})]}),i.jsxs("div",{className:"space-y-2 fade-in-up",children:[i.jsx(be,{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"كلمة المرور"}),i.jsxs("div",{className:"relative",children:[i.jsx(si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(de,{id:"password",type:n?"text":"password",value:t.password,onChange:b=>g("password",b.target.value),placeholder:"أدخل كلمة المرور (6 أحرف على الأقل)",className:"pl-10 pr-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:o}),i.jsx("button",{type:"button",onClick:()=>r(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:o,children:n?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2 fade-in-up",children:[i.jsx(be,{htmlFor:"confirmPassword",className:"text-sm font-medium text-gray-700",children:"تأكيد كلمة المرور"}),i.jsxs("div",{className:"relative",children:[i.jsx(si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(de,{id:"confirmPassword",type:s?"text":"password",value:t.confirmPassword,onChange:b=>g("confirmPassword",b.target.value),placeholder:"أعد إدخال كلمة المرور",className:"pl-10 pr-10 h-12 text-sm transition-all duration-300 hover:border-green-400 focus:border-green-500 bg-white/50",disabled:o}),i.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",disabled:o,children:s?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),i.jsx(V,{type:"submit",disabled:o||!t.name||!t.email||!t.password||!t.confirmPassword||!t.phone||!t.shopName,className:"w-full h-12 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-medium transition-all duration-300 btn-bounce hover-glow fade-in-up",children:o?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إنشاء الحساب..."]}):i.jsxs("div",{className:"flex items-center gap-2",children:["إنشاء حساب جديد",i.jsx(up,{className:"h-4 w-4"})]})})]}),i.jsx("div",{className:"text-center pt-4 border-t border-gray-200 fade-in-up",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["لديك حساب بالفعل؟"," ",i.jsx(Er,{to:"/user/login",className:"text-green-600 hover:text-green-700 font-medium transition-colors hover:underline",children:"تسجيل الدخول"})]})})]})]}),i.jsx("div",{className:"text-center mt-8 fade-in-up",children:i.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 كاشي لينك. جميع الحقوق محفوظة."})})]})})},FH=()=>{const[t]=$T(),e=t.get("user_name")||"",n=Gn(),{toast:r}=_n(),{user:s}=Kt(),[a,o]=m.useState({shopName:"",shopAddress:"",phoneNumber:"",description:""}),[l,c]=m.useState(!1),[u,h]=m.useState(""),[f,p]=m.useState(!1),[g,N]=m.useState(!1);m.useEffect(()=>{if(!s){n("/auth");return}},[s,n]);const x=w=>{const{name:v,value:C}=w.target;o(I=>({...I,[v]:C}))},b=()=>a.shopName.trim()?a.phoneNumber.trim()?a.shopAddress.trim()?!0:(h("عنوان المتجر مطلوب"),!1):(h("رقم الهاتف مطلوب"),!1):(h("اسم المتجر مطلوب"),!1),_=async w=>{if(w.preventDefault(),h(""),!!b()){c(!0);try{s&&await xs.create({id:s.uid,name:e,email:s.email||"",role:"merchant",shopName:a.shopName,shopAddress:a.shopAddress,phoneNumber:a.phoneNumber,description:a.description,approved:!1,createdAt:new Date,updatedAt:new Date,trialStarted:!1,trialStartDate:null,trialEndDate:null,trialExpired:!1}),r({title:"تم إعداد الحساب بنجاح",description:`مرحباً ${e}! تم إعداد متجرك "${a.shopName}" بنجاح`}),N(!0),p(!0)}catch(v){console.error("Account setup error:",v),h("حدث خطأ أثناء إعداد الحساب"),r({title:"خطأ في إعداد الحساب",description:"حدث خطأ أثناء إعداد الحساب، يرجى المحاولة مرة أخرى",variant:"destructive"})}finally{c(!1)}}};return s?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-2xl",children:[i.jsxs("div",{className:"text-center mb-8 fade-in-up",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full mb-4 shadow-lg",children:i.jsx(cm,{className:"h-8 w-8 text-white"})}),i.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["مرحباً ",e,"!"]}),i.jsx("p",{className:"text-gray-600",children:"دعنا نقوم بإعداد حساب متجرك"})]}),i.jsxs(Le,{className:"shadow-xl border-0 bg-white/80 backdrop-blur-sm card-glow fade-in-up",children:[i.jsxs(Ze,{className:"text-center pb-4",children:[i.jsxs(ct,{className:"text-2xl font-bold text-gray-900 flex items-center justify-center gap-2",children:[i.jsx(ki,{className:"h-6 w-6 text-blue-600"}),"إعداد حساب التاجر"]}),i.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"أدخل بيانات متجرك لإكمال إعداد الحساب"})]}),i.jsxs($e,{className:"space-y-6",children:[u&&i.jsx(rg,{variant:"destructive",className:"fade-in-up",children:i.jsx(sg,{children:u})}),i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2 fade-in-up",children:[i.jsxs(be,{htmlFor:"shopName",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[i.jsx(cm,{className:"h-4 w-4 text-blue-600"}),"اسم المتجر"]}),i.jsx(de,{id:"shopName",name:"shopName",type:"text",placeholder:"أدخل اسم متجرك",value:a.shopName,onChange:x,required:!0,className:"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"space-y-2 fade-in-up",children:[i.jsxs(be,{htmlFor:"phoneNumber",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[i.jsx(Ss,{className:"h-4 w-4 text-blue-600"}),"رقم الهاتف"]}),i.jsx(de,{id:"phoneNumber",name:"phoneNumber",type:"tel",placeholder:"أدخل رقم هاتف المتجر",value:a.phoneNumber,onChange:x,required:!0,className:"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"space-y-2 fade-in-up",children:[i.jsxs(be,{htmlFor:"shopAddress",className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[i.jsx(C3,{className:"h-4 w-4 text-blue-600"}),"عنوان المتجر"]}),i.jsx(de,{id:"shopAddress",name:"shopAddress",type:"text",placeholder:"أدخل عنوان المتجر",value:a.shopAddress,onChange:x,required:!0,className:"h-12 transition-all duration-300 focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{className:"space-y-2 fade-in-up",children:[i.jsx(be,{htmlFor:"description",className:"text-sm font-medium text-gray-700",children:"وصف المتجر (اختياري)"}),i.jsx("textarea",{id:"description",name:"description",placeholder:"أدخل وصفاً مختصراً عن متجرك",value:a.description,onChange:x,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300"})]}),i.jsx(V,{type:"submit",disabled:l,className:"w-full h-12 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-medium transition-all duration-300 btn-bounce hover-glow fade-in-up",children:l?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري إعداد الحساب..."]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(wn,{className:"h-4 w-4"}),"إكمال إعداد الحساب",i.jsx(up,{className:"h-4 w-4"})]})})]}),i.jsx("div",{className:"text-center pt-4 border-t border-gray-200 fade-in-up",children:i.jsx("p",{className:"text-sm text-gray-600",children:"بعد إكمال الإعداد، ستتمكن من الوصول إلى لوحة تحكم التاجر وإدارة متجرك"})})]})]}),i.jsx("div",{className:"text-center mt-8 fade-in-up",children:i.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 كاشي لينك. جميع الحقوق محفوظة."})})]})}):null},VH=()=>{const t=Gn(),{toast:e}=_n(),[n,r]=m.useState({username:"",password:""}),[s,a]=m.useState(!1),[o,l]=m.useState(!1),c=f=>{const{name:p,value:g}=f.target;r(N=>({...N,[p]:g}))},u=async f=>{f.preventDefault(),l(!0);try{if(n.username==="dashboard"&&n.password==="dashboard123")localStorage.setItem("dashboardAuth","true"),localStorage.setItem("dashboardUser",JSON.stringify({username:n.username,loginTime:new Date().toISOString()})),e({title:"مرحباً بك في لوحة التحكم!",description:"تم تسجيل الدخول بنجاح"}),t("/dashboard");else throw new Error("اسم المستخدم أو كلمة المرور غير صحيحة")}catch(p){console.error("Login error:",p),e({title:"خطأ في تسجيل الدخول",description:p.message||"تحقق من اسم المستخدم وكلمة المرور",variant:"destructive"})}finally{l(!1)}},h=()=>{r({username:"dashboard",password:"dashboard123"})};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-background to-indigo-50 flex items-center justify-center p-4",children:i.jsxs(Le,{className:"w-full max-w-md shadow-lg",children:[i.jsxs(Ze,{className:"text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[i.jsx("div",{className:"h-10 w-10 bg-gradient-to-r from-red-500 to-red-600 rounded-lg flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-sm",children:"ك"})}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(qu,{className:"h-5 w-5 text-primary"}),i.jsx("span",{className:"text-xl font-bold text-primary",children:"كاشي لينك"})]})]}),i.jsx(ct,{className:"text-2xl font-bold text-gray-800",children:"لوحة التحكم"}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"تسجيل الدخول للوصول إلى لوحة التحكم"})]}),i.jsxs($e,{children:[i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"اسم المستخدم"}),i.jsxs("div",{className:"relative",children:[i.jsx(ki,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(de,{name:"username",type:"text",value:n.username,onChange:c,placeholder:"أدخل اسم المستخدم",className:"pl-10",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"كلمة المرور"}),i.jsxs("div",{className:"relative",children:[i.jsx(si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),i.jsx(de,{name:"password",type:s?"text":"password",value:n.password,onChange:c,placeholder:"أدخل كلمة المرور",className:"pl-10 pr-10",required:!0}),i.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:s?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),i.jsx(V,{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:o?"جاري تسجيل الدخول...":"تسجيل الدخول"})]}),i.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"للتجربة السريعة:"}),i.jsxs(V,{onClick:h,variant:"outline",className:"w-full text-sm",children:[i.jsx(Ri,{className:"h-4 w-4 mr-2"}),"تسجيل دخول تجريبي"]}),i.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"اسم المستخدم: dashboard | كلمة المرور: dashboard123"})]})}),i.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-2",children:[i.jsx(Ri,{className:"h-4 w-4 text-blue-600 mt-0.5"}),i.jsxs("div",{className:"text-xs text-blue-700",children:[i.jsx("p",{className:"font-medium mb-1",children:"ملاحظة أمنية:"}),i.jsx("p",{children:"تأكد من أنك تستخدم اتصال آمن وموثوق للوصول إلى لوحة التحكم."})]})]})})]})]})})},UH=qd("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xt({className:t,variant:e,...n}){return i.jsx("div",{className:Se(UH({variant:e}),t),...n})}function TE(t,[e,n]){return Math.min(n,Math.max(e,t))}function _R(t){const e=m.useRef({value:t,previous:t});return m.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var $H=[" ","Enter","ArrowUp","ArrowDown"],BH=[" ","Enter"],nl="Select",[ig,ag,zH]=op(nl),[ru,$K]=Fr(nl,[zH,Kc]),og=Kc(),[WH,io]=ru(nl),[HH,qH]=ru(nl),ER=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,dir:u,name:h,autoComplete:f,disabled:p,required:g,form:N}=t,x=og(e),[b,_]=m.useState(null),[w,v]=m.useState(null),[C,I]=m.useState(!1),R=qp(u),[j,S]=Va({prop:r,defaultProp:s??!1,onChange:a,caller:nl}),[T,P]=Va({prop:o,defaultProp:l,onChange:c,caller:nl}),A=m.useRef(null),D=b?N||!!b.closest("form"):!0,[M,$]=m.useState(new Set),se=Array.from(M).map(W=>W.props.value).join(";");return i.jsx(mT,{...x,children:i.jsxs(WH,{required:g,scope:e,trigger:b,onTriggerChange:_,valueNode:w,onValueNodeChange:v,valueNodeHasChildren:C,onValueNodeHasChildrenChange:I,contentId:Xs(),value:T,onValueChange:P,open:j,onOpenChange:S,dir:R,triggerPointerDownPosRef:A,disabled:p,children:[i.jsx(ig.Provider,{scope:e,children:i.jsx(HH,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(W=>{$(X=>new Set(X).add(W))},[]),onNativeOptionRemove:m.useCallback(W=>{$(X=>{const U=new Set(X);return U.delete(W),U})},[]),children:n})}),D?i.jsxs(GR,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:f,value:T,onChange:W=>P(W.target.value),disabled:p,form:N,children:[T===void 0?i.jsx("option",{value:""}):null,Array.from(M)]},se):null]})})};ER.displayName=nl;var jR="SelectTrigger",SR=m.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,a=og(n),o=io(jR,n),l=o.disabled||r,c=rt(e,o.onTriggerChange),u=ag(n),h=m.useRef("touch"),[f,p,g]=YR(x=>{const b=u().filter(v=>!v.disabled),_=b.find(v=>v.value===o.value),w=XR(b,x,_);w!==void 0&&o.onValueChange(w.value)}),N=x=>{l||(o.onOpenChange(!0),g()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return i.jsx($v,{asChild:!0,...a,children:i.jsx(je.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":QR(o.value)?"":void 0,...s,ref:c,onClick:ce(s.onClick,x=>{x.currentTarget.focus(),h.current!=="mouse"&&N(x)}),onPointerDown:ce(s.onPointerDown,x=>{h.current=x.pointerType;const b=x.target;b.hasPointerCapture(x.pointerId)&&b.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(N(x),x.preventDefault())}),onKeyDown:ce(s.onKeyDown,x=>{const b=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&p(x.key),!(b&&x.key===" ")&&$H.includes(x.key)&&(N(),x.preventDefault())})})})});SR.displayName=jR;var TR="SelectValue",IR=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:a,placeholder:o="",...l}=t,c=io(TR,n),{onValueNodeHasChildrenChange:u}=c,h=a!==void 0,f=rt(e,c.onValueNodeChange);return ln(()=>{u(h)},[u,h]),i.jsx(je.span,{...l,ref:f,style:{pointerEvents:"none"},children:QR(c.value)?i.jsx(i.Fragment,{children:o}):a})});IR.displayName=TR;var KH="SelectIcon",CR=m.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(je.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});CR.displayName=KH;var GH="SelectPortal",AR=t=>i.jsx(Wd,{asChild:!0,...t});AR.displayName=GH;var rl="SelectContent",PR=m.forwardRef((t,e)=>{const n=io(rl,t.__scopeSelect),[r,s]=m.useState();if(ln(()=>{s(new DocumentFragment)},[]),!n.open){const a=r;return a?al.createPortal(i.jsx(RR,{scope:t.__scopeSelect,children:i.jsx(ig.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),a):null}return i.jsx(kR,{...t,ref:e})});PR.displayName=rl;var us=10,[RR,ao]=ru(rl),QH="SelectContentImpl",YH=zo("SelectContent.RemoveScroll"),kR=m.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:N,hideWhenDetached:x,avoidCollisions:b,..._}=t,w=io(rl,n),[v,C]=m.useState(null),[I,R]=m.useState(null),j=rt(e,Z=>C(Z)),[S,T]=m.useState(null),[P,A]=m.useState(null),D=ag(n),[M,$]=m.useState(!1),se=m.useRef(!1);m.useEffect(()=>{if(v)return Yw(v)},[v]),Qw();const W=m.useCallback(Z=>{const[z,...oe]=D().map(Ee=>Ee.ref.current),[le]=oe.slice(-1),ve=document.activeElement;for(const Ee of Z)if(Ee===ve||(Ee==null||Ee.scrollIntoView({block:"nearest"}),Ee===z&&I&&(I.scrollTop=0),Ee===le&&I&&(I.scrollTop=I.scrollHeight),Ee==null||Ee.focus(),document.activeElement!==ve))return},[D,I]),X=m.useCallback(()=>W([S,v]),[W,S,v]);m.useEffect(()=>{M&&X()},[M,X]);const{onOpenChange:U,triggerPointerDownPosRef:L}=w;m.useEffect(()=>{if(v){let Z={x:0,y:0};const z=le=>{var ve,Ee;Z={x:Math.abs(Math.round(le.pageX)-(((ve=L.current)==null?void 0:ve.x)??0)),y:Math.abs(Math.round(le.pageY)-(((Ee=L.current)==null?void 0:Ee.y)??0))}},oe=le=>{Z.x<=10&&Z.y<=10?le.preventDefault():v.contains(le.target)||U(!1),document.removeEventListener("pointermove",z),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",z),document.addEventListener("pointerup",oe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",z),document.removeEventListener("pointerup",oe,{capture:!0})}}},[v,U,L]),m.useEffect(()=>{const Z=()=>U(!1);return window.addEventListener("blur",Z),window.addEventListener("resize",Z),()=>{window.removeEventListener("blur",Z),window.removeEventListener("resize",Z)}},[U]);const[Q,he]=YR(Z=>{const z=D().filter(ve=>!ve.disabled),oe=z.find(ve=>ve.ref.current===document.activeElement),le=XR(z,Z,oe);le&&setTimeout(()=>le.ref.current.focus())}),ne=m.useCallback((Z,z,oe)=>{const le=!se.current&&!oe;(w.value!==void 0&&w.value===z||le)&&(T(Z),le&&(se.current=!0))},[w.value]),me=m.useCallback(()=>v==null?void 0:v.focus(),[v]),Ne=m.useCallback((Z,z,oe)=>{const le=!se.current&&!oe;(w.value!==void 0&&w.value===z||le)&&A(Z)},[w.value]),We=r==="popper"?Ny:DR,He=We===Ny?{side:l,sideOffset:c,align:u,alignOffset:h,arrowPadding:f,collisionBoundary:p,collisionPadding:g,sticky:N,hideWhenDetached:x,avoidCollisions:b}:{};return i.jsx(RR,{scope:n,content:v,viewport:I,onViewportChange:R,itemRefCallback:ne,selectedItem:S,onItemLeave:me,itemTextRefCallback:Ne,focusSelectedItem:X,selectedItemText:P,position:r,isPositioned:M,searchRef:Q,children:i.jsx(Yp,{as:YH,allowPinchZoom:!0,children:i.jsx(Kp,{asChild:!0,trapped:w.open,onMountAutoFocus:Z=>{Z.preventDefault()},onUnmountAutoFocus:ce(s,Z=>{var z;(z=w.trigger)==null||z.focus({preventScroll:!0}),Z.preventDefault()}),children:i.jsx(zc,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:Z=>Z.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:i.jsx(We,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:Z=>Z.preventDefault(),..._,...He,onPlaced:()=>$(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:ce(_.onKeyDown,Z=>{const z=Z.ctrlKey||Z.altKey||Z.metaKey;if(Z.key==="Tab"&&Z.preventDefault(),!z&&Z.key.length===1&&he(Z.key),["ArrowUp","ArrowDown","Home","End"].includes(Z.key)){let le=D().filter(ve=>!ve.disabled).map(ve=>ve.ref.current);if(["ArrowUp","End"].includes(Z.key)&&(le=le.slice().reverse()),["ArrowUp","ArrowDown"].includes(Z.key)){const ve=Z.target,Ee=le.indexOf(ve);le=le.slice(Ee+1)}setTimeout(()=>W(le)),Z.preventDefault()}})})})})})})});kR.displayName=QH;var XH="SelectItemAlignedPosition",DR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,a=io(rl,n),o=ao(rl,n),[l,c]=m.useState(null),[u,h]=m.useState(null),f=rt(e,j=>h(j)),p=ag(n),g=m.useRef(!1),N=m.useRef(!0),{viewport:x,selectedItem:b,selectedItemText:_,focusSelectedItem:w}=o,v=m.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&u&&x&&b&&_){const j=a.trigger.getBoundingClientRect(),S=u.getBoundingClientRect(),T=a.valueNode.getBoundingClientRect(),P=_.getBoundingClientRect();if(a.dir!=="rtl"){const ve=P.left-S.left,Ee=T.left-ve,Be=j.left-Ee,ht=j.width+Be,st=Math.max(ht,S.width),gt=window.innerWidth-us,Ct=TE(Ee,[us,Math.max(us,gt-st)]);l.style.minWidth=ht+"px",l.style.left=Ct+"px"}else{const ve=S.right-P.right,Ee=window.innerWidth-T.right-ve,Be=window.innerWidth-j.right-Ee,ht=j.width+Be,st=Math.max(ht,S.width),gt=window.innerWidth-us,Ct=TE(Ee,[us,Math.max(us,gt-st)]);l.style.minWidth=ht+"px",l.style.right=Ct+"px"}const A=p(),D=window.innerHeight-us*2,M=x.scrollHeight,$=window.getComputedStyle(u),se=parseInt($.borderTopWidth,10),W=parseInt($.paddingTop,10),X=parseInt($.borderBottomWidth,10),U=parseInt($.paddingBottom,10),L=se+W+M+U+X,Q=Math.min(b.offsetHeight*5,L),he=window.getComputedStyle(x),ne=parseInt(he.paddingTop,10),me=parseInt(he.paddingBottom,10),Ne=j.top+j.height/2-us,We=D-Ne,He=b.offsetHeight/2,Z=b.offsetTop+He,z=se+W+Z,oe=L-z;if(z<=Ne){const ve=A.length>0&&b===A[A.length-1].ref.current;l.style.bottom="0px";const Ee=u.clientHeight-x.offsetTop-x.offsetHeight,Be=Math.max(We,He+(ve?me:0)+Ee+X),ht=z+Be;l.style.height=ht+"px"}else{const ve=A.length>0&&b===A[0].ref.current;l.style.top="0px";const Be=Math.max(Ne,se+x.offsetTop+(ve?ne:0)+He)+oe;l.style.height=Be+"px",x.scrollTop=z-Ne+x.offsetTop}l.style.margin=`${us}px 0`,l.style.minHeight=Q+"px",l.style.maxHeight=D+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,a.trigger,a.valueNode,l,u,x,b,_,a.dir,r]);ln(()=>v(),[v]);const[C,I]=m.useState();ln(()=>{u&&I(window.getComputedStyle(u).zIndex)},[u]);const R=m.useCallback(j=>{j&&N.current===!0&&(v(),w==null||w(),N.current=!1)},[v,w]);return i.jsx(ZH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:i.jsx(je.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});DR.displayName=XH;var JH="SelectPopperPosition",Ny=m.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=us,...a}=t,o=og(n);return i.jsx(Bv,{...o,...a,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ny.displayName=JH;var[ZH,f1]=ru(rl,{}),_y="SelectViewport",MR=m.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,a=ao(_y,n),o=f1(_y,n),l=rt(e,a.onViewportChange),c=m.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(ig.Slot,{scope:n,children:i.jsx(je.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:ce(s.onScroll,u=>{const h=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&f){const g=Math.abs(c.current-h.scrollTop);if(g>0){const N=window.innerHeight-us*2,x=parseFloat(f.style.minHeight),b=parseFloat(f.style.height),_=Math.max(x,b);if(_<N){const w=_+g,v=Math.min(N,w),C=w-v;f.style.height=v+"px",f.style.bottom==="0px"&&(h.scrollTop=C>0?C:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});MR.displayName=_y;var OR="SelectGroup",[eq,tq]=ru(OR),nq=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Xs();return i.jsx(eq,{scope:n,id:s,children:i.jsx(je.div,{role:"group","aria-labelledby":s,...r,ref:e})})});nq.displayName=OR;var LR="SelectLabel",FR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=tq(LR,n);return i.jsx(je.div,{id:s.id,...r,ref:e})});FR.displayName=LR;var $m="SelectItem",[rq,VR]=ru($m),UR=m.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:a,...o}=t,l=io($m,n),c=ao($m,n),u=l.value===r,[h,f]=m.useState(a??""),[p,g]=m.useState(!1),N=rt(e,w=>{var v;return(v=c.itemRefCallback)==null?void 0:v.call(c,w,r,s)}),x=Xs(),b=m.useRef("touch"),_=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(rq,{scope:n,value:r,disabled:s,textId:x,isSelected:u,onItemTextChange:m.useCallback(w=>{f(v=>v||((w==null?void 0:w.textContent)??"").trim())},[]),children:i.jsx(ig.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:i.jsx(je.div,{role:"option","aria-labelledby":x,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:N,onFocus:ce(o.onFocus,()=>g(!0)),onBlur:ce(o.onBlur,()=>g(!1)),onClick:ce(o.onClick,()=>{b.current!=="mouse"&&_()}),onPointerUp:ce(o.onPointerUp,()=>{b.current==="mouse"&&_()}),onPointerDown:ce(o.onPointerDown,w=>{b.current=w.pointerType}),onPointerMove:ce(o.onPointerMove,w=>{var v;b.current=w.pointerType,s?(v=c.onItemLeave)==null||v.call(c):b.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ce(o.onPointerLeave,w=>{var v;w.currentTarget===document.activeElement&&((v=c.onItemLeave)==null||v.call(c))}),onKeyDown:ce(o.onKeyDown,w=>{var C;((C=c.searchRef)==null?void 0:C.current)!==""&&w.key===" "||(BH.includes(w.key)&&_(),w.key===" "&&w.preventDefault())})})})})});UR.displayName=$m;var Du="SelectItemText",$R=m.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...a}=t,o=io(Du,n),l=ao(Du,n),c=VR(Du,n),u=qH(Du,n),[h,f]=m.useState(null),p=rt(e,_=>f(_),c.onItemTextChange,_=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,_,c.value,c.disabled)}),g=h==null?void 0:h.textContent,N=m.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:x,onNativeOptionRemove:b}=u;return ln(()=>(x(N),()=>b(N)),[x,b,N]),i.jsxs(i.Fragment,{children:[i.jsx(je.span,{id:c.textId,...a,ref:p}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?al.createPortal(a.children,o.valueNode):null]})});$R.displayName=Du;var BR="SelectItemIndicator",zR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return VR(BR,n).isSelected?i.jsx(je.span,{"aria-hidden":!0,...r,ref:e}):null});zR.displayName=BR;var Ey="SelectScrollUpButton",WR=m.forwardRef((t,e)=>{const n=ao(Ey,t.__scopeSelect),r=f1(Ey,t.__scopeSelect),[s,a]=m.useState(!1),o=rt(e,r.onScrollButtonChange);return ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;a(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(qR,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});WR.displayName=Ey;var jy="SelectScrollDownButton",HR=m.forwardRef((t,e)=>{const n=ao(jy,t.__scopeSelect),r=f1(jy,t.__scopeSelect),[s,a]=m.useState(!1),o=rt(e,r.onScrollButtonChange);return ln(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<u;a(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(qR,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});HR.displayName=jy;var qR=m.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,a=ao("SelectScrollButton",n),o=m.useRef(null),l=ag(n),c=m.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return m.useEffect(()=>()=>c(),[c]),ln(()=>{var h;const u=l().find(f=>f.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),i.jsx(je.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:ce(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:ce(s.onPointerMove,()=>{var u;(u=a.onItemLeave)==null||u.call(a),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:ce(s.onPointerLeave,()=>{c()})})}),sq="SelectSeparator",KR=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(je.div,{"aria-hidden":!0,...r,ref:e})});KR.displayName=sq;var Sy="SelectArrow",iq=m.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=og(n),a=io(Sy,n),o=ao(Sy,n);return a.open&&o.position==="popper"?i.jsx(zv,{...s,...r,ref:e}):null});iq.displayName=Sy;var aq="SelectBubbleInput",GR=m.forwardRef(({__scopeSelect:t,value:e,...n},r)=>{const s=m.useRef(null),a=rt(r,s),o=_R(e);return m.useEffect(()=>{const l=s.current;if(!l)return;const c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==e&&h){const f=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(f)}},[o,e]),i.jsx(je.select,{...n,style:{...aS,...n.style},ref:a,defaultValue:e})});GR.displayName=aq;function QR(t){return t===""||t===void 0}function YR(t){const e=nr(t),n=m.useRef(""),r=m.useRef(0),s=m.useCallback(o=>{const l=n.current+o;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),a=m.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,a]}function XR(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,a=n?t.indexOf(n):-1;let o=oq(t,Math.max(a,0));s.length===1&&(o=o.filter(u=>u!==n));const c=o.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function oq(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var lq=ER,JR=SR,cq=IR,uq=CR,dq=AR,ZR=PR,hq=MR,ek=FR,tk=UR,fq=$R,mq=zR,nk=WR,rk=HR,sk=KR;const lg=lq,cg=cq,xh=m.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(JR,{ref:r,className:Se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(uq,{asChild:!0,children:i.jsx(Iv,{className:"h-4 w-4 opacity-50"})})]}));xh.displayName=JR.displayName;const ik=m.forwardRef(({className:t,...e},n)=>i.jsx(nk,{ref:n,className:Se("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(N3,{className:"h-4 w-4"})}));ik.displayName=nk.displayName;const ak=m.forwardRef(({className:t,...e},n)=>i.jsx(rk,{ref:n,className:Se("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(Iv,{className:"h-4 w-4"})}));ak.displayName=rk.displayName;const yh=m.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(dq,{children:i.jsxs(ZR,{ref:s,className:Se("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(ik,{}),i.jsx(hq,{className:Se("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(ak,{})]})}));yh.displayName=ZR.displayName;const pq=m.forwardRef(({className:t,...e},n)=>i.jsx(ek,{ref:n,className:Se("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));pq.displayName=ek.displayName;const bi=m.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(tk,{ref:r,className:Se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(mq,{children:i.jsx(AS,{className:"h-4 w-4"})})}),i.jsx(fq,{children:e})]}));bi.displayName=tk.displayName;const gq=m.forwardRef(({className:t,...e},n)=>i.jsx(sk,{ref:n,className:Se("-mx-1 my-1 h-px bg-muted",t),...e}));gq.displayName=sk.displayName;const xq=()=>{const{toast:t}=_n(),{signOut:e,user:n}=Kt(),[r,s]=m.useState("01030302038"),[a,o]=m.useState(""),[l,c]=m.useState(""),[u,h]=m.useState("transfer"),[f,p]=m.useState([]);m.useState("all"),m.useState(!1),m.useState(""),m.useState([]),m.useState(null),m.useState(!1),m.useState([]),m.useState([]),m.useState(!1),m.useState("daily");const[g,N]=m.useState([]),[x,b]=m.useState(0),[_,w]=m.useState({});m.useState(!1),m.useState(!1),m.useState(!1),m.useState(!1),m.useState(!1),m.useState(""),m.useState(!1);const[v,C]=m.useState(!1),I=async j=>{if(n)try{const S=await xs.getById(n.uid);if(S!=null&&S.shopId){const T=tt(Te,"dashboardData",S.shopId);await Ui(T,j)}}catch(S){console.error("Error saving to Firebase:",S),t({title:"خطأ في الحفظ",description:"حدث خطأ أثناء حفظ البيانات في Firebase",variant:"destructive"})}};m.useEffect(()=>{if(!n)return;(async()=>{C(!0);try{const S=await xs.getById(n.uid);if(S!=null&&S.shopId){const T=tt(Te,"dashboardData",S.shopId),P=await mn(T);if(P.exists()){const A=P.data();b(A.cashBalance||0),w(A.walletBalances||{"wallet-1":5e3,"wallet-2":3e3}),N(A.deletedTransactions||[])}else{const A={cashBalance:0,walletBalances:{"wallet-1":5e3,"wallet-2":3e3},deletedTransactions:[]};await Ir(T,A),b(A.cashBalance),w(A.walletBalances),N(A.deletedTransactions)}}}catch(S){console.error("Error loading data from Firebase:",S);const T=localStorage.getItem("dashboardCashBalance");T&&b(parseFloat(T));const P=localStorage.getItem("dashboardWalletBalances");w(P?JSON.parse(P):{"wallet-1":5e3,"wallet-2":3e3})}finally{C(!1)}})()},[n]);const R=async j=>{if(j.preventDefault(),u==="transfer"){if(!r||!a||!l){t({title:"خطأ",description:"يرجى ملء جميع الحقول المطلوبة",variant:"destructive"});return}const S={id:Date.now().toString(),type:"send",senderPhone:r,receiverPhone:a,amount:parseFloat(l),status:"pending",createdAt:new Date,withdrawnAmount:0,sentAmount:parseFloat(l)},T=[S,...f];p(T),await I({transactions:T});const P=parseFloat(l)*.02,A=x-P;b(A),await I({cashBalance:A}),t({title:"تم إرسال التحويل",description:"جاري معالجة التحويل..."}),setTimeout(async()=>{const M=[{...S,status:"completed"},...f];p(M),await I({transactions:M}),t({title:"تم التحويل بنجاح",description:`تم تحويل ${l} جنيه إلى ${a} وخصم عمولة ${P} جنيه من الدرج`})},2e3),s("01030302038"),o(""),c("")}};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:[v&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white p-6 rounded-lg",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-2 text-center",children:"جاري تحميل البيانات..."})]})}),i.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"لوحة تحكم الإدارة"}),i.jsxs(V,{onClick:e,variant:"outline",className:"flex items-center gap-2",children:[i.jsx(Gd,{className:"h-4 w-4"}),"تسجيل الخروج"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsxs(Le,{children:[i.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium",children:"الرصيد النقدي"}),i.jsx(yr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx($e,{children:i.jsxs("div",{className:"text-2xl font-bold",children:[x.toLocaleString()," جنيه"]})})]}),i.jsxs(Le,{children:[i.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium",children:"إجمالي المحافظ"}),i.jsx(bs,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx($e,{children:i.jsxs("div",{className:"text-2xl font-bold",children:[Object.values(_).reduce((j,S)=>j+S,0).toLocaleString()," جنيه"]})})]}),i.jsxs(Le,{children:[i.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium",children:"المعاملات اليوم"}),i.jsx(_f,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx($e,{children:i.jsx("div",{className:"text-2xl font-bold",children:f.length})})]}),i.jsxs(Le,{children:[i.jsxs(Ze,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[i.jsx(ct,{className:"text-sm font-medium",children:"إجمالي اليوم"}),i.jsx(yr,{className:"h-4 w-4 text-muted-foreground"})]}),i.jsx($e,{children:i.jsxs("div",{className:"text-2xl font-bold",children:[f.reduce((j,S)=>j+S.amount,0).toLocaleString()," جنيه"]})})]})]}),i.jsxs(Le,{children:[i.jsx(Ze,{children:i.jsx(ct,{children:"إجراء معاملة جديدة"})}),i.jsx($e,{children:i.jsxs("form",{onSubmit:R,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"نوع المعاملة"}),i.jsxs(lg,{value:u,onValueChange:j=>h(j),children:[i.jsx(xh,{children:i.jsx(cg,{})}),i.jsxs(yh,{children:[i.jsx(bi,{value:"transfer",children:"تحويل"}),i.jsx(bi,{value:"withdraw",children:"سحب"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"رقم المرسل"}),i.jsx(de,{type:"tel",value:r,onChange:j=>s(j.target.value),placeholder:"01xxxxxxxxx"})]}),u==="transfer"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"رقم المستقبل"}),i.jsx(de,{type:"tel",value:a,onChange:j=>o(j.target.value),placeholder:"01xxxxxxxxx"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"المبلغ"}),i.jsx(de,{type:"number",value:l,onChange:j=>c(j.target.value),placeholder:"0.00"})]})]}),i.jsx(V,{type:"submit",className:"w-full",children:u==="transfer"?"إرسال التحويل":"تنفيذ السحب"})]})})]}),i.jsxs(Le,{children:[i.jsx(Ze,{children:i.jsx(ct,{children:"المعاملات الأخيرة"})}),i.jsx($e,{children:i.jsx("div",{className:"space-y-4",children:f.slice(0,10).map(j=>i.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[j.status==="completed"&&i.jsx(wn,{className:"h-5 w-5 text-green-500"}),j.status==="pending"&&i.jsx(es,{className:"h-5 w-5 text-yellow-500"}),j.status==="failed"&&i.jsx(Kd,{className:"h-5 w-5 text-red-500"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:[j.type==="send"?"تحويل":"سحب"," - ",j.amount.toLocaleString()," جنيه"]}),i.jsxs("p",{className:"text-sm text-gray-500",children:["من ",j.senderPhone," إلى ",j.receiverPhone]})]})]}),i.jsx(Xt,{variant:j.status==="completed"?"default":j.status==="pending"?"secondary":"destructive",children:j.status==="completed"?"مكتمل":j.status==="pending"?"قيد المعالجة":"فشل"})]},j.id))})})]})]})]})},yq=()=>{const t=Gn(),[e,n]=m.useState(!1),[r,s]=m.useState(!0);return m.useEffect(()=>{(()=>{const o=localStorage.getItem("dashboardAuth"),l=localStorage.getItem("dashboardUser");if(o==="true"&&l)try{const c=JSON.parse(l),u=new Date(c.loginTime);(new Date().getTime()-u.getTime())/(1e3*60*60)<24?n(!0):(localStorage.removeItem("dashboardAuth"),localStorage.removeItem("dashboardUser"),t("/dashboard/login"))}catch(c){console.error("Error parsing user data:",c),t("/dashboard/login")}else t("/dashboard/login");s(!1)})()},[t]),r?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"جاري التحقق من صلاحية الدخول..."})]})}):e?i.jsx(xq,{}):null};var ug="Tabs",[vq,BK]=Fr(ug,[Gp]),ok=Gp(),[wq,m1]=vq(ug),lk=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:c="automatic",...u}=t,h=qp(l),[f,p]=Va({prop:r,onChange:s,defaultProp:a??"",caller:ug});return i.jsx(wq,{scope:n,baseId:Xs(),value:f,onValueChange:p,orientation:o,dir:h,activationMode:c,children:i.jsx(je.div,{dir:h,"data-orientation":o,...u,ref:e})})});lk.displayName=ug;var ck="TabsList",uk=m.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,a=m1(ck,n),o=ok(n);return i.jsx(kA,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(je.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:e})})});uk.displayName=ck;var dk="TabsTrigger",hk=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=t,o=m1(dk,n),l=ok(n),c=pk(o.baseId,r),u=gk(o.baseId,r),h=r===o.value;return i.jsx(DA,{asChild:!0,...l,focusable:!s,active:h,children:i.jsx(je.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":u,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...a,ref:e,onMouseDown:ce(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:ce(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:ce(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});hk.displayName=dk;var fk="TabsContent",mk=m.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=t,l=m1(fk,n),c=pk(l.baseId,r),u=gk(l.baseId,r),h=r===l.value,f=m.useRef(h);return m.useEffect(()=>{const p=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(p)},[]),i.jsx(Ps,{present:s||h,children:({present:p})=>i.jsx(je.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!p,id:u,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:p&&a})})});mk.displayName=fk;function pk(t,e){return`${t}-trigger-${e}`}function gk(t,e){return`${t}-content-${e}`}var bq=lk,xk=uk,yk=hk,vk=mk;const Nq=bq,wk=m.forwardRef(({className:t,...e},n)=>i.jsx(xk,{ref:n,className:Se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));wk.displayName=xk.displayName;const Ll=m.forwardRef(({className:t,...e},n)=>i.jsx(yk,{ref:n,className:Se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Ll.displayName=yk.displayName;const Fl=m.forwardRef(({className:t,...e},n)=>i.jsx(vk,{ref:n,className:Se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Fl.displayName=vk.displayName;var p1="Progress",g1=100,[_q,zK]=Fr(p1),[Eq,jq]=_q(p1),bk=m.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=Sq,...o}=t;(s||s===0)&&!IE(s)&&console.error(Tq(`${s}`,"Progress"));const l=IE(s)?s:g1;r!==null&&!CE(r,l)&&console.error(Iq(`${r}`,"Progress"));const c=CE(r,l)?r:null,u=Bm(c)?a(c,l):void 0;return i.jsx(Eq,{scope:n,value:c,max:l,children:i.jsx(je.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Bm(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":Ek(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});bk.displayName=p1;var Nk="ProgressIndicator",_k=m.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=jq(Nk,n);return i.jsx(je.div,{"data-state":Ek(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});_k.displayName=Nk;function Sq(t,e){return`${Math.round(t/e*100)}%`}function Ek(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Bm(t){return typeof t=="number"}function IE(t){return Bm(t)&&!isNaN(t)&&t>0}function CE(t,e){return Bm(t)&&!isNaN(t)&&t<=e&&t>=0}function Tq(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${g1}\`.`}function Iq(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${g1} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var jk=bk,Cq=_k;const Ni=m.forwardRef(({className:t,value:e,...n},r)=>i.jsx(jk,{ref:r,className:Se("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:i.jsx(Cq,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Ni.displayName=jk.displayName;const Aq=[{id:"vodafone",name:"فودافون كاش",ownerName:"أحمد محمد علي",nationalId:"29012345678901"},{id:"etisalat",name:"اتصالات كاش",ownerName:"فاطمة حسن محمود",nationalId:"28506789012345"},{id:"orange",name:"أورنج كاش",ownerName:"محمد أحمد السيد",nationalId:"29309876543210"},{id:"we_pay",name:"وي باي",ownerName:"نورا عبد الرحمن",nationalId:"29112345678901"},{id:"smart_wallet",name:"سمارت ولت",ownerName:"خالد محمد عبد الله",nationalId:"28809876543210"},{id:"access_pay",name:"أكسس باي",ownerName:"مريم أحمد حسن",nationalId:"29456789012345"},{id:"insta_pay",name:"انستا باي",ownerName:"عمر سعد محمد",nationalId:"29012345678901"}],Pq=({isOpen:t,onClose:e,onWalletSelect:n})=>{const{user:r}=Kt(),[s,a]=m.useState([]),[o,l]=m.useState(!1),c=()=>`wallets_${(r==null?void 0:r.uid)||"default"}`,u=async(N,x)=>{const b=new Date().getMonth(),_=new Date().getFullYear(),w=x.filter(I=>{const R=new Date(I.createdAt);return R.getMonth()===b&&R.getFullYear()===_&&I.walletId===N}),v=w.filter(I=>I.type==="withdrawal").reduce((I,R)=>I+(R.amount||0),0),C=w.filter(I=>I.type==="transfer").reduce((I,R)=>I+(R.amount||0),0);return{withdrawalUsage:v,transferUsage:C}},h=N=>{const x=new Date().toISOString().split("T")[0],b=N.lastResetDate;if(!b)return{...N,monthlyWithdrawalUsage:0,monthlyTransferUsage:0,lastResetDate:x};const _=new Date(b),w=new Date;return _.getMonth()!==w.getMonth()||_.getFullYear()!==w.getFullYear()?{...N,monthlyWithdrawalUsage:0,monthlyTransferUsage:0,lastResetDate:x}:N};m.useEffect(()=>{if(!(r!=null&&r.uid)||!t)return;(async()=>{l(!0);try{const x=await mr.getByMerchantId(r.uid),b=await fh.getByUserId(r.uid),w=(await Promise.all(x.map(async v=>{const{withdrawalUsage:C,transferUsage:I}=await u(v.id,b);return{id:v.id,name:v.label||"محفظة بدون اسم",phone:v.msisdn,nationalId:v.nationalId||"",isDefault:!1,monthlyWithdrawalLimit:v.withdrawLimit||2e5,monthlyTransferLimit:v.transferLimit||2e5,monthlyWithdrawalUsage:C,monthlyTransferUsage:I,lastResetDate:new Date().toISOString().split("T")[0],walletProvider:v.walletProvider||""}}))).map(h);a(w)}catch(x){console.error("Error loading wallets:",x);const b=localStorage.getItem(c());if(b){const _=JSON.parse(b);a(_.map(w=>({...w,phone:w.phone||w.phoneNumber,monthlyWithdrawalLimit:w.monthlyWithdrawalLimit||2e5,monthlyTransferLimit:w.monthlyTransferLimit||2e5})))}}finally{l(!1)}})()},[r==null?void 0:r.uid,t]);const f=N=>Aq.find(x=>x.id===N),p=(N,x)=>x>0?Math.min(N/x*100,100):0,g=N=>new Intl.NumberFormat("ar-EG").format(N);return i.jsx(Zt,{open:t,onOpenChange:e,children:i.jsxs(zt,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Wt,{className:"pb-4",children:i.jsxs(Ht,{className:"flex items-center gap-2 text-lg",children:[i.jsx(bs,{className:"h-5 w-5"}),"الاطلاع على جميع المحافظ",i.jsxs(Xt,{variant:"secondary",className:"mr-2",children:[s.length," محفظة"]})]})}),o?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-600",children:"جاري تحميل المحافظ..."})]})}):s.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(bs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"لا توجد محافظ مضافة حتى الآن"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(N=>{const x=f(N.walletProvider||""),b=p(N.monthlyWithdrawalUsage||0,N.monthlyWithdrawalLimit),_=p(N.monthlyTransferUsage||0,N.monthlyTransferLimit);return i.jsxs(Le,{className:"cursor-pointer hover:shadow-lg transition-shadow border-2 hover:border-blue-300",onClick:()=>n(N),children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs(ct,{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cv,{className:"h-4 w-4"}),i.jsx("span",{children:N.name})]}),N.isDefault&&i.jsxs(Xt,{variant:"default",className:"text-xs",children:[i.jsx(ac,{className:"h-3 w-3 mr-1"}),"افتراضية"]})]})}),i.jsxs($e,{className:"space-y-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Ss,{className:"h-3 w-3 text-gray-500"}),i.jsx("span",{className:"font-mono",children:N.phone})]}),N.nationalId&&i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(lm,{className:"h-3 w-3 text-gray-500"}),i.jsx("span",{className:"font-mono",children:N.nationalId})]}),x&&i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(CS,{className:"h-3 w-3 text-gray-500"}),i.jsx("span",{children:x.name})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(jf,{className:"h-3 w-3 text-red-500"}),"السحب الشهري"]}),i.jsxs("span",{className:"font-mono",children:[g(N.monthlyWithdrawalUsage||0)," / ",g(N.monthlyWithdrawalLimit)]})]}),i.jsx(Ni,{value:b,className:"h-2"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(oc,{className:"h-3 w-3 text-green-500"}),"التحويل الشهري"]}),i.jsxs("span",{className:"font-mono",children:[g(N.monthlyTransferUsage||0)," / ",g(N.monthlyTransferLimit)]})]}),i.jsx(Ni,{value:_,className:"h-2"})]}),i.jsx(V,{variant:"outline",size:"sm",className:"w-full text-xs",onClick:w=>{w.stopPropagation(),n(N)},children:"عرض التفاصيل الكاملة"})]})]},N.id)})}),i.jsx("div",{className:"flex justify-end pt-4 border-t",children:i.jsxs(V,{onClick:e,variant:"outline",children:[i.jsx(Mo,{className:"h-4 w-4 mr-2"}),"إغلاق"]})})]})})};var Rq="Separator",AE="horizontal",kq=["horizontal","vertical"],Sk=m.forwardRef((t,e)=>{const{decorative:n,orientation:r=AE,...s}=t,a=Dq(r)?r:AE,l=n?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return i.jsx(je.div,{"data-orientation":a,...l,...s,ref:e})});Sk.displayName=Rq;function Dq(t){return kq.includes(t)}var Tk=Sk;const x1=m.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(Tk,{ref:s,decorative:n,orientation:e,className:Se("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));x1.displayName=Tk.displayName;const Mq=[{id:"vodafone",name:"فودافون كاش",ownerName:"أحمد محمد علي",nationalId:"29012345678901"},{id:"etisalat",name:"اتصالات كاش",ownerName:"فاطمة حسن محمود",nationalId:"28506789012345"},{id:"orange",name:"أورنج كاش",ownerName:"محمد أحمد السيد",nationalId:"29309876543210"},{id:"we_pay",name:"وي باي",ownerName:"نورا عبد الرحمن",nationalId:"29112345678901"},{id:"smart_wallet",name:"سمارت ولت",ownerName:"خالد محمد عبد الله",nationalId:"28809876543210"},{id:"access_pay",name:"أكسس باي",ownerName:"مريم أحمد حسن",nationalId:"29456789012345"},{id:"insta_pay",name:"انستا باي",ownerName:"عمر سعد محمد",nationalId:"29012345678901"}],Oq=({wallet:t,isOpen:e,onClose:n,onBack:r})=>{const{user:s}=Kt(),[a,o]=m.useState([]),[l,c]=m.useState(!1),[u,h]=m.useState("month");if(m.useEffect(()=>{if(!t||!(s!=null&&s.uid)||!e)return;(async()=>{c(!0);try{const M=(await fh.getByUserId(s.uid)).filter($=>$.walletId===t.id).sort(($,se)=>new Date(se.createdAt).getTime()-new Date($.createdAt).getTime());o(M)}catch(D){console.error("Error loading transactions:",D)}finally{c(!1)}})()},[t,s==null?void 0:s.uid,e]),!t)return null;const f=A=>Mq.find(D=>D.id===A),p=(A,D)=>D>0?Math.min(A/D*100,100):0,g=A=>new Intl.NumberFormat("ar-EG").format(A),N=A=>new Date(A).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=(()=>{const A=new Date;let D;switch(u){case"week":D=new Date(A.getTime()-7*24*60*60*1e3);break;case"month":D=new Date(A.getFullYear(),A.getMonth(),1);break;default:return a}return a.filter(M=>new Date(M.createdAt)>=D)})(),_=b.filter(A=>A.type==="withdrawal"&&A.status==="completed").reduce((A,D)=>A+D.amount,0),w=b.filter(A=>A.type==="transfer"&&A.status==="completed").reduce((A,D)=>A+D.amount,0),v=b.filter(A=>A.type==="deposit"&&A.status==="completed").reduce((A,D)=>A+D.amount,0),C=f(t.walletProvider||""),I=p(t.monthlyWithdrawalUsage||0,t.monthlyWithdrawalLimit),R=p(t.monthlyTransferUsage||0,t.monthlyTransferLimit),j=A=>{switch(A){case"withdrawal":return i.jsx(jf,{className:"h-4 w-4 text-red-500"});case"transfer":return i.jsx(oc,{className:"h-4 w-4 text-blue-500"});case"deposit":return i.jsx(yr,{className:"h-4 w-4 text-green-500"});default:return i.jsx(Hu,{className:"h-4 w-4 text-gray-500"})}},S=A=>{switch(A){case"completed":return i.jsx(wn,{className:"h-4 w-4 text-green-500"});case"pending":return i.jsx(es,{className:"h-4 w-4 text-yellow-500"});case"failed":return i.jsx(Kd,{className:"h-4 w-4 text-red-500"});default:return i.jsx(Bi,{className:"h-4 w-4 text-gray-500"})}},T=A=>{switch(A){case"withdrawal":return"سحب";case"transfer":return"تحويل";case"deposit":return"إيداع";default:return"معاملة"}},P=A=>{switch(A){case"completed":return"مكتملة";case"pending":return"قيد الانتظار";case"failed":return"فاشلة";default:return"غير محدد"}};return i.jsx(Zt,{open:e,onOpenChange:n,children:i.jsxs(zt,{className:"max-w-6xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Wt,{className:"pb-4",children:i.jsxs(Ht,{className:"flex items-center gap-2 text-lg",children:[i.jsx(Cv,{className:"h-5 w-5"}),"تفاصيل المحفظة: ",t.name,t.isDefault&&i.jsxs(Xt,{variant:"default",className:"mr-2",children:[i.jsx(ac,{className:"h-3 w-3 mr-1"}),"افتراضية"]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[i.jsxs(Le,{children:[i.jsx(Ze,{children:i.jsxs(ct,{className:"text-sm flex items-center gap-2",children:[i.jsx(lm,{className:"h-4 w-4"}),"المعلومات الأساسية"]})}),i.jsxs($e,{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Ss,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"font-mono",children:t.phone})]}),t.nationalId&&i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(lm,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"font-mono",children:t.nationalId})]}),C&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(CS,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{children:C.name})]}),i.jsxs("div",{className:"text-xs text-gray-600 pr-6",children:[i.jsxs("div",{children:["المالك: ",C.ownerName]}),i.jsxs("div",{className:"font-mono",children:["الرقم القومي: ",C.nationalId]})]})]}),t.lastResetDate&&i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx(Pi,{className:"h-4 w-4 text-gray-500"}),i.jsxs("span",{children:["آخر إعادة تعيين: ",new Date(t.lastResetDate).toLocaleDateString("ar-EG")]})]})]})]}),i.jsxs(Le,{children:[i.jsx(Ze,{children:i.jsxs(ct,{className:"text-sm flex items-center gap-2",children:[i.jsx(Tv,{className:"h-4 w-4"}),"حدود الاستخدام الشهري"]})}),i.jsxs($e,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(jf,{className:"h-3 w-3 text-red-500"}),"السحب الشهري"]}),i.jsxs("span",{className:"font-mono",children:[g(t.monthlyWithdrawalUsage||0)," / ",g(t.monthlyWithdrawalLimit)]})]}),i.jsx(Ni,{value:I,className:"h-2"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["متبقي: ",g(t.monthlyWithdrawalLimit-(t.monthlyWithdrawalUsage||0))," جنيه"]})]}),i.jsx(x1,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(oc,{className:"h-3 w-3 text-green-500"}),"التحويل الشهري"]}),i.jsxs("span",{className:"font-mono",children:[g(t.monthlyTransferUsage||0)," / ",g(t.monthlyTransferLimit)]})]}),i.jsx(Ni,{value:R,className:"h-2"}),i.jsxs("div",{className:"text-xs text-gray-600",children:["متبقي: ",g(t.monthlyTransferLimit-(t.monthlyTransferUsage||0))," جنيه"]})]})]})]})]}),i.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsx(Le,{children:i.jsxs($e,{className:"p-4 text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-2",children:i.jsx(jf,{className:"h-5 w-5 text-red-500"})}),i.jsx("div",{className:"text-lg font-bold",children:g(_)}),i.jsx("div",{className:"text-xs text-gray-600",children:"إجمالي السحب"})]})}),i.jsx(Le,{children:i.jsxs($e,{className:"p-4 text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-2",children:i.jsx(oc,{className:"h-5 w-5 text-blue-500"})}),i.jsx("div",{className:"text-lg font-bold",children:g(w)}),i.jsx("div",{className:"text-xs text-gray-600",children:"إجمالي التحويل"})]})}),i.jsx(Le,{children:i.jsxs($e,{className:"p-4 text-center",children:[i.jsx("div",{className:"flex items-center justify-center mb-2",children:i.jsx(yr,{className:"h-5 w-5 text-green-500"})}),i.jsx("div",{className:"text-lg font-bold",children:g(v)}),i.jsx("div",{className:"text-xs text-gray-600",children:"إجمالي الإيداع"})]})})]}),i.jsxs(Le,{children:[i.jsx(Ze,{children:i.jsxs(ct,{className:"text-sm flex items-center justify-between",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx(Hu,{className:"h-4 w-4"}),"سجل المعاملات"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(V,{size:"sm",variant:u==="week"?"default":"outline",onClick:()=>h("week"),className:"text-xs",children:"أسبوع"}),i.jsx(V,{size:"sm",variant:u==="month"?"default":"outline",onClick:()=>h("month"),className:"text-xs",children:"شهر"}),i.jsx(V,{size:"sm",variant:u==="all"?"default":"outline",onClick:()=>h("all"),className:"text-xs",children:"الكل"})]})]})}),i.jsx($e,{children:l?i.jsx("div",{className:"flex justify-center items-center py-8",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-600",children:"جاري تحميل المعاملات..."})]})}):b.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Hu,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),i.jsx("p",{className:"text-gray-600",children:"لا توجد معاملات في هذه الفترة"})]}):i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:b.map(A=>i.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[j(A.type),i.jsxs("div",{children:[i.jsxs("div",{className:"text-sm font-medium",children:[T(A.type)," - ",g(A.amount)," جنيه"]}),i.jsx("div",{className:"text-xs text-gray-600",children:N(A.createdAt)}),A.description&&i.jsx("div",{className:"text-xs text-gray-500 mt-1",children:A.description})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[S(A.status),i.jsx("span",{className:"text-xs",children:P(A.status)})]})]},A.id))})})]})]})]}),i.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[i.jsxs(V,{onClick:r,variant:"outline",children:[i.jsx(Mo,{className:"h-4 w-4 mr-2"}),"العودة للمحافظ"]}),i.jsx(V,{onClick:n,variant:"outline",children:"إغلاق"})]})]})})},C0=[{id:"vodafone",name:"فودافون كاش",ownerName:"أحمد محمد علي",nationalId:"29012345678901"},{id:"etisalat",name:"اتصالات كاش",ownerName:"فاطمة حسن محمود",nationalId:"28506789012345"},{id:"orange",name:"أورنج كاش",ownerName:"محمد أحمد السيد",nationalId:"29309876543210"},{id:"we_pay",name:"وي باي",ownerName:"نورا عبد الرحمن",nationalId:"29112345678901"},{id:"smart_wallet",name:"سمارت ولت",ownerName:"خالد محمد عبد الله",nationalId:"28809876543210"},{id:"access_pay",name:"أكسس باي",ownerName:"مريم أحمد حسن",nationalId:"29456789012345"},{id:"insta_pay",name:"انستا باي",ownerName:"عمر سعد محمد",nationalId:"29012345678901"}],Lq=({isOpen:t,onClose:e,onWalletUpdate:n})=>{const{toast:r}=_n(),{user:s}=Kt(),[a,o]=m.useState([]),[l,c]=m.useState(!1),[u,h]=m.useState(null),[f,p]=m.useState(""),[g,N]=m.useState(""),[x,b]=m.useState(""),[_,w]=m.useState(""),[v,C]=m.useState("200000"),[I,R]=m.useState("200000"),[j,S]=m.useState(!1),[T,P]=m.useState("10"),[A,D]=m.useState(null),[M,$]=m.useState(!1),[se,W]=m.useState(!1),[X,U]=m.useState(null),L=()=>`wallets_${(s==null?void 0:s.uid)||"default"}`,Q=z=>{const oe=new Date,le=oe.getMonth(),ve=oe.getFullYear();if(!z.lastResetDate)return{...z,monthlyWithdrawalUsage:z.monthlyWithdrawalUsage||0,monthlyTransferUsage:z.monthlyTransferUsage||0,lastResetDate:oe.toISOString().split("T")[0]};const Ee=new Date(z.lastResetDate),Be=Ee.getMonth(),ht=Ee.getFullYear();return le!==Be||ve!==ht?{...z,monthlyWithdrawalUsage:0,monthlyTransferUsage:0,lastResetDate:oe.toISOString().split("T")[0]}:z},he=async(z,oe)=>{const le=new Date().getMonth(),ve=new Date().getFullYear(),Ee=oe.filter(st=>{const gt=new Date(st.timestamp);return gt.getMonth()===le&&gt.getFullYear()===ve&&st.fromWallet===z}),Be=Ee.filter(st=>st.type==="withdrawal").reduce((st,gt)=>st+gt.amount,0),ht=Ee.filter(st=>st.type==="transfer").reduce((st,gt)=>st+gt.amount,0);return{withdrawalUsage:Be,transferUsage:ht}};m.useEffect(()=>{(async()=>{if(!(s!=null&&s.uid)){console.log("No user authenticated, skipping wallet loading"),$(!1);return}console.log("Loading wallets for user:",s.uid),$(!0);try{const{auth:le}=await or(async()=>{const{auth:Ct}=await Promise.resolve().then(()=>Ol);return{auth:Ct}},void 0);let ve=0;const Ee=5;for(;!le.currentUser&&ve<Ee;)console.log(`Waiting for auth state... attempt ${ve+1}`),await new Promise(Ct=>setTimeout(Ct,1e3)),ve++;if(!le.currentUser)throw console.error("User not authenticated in Firebase Auth after retries"),new Error("not authenticated");console.log("Firebase Auth User:",le.currentUser.uid),console.log("Context User:",s.uid),console.log("Fetching wallets from Firebase...");const Be=await mr.getByMerchantId(s.uid);console.log("Fetched wallets:",Be),console.log("Fetching transactions from Firebase...");const ht=await fh.getByUserId(s.uid);console.log("Fetched transactions:",ht);const gt=(await Promise.all(Be.map(async Ct=>{const{withdrawalUsage:En,transferUsage:Qn}=await he(Ct.id,ht);return{id:Ct.id,name:Ct.label||"محفظة بدون اسم",phone:Ct.msisdn,isDefault:!1,monthlyWithdrawalLimit:Ct.withdrawLimit||2e5,monthlyTransferLimit:Ct.transferLimit||2e5,monthlyWithdrawalUsage:En,monthlyTransferUsage:Qn,lastResetDate:new Date().toISOString().split("T")[0]}}))).map(Q);o(gt),console.log("Wallets loaded successfully:",gt)}catch(le){console.error("Error loading wallets:",le),console.log("تم تحميل المحافظ من البيانات المحفوظة محلياً");const ve=localStorage.getItem(L());if(ve){const Ee=JSON.parse(ve);o(Ee.map(Be=>({...Be,phone:Be.phone||Be.phoneNumber,monthlyWithdrawalLimit:Be.monthlyWithdrawalLimit||2e5,monthlyTransferLimit:Be.monthlyTransferLimit||2e5})))}}finally{$(!1)}})();const oe=localStorage.getItem("withdrawalCommissionRate");oe&&P(oe)},[s==null?void 0:s.uid]);const ne=()=>{p(""),N(""),b(""),w(""),C("200000"),R("200000"),S(!1),h(null),c(!1)},me=()=>{const z=parseFloat(T);if(isNaN(z)||z<0||z>100){r({title:"خطأ",description:"يرجى إدخال معدل عمولة صحيح (0-100 جنيه لكل 1000 جنيه)",variant:"destructive"});return}localStorage.setItem("withdrawalCommissionRate",T),r({title:"تم الحفظ",description:`تم تحديث معدل عمولة السحب إلى ${T} جنيه لكل 1000 جنيه`})},Ne=async()=>{if(!f.trim()||!g.trim()||!_.trim()){r({title:"خطأ",description:"يرجى ملء جميع الحقول المطلوبة",variant:"destructive"});return}if(!(s!=null&&s.uid)){r({title:"خطأ",description:"يجب تسجيل الدخول أولاً",variant:"destructive"});return}$(!0);try{if(u){await mr.update(u.id,{label:f.trim(),msisdn:g.trim(),withdrawLimit:parseInt(v),transferLimit:parseInt(I)});const z=a.map(oe=>oe.id===u.id?{...oe,name:f.trim(),phone:g.trim(),nationalId:x.trim(),walletProvider:_,monthlyWithdrawalLimit:parseInt(v),monthlyTransferLimit:parseInt(I)}:oe);o(z),localStorage.setItem(L(),JSON.stringify(z)),r({title:"تم التحديث",description:"تم تحديث المحفظة بنجاح"})}else{const z={merchantUserId:s.uid,provider:_,msisdn:g.trim(),label:f.trim(),isActive:!0,dailyLimit:2e5,monthlyLimit:2e5,withdrawLimit:parseInt(v),transferLimit:parseInt(I),dailyUsage:0,monthlyUsage:0,transferUsage:0,withdrawUsage:0},oe=await mr.create(z),le=new Date().toISOString().split("T")[0],ve={id:oe,name:f.trim(),phone:g.trim(),nationalId:x.trim(),walletProvider:_,isDefault:j,monthlyWithdrawalLimit:parseInt(v),monthlyTransferLimit:parseInt(I),monthlyWithdrawalUsage:0,monthlyTransferUsage:0,lastResetDate:le},Ee=[...a,ve];o(Ee),localStorage.setItem(L(),JSON.stringify(Ee)),r({title:"تم الإنشاء",description:"تم إنشاء المحفظة بنجاح"})}n&&n(),ne(),c(!1),h(null)}catch(z){console.error("Error saving wallet:",z),r({title:"خطأ",description:"حدث خطأ أثناء حفظ المحفظة",variant:"destructive"})}finally{$(!1)}},We=z=>{h(z),p(z.name),N(z.phone),b(z.nationalId||""),w(z.walletProvider||""),C(z.monthlyWithdrawalLimit.toString()),R(z.monthlyTransferLimit.toString()),S(z.isDefault),c(!0)},He=async z=>{const oe=a.find(le=>le.id===z);if(oe!=null&&oe.isDefault){r({title:"تحذير",description:"لا يمكن حذف المحفظة الافتراضية",variant:"destructive"});return}if(!(s!=null&&s.uid)){r({title:"خطأ",description:"يجب تسجيل الدخول أولاً",variant:"destructive"});return}$(!0);try{await mr.delete(z);const le=a.filter(ve=>ve.id!==z);o(le),localStorage.setItem(L(),JSON.stringify(le)),n&&n(),r({title:"تم الحذف",description:"تم حذف المحفظة بنجاح"})}catch(le){console.error("Error deleting wallet:",le),r({title:"خطأ",description:"حدث خطأ أثناء حذف المحفظة",variant:"destructive"})}finally{$(!1)}},Z=z=>{const oe=a.map(le=>({...le,isDefault:le.id===z}));o(oe),localStorage.setItem(L(),JSON.stringify(oe)),n&&n(),r({title:"تم تحديث المحفظة الافتراضية",description:"تم تعيين المحفظة كافتراضية بنجاح"})};return i.jsxs(Zt,{open:t,onOpenChange:e,children:[i.jsxs(zt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[i.jsx(Wt,{className:"pb-2",children:i.jsxs(Ht,{className:"flex items-center gap-1 text-sm",children:[i.jsx(bs,{className:"h-3 w-3"}),"إدارة المحافظ"]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("h3",{className:"text-sm font-semibold",children:["المحافظ المتاحة (",a.length,")"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(V,{onClick:()=>W(!0),className:"flex items-center gap-1 h-6 px-2 text-xs",size:"sm",variant:"outline",children:[i.jsx(qt,{className:"h-3 w-3"}),"الاطلاع على المحافظ"]}),i.jsxs(V,{onClick:()=>c(!0),className:"flex items-center gap-1 h-6 px-2 text-xs",size:"sm",children:[i.jsx(dr,{className:"h-3 w-3"}),"إضافة محفظة جديدة"]})]})]}),(l||u)&&i.jsxs(Le,{className:"border-2 border-blue-200 bg-blue-50",children:[i.jsx(Ze,{className:"pb-1",children:i.jsx(ct,{className:"text-sm",children:u?"تعديل المحفظة":"إضافة محفظة جديدة"})}),i.jsxs($e,{className:"space-y-2 pt-1",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"شركة المحفظة"}),i.jsx("div",{className:"flex gap-1 items-center",children:i.jsxs(lg,{value:_,onValueChange:w,children:[i.jsx(xh,{className:"h-6 text-xs flex-1",children:i.jsx(cg,{placeholder:"اختر شركة المحفظة"})}),i.jsx(yh,{children:C0.map(z=>i.jsx(bi,{value:z.id,className:"text-xs",children:i.jsxs("div",{className:"flex items-center justify-between w-full",children:[i.jsx("span",{children:z.name}),i.jsx("button",{type:"button",className:"h-4 w-4 p-0 ml-2 flex items-center justify-center hover:bg-blue-100 rounded",onClick:oe=>{oe.preventDefault(),oe.stopPropagation(),D(z.id)},children:i.jsx(Tx,{className:"h-3 w-3 text-blue-500 hover:text-blue-700"})})]})},z.id))})]})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"اسم المحفظة"}),i.jsx(de,{value:f,onChange:z=>p(z.target.value),placeholder:"مثال: محفظة العمل",className:"h-6 text-xs"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"رقم الهاتف"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ss,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),i.jsx(de,{value:g,onChange:z=>N(z.target.value),placeholder:"01030302038",className:"pl-6 h-6 text-xs"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"الرقم القومي للخط"}),i.jsxs("div",{className:"relative",children:[i.jsx(lm,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),i.jsx(de,{value:x,onChange:z=>b(z.target.value),placeholder:"29012345678901",maxLength:14,className:"pl-6 h-6 text-xs"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"الحد الشهري للسحب (جنيه)"}),i.jsxs("div",{className:"relative",children:[i.jsx(yr,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),i.jsx(de,{type:"number",value:v,onChange:z=>C(z.target.value),placeholder:"200000",className:"pl-6 h-6 text-xs"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"الحد الشهري للتحويل (جنيه)"}),i.jsxs("div",{className:"relative",children:[i.jsx(yr,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),i.jsx(de,{type:"number",value:I,onChange:z=>R(z.target.value),placeholder:"200000",className:"pl-6 h-6 text-xs"})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("input",{type:"checkbox",id:"isDefault",checked:j,onChange:z=>S(z.target.checked),className:"rounded w-3 h-3"}),i.jsx("label",{htmlFor:"isDefault",className:"text-xs font-medium text-gray-700",children:"تعيين كمحفظة افتراضية"})]}),i.jsxs("div",{className:"border-t pt-2 mt-2",children:[i.jsxs("div",{className:"flex items-center gap-1 mb-2",children:[i.jsx(Ua,{className:"h-3 w-3 text-gray-600"}),i.jsx("label",{className:"text-xs font-medium text-gray-700",children:"إعدادات العمولة"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs font-medium text-gray-700 mb-1 block",children:"معدل عمولة السحب (جنيه لكل 1000 جنيه)"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsxs("div",{className:"relative flex-1",children:[i.jsx(yr,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-3 w-3 text-gray-400"}),i.jsx(de,{type:"number",value:T,onChange:z=>P(z.target.value),placeholder:"10",min:"0",max:"100",step:"0.1",className:"pl-6 h-6 text-xs"})]}),i.jsx(V,{onClick:me,variant:"outline",className:"h-6 px-2 text-xs",size:"sm",children:"حفظ"})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["المعدل الحالي: ",T," جنيه لكل 1000 جنيه"]})]})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(V,{onClick:Ne,className:"flex-1 h-6 text-xs",size:"sm",children:u?"تحديث المحفظة":"إضافة المحفظة"}),i.jsx(V,{variant:"outline",onClick:ne,className:"h-6 text-xs",size:"sm",children:"إلغاء"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:a.map(z=>{var oe;return i.jsxs(Le,{className:`${z.isDefault?"border-green-300 bg-green-50":""}`,children:[i.jsx(Ze,{className:"pb-1",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(ct,{className:"text-sm flex items-center gap-1",children:[i.jsx(bs,{className:"h-3 w-3"}),z.name]}),z.isDefault&&i.jsx(Xt,{variant:"default",className:"bg-green-600 text-xs px-1 py-0",children:"افتراضية"})]})}),i.jsxs($e,{className:"space-y-1 pt-0",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Ss,{className:"h-3 w-3 text-gray-500"}),i.jsx("span",{className:"text-xs",children:z.phone})]}),z.walletProvider&&i.jsx("div",{className:"text-xs text-blue-600 mt-1",children:((oe=C0.find(le=>le.id===z.walletProvider))==null?void 0:oe.name)||z.walletProvider}),i.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-1 rounded-md border border-gray-200 shadow-sm",children:[i.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-1 overflow-hidden flex",children:[i.jsx("div",{className:"w-1/2 bg-red-200 relative",children:i.jsx("div",{className:"bg-gradient-to-r from-red-400 to-red-600 h-1 transition-all duration-700 ease-out shadow-sm",style:{width:`${Math.min((z.monthlyWithdrawalUsage||0)/z.monthlyWithdrawalLimit*100,100)}%`}})}),i.jsx("div",{className:"w-1/2 bg-blue-200 relative",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-1 transition-all duration-700 ease-out shadow-sm",style:{width:`${Math.min((z.monthlyTransferUsage||0)/z.monthlyTransferLimit*100,100)}%`}})})]}),i.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[i.jsxs("div",{className:"text-xs text-red-600 font-medium",children:["متبقي سحب: ",Math.max(z.monthlyWithdrawalLimit-(z.monthlyWithdrawalUsage||0),0)," جنيه"]}),i.jsxs("div",{className:"text-xs text-blue-600 font-medium",children:["متبقي تحويل: ",Math.max(z.monthlyTransferLimit-(z.monthlyTransferUsage||0),0)," جنيه"]})]})]}),i.jsxs("div",{className:"flex gap-1 pt-1",children:[i.jsxs(V,{size:"sm",variant:"outline",onClick:()=>We(z),className:"flex-1 h-5 text-xs px-1",children:[i.jsx(MS,{className:"h-2 w-2 mr-0.5"}),"تعديل"]}),!z.isDefault&&i.jsxs(i.Fragment,{children:[i.jsx(V,{size:"sm",variant:"outline",onClick:()=>Z(z.id),className:"flex-1 h-5 text-xs px-1",children:"جعلها افتراضية"}),i.jsx(V,{size:"sm",variant:"destructive",onClick:()=>He(z.id),className:"h-5 px-1",children:i.jsx(Ws,{className:"h-2 w-2"})})]})]})]})]},z.id)})}),a.length===0&&i.jsx("div",{className:"text-center py-4 text-gray-500 text-xs",children:"لا توجد محافظ متاحة. قم بإضافة محفظة جديدة للبدء."})]}),A&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"معلومات صاحب المحفظة"}),i.jsx("button",{onClick:()=>D(null),className:"h-8 w-8 p-0 flex items-center justify-center hover:bg-gray-100 rounded-full transition-colors",children:i.jsx($a,{className:"h-4 w-4 text-gray-500"})})]}),(()=>{const z=C0.find(oe=>oe.id===A);return z?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"text-center mb-6",children:i.jsx("div",{className:"bg-blue-100 p-3 rounded-lg inline-block",children:i.jsx("h4",{className:"font-bold text-blue-700 text-lg",children:z.name})})}),i.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-200",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),i.jsx("span",{className:"font-semibold text-gray-700",children:"اسم صاحب المحفظة:"})]}),i.jsx("p",{className:"text-gray-900 font-medium text-lg mr-4",children:z.ownerName})]}),i.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),i.jsx("span",{className:"font-semibold text-gray-700",children:"الرقم القومي:"})]}),i.jsx("p",{className:"text-gray-900 font-mono text-lg mr-4 tracking-wider",children:z.nationalId})]})]})}),i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(Tx,{className:"h-4 w-4 text-yellow-600 mr-2"}),i.jsx("span",{className:"text-sm text-yellow-800 font-medium",children:"هذه البيانات مسجلة رسمياً في النظام لهذه المحفظة"})]})})]}):null})()]})})]}),i.jsx(Pq,{isOpen:se,onClose:()=>W(!1),onWalletSelect:z=>{U(z),W(!1)}}),i.jsx(Oq,{wallet:X,isOpen:!!X,onClose:()=>U(null),onBack:()=>{U(null),W(!0)}})]})},Fq=({isOpen:t,onClose:e,transaction:n,onDelete:r})=>{if(!n)return null;const s=u=>{switch(u){case"completed":return i.jsx(wn,{className:"h-5 w-5 text-green-500"});case"pending":return i.jsx(es,{className:"h-5 w-5 text-yellow-500"});case"failed":return i.jsx(Kd,{className:"h-5 w-5 text-red-500"});default:return i.jsx(es,{className:"h-5 w-5 text-gray-500"})}},a=u=>{switch(u){case"completed":return"مكتملة";case"pending":return"قيد الانتظار";case"failed":return"فاشلة";default:return"غير معروف"}},o=u=>{switch(u){case"withdraw":return"سحب";case"send":return"إرسال";case"receive":return"استقبال";default:return"تحويل"}},l=()=>{const u=`
      <div style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; max-width: 500px; margin: 0 auto; padding: 30px; background: #fff;">
        <!-- Header -->
        <div style="text-align: center; margin-bottom: 30px; border-bottom: 2px solid #2563eb; padding-bottom: 20px;">
          <h1 style="color: #2563eb; margin-bottom: 5px; font-size: 28px;">إيصال المعاملة</h1>
          <p style="color: #666; font-size: 16px; margin: 0;">رقم المرجع: ${n.transactionReference||n.id}</p>
          <p style="color: #888; font-size: 14px; margin: 5px 0 0 0;">${new Date().toLocaleString("ar-EG")}</p>
        </div>
        
        <!-- Shop Info -->
        <div style="background: #f8fafc; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
          <h3 style="color: #1e293b; margin: 0 0 15px 0; font-size: 18px;">معلومات المحل</h3>
          <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
            <span style="font-weight: 600; color: #475569;">اسم المحل:</span>
            <span style="color: #1e293b;">${n.merchantShopName||n.shopName||"غير محدد"}</span>
          </div>
        </div>
        
        <!-- Transaction Details -->
        <div style="background: #fff; border: 2px solid #e2e8f0; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
          <h3 style="color: #1e293b; margin: 0 0 15px 0; font-size: 18px;">تفاصيل المعاملة</h3>
          
          <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #f1f5f9;">
            <span style="font-weight: 600; color: #475569;">نوع المعاملة:</span>
            <span style="color: #2563eb; font-weight: 600;">${o(n.type)}</span>
          </div>
          
          <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #f1f5f9;">
            <span style="font-weight: 600; color: #475569;">الحالة:</span>
            <span style="color: ${n.status==="completed"?"#16a34a":n.status==="pending"?"#ca8a04":"#dc2626"}; font-weight: 600;">
              ${a(n.status)}
            </span>
          </div>
          
          ${n.type!=="withdraw"?`
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #f1f5f9;">
              <span style="font-weight: 600; color: #475569;">الرقم المرسل:</span>
              <span style="color: #1e293b;">${n.senderNumber||n.senderPhone}</span>
            </div>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #f1f5f9;">
              <span style="font-weight: 600; color: #475569;">الرقم الراسل:</span>
              <span style="color: #1e293b;">${n.senderName||n.senderPhone}</span>
            </div>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #f1f5f9;">
              <span style="font-weight: 600; color: #475569;">الرقم المستقبل:</span>
              <span style="color: #1e293b;">${n.receiverNumber||n.receiverPhone}</span>
            </div>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #f1f5f9;">
              <span style="font-weight: 600; color: #475569;">المبلغ المحول:</span>
              <span style="color: #2563eb; font-weight: bold; font-size: 16px;">${n.transferredAmount||n.amount} جنيه</span>
            </div>
          `:`
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #f1f5f9;">
              <span style="font-weight: 600; color: #475569;">رقم المحفظة:</span>
              <span style="color: #1e293b;">${n.senderPhone}</span>
            </div>
            
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #f1f5f9;">
              <span style="font-weight: 600; color: #475569;">المبلغ المسحوب:</span>
              <span style="color: #dc2626; font-weight: bold; font-size: 16px;">${n.withdrawnAmountDetailed||n.withdrawnAmount||n.amount} جنيه</span>
            </div>
          `}
          
          ${n.commission?`
            <div style="display: flex; justify-content: space-between; margin-bottom: 12px; padding: 8px 0; border-bottom: 1px solid #f1f5f9;">
              <span style="font-weight: 600; color: #475569;">العمولة:</span>
              <span style="color: #f59e0b; font-weight: 600;">${n.commission} جنيه</span>
            </div>
          `:""}
          
          <div style="display: flex; justify-content: space-between; padding: 8px 0;">
            <span style="font-weight: 600; color: #475569;">التاريخ والوقت:</span>
            <span style="color: #1e293b;">${n.createdAt.toLocaleString("ar-EG")}</span>
          </div>
        </div>
        
        <!-- Total Amount -->
        <div style="background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); border-radius: 12px; padding: 20px; margin-bottom: 20px; text-align: center;">
          <h3 style="color: white; margin: 0 0 10px 0; font-size: 16px;">إجمالي المبلغ</h3>
          <p style="color: white; font-size: 24px; font-weight: bold; margin: 0;">
            ${n.type==="withdraw"?"-":""}${n.amount} جنيه
          </p>
        </div>
        
        ${n.notes?`
          <div style="background: #fef3c7; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
            <h4 style="color: #92400e; margin: 0 0 8px 0;">ملاحظات:</h4>
            <p style="color: #92400e; margin: 0; font-size: 14px;">${n.notes}</p>
          </div>
        `:""}
        
        <!-- Footer -->
        <div style="text-align: center; color: #64748b; font-size: 12px; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e2e8f0;">
          <p style="margin: 0 0 5px 0;">شكراً لاستخدام خدماتنا</p>
          <p style="margin: 0;">تم إنشاء الإيصال في: ${new Date().toLocaleString("ar-EG")}</p>
        </div>
      </div>
    `,h=window.open("","_blank");h&&(h.document.write(`
        <html>
          <head>
            <title>إيصال المعاملة - ${n.transactionReference||n.id}</title>
            <meta charset="UTF-8">
            <style>
              body { 
                margin: 0; 
                padding: 20px; 
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                background: #f8fafc;
              }
              @media print {
                body { 
                  margin: 0; 
                  background: white;
                }
              }
            </style>
          </head>
          <body>
            ${u}
          </body>
        </html>
      `),h.document.close(),h.print())},c=()=>{window.confirm("هل أنت متأكد من حذف هذه المعاملة؟ لا يمكن التراجع عن هذا الإجراء.")&&(r(n.id),e())};return i.jsx(Zt,{open:t,onOpenChange:e,children:i.jsxs(zt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"flex items-center gap-2 text-xl",children:[i.jsx(P3,{className:"h-6 w-6 text-blue-600"}),"إيصال المعاملة المفصل"]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(Le,{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",children:i.jsxs(Ze,{className:"text-center pb-2",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[s(n.status),i.jsx(Xt,{variant:n.status==="completed"?"default":"secondary",className:"text-sm",children:a(n.status)})]}),i.jsxs("h3",{className:"text-2xl font-bold text-blue-600",children:[n.type==="withdraw"?"-":"",n.amount," جنيه"]}),i.jsxs("p",{className:"text-sm text-gray-600",children:["رقم المرجع: ",n.transactionReference||n.id]})]})}),i.jsxs(Le,{children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(cm,{className:"h-5 w-5 text-green-600"}),i.jsx("h4",{className:"font-semibold text-lg",children:"معلومات المحل"})]})}),i.jsx($e,{className:"space-y-3",children:i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsx("span",{className:"font-medium text-gray-700",children:"اسم المحل:"}),i.jsx("span",{className:"text-gray-900",children:n.merchantShopName||n.shopName||"غير محدد"})]})})]}),i.jsxs(Le,{children:[i.jsx(Ze,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Cv,{className:"h-5 w-5 text-blue-600"}),i.jsx("h4",{className:"font-semibold text-lg",children:"تفاصيل المعاملة"})]})}),i.jsx($e,{className:"space-y-3",children:i.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[i.jsx("span",{className:"font-medium text-blue-700",children:"نوع المعاملة:"}),i.jsx(Xt,{variant:"outline",className:"bg-blue-100 text-blue-800",children:o(n.type)})]}),n.type!=="withdraw"?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ki,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"font-medium text-gray-700",children:"الرقم المرسل:"})]}),i.jsx("span",{className:"text-gray-900 font-mono",children:n.senderNumber||n.senderPhone})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ss,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"font-medium text-gray-700",children:"الرقم الراسل:"})]}),i.jsx("span",{className:"text-gray-900 font-mono",children:n.senderName||n.senderPhone})]}),i.jsx("div",{className:"flex items-center justify-center p-2",children:i.jsx(up,{className:"h-6 w-6 text-blue-500"})}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ki,{className:"h-4 w-4 text-green-500"}),i.jsx("span",{className:"font-medium text-green-700",children:"الرقم المستقبل:"})]}),i.jsx("span",{className:"text-green-900 font-mono",children:n.receiverNumber||n.receiverPhone})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yr,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{className:"font-medium text-blue-700",children:"المبلغ المحول:"})]}),i.jsxs("span",{className:"text-blue-900 font-bold text-lg",children:[n.transferredAmount||n.amount," جنيه"]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ss,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"font-medium text-gray-700",children:"رقم المحفظة:"})]}),i.jsx("span",{className:"text-gray-900 font-mono",children:n.senderPhone})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yr,{className:"h-4 w-4 text-red-500"}),i.jsx("span",{className:"font-medium text-red-700",children:"المبلغ المسحوب:"})]}),i.jsxs("span",{className:"text-red-900 font-bold text-lg",children:[n.withdrawnAmountDetailed||n.withdrawnAmount||n.amount," جنيه"]})]})]}),n.commission&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 rounded-lg",children:[i.jsx("span",{className:"font-medium text-yellow-700",children:"العمولة:"}),i.jsxs("span",{className:"text-yellow-900 font-semibold",children:[n.commission," جنيه"]})]}),i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pi,{className:"h-4 w-4 text-gray-500"}),i.jsx("span",{className:"font-medium text-gray-700",children:"التاريخ والوقت:"})]}),i.jsx("span",{className:"text-gray-900",children:n.createdAt.toLocaleString("ar-EG")})]})]})})]}),n.notes&&i.jsxs(Le,{className:"bg-yellow-50 border-yellow-200",children:[i.jsx(Ze,{className:"pb-2",children:i.jsx("h4",{className:"font-semibold text-yellow-800",children:"ملاحظات إضافية"})}),i.jsx($e,{children:i.jsx("p",{className:"text-yellow-700",children:n.notes})})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(V,{onClick:l,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",size:"lg",children:[i.jsx(A3,{className:"h-5 w-5 mr-2"}),"طباعة الإيصال"]}),i.jsxs(V,{onClick:c,variant:"destructive",className:"flex-1",size:"lg",children:[i.jsx(Ws,{className:"h-5 w-5 mr-2"}),"حذف المعاملة"]})]}),i.jsx(V,{onClick:e,variant:"outline",className:"w-full",size:"lg",children:"إغلاق الإيصال"})]})]})})};class Es{static getSecretKey(e){return e?`${this.SECRET_KEY_BASE}_${e}`:this.SECRET_KEY_BASE}static setSecretPin(e,n){const r=btoa(e);localStorage.setItem(this.getSecretKey(n),r)}static hasSecretPin(e){return localStorage.getItem(this.getSecretKey(e))!==null}static verifySecretPin(e,n){const r=localStorage.getItem(this.getSecretKey(n));if(!r)return!1;try{return atob(r)===e}catch{return!1}}static clearSecretPin(e){localStorage.removeItem(this.getSecretKey(e))}}jg(Es,"SECRET_KEY_BASE","dashboard_secret_pin");function Vq({open:t,onOpenChange:e,onSuccess:n,title:r,description:s,userId:a}){const[o,l]=m.useState(""),[c,u]=m.useState(""),[h,f]=m.useState(!1),[p,g]=m.useState(""),[N,x]=m.useState(!1),b=Es.hasSecretPin(a),_=async v=>{v.preventDefault(),g(""),x(!0);try{if(b)Es.verifySecretPin(o,a)?(n(),e(!1),l("")):g("الرقم السري غير صحيح");else{if(o.length<4){g("الرقم السري يجب أن يكون 4 أرقام على الأقل");return}if(o!==c){g("الرقم السري وتأكيده غير متطابقين");return}Es.setSecretPin(o,a),n(),e(!1),l(""),u("")}}catch{g("حدث خطأ، يرجى المحاولة مرة أخرى")}finally{x(!1)}},w=()=>{l(""),u(""),g(""),e(!1)};return i.jsx(Zt,{open:t,onOpenChange:w,children:i.jsxs(zt,{className:"sm:max-w-md",dir:"rtl",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"flex items-center gap-2 text-center justify-center",children:[i.jsx(si,{className:"h-5 w-5 text-red-600"}),r]})}),i.jsx("div",{className:"text-center text-sm text-gray-600 mb-4",children:s}),i.jsxs("form",{onSubmit:_,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"pin",children:b?"أدخل الرقم السري":"إنشاء رقم سري جديد"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"pin",type:h?"text":"password",value:o,onChange:v=>l(v.target.value),placeholder:"أدخل الرقم السري",className:"pr-10",required:!0,minLength:4}),i.jsx("button",{type:"button",onClick:()=>f(!h),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:h?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),!b&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"confirmPin",children:"تأكيد الرقم السري"}),i.jsx("div",{className:"relative",children:i.jsx(de,{id:"confirmPin",type:h?"text":"password",value:c,onChange:v=>u(v.target.value),placeholder:"أعد إدخال الرقم السري",className:"pr-10",required:!0,minLength:4})})]}),p&&i.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:[i.jsx(Bi,{className:"h-4 w-4"}),p]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"button",variant:"outline",onClick:w,className:"flex-1",disabled:N,children:"إلغاء"}),i.jsx(V,{type:"submit",className:"flex-1 bg-red-600 hover:bg-red-700",disabled:N,children:N?"جاري التحقق...":b?"تأكيد":"حفظ الرقم السري"})]})]}),!b&&i.jsx("div",{className:"text-xs text-gray-500 text-center mt-2",children:"⚠️ احفظ هذا الرقم السري جيداً، ستحتاجه لتصفير المعاملات"})]})})}function PE({open:t,onOpenChange:e,onSuccess:n,title:r,description:s,currentBalance:a,balanceLabel:o,userId:l}){const[c,u]=m.useState(""),[h,f]=m.useState(a.toString()),[p,g]=m.useState(!1),[N,x]=m.useState(""),[b,_]=m.useState(!1),w=Es.hasSecretPin(l),v=async I=>{I.preventDefault(),x(""),_(!0);try{const R=parseFloat(h);if(isNaN(R)||R<0){x("يرجى إدخال مبلغ صحيح"),_(!1);return}w?Es.verifySecretPin(c,l)?(n(R),e(!1),u(""),f("")):x("الرقم السري غير صحيح"):x("لم يتم تعيين رقم سري. يرجى تعيين رقم سري أولاً من إعدادات التطبيق")}catch{x("حدث خطأ أثناء التحقق من الرقم السري")}finally{_(!1)}},C=()=>{u(""),f(a.toString()),x(""),e(!1)};return te.useEffect(()=>{t&&f(a.toString())},[a,t]),i.jsx(Zt,{open:t,onOpenChange:C,children:i.jsxs(zt,{className:"sm:max-w-md",dir:"rtl",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"flex items-center gap-2 text-right",children:[i.jsx(yr,{className:"h-5 w-5"}),r]})}),i.jsxs("form",{onSubmit:v,className:"space-y-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground text-right",children:s}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[i.jsxs(be,{className:"text-sm font-medium text-gray-700",children:[o," الحالي"]}),i.jsxs("div",{className:"text-lg font-bold text-gray-900 mt-1",children:[a.toLocaleString()," جنيه"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"newAmount",className:"text-right",children:"المبلغ الجديد"}),i.jsx(de,{id:"newAmount",type:"number",step:"0.01",min:"0",value:h,onChange:I=>f(I.target.value),placeholder:"أدخل المبلغ الجديد",className:"text-right",required:!0})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"pin",className:"text-right",children:"الرقم السري"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"pin",type:p?"text":"password",value:c,onChange:I=>u(I.target.value),placeholder:"أدخل الرقم السري",className:"text-right pr-10",required:!0}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(!p),children:p?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),N&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:[i.jsx(Bi,{className:"h-4 w-4"}),N]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"button",variant:"outline",onClick:C,className:"flex-1",children:"إلغاء"}),i.jsx(V,{type:"submit",disabled:b||!c||!h,className:"flex-1",children:b?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري التحديث..."]}):i.jsxs(i.Fragment,{children:[i.jsx(si,{className:"h-4 w-4 mr-2"}),"تحديث الرصيد"]})})]})]})]})})}function Ik({open:t,onOpenChange:e,userId:n}){const[r,s]=m.useState(""),[a,o]=m.useState(""),[l,c]=m.useState(""),[u,h]=m.useState(!1),[f,p]=m.useState(!1),[g,N]=m.useState(!1),[x,b]=m.useState(""),[_,w]=m.useState(!1),{toast:v}=_n(),C=Es.hasSecretPin(n),I=async j=>{j.preventDefault(),b(""),w(!0);try{if(!a||a.length<4){b("يجب أن يكون الرقم السري 4 أرقام على الأقل"),w(!1);return}if(a!==l){b("الرقم السري الجديد وتأكيده غير متطابقين"),w(!1);return}if(C){if(!r){b("يرجى إدخال الرقم السري الحالي"),w(!1);return}if(!Es.verifySecretPin(r,n)){b("الرقم السري الحالي غير صحيح"),w(!1);return}}Es.setSecretPin(a,n),v({title:C?"تم تغيير الرقم السري":"تم تعيين الرقم السري",description:C?"تم تغيير الرقم السري بنجاح":"تم تعيين الرقم السري بنجاح"}),R()}catch{b("حدث خطأ أثناء حفظ الرقم السري")}finally{w(!1)}},R=()=>{s(""),o(""),c(""),b(""),h(!1),p(!1),N(!1),e(!1)};return i.jsx(Zt,{open:t,onOpenChange:R,children:i.jsxs(zt,{className:"sm:max-w-md",dir:"rtl",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"flex items-center gap-2 text-right",children:[i.jsx(Ua,{className:"h-5 w-5"}),C?"تغيير الرقم السري":"تعيين الرقم السري"]})}),i.jsxs("form",{onSubmit:I,className:"space-y-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground text-right",children:C?"أدخل الرقم السري الحالي والرقم السري الجديد لتغييره":"أدخل الرقم السري الجديد الذي تريد استخدامه في عمليات التعديل"}),C&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"currentPin",className:"text-right block",children:"الرقم السري الحالي"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"currentPin",type:u?"text":"password",value:r,onChange:j=>s(j.target.value),placeholder:"أدخل الرقم السري الحالي",className:"pr-10",dir:"ltr"}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!u),children:u?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"newPin",className:"text-right block",children:"الرقم السري الجديد"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"newPin",type:f?"text":"password",value:a,onChange:j=>o(j.target.value),placeholder:"أدخل الرقم السري الجديد",className:"pr-10",dir:"ltr"}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>p(!f),children:f?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"confirmPin",className:"text-right block",children:"تأكيد الرقم السري الجديد"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"confirmPin",type:g?"text":"password",value:l,onChange:j=>c(j.target.value),placeholder:"أعد إدخال الرقم السري الجديد",className:"pr-10",dir:"ltr"}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>N(!g),children:g?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),x&&i.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[i.jsx(Bi,{className:"h-4 w-4"}),x]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsxs(V,{type:"submit",disabled:_,className:"flex-1",children:[i.jsx(si,{className:"h-4 w-4 mr-2"}),_?"جاري الحفظ...":C?"تغيير الرقم السري":"تعيين الرقم السري"]}),i.jsx(V,{type:"button",variant:"outline",onClick:R,disabled:_,children:"إلغاء"})]})]})]})})}function Ck({open:t,onOpenChange:e,userId:n}){const[r,s]=m.useState(""),[a,o]=m.useState(""),[l,c]=m.useState(""),[u,h]=m.useState(!1),[f,p]=m.useState(!1),[g,N]=m.useState(!1),[x,b]=m.useState(""),[_,w]=m.useState(!1),{toast:v}=_n(),C=n?`cash_drawer_pin_${n}`:"cash_drawer_pin",I=()=>localStorage.getItem(C)!==null,R=P=>{const A=localStorage.getItem(C);if(!A)return!1;try{return atob(A)===P}catch{return!1}},j=P=>{const A=btoa(P);localStorage.setItem(C,A)},S=async P=>{P.preventDefault(),b(""),w(!0);try{if(!a||a.length<4){b("يجب أن يكون الرقم السري 4 أرقام على الأقل"),w(!1);return}if(a!==l){b("الرقم السري الجديد وتأكيده غير متطابقين"),w(!1);return}if(I()){if(!r){b("يرجى إدخال الرقم السري الحالي لدرج النقدية"),w(!1);return}if(!R(r)){b("الرقم السري الحالي لدرج النقدية غير صحيح"),w(!1);return}}j(a),v({title:I()?"تم تغيير رقم درج النقدية":"تم تعيين رقم درج النقدية",description:I()?"تم تغيير الرقم السري لدرج النقدية بنجاح":"تم تعيين الرقم السري لدرج النقدية بنجاح"}),T()}catch{b("حدث خطأ أثناء حفظ الرقم السري لدرج النقدية")}finally{w(!1)}},T=()=>{s(""),o(""),c(""),b(""),h(!1),p(!1),N(!1),e(!1)};return i.jsx(Zt,{open:t,onOpenChange:T,children:i.jsxs(zt,{className:"sm:max-w-md",dir:"rtl",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"flex items-center gap-2 text-right",children:[i.jsx(yr,{className:"h-5 w-5 text-green-600"}),I()?"تغيير رقم درج النقدية":"تعيين رقم درج النقدية"]})}),i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground text-right",children:I()?"أدخل الرقم السري الحالي والرقم السري الجديد لدرج النقدية":"أدخل الرقم السري الجديد الذي تريد استخدامه لحماية درج النقدية"}),I()&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"currentPin",className:"text-right block",children:"الرقم السري الحالي لدرج النقدية"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"currentPin",type:u?"text":"password",value:r,onChange:P=>s(P.target.value),placeholder:"أدخل الرقم السري الحالي",className:"pr-10",dir:"ltr"}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!u),children:u?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"newPin",className:"text-right block",children:"الرقم السري الجديد لدرج النقدية"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"newPin",type:f?"text":"password",value:a,onChange:P=>o(P.target.value),placeholder:"أدخل الرقم السري الجديد",className:"pr-10",dir:"ltr"}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>p(!f),children:f?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"confirmPin",className:"text-right block",children:"تأكيد الرقم السري الجديد"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"confirmPin",type:g?"text":"password",value:l,onChange:P=>c(P.target.value),placeholder:"أعد إدخال الرقم السري الجديد",className:"pr-10",dir:"ltr"}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>N(!g),children:g?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),x&&i.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[i.jsx(Bi,{className:"h-4 w-4"}),x]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsxs(V,{type:"submit",disabled:_,className:"flex-1 bg-green-600 hover:bg-green-700",children:[i.jsx(si,{className:"h-4 w-4 mr-2"}),_?"جاري الحفظ...":I()?"تغيير رقم درج النقدية":"تعيين رقم درج النقدية"]}),i.jsx(V,{type:"button",variant:"outline",onClick:T,disabled:_,children:"إلغاء"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 text-center mt-2",children:"💰 هذا الرقم السري خاص بحماية درج النقدية فقط"})]})})}function Ak({open:t,onOpenChange:e,userId:n}){const[r,s]=m.useState(""),[a,o]=m.useState(""),[l,c]=m.useState(""),[u,h]=m.useState(!1),[f,p]=m.useState(!1),[g,N]=m.useState(!1),[x,b]=m.useState(""),[_,w]=m.useState(!1),{toast:v}=_n(),C=n?`wallet_total_pin_${n}`:"wallet_total_pin",I=()=>localStorage.getItem(C)!==null,R=P=>{const A=localStorage.getItem(C);if(!A)return!1;try{return atob(A)===P}catch{return!1}},j=P=>{const A=btoa(P);localStorage.setItem(C,A)},S=async P=>{P.preventDefault(),b(""),w(!0);try{if(!a||a.length<4){b("يجب أن يكون الرقم السري 4 أرقام على الأقل"),w(!1);return}if(a!==l){b("الرقم السري الجديد وتأكيده غير متطابقين"),w(!1);return}if(I()){if(!r){b("يرجى إدخال الرقم السري الحالي لإجمالي المحفظة"),w(!1);return}if(!R(r)){b("الرقم السري الحالي لإجمالي المحفظة غير صحيح"),w(!1);return}}j(a),v({title:I()?"تم تغيير رقم إجمالي المحفظة":"تم تعيين رقم إجمالي المحفظة",description:I()?"تم تغيير الرقم السري لإجمالي المحفظة بنجاح":"تم تعيين الرقم السري لإجمالي المحفظة بنجاح"}),T()}catch{b("حدث خطأ أثناء حفظ الرقم السري لإجمالي المحفظة")}finally{w(!1)}},T=()=>{s(""),o(""),c(""),b(""),h(!1),p(!1),N(!1),e(!1)};return i.jsx(Zt,{open:t,onOpenChange:T,children:i.jsxs(zt,{className:"sm:max-w-md",dir:"rtl",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"flex items-center gap-2 text-right",children:[i.jsx(bs,{className:"h-5 w-5 text-blue-600"}),I()?"تغيير رقم إجمالي المحفظة":"تعيين رقم إجمالي المحفظة"]})}),i.jsxs("form",{onSubmit:S,className:"space-y-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground text-right",children:I()?"أدخل الرقم السري الحالي والرقم السري الجديد لإجمالي المحفظة":"أدخل الرقم السري الجديد الذي تريد استخدامه لحماية إجمالي المحفظة"}),I()&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"currentPin",className:"text-right block",children:"الرقم السري الحالي لإجمالي المحفظة"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"currentPin",type:u?"text":"password",value:r,onChange:P=>s(P.target.value),placeholder:"أدخل الرقم السري الحالي",className:"pr-10",dir:"ltr"}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>h(!u),children:u?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"newPin",className:"text-right block",children:"الرقم السري الجديد لإجمالي المحفظة"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"newPin",type:f?"text":"password",value:a,onChange:P=>o(P.target.value),placeholder:"أدخل الرقم السري الجديد",className:"pr-10",dir:"ltr"}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>p(!f),children:f?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"confirmPin",className:"text-right block",children:"تأكيد الرقم السري الجديد"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"confirmPin",type:g?"text":"password",value:l,onChange:P=>c(P.target.value),placeholder:"أعد إدخال الرقم السري الجديد",className:"pr-10",dir:"ltr"}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>N(!g),children:g?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),x&&i.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[i.jsx(Bi,{className:"h-4 w-4"}),x]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsxs(V,{type:"submit",disabled:_,className:"flex-1 bg-blue-600 hover:bg-blue-700",children:[i.jsx(si,{className:"h-4 w-4 mr-2"}),_?"جاري الحفظ...":I()?"تغيير رقم إجمالي المحفظة":"تعيين رقم إجمالي المحفظة"]}),i.jsx(V,{type:"button",variant:"outline",onClick:T,disabled:_,children:"إلغاء"})]})]}),i.jsx("div",{className:"text-xs text-gray-500 text-center mt-2",children:"💼 هذا الرقم السري خاص بحماية إجمالي المحفظة فقط"})]})})}const Uq=({userId:t})=>{const[e,n]=m.useState(!1),[r,s]=m.useState(!1),[a,o]=m.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsxs(s1,{children:[i.jsx(i1,{asChild:!0,children:i.jsxs(V,{variant:"ghost",size:"sm",className:"flex items-center gap-1 hover:bg-gray-100 text-gray-700 text-xs transition-all duration-200 h-8 px-2 rounded-md hover:scale-105",children:[i.jsx(Ri,{className:"h-3 w-3"}),i.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:"إدارة"}),i.jsx(Iv,{className:"h-2.5 w-2.5"})]})}),i.jsxs(eg,{align:"end",className:"w-48 bg-white border border-gray-200 shadow-lg rounded-md",children:[i.jsxs(Gs,{onClick:()=>n(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-blue-700 hover:bg-blue-50 cursor-pointer",children:[i.jsx(Ua,{className:"h-3.5 w-3.5"}),"تغيير الرقم السري"]}),i.jsxs(Gs,{onClick:()=>s(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-purple-700 hover:bg-purple-50 cursor-pointer",children:[i.jsx(y3,{className:"h-3.5 w-3.5"}),"رقم درج النقدية"]}),i.jsxs(Gs,{onClick:()=>o(!0),className:"flex items-center gap-2 px-3 py-2 text-sm text-indigo-700 hover:bg-indigo-50 cursor-pointer",children:[i.jsx(bs,{className:"h-3.5 w-3.5"}),"رقم إجمالي المحفظة"]})]})]}),i.jsx(Ik,{open:e,onOpenChange:n,userId:t}),i.jsx(Ck,{open:r,onOpenChange:s,userId:t}),i.jsx(Ak,{open:a,onOpenChange:o,userId:t})]})};function $q({open:t,onOpenChange:e,onSuccess:n,title:r,description:s,currentBalance:a,balanceLabel:o,userId:l}){const[c,u]=m.useState(""),[h,f]=m.useState(""),[p,g]=m.useState("add"),[N,x]=m.useState(!1),[b,_]=m.useState(""),[w,v]=m.useState(!1),C=Es.hasSecretPin(l),I=async S=>{S.preventDefault(),_(""),v(!0);try{const T=parseFloat(h);if(isNaN(T)||T<=0){_("يرجى إدخال مبلغ صحيح أكبر من صفر"),v(!1);return}if(p==="subtract"&&T>a){_("لا يمكن خصم مبلغ أكبر من الرصيد الحالي"),v(!1);return}if(C)if(Es.verifySecretPin(c,l)){const P=p==="add"?T:-T;n(P),R()}else _("الرقم السري غير صحيح");else _("لم يتم تعيين رقم سري. يرجى تعيين رقم سري أولاً من إعدادات التطبيق")}catch{_("حدث خطأ أثناء التحقق من الرقم السري")}finally{v(!1)}},R=()=>{u(""),f(""),g("add"),_(""),e(!1)},j=()=>{const S=parseFloat(h)||0;return p==="add"?a+S:a-S};return i.jsx(Zt,{open:t,onOpenChange:R,children:i.jsxs(zt,{className:"sm:max-w-md",dir:"rtl",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"flex items-center gap-2 text-right",children:[p==="add"?i.jsx(dr,{className:"h-5 w-5 text-green-600"}):i.jsx(Ix,{className:"h-5 w-5 text-red-600"}),r]})}),i.jsxs("form",{onSubmit:I,className:"space-y-4",children:[i.jsx("div",{className:"text-sm text-muted-foreground text-right",children:s}),i.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[i.jsxs(be,{className:"text-sm font-medium text-gray-700",children:[o," الحالي"]}),i.jsxs("div",{className:"text-lg font-bold text-gray-900 mt-1",children:[a.toLocaleString()," جنيه"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{className:"text-right",children:"نوع العملية"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(V,{type:"button",variant:p==="add"?"default":"outline",onClick:()=>g("add"),className:"flex-1 flex items-center gap-2",children:[i.jsx(dr,{className:"h-4 w-4"}),"إضافة"]}),i.jsxs(V,{type:"button",variant:p==="subtract"?"default":"outline",onClick:()=>g("subtract"),className:"flex-1 flex items-center gap-2",children:[i.jsx(Ix,{className:"h-4 w-4"}),"خصم"]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(be,{htmlFor:"amount",className:"text-right",children:["المبلغ المراد ",p==="add"?"إضافته":"خصمه"]}),i.jsx(de,{id:"amount",type:"number",step:"0.01",min:"0.01",value:h,onChange:S=>f(S.target.value),placeholder:`أدخل المبلغ المراد ${p==="add"?"إضافته":"خصمه"}`,className:"text-right",required:!0})]}),h&&!isNaN(parseFloat(h))&&i.jsxs("div",{className:`p-3 rounded-lg ${p==="add"?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[i.jsx(be,{className:"text-sm font-medium text-gray-700",children:"الرصيد الجديد المتوقع"}),i.jsxs("div",{className:`text-lg font-bold mt-1 ${p==="add"?"text-green-700":"text-red-700"}`,children:[j().toLocaleString()," جنيه"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"pin",className:"text-right",children:"الرقم السري"}),i.jsxs("div",{className:"relative",children:[i.jsx(de,{id:"pin",type:N?"text":"password",value:c,onChange:S=>u(S.target.value),placeholder:"أدخل الرقم السري",className:"text-right pr-10",required:!0}),i.jsx(V,{type:"button",variant:"ghost",size:"sm",className:"absolute left-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>x(!N),children:N?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"})})]})]}),b&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 bg-red-50 p-2 rounded",children:[i.jsx(Bi,{className:"h-4 w-4"}),b]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx(V,{type:"button",variant:"outline",onClick:R,className:"flex-1",children:"إلغاء"}),i.jsx(V,{type:"submit",disabled:w||!c||!h,className:`flex-1 ${p==="add"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,children:w?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري التحديث..."]}):i.jsxs(i.Fragment,{children:[i.jsx(si,{className:"h-4 w-4 mr-2"}),p==="add"?"إضافة المبلغ":"خصم المبلغ"]})})]})]})]})})}const Pk={getCurrentMonthId(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`},async getWalletUsage(t){try{const e=this.getCurrentMonthId(),n=tt(Te,"users",t,"limits",e),r=await mn(n);if(r.exists()){const a=r.data();return{walletId:t,used_transfer:a.used_transfer||0,used_withdraw:a.used_withdraw||0,monthly_limit:a.monthly_limit||2e5,last_reset:a.last_reset||null,updatedAt:a.updatedAt||pt.now()}}const s={walletId:t,used_transfer:0,used_withdraw:0,monthly_limit:2e5,last_reset:null,updatedAt:pt.now()};return await Ir(n,{used_transfer:0,used_withdraw:0,monthly_limit:2e5,last_reset:null,updatedAt:Tt()}),s}catch(e){return console.error("Error getting wallet usage:",e),null}},shouldResetLimits(t){const e=new Date,n=e.getDate();if(!t)return!0;if(n===1){const r=t.toDate(),s=e.getMonth(),a=e.getFullYear();return r.getMonth()!==s||r.getFullYear()!==a}return!1},async autoResetLimitsIfNeeded(t){try{const e=await this.getWalletUsage(t);return e&&this.shouldResetLimits(e.last_reset)?(console.log(`🔄 تصفير تلقائي للحدود للمحفظة ${t} - اليوم الأول من الشهر`),await this.resetWalletUsage(t)):!1}catch(e){return console.error("خطأ في التصفير التلقائي للحدود:",e),!1}},async resetWalletUsage(t){try{const e=this.getCurrentMonthId(),n=tt(Te,"users",t,"limits",e);return await Ir(n,{used_transfer:0,used_withdraw:0,last_reset:Tt(),updatedAt:Tt()},{merge:!0}),console.log(`🔄 تم تصفير استخدام المحفظة ${t} بنجاح`),!0}catch(e){return console.error("خطأ في تصفير استخدام المحفظة:",e),!1}},async calculateUsageFromTransactions(t){var e;try{const n=this.getCurrentMonthId(),r=tt(Te,"users",t,"limits",n),s=await mn(r),a=s.exists()?(e=s.data())==null?void 0:e.last_reset:null,o=Pr(vn(Te,"tx"),er("uid","==",t),...a?[er("createdAt",">=",a)]:[]),l=await Rr(o);let c=0,u=0;return l.forEach(h=>{const f=h.data();f.status==="completed"&&(f.type==="transfer"?c+=f.amount:f.type==="withdraw"&&(u+=f.amount))}),{used_transfer:c,used_withdraw:u}}catch(n){return console.error("خطأ في حساب الاستخدام من المعاملات:",n),{used_transfer:0,used_withdraw:0}}},async getWalletUsageWithRefresh(t){try{const e=await this.getWalletUsage(t);if(!e)return null;const n=await this.calculateUsageFromTransactions(t);if(e.used_transfer!==n.used_transfer||e.used_withdraw!==n.used_withdraw){const r=this.getCurrentMonthId(),s=tt(Te,"users",t,"limits",r);return await Ir(s,{used_transfer:n.used_transfer,used_withdraw:n.used_withdraw,updatedAt:Tt()},{merge:!0}),await this.getWalletUsage(t)}return e}catch(e){return console.error("خطأ في الحصول على الاستخدام مع التحديث:",e),null}},calculateRemaining(t){return{remainingTransfer:Math.max(0,t.monthly_limit-t.used_transfer),remainingWithdraw:Math.max(0,t.monthly_limit-t.used_withdraw)}},async canPerformOperation(t,e,n){try{const r=await this.getWalletUsageWithRefresh(t);if(!r)return{canPerform:!1,message:"لا يمكن العثور على بيانات الاستخدام للمحفظة"};const s=this.calculateRemaining(r);return n==="transfer"&&e>s.remainingTransfer?{canPerform:!1,message:`تجاوز حد التحويل المسموح. المتبقي: ${s.remainingTransfer.toLocaleString()} ج.م من أصل ${r.monthly_limit.toLocaleString()} ج.م`,remaining:s.remainingTransfer}:n==="withdraw"&&e>s.remainingWithdraw?{canPerform:!1,message:`تجاوز حد السحب المسموح. المتبقي: ${s.remainingWithdraw.toLocaleString()} ج.م من أصل ${r.monthly_limit.toLocaleString()} ج.م`,remaining:s.remainingWithdraw}:{canPerform:!0}}catch(r){return console.error("Error checking operation limits:",r),{canPerform:!1,message:"خطأ في التحقق من الحدود"}}},async updateUsage(t,e,n){try{const r=await this.getWalletUsageWithRefresh(t);if(!r)throw new Error("لا يمكن العثور على بيانات الاستخدام للمحفظة");const s=await this.canPerformOperation(t,e,n);if(!s.canPerform)throw new Error(s.message||"لا يمكن إجراء العملية");const a=n==="transfer"?r.used_transfer+e:r.used_transfer,o=n==="withdraw"?r.used_withdraw+e:r.used_withdraw,l=this.getCurrentMonthId(),c=tt(Te,"users",r.walletId,"limits",l);await Ir(c,{used_transfer:a,used_withdraw:o,updatedAt:Tt()},{merge:!0});const u=await this.getWalletUsageWithRefresh(t);if(!u)throw new Error("فشل في قراءة البيانات المحدثة");return u}catch(r){throw console.error("Error updating wallet usage:",r),r}},async resetWalletUsageManually(t){try{const e=this.getCurrentMonthId(),n=tt(Te,"users",t,"limits",e);await Ir(n,{used_transfer:0,used_withdraw:0,last_reset:Tt(),updatedAt:Tt()},{merge:!0});const r=await this.getWalletUsageWithRefresh(t);if(!r)throw new Error("فشل في قراءة البيانات بعد التصفير");return console.log(`✅ تم تصفير استخدام المحفظة ${t} بنجاح`),r}catch(e){throw console.error("Error resetting wallet usage:",e),e}},async getAllWalletsUsage(t){try{const n=(await mr.getByMerchantId(t)).map(s=>this.getWalletUsageWithRefresh(s.id));return(await Promise.all(n)).filter(s=>s!==null)}catch(e){return console.error("Error getting all wallets usage:",e),[]}}},ha={shouldResetDailyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t);return e.toDateString()!==n.toDateString()},shouldResetMonthlyReports:t=>{if(!t)return!0;const e=new Date,n=new Date(t),r=e.getDate()===1,s=e.getMonth()!==n.getMonth()||e.getFullYear()!==n.getFullYear();return r&&s},autoResetReportsIfNeeded:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);let r={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[]};if(n){const o=JSON.parse(n);r={lastDailyResetDate:o.lastDailyResetDate?new Date(o.lastDailyResetDate):null,lastMonthlyResetDate:o.lastMonthlyResetDate?new Date(o.lastMonthlyResetDate):null,hiddenDailyTransactionIds:o.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:o.hiddenMonthlyTransactionIds||[]}}let s=!1,a=!1;return ha.shouldResetDailyReports(r.lastDailyResetDate)&&(r.hiddenDailyTransactionIds=[],r.lastDailyResetDate=new Date,s=!0,console.log("تم تصفير التقارير اليومية تلقائياً")),ha.shouldResetMonthlyReports(r.lastMonthlyResetDate)&&(r.hiddenMonthlyTransactionIds=[],r.lastMonthlyResetDate=new Date,a=!0,console.log("تم تصفير التقارير الشهرية تلقائياً")),localStorage.setItem(e,JSON.stringify(r)),{dailyReset:s,monthlyReset:a}}catch(e){return console.error("خطأ في التصفير التلقائي للتقارير:",e),{dailyReset:!1,monthlyReset:!1}}},resetReportsManually:(t,e,n)=>{try{const r=n?`reportsData_${n}`:"reportsData",s=localStorage.getItem(r);let a={lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[]};if(s){const l=JSON.parse(s);a={lastDailyResetDate:l.lastDailyResetDate?new Date(l.lastDailyResetDate):null,lastMonthlyResetDate:l.lastMonthlyResetDate?new Date(l.lastMonthlyResetDate):null,hiddenDailyTransactionIds:l.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:l.hiddenMonthlyTransactionIds||[]}}let o=[];if(t==="daily"){const l=new Date().toDateString();o=e.filter(c=>new Date(c.createdAt).toDateString()===l).map(c=>c.id),a.hiddenDailyTransactionIds=[...new Set([...a.hiddenDailyTransactionIds,...o])],a.lastDailyResetDate=new Date}else{const l=new Date().getMonth(),c=new Date().getFullYear();o=e.filter(u=>{const h=new Date(u.createdAt);return h.getMonth()===l&&h.getFullYear()===c}).map(u=>u.id),a.hiddenMonthlyTransactionIds=[...new Set([...a.hiddenMonthlyTransactionIds,...o])],a.lastMonthlyResetDate=new Date}return localStorage.setItem(r,JSON.stringify(a)),console.log(`تم تصفير التقارير ${t==="daily"?"اليومية":"الشهرية"} يدوياً`),o}catch(r){return console.error("خطأ في التصفير اليدوي للتقارير:",r),[]}},getReportsData:t=>{try{const e=t?`reportsData_${t}`:"reportsData",n=localStorage.getItem(e);if(!n)return{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[]};const r=JSON.parse(n);return{lastDailyResetDate:r.lastDailyResetDate?new Date(r.lastDailyResetDate):null,lastMonthlyResetDate:r.lastMonthlyResetDate?new Date(r.lastMonthlyResetDate):null,hiddenDailyTransactionIds:r.hiddenDailyTransactionIds||[],hiddenMonthlyTransactionIds:r.hiddenMonthlyTransactionIds||[]}}catch(e){return console.error("خطأ في قراءة بيانات التقارير:",e),{lastDailyResetDate:null,lastMonthlyResetDate:null,hiddenDailyTransactionIds:[],hiddenMonthlyTransactionIds:[]}}},filterVisibleTransactions:(t,e,n)=>{try{const r=ha.getReportsData(n),s=e==="daily"?r.hiddenDailyTransactionIds:r.hiddenMonthlyTransactionIds;return t.filter(a=>!s.includes(a.id))}catch(r){return console.error("خطأ في تصفية المعاملات:",r),t}}};class Od{static async startFreeTrial(e){try{const n=tt(Te,"users",e),r=await mn(n);if(!r.exists())return{success:!1,message:"المستخدم غير موجود"};if(r.data().hasUsedFreeTrial)return{success:!1,message:"لقد استخدمت التجربة المجانية من قبل"};const a=new Date,o=new Date;return o.setDate(a.getDate()+this.TRIAL_DURATION_DAYS),await Ui(n,{hasUsedFreeTrial:!0,freeTrialStartDate:a,freeTrialEndDate:o,isOnFreeTrial:!0,updatedAt:Tt()}),{success:!0,message:`تم تفعيل التجربة المجانية لمدة ${this.TRIAL_DURATION_DAYS} أيام`}}catch(n){return console.error("خطأ في بدء التجربة المجانية:",n),{success:!1,message:"حدث خطأ أثناء تفعيل التجربة المجانية"}}}static async checkTrialValidity(e){var n;try{const r=tt(Te,"users",e),s=await mn(r);if(!s.exists())return{isValid:!1,isExpired:!1,daysRemaining:0,hasUsedTrial:!1};const a=s.data(),o=a.hasUsedFreeTrial||!1,l=a.isOnFreeTrial||!1,c=(n=a.freeTrialEndDate)==null?void 0:n.toDate();if(!o||!l||!c)return{isValid:!1,isExpired:!1,daysRemaining:0,hasUsedTrial:o};const u=new Date;if(u>c)return await Ui(r,{isOnFreeTrial:!1,updatedAt:Tt()}),{isValid:!1,isExpired:!0,daysRemaining:0,hasUsedTrial:o};const f=c.getTime()-u.getTime();return{isValid:!0,isExpired:!1,daysRemaining:Math.ceil(f/(1e3*3600*24)),hasUsedTrial:o}}catch(r){return console.error("خطأ في التحقق من صلاحية التجربة المجانية:",r),{isValid:!1,isExpired:!1,daysRemaining:0,hasUsedTrial:!1}}}static async getTrialData(e){var n,r;try{const s=tt(Te,"users",e),a=await mn(s);if(!a.exists())return{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1};const o=a.data();return{hasUsedFreeTrial:o.hasUsedFreeTrial||!1,freeTrialStartDate:((n=o.freeTrialStartDate)==null?void 0:n.toDate())||null,freeTrialEndDate:((r=o.freeTrialEndDate)==null?void 0:r.toDate())||null,isOnFreeTrial:o.isOnFreeTrial||!1}}catch(s){return console.error("خطأ في الحصول على بيانات التجربة المجانية:",s),{hasUsedFreeTrial:!1,freeTrialStartDate:null,freeTrialEndDate:null,isOnFreeTrial:!1}}}}jg(Od,"TRIAL_DURATION_DAYS",3);const RE=({isOpen:t,onClose:e,onTrialStarted:n})=>{const{user:r}=_A(),[s,a]=m.useState(!1),[o,l]=m.useState(!1),[c,u]=m.useState("");m.useEffect(()=>{t&&(async()=>{if(r!=null&&r.uid){const p=await Od.getTrialData(r.uid);l(p.hasUsedFreeTrial)}})()},[t,r]);const h=async()=>{if(r!=null&&r.uid){a(!0);try{const f=await Od.startFreeTrial(r.uid);f.success?(n==null||n(),e()):u(f.message)}catch{u("حدث خطأ أثناء تفعيل التجربة المجانية")}finally{a(!1)}}};return i.jsxs(i.Fragment,{children:[t&&i.jsx("div",{className:"fixed inset-0 z-40",style:{background:"rgba(0, 0, 0, 0.15)",backdropFilter:"blur(3px)",WebkitBackdropFilter:"blur(3px)",pointerEvents:"auto"}}),i.jsx(Zt,{open:t,onOpenChange:()=>{},children:i.jsxs(zt,{className:"sm:max-w-lg z-50 border-0 shadow-2xl",style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",pointerEvents:"auto",background:"linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",borderRadius:"20px",border:"1px solid rgba(255, 255, 255, 0.3)"},children:[i.jsxs(Wt,{className:"text-center pb-2",children:[i.jsx("div",{className:"flex justify-center mb-6",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:"linear-gradient(135deg, #f59e0b, #d97706)",filter:"blur(8px)",opacity:.3}}),i.jsx("div",{className:"relative bg-gradient-to-br from-orange-400 to-orange-600 p-4 rounded-full",children:i.jsx(Ri,{className:"h-12 w-12 text-white"})})]})}),i.jsx(Ht,{className:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent text-center",children:"تفعيل الحساب مطلوب"})]}),i.jsxs("div",{className:"text-center py-6 px-2",children:[i.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-xl p-6 mb-6 border border-orange-100",children:[i.jsx("p",{className:"text-gray-700 text-lg leading-relaxed font-medium",children:"حسابك في انتظار التفعيل من قبل المسؤول"}),i.jsx("p",{className:"text-gray-600 text-base mt-3 leading-relaxed",children:"يرجى التواصل مع مسؤول الموقع لتفعيل حسابك والبدء في استخدام جميع الميزات المتاحة"})]}),!o&&i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 mb-4 border border-green-200",children:[i.jsxs("div",{className:"flex items-center justify-center mb-2",children:[i.jsx(Wo,{className:"h-5 w-5 text-green-600 ml-2"}),i.jsx("span",{className:"text-green-700 font-semibold",children:"تجربة مجانية لمدة 3 أيام"})]}),i.jsx("p",{className:"text-green-600 text-sm text-center",children:"احصل على وصول كامل لجميع الميزات لمدة 3 أيام مجاناً"})]}),c&&i.jsx("div",{className:`rounded-xl p-4 mb-4 text-center ${c.includes("تم تفعيل")?"bg-green-50 border border-green-200 text-green-700":"bg-red-50 border border-red-200 text-red-700"}`,children:i.jsx("p",{className:"font-medium",children:c})}),i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500 mb-4",children:[i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse"}),i.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),i.jsx("div",{className:"w-2 h-2 bg-orange-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]}),i.jsx("span",{className:"mr-2",children:"في انتظار التفعيل"})]})]}),i.jsxs("div",{className:"flex flex-col space-y-3 pb-2",children:[!o&&!c.includes("تم تفعيل")&&i.jsxs(V,{onClick:h,disabled:s,className:"relative bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 hover:from-blue-700 hover:via-purple-700 hover:to-indigo-700 text-white px-10 py-4 rounded-2xl font-bold text-xl shadow-2xl hover:shadow-3xl transition-all duration-500 transform hover:scale-110 hover:-translate-y-1 disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden group",style:{boxShadow:"0 15px 35px rgba(99, 102, 241, 0.4), 0 5px 15px rgba(0, 0, 0, 0.1)"},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),i.jsx("div",{className:"absolute -top-1 -left-1 w-3 h-3 bg-yellow-400 rounded-full animate-ping"}),i.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-green-400 rounded-full animate-pulse"}),s?i.jsxs("div",{className:"flex items-center relative z-10",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white ml-3"}),i.jsx("span",{className:"bg-gradient-to-r from-white to-gray-100 bg-clip-text text-transparent",children:"جاري التفعيل..."})]}):i.jsxs("div",{className:"flex items-center relative z-10",children:[i.jsx(Wo,{className:"h-6 w-6 ml-3 animate-bounce"}),i.jsx("span",{className:"bg-gradient-to-r from-white to-gray-100 bg-clip-text text-transparent",children:"🎉 ابدأ التجربة المجانية"})]})]}),i.jsx(V,{onClick:e,variant:"outline",className:"border-2 border-gray-300 hover:border-gray-400 text-gray-700 hover:text-gray-800 px-10 py-3 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105",children:o?"فهمت":"إغلاق"})]})]})})]})};function Bq({isOpen:t,onClose:e}){const[n,r]=m.useState("0"),[s,a]=m.useState(null),[o,l]=m.useState(null),[c,u]=m.useState(!1),h=C=>{c?(r(C),u(!1)):r(n==="0"?C:n+C)},f=C=>{const I=parseFloat(n);if(s===null)a(I);else if(o){const j=p(s||0,I,o);r(String(j)),a(j)}u(!0),l(C)},p=(C,I,R)=>{switch(R){case"+":return C+I;case"-":return C-I;case"×":return C*I;case"÷":return I===0?0:C/I;case"=":return I;default:return I}},g=()=>{const C=parseFloat(n);if(s!==null&&o){const I=p(s,C,o);r(String(I)),a(null),l(null),u(!0)}},N=()=>{r("0"),a(null),l(null),u(!1)},x=()=>{r("0")},b=()=>{c?(r("0."),u(!1)):n.indexOf(".")===-1&&r(n+".")},_=()=>{n!=="0"&&r(n.charAt(0)==="-"?n.slice(1):"-"+n)},w=()=>{const C=parseFloat(n);r(String(C/100))},v=C=>{const I=C.key;C.preventDefault(),I>="0"&&I<="9"?h(I):I==="+"?f("+"):I==="-"?f("-"):I==="*"?f("×"):I==="/"?f("÷"):I==="Enter"||I==="="?g():I==="Escape"||I==="c"||I==="C"?N():I==="Backspace"?x():I==="."?b():I==="%"&&w()};return m.useEffect(()=>(t?document.addEventListener("keydown",v):document.removeEventListener("keydown",v),()=>{document.removeEventListener("keydown",v)}),[t,n,s,o,c]),i.jsx(Zt,{open:t,onOpenChange:C=>!C&&e(),children:i.jsxs(zt,{className:"sm:max-w-md",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"flex items-center gap-2 text-right",children:[i.jsx(Sv,{className:"h-5 w-5"}),"آلة حاسبة"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-gray-900 text-white p-4 rounded-lg text-right",children:i.jsx("div",{className:"text-3xl font-mono font-bold min-h-[3rem] flex items-center justify-end overflow-hidden",children:n})}),i.jsxs("div",{className:"grid grid-cols-4 gap-2",children:[i.jsx(V,{variant:"outline",className:"h-12 text-sm font-semibold bg-gray-100 hover:bg-gray-200",onClick:N,children:"AC"}),i.jsx(V,{variant:"outline",className:"h-12 text-sm font-semibold bg-gray-100 hover:bg-gray-200",onClick:x,children:"CE"}),i.jsx(V,{variant:"outline",className:"h-12 text-sm font-semibold bg-gray-100 hover:bg-gray-200",onClick:w,children:"%"}),i.jsx(V,{variant:"outline",className:"h-12 text-sm font-semibold bg-orange-500 text-white hover:bg-orange-600",onClick:()=>f("÷"),children:"÷"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50",onClick:()=>h("7"),children:"7"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50",onClick:()=>h("8"),children:"8"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50",onClick:()=>h("9"),children:"9"}),i.jsx(V,{variant:"outline",className:"h-12 text-sm font-semibold bg-orange-500 text-white hover:bg-orange-600",onClick:()=>f("×"),children:"×"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50",onClick:()=>h("4"),children:"4"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50",onClick:()=>h("5"),children:"5"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50",onClick:()=>h("6"),children:"6"}),i.jsx(V,{variant:"outline",className:"h-12 text-sm font-semibold bg-orange-500 text-white hover:bg-orange-600",onClick:()=>f("-"),children:"-"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50",onClick:()=>h("1"),children:"1"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50",onClick:()=>h("2"),children:"2"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50",onClick:()=>h("3"),children:"3"}),i.jsx(V,{variant:"outline",className:"h-12 text-sm font-semibold bg-orange-500 text-white hover:bg-orange-600",onClick:()=>f("+"),children:"+"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50 col-span-2",onClick:()=>h("0"),children:"0"}),i.jsx(V,{variant:"outline",className:"h-12 text-lg font-semibold bg-white hover:bg-gray-50",onClick:b,children:"."}),i.jsx(V,{variant:"outline",className:"h-12 text-sm font-semibold bg-orange-500 text-white hover:bg-orange-600",onClick:g,children:"="})]}),i.jsx(V,{variant:"outline",className:"w-full h-10 text-sm font-semibold bg-gray-100 hover:bg-gray-200",onClick:_,children:"+/-"})]})]})})}function zq({isOpen:t,onClose:e}){const[n,r]=m.useState([]),[s,a]=m.useState({productName:"",price:"",quantity:""}),[o,l]=m.useState(null),[c,u]=m.useState(!0),{toast:h}=_n(),{user:f}=Kt();m.useEffect(()=>{t&&(f!=null&&f.uid)&&p()},[t,f==null?void 0:f.uid]);const p=()=>{if(!(f!=null&&f.uid)){console.log("No user authenticated, cannot load sales data");return}const I=new Date().toISOString().split("T")[0],R=localStorage.getItem(`salesData_${f.uid}_${I}`);r(R?JSON.parse(R):[])},g=I=>{if(!(f!=null&&f.uid)){console.log("No user authenticated, cannot save sales data");return}const R=new Date().toISOString().split("T")[0];localStorage.setItem(`salesData_${f.uid}_${R}`,JSON.stringify(I)),r(I)},N=()=>{if(!s.productName||!s.price||!s.quantity){h({title:"خطأ",description:"يرجى ملء جميع الحقول",variant:"destructive"});return}const I=new Date,R={id:Date.now().toString(),productName:s.productName,price:parseFloat(s.price),quantity:parseInt(s.quantity),date:I.toISOString().split("T")[0],time:I.toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})},j=[...n,R];g(j),a({productName:"",price:"",quantity:""}),h({title:"تم بنجاح",description:"تم إضافة المنتج بنجاح"})},x=I=>{const R=n.filter(j=>j.id!==I);g(R),h({title:"تم الحذف",description:"تم حذف المنتج بنجاح"})},b=I=>{l(I.id),a({productName:I.productName,price:I.price.toString(),quantity:I.quantity.toString()})},_=()=>{if(!o)return;const I=n.map(R=>R.id===o?{...R,productName:s.productName,price:parseFloat(s.price),quantity:parseInt(s.quantity)}:R);g(I),l(null),a({productName:"",price:"",quantity:""}),h({title:"تم التحديث",description:"تم تحديث المنتج بنجاح"})},w=()=>{l(null),a({productName:"",price:"",quantity:""})},v=n.reduce((I,R)=>I+R.price*R.quantity,0),C=n.reduce((I,R)=>I+R.quantity,0);return n.length>0&&v/n.length,i.jsx(Zt,{open:t,onOpenChange:e,children:i.jsxs(zt,{className:"max-w-7xl h-[90vh] p-0 overflow-hidden",children:[i.jsx(Wt,{className:"px-6 py-4 border-b bg-gradient-to-r from-blue-50 to-purple-50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:i.jsx(Tv,{className:"h-6 w-6 text-blue-600"})}),i.jsxs("div",{children:[i.jsx(Ht,{className:"text-xl font-bold text-gray-800",children:"📊 بيانات المبيعات اليومية"}),i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["إدارة وتتبع مبيعات اليوم - ",new Date().toLocaleDateString("ar-EG")]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(V,{variant:"ghost",size:"sm",onClick:()=>u(!c),className:"text-gray-600 hover:text-gray-800",children:i.jsx(RS,{className:"h-4 w-4"})}),i.jsx(V,{variant:"ghost",size:"sm",onClick:e,children:i.jsx($a,{className:"h-4 w-4"})})]})]})}),i.jsxs("div",{className:"flex h-full",children:[c&&i.jsxs("div",{className:"w-80 bg-gradient-to-b from-gray-50 to-white border-r border-gray-200 flex flex-col max-h-[80vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-gray-100 hover:scrollbar-thumb-gray-400",children:[i.jsxs("div",{className:"p-4 border-b bg-white/50",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx(R3,{className:"h-4 w-4 text-blue-600"}),"إحصائيات اليوم"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-white/80 p-3 rounded-lg border border-blue-100 text-center",children:[i.jsx(n0,{className:"h-5 w-5 mx-auto mb-1 text-blue-600"}),i.jsx("div",{className:"text-lg font-bold text-blue-700",children:n.length}),i.jsx("div",{className:"text-xs text-blue-500",children:"معاملات"})]}),i.jsxs("div",{className:"bg-white/80 p-3 rounded-lg border border-green-100 text-center",children:[i.jsx(n0,{className:"h-5 w-5 mx-auto mb-1 text-green-600"}),i.jsx("div",{className:"text-lg font-bold text-green-700",children:C}),i.jsx("div",{className:"text-xs text-green-500",children:"قطع"})]}),i.jsxs("div",{className:"bg-white/80 p-3 rounded-lg border border-purple-100 text-center col-span-2",children:[i.jsx(yr,{className:"h-5 w-5 mx-auto mb-1 text-purple-600"}),i.jsx("div",{className:"text-xl font-bold text-purple-700",children:v.toFixed(2)}),i.jsx("div",{className:"text-xs text-purple-500",children:"إجمالي المبيعات (جنيه)"})]})]})]}),i.jsxs("div",{className:"p-4 border-b bg-white/30",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx(dr,{className:"h-4 w-4 text-green-600"}),o?"تعديل المنتج":"إضافة منتج جديد"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx(be,{htmlFor:"productName",className:"text-sm font-medium text-gray-700",children:"اسم المنتج"}),i.jsx(de,{id:"productName",value:s.productName,onChange:I=>a({...s,productName:I.target.value}),placeholder:"أدخل اسم المنتج",className:"mt-1"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx(be,{htmlFor:"price",className:"text-sm font-medium text-gray-700",children:"السعر (ج.م)"}),i.jsx(de,{id:"price",type:"number",value:s.price,onChange:I=>a({...s,price:I.target.value}),placeholder:"0.00",className:"mt-1"})]}),i.jsxs("div",{children:[i.jsx(be,{htmlFor:"quantity",className:"text-sm font-medium text-gray-700",children:"الكمية"}),i.jsx(de,{id:"quantity",type:"number",value:s.quantity,onChange:I=>a({...s,quantity:I.target.value}),placeholder:"1",className:"mt-1"})]})]}),i.jsx("div",{className:"flex gap-2",children:o?i.jsxs(i.Fragment,{children:[i.jsxs(V,{onClick:_,size:"sm",className:"flex-1",children:[i.jsx(hp,{className:"h-4 w-4 mr-1"}),"حفظ"]}),i.jsx(V,{onClick:w,variant:"outline",size:"sm",children:i.jsx(Kd,{className:"h-4 w-4"})})]}):i.jsxs(V,{onClick:N,size:"sm",className:"w-full",children:[i.jsx(dr,{className:"h-4 w-4 mr-1"}),"إضافة"]})})]})]}),i.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[i.jsxs("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center gap-2",children:[i.jsx(Tx,{className:"h-4 w-4 text-blue-600"}),"نصائح للمبيعات"]}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(oc,{className:"h-4 w-4 text-blue-600"}),i.jsx("span",{className:"font-medium text-blue-800",children:"تحسين المبيعات"})]}),i.jsx("p",{className:"text-blue-700",children:"تتبع أفضل المنتجات مبيعاً وركز عليها"})]}),i.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(Sv,{className:"h-4 w-4 text-green-600"}),i.jsx("span",{className:"font-medium text-green-800",children:"حساب الأرباح"})]}),i.jsx("p",{className:"text-green-700",children:"احسب هامش الربح لكل منتج"})]}),i.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-100",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(x3,{className:"h-4 w-4 text-purple-600"}),i.jsx("span",{className:"font-medium text-purple-800",children:"أهداف يومية"})]}),i.jsx("p",{className:"text-purple-700",children:"ضع أهدافاً يومية واعمل على تحقيقها"})]})]})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto transition-all duration-300 ease-in-out max-h-[80vh] scrollbar-thin scrollbar-thumb-blue-300 scrollbar-track-blue-100 hover:scrollbar-thumb-blue-400",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("h2",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[i.jsx(v3,{className:"h-5 w-5 text-blue-600"}),"سجل المبيعات (",n.length," عنصر)"]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx(Pi,{className:"h-4 w-4"}),i.jsx("span",{children:new Date().toLocaleDateString("ar-EG")}),i.jsx(es,{className:"h-4 w-4 ml-2"}),i.jsx("span",{children:new Date().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"})})]})]}),n.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:i.jsx(n0,{className:"h-12 w-12 text-gray-400"})}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد مبيعات اليوم"}),i.jsx("p",{className:"text-gray-500 mb-4",children:"ابدأ بإضافة أول منتج من العمود الجانبي"}),i.jsxs(V,{onClick:()=>u(!0),variant:"outline",children:[i.jsx(dr,{className:"h-4 w-4 mr-2"}),"إضافة منتج"]})]}):i.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:i.jsx("div",{className:"overflow-x-auto max-h-96 overflow-y-auto scrollbar-thin scrollbar-thumb-green-300 scrollbar-track-green-100 hover:scrollbar-thumb-green-400",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"المنتج"}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"السعر (ج.م)"}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"الكمية"}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"الإجمالي (ج.م)"}),i.jsx("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-700",children:"الوقت"}),i.jsx("th",{className:"px-4 py-3 text-center text-sm font-medium text-gray-700",children:"الإجراءات"})]})}),i.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map((I,R)=>i.jsxs("tr",{className:R%2===0?"bg-white":"bg-gray-50/50",children:[i.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:I.productName}),i.jsxs("td",{className:"px-4 py-3 text-sm text-gray-700",children:[I.price.toFixed(2)," ج.م"]}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-700",children:I.quantity}),i.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-green-600",children:[(I.price*I.quantity).toFixed(2)," ج.م"]}),i.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:I.time}),i.jsx("td",{className:"px-4 py-3 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-1",children:[i.jsx(V,{variant:"ghost",size:"sm",onClick:()=>b(I),className:"h-8 w-8 p-0 text-blue-600 hover:text-blue-800 hover:bg-blue-50",children:i.jsx(kS,{className:"h-4 w-4"})}),i.jsx(V,{variant:"ghost",size:"sm",onClick:()=>x(I.id),className:"h-8 w-8 p-0 text-red-600 hover:text-red-800 hover:bg-red-50",children:i.jsx(Ws,{className:"h-4 w-4"})})]})})]},I.id))})]})})}),i.jsxs("div",{className:"mt-6 text-xs text-gray-500 text-center bg-gray-50/50 p-3 rounded border border-gray-200/40 space-y-1",children:[i.jsx("p",{className:"font-medium text-gray-600",children:"💰 نظام إدارة المبيعات اليومية"}),i.jsxs("p",{children:["• يتم حفظ البيانات تلقائياً لليوم الحالي: ",new Date().toLocaleDateString("ar-EG")]}),i.jsx("p",{children:"• يمكنك إضافة وتعديل وحذف المنتجات حسب الحاجة"}),i.jsx("p",{children:"• البيانات محفوظة محلياً في المتصفح"})]})]})})]})]})})}class A0{static processTransfer(e){const{amount:n,currentCashBalance:r,currentWalletBalances:s,wallets:a}=e;if(n<=0)return{success:!1,newCashBalance:r,newWalletBalances:s,message:"المبلغ يجب أن يكون أكبر من الصفر",error:"INVALID_AMOUNT"};const o=a.reduce((f,p)=>{const g=s[p.id]||0;return f+g},0),l={...s};let c=n;for(const f of a){if(c<=0)break;const p=l[f.id]||0,g=Math.min(Math.max(p,0),c);g>0&&(l[f.id]=p-g,c-=g)}if(c>0){const f=a.find(p=>p.isDefault)||a[0];if(f){const p=l[f.id]||0;l[f.id]=p-c}}const u=r+n;let h="تم التحويل بنجاح";return o<n&&(h=`تم التحويل بنجاح مع تحذير: الرصيد المتاح في المحافظ (${o} جنيه) كان أقل من المبلغ المطلوب (${n} جنيه). بعض المحافظ أصبحت بأرصدة سالبة.`),{success:!0,newCashBalance:u,newWalletBalances:l,message:h}}static processWithdraw(e){const{amount:n,currentCashBalance:r,currentWalletBalances:s,wallets:a}=e;if(n<=0)return{success:!1,newCashBalance:r,newWalletBalances:s,message:"المبلغ يجب أن يكون أكبر من الصفر",error:"INVALID_AMOUNT"};if(r<n)return{success:!1,newCashBalance:r,newWalletBalances:s,message:`رصيد غير كافي في صندوق النقدية. الرصيد المتاح: ${r} جنيه، المبلغ المطلوب: ${n} جنيه`,error:"INSUFFICIENT_CASH_BALANCE"};const o=r-n,l={...s},c=a.find(u=>u.isDefault)||a[0];if(c){const u=l[c.id]||0;l[c.id]=u+n}else return{success:!1,newCashBalance:r,newWalletBalances:s,message:"لا توجد محافظ متاحة لإضافة المبلغ إليها",error:"NO_WALLETS_AVAILABLE"};return{success:!0,newCashBalance:o,newWalletBalances:l,message:`تم السحب بنجاح. تم إضافة ${n} جنيه إلى محفظة ${c.name}`}}static validateOperation(e,n){return e<=0?{valid:!1,error:"المبلغ يجب أن يكون أكبر من الصفر"}:!n||n.length===0?{valid:!1,error:"لا توجد محافظ متاحة"}:{valid:!0}}static calculateTotalWalletBalance(e){return Object.values(e).reduce((n,r)=>n+r,0)}static deductFromWalletsAddToCash(e,n,r,s){return this.processTransfer({amount:e,currentCashBalance:n,currentWalletBalances:r,wallets:s})}static deductFromCashAddToWallets(e,n,r,s){return this.processWithdraw({amount:e,currentCashBalance:n,currentWalletBalances:r,wallets:s})}static applyTransactionResult(e,n,r){e.success&&(n(e.newCashBalance),r(e.newWalletBalances))}static validateTransaction(e,n,r,s){if(e<=0)return{isValid:!1,error:"المبلغ يجب أن يكون أكبر من الصفر"};if(n==="transfer"){const a=this.calculateTotalWalletBalance(s);if(a<e)return{isValid:!0,warning:`الرصيد المتاح في المحافظ (${a} جنيه) أقل من المبلغ المطلوب (${e} جنيه). ستصبح بعض المحافظ بأرصدة سالبة.`}}else if(n==="withdraw"&&r<e)return{isValid:!1,error:`الرصيد المتاح في صندوق النقدية (${r} جنيه) غير كافي للمبلغ المطلوب (${e} جنيه)`};return{isValid:!0}}static getDeductionPreview(e,n,r){const s=[];let a=e;for(const o of r){if(a<=0)break;const l=n[o.id]||0,c=Math.min(Math.max(l,0),a);c>0&&(s.push({walletId:o.id,walletName:o.name,currentBalance:l,deductedAmount:c,newBalance:l-c}),a-=c)}if(a>0){const o=r.find(l=>l.isDefault)||r[0];if(o){const l=n[o.id]||0,c=s.find(u=>u.walletId===o.id);c?(c.deductedAmount+=a,c.newBalance-=a):s.push({walletId:o.id,walletName:o.name,currentBalance:l,deductedAmount:a,newBalance:l-a})}}return s}}const Wq=()=>{var as,du;console.log("🔥 UserDashboardPage component is loading...");const{toast:t}=_n(),{signOut:e,user:n}=Kt();console.log("🔥 UserDashboardPage - user:",n?"exists":"null");const[r,s]=m.useState(!0),[a,o]=m.useState(!0),[l,c]=m.useState(!1),[u,h]=m.useState(!1),[f,p]=m.useState(0),[g,N]=m.useState(!1),[x,b]=m.useState(null),[_,w]=m.useState(!1),[v,C]=m.useState("01030302038"),[I,R]=m.useState(""),[j,S]=m.useState(""),[T,P]=m.useState("transfer"),[A,D]=m.useState([]),[M,$]=m.useState("all"),[se,W]=m.useState(!1),[X,U]=m.useState(""),[L,Q]=m.useState([]),[he,ne]=m.useState(null),[me,Ne]=m.useState(!1);m.useState([]),m.useState([]);const[We,He]=m.useState(!1),[Z,z]=m.useState("daily"),[oe,le]=m.useState([]),[ve,Ee]=m.useState(""),[Be,ht]=m.useState(""),[st,gt]=m.useState(""),[Ct,En]=m.useState(!1),[Qn,ns]=m.useState(!1),Vr=async()=>{if(n!=null&&n.uid){console.log("🔄 إعادة فحص حالة المستخدم...");try{await new Promise(H=>setTimeout(H,500));const O=await mn(tt(Te,"users",n.uid));if(O.exists()){const ee=O.data().isActive===!0,re=await Od.checkTrialValidity(n.uid),pe=re.isValid&&!re.isExpired;console.log("📊 حالة المستخدم:",{isActive:ee,isOnTrial:pe,daysRemaining:re.daysRemaining}),s(ee||pe),h(pe),p(re.daysRemaining),N(re.hasUsedTrial),c(!ee&&!pe),console.log("✅ تم تحديث حالة المستخدم بنجاح:",{userIsActive:ee||pe,isOnFreeTrial:pe})}}catch(O){console.error("خطأ في إعادة فحص حالة المستخدم:",O)}}},qi=async()=>{console.log("🎉 تم بدء التجربة المجانية، إعادة فحص حالة المستخدم..."),await Vr()},Rn=async()=>{if(n!=null&&n.uid)try{w(!0);const O=await AB(n.uid);b(O)}catch(O){console.error("خطأ في جلب بيانات الاشتراك:",O)}finally{w(!1)}};m.useState(!1);const[rs,Ur]=m.useState(!1),[Oe,Ke]=m.useState(0),[Et,Y]=m.useState({}),[we,ut]=m.useState(!1),[At,Dt]=m.useState(!1),[xt,ar]=m.useState(!1),[$r,Ki]=m.useState(!1),[li,Ds]=m.useState(""),nn=()=>`walletBalances_${(n==null?void 0:n.uid)||"default"}`,Yn=()=>`userCashBalance_${(n==null?void 0:n.uid)||"default"}`,vr=()=>`transactions_${(n==null?void 0:n.uid)||"default"}`,Gt=()=>`deletedTransactions_${(n==null?void 0:n.uid)||"default"}`,Br=()=>`wallets_${(n==null?void 0:n.uid)||"default"}`,Pe=()=>`withdrawalCommissionRate_${(n==null?void 0:n.uid)||"default"}`,[Ge,it]=m.useState(""),[ft,kn]=m.useState("");m.useState(!1);const[wt,zr]=m.useState(!1),[cn,Dn]=m.useState(!1),[hg,fg]=m.useState(!1),[Gi,pl]=m.useState(!1),[gl,Qi]=m.useState(""),[xl,oo]=m.useState(""),[lo,ss]=m.useState(!1),[vh,co]=m.useState(!1),[yl,uo]=m.useState(""),[su,vl]=m.useState(""),[wh,ho]=m.useState(!1),iu=async()=>{if(n!=null&&n.uid)try{const O=`userData_${n.uid}`,H=localStorage.getItem(O);if(H){const ee=JSON.parse(H);console.log("🔄 مزامنة البيانات المحلية مع Firebase...",ee),await Pt.updateUserData(n.uid,{cashBalance:ee.cashBalance,walletBalances:ee.walletBalances,lastSynced:new Date().toISOString()}),localStorage.removeItem(O),_l(!1),console.log("✅ تمت المزامنة بنجاح وحذف البيانات المحلية"),t({title:"تمت المزامنة",description:"تم مزامنة البيانات المحفوظة محلياً مع الخادم بنجاح",variant:"default"})}else console.log("لا توجد بيانات محلية تحتاج للمزامنة")}catch(O){console.error("❌ فشل في مزامنة البيانات:",O),t({title:"فشل في المزامنة",description:"حدث خطأ أثناء مزامنة البيانات مع الخادم",variant:"destructive"})}},au=()=>{let O=A;if(ve.trim()&&(O=O.filter(H=>H.senderPhone.includes(ve.trim())||H.receiverPhone.includes(ve.trim()))),Be){const H=new Date(Be);O=O.filter(ee=>{const re=new Date(ee.createdAt);if(st){const[pe,at]=st.split(":"),Ie=new Date(H);Ie.setHours(parseInt(pe),parseInt(at),0,0);const Fe=new Date(Ie);return Fe.setHours(Fe.getHours()+1),re>=Ie&&re<Fe}else return re.toDateString()===H.toDateString()})}return O},[fo,Wr]=m.useState(!1),[wl,bl]=m.useState(""),[bh,mo]=m.useState(!1),[Nl,po]=m.useState(""),[ou,_l]=m.useState(!1);L.reduce((O,H)=>O+(Et[H.id]||0),0);const lu=O=>{const H=n!=null&&n.uid?`wallet_total_pin_${n.uid}`:"wallet_total_pin",ee=localStorage.getItem(H);if(!ee)return O==="1234";try{return atob(ee)===O}catch{return O==="1234"}},El=O=>{const H=n!=null&&n.uid?`cash_drawer_pin_${n.uid}`:"cash_drawer_pin",ee=localStorage.getItem(H);if(!ee)return O==="1234";try{return atob(ee)===O}catch{return O==="1234"}};m.useEffect(()=>{if(!(n!=null&&n.uid))return;console.log("🚀 استعادة البيانات من localStorage عند تحميل الصفحة للمستخدم:",n.uid);const O=`walletBalances_${n.uid}`,H=localStorage.getItem(O);if(H)try{const pe=JSON.parse(H);console.log("📱 استعادة أرصدة المحافظ من localStorage:",pe),Y(pe)}catch(pe){console.error("خطأ في قراءة أرصدة المحافظ من localStorage:",pe)}const ee=`userCashBalance_${n.uid}`,re=localStorage.getItem(ee);if(re){const pe=parseFloat(re);console.log("💰 استعادة رصيد الدرج النقدي من localStorage:",pe),Ke(pe)}},[n==null?void 0:n.uid]),m.useEffect(()=>{console.log("🔥 useEffect loadUserData started",{user:n==null?void 0:n.uid,isCheckingActivation:a}),(async()=>{try{if(!(n!=null&&n.uid)){console.log("🔥 No user UID, setting isCheckingActivation to false"),o(!1);return}let re=!1;const pe=`userData_${n==null?void 0:n.uid}`,at=localStorage.getItem(pe);if(at)try{const xe=JSON.parse(at);xe.walletBalances&&(Y(xe.walletBalances),re=!0,console.log("⚡ تحميل فوري لأرصدة المحافظ من بيانات المستخدم:",xe.walletBalances))}catch(xe){console.error("خطأ في قراءة بيانات المستخدم من localStorage:",xe)}if(!re){const xe=localStorage.getItem(nn());if(xe)try{const Ve=JSON.parse(xe);Y(Ve),re=!0,console.log("⚡ تحميل فوري لأرصدة المحافظ من النسخة الاحتياطية:",Ve)}catch(Ve){console.error("خطأ في قراءة أرصدة المحافظ من localStorage:",Ve)}}if(!re){const Ve=Object.keys(localStorage).filter(Re=>Re.startsWith("walletBalances_backup_")).sort().reverse();for(const Re of Ve)try{const ye=localStorage.getItem(Re);if(ye){const pn=JSON.parse(ye);Y(pn),re=!0,console.log("⚡ تحميل فوري لأرصدة المحافظ من النسخة الاحتياطية بالتوقيت:",pn);break}}catch(ye){console.error("خطأ في قراءة النسخة الاحتياطية:",ye);continue}}const Ie=localStorage.getItem(Yn());Ie&&(Ke(parseFloat(Ie)),console.log("⚡ تحميل فوري لرصيد الدرج النقدي من localStorage:",Ie));try{const xe=await mn(tt(Te,"users",n.uid));if(xe.exists()){const Re=xe.data().isActive===!0,ye=await Od.checkTrialValidity(n.uid),pn=ye.isValid&&!ye.isExpired;s(Re||pn),h(pn),p(ye.daysRemaining),N(ye.hasUsedTrial),c(!Re&&!pn),console.log("📊 حالة المستخدم:",{isActive:Re,isOnTrial:pn,daysRemaining:ye.daysRemaining,hasUsedTrial:ye.hasUsedTrial})}else s(!1),c(!0)}catch(xe){console.error("خطأ في فحص حالة تفعيل المستخدم:",xe),s(!1),c(!0)}finally{o(!1)}console.log("🔄 بدء تحميل بيانات المستخدم من Firebase...",{userId:n==null?void 0:n.uid});const Fe=localStorage.getItem(pe);let ze=!1;if(Fe)try{const xe=JSON.parse(Fe),Ve=new Date(xe.lastUpdated);(new Date().getTime()-Ve.getTime())/(1e3*60)<1&&(ze=!0,console.log("⚡ توجد تغييرات محلية حديثة (أقل من دقيقة)، تجنب إعادة التحميل من Firebase"),xe.walletBalances&&Y(xe.walletBalances),xe.cashBalance!==void 0&&Ke(xe.cashBalance))}catch(xe){console.error("خطأ في قراءة البيانات المحلية:",xe)}if(Fe&&!ze)try{const xe=JSON.parse(Fe),Ve=new Date(xe.lastUpdated);(new Date().getTime()-Ve.getTime())/(1e3*60)>10&&(console.log("🗑️ حذف البيانات المحلية القديمة (أكثر من 10 دقائق)"),localStorage.removeItem(pe))}catch(xe){console.error("خطأ في حذف البيانات المحلية القديمة:",xe)}if(!ze){const xe=await Pt.getUserData((n==null?void 0:n.uid)||"user-1");if(console.log("📥 البيانات المحملة من Firebase:",xe),xe){if(xe.walletBalances!==void 0&&Object.keys(Et).length===0)console.log("👛 تحميل أرصدة المحافظ:",xe.walletBalances),Y(xe.walletBalances),localStorage.setItem(nn(),JSON.stringify(xe.walletBalances));else{const Ve=localStorage.getItem(nn());if(Ve)try{const Re=JSON.parse(Ve);console.log("📱 استعادة أرصدة المحافظ من localStorage:",Re),Y(Re),await Pt.updateUserData((n==null?void 0:n.uid)||"user-1",{walletBalances:Re})}catch(Re){console.error("خطأ في قراءة أرصدة المحافظ من localStorage:",Re);const ye={"wallet-1":1e4,"wallet-2":5e3};Y(ye),localStorage.setItem(nn(),JSON.stringify(ye)),await Pt.updateUserData((n==null?void 0:n.uid)||"user-1",{walletBalances:ye})}else{console.log("⚠️ لا توجد أرصدة محافظ في Firebase أو localStorage، إنشاء أرصدة افتراضية");const Re={"wallet-1":1e4,"wallet-2":5e3};Y(Re),localStorage.setItem(nn(),JSON.stringify(Re)),await Pt.updateUserData((n==null?void 0:n.uid)||"user-1",{walletBalances:Re})}}xe.cashBalance!==void 0&&Oe===0?(console.log("💰 تحميل رصيد الدرج النقدي:",xe.cashBalance),Ke(xe.cashBalance),localStorage.setItem(Yn(),xe.cashBalance.toString())):(console.log("⚠️ لا يوجد رصيد درج نقدي، استخدام القيمة الافتراضية: 0"),Ke(0),localStorage.setItem(Yn(),"0"));try{const Ve=await Pt.getDeletedTransactions((n==null?void 0:n.uid)||"");if(Ve&&Ve.length>0)le(Ve),console.log("🗑️ تم تحميل المعاملات المحذوفة من Firebase:",Ve.length);else{const Re=localStorage.getItem(Gt());if(Re)try{const ye=JSON.parse(Re);le(ye),console.log("🗑️ تم تحميل المعاملات المحذوفة من localStorage:",ye.length)}catch(ye){console.error("خطأ في قراءة المعاملات المحذوفة من localStorage:",ye)}}}catch(Ve){console.error("خطأ في تحميل المعاملات المحذوفة من Firebase:",Ve);const Re=localStorage.getItem(Gt());if(Re)try{const ye=JSON.parse(Re);le(ye),console.log("🗑️ تم تحميل المعاملات المحذوفة من localStorage (fallback):",ye.length)}catch(ye){console.error("خطأ في قراءة المعاملات المحذوفة من localStorage:",ye)}}}else{console.log("⚠️ لا توجد بيانات مستخدم في Firebase، محاولة استعادة من localStorage");const Ve=localStorage.getItem(nn());if(Ve)try{const ye=JSON.parse(Ve);console.log("📱 استعادة أرصدة المحافظ من localStorage:",ye),Y(ye)}catch(ye){console.error("خطأ في قراءة أرصدة المحافظ من localStorage:",ye)}const Re=localStorage.getItem(Yn());Re&&(Ke(parseFloat(Re)),console.log("💰 استعادة رصيد الدرج النقدي من localStorage:",Re));try{const ye=await Pt.getDeletedTransactions((n==null?void 0:n.uid)||"");if(ye&&ye.length>0)le(ye),console.log("🗑️ تم تحميل المعاملات المحذوفة من Firebase:",ye.length);else{const pn=localStorage.getItem(Gt());if(pn)try{const wr=JSON.parse(pn);le(wr),console.log("🗑️ تم تحميل المعاملات المحذوفة من localStorage:",wr.length)}catch(wr){console.error("خطأ في قراءة المعاملات المحذوفة من localStorage:",wr)}}}catch(ye){console.error("خطأ في تحميل المعاملات المحذوفة من Firebase:",ye);const pn=localStorage.getItem(Gt());if(pn)try{const wr=JSON.parse(pn);le(wr),console.log("🗑️ تم تحميل المعاملات المحذوفة من localStorage (fallback):",wr.length)}catch(wr){console.error("خطأ في قراءة المعاملات المحذوفة من localStorage:",wr)}}}}try{const xe=await mr.getByMerchantId((n==null?void 0:n.uid)||"");if(xe&&xe.length>0){const Ve=xe.map(ye=>({id:ye.id,name:ye.label||"محفظة بدون اسم",phone:ye.msisdn,isDefault:!1,monthlyWithdrawalLimit:ye.withdrawLimit||2e5,monthlyTransferLimit:ye.transferLimit||2e5}));Q(Ve);const Re=Ve[0];Re&&(U(Re.id),C(Re.phone))}else Q([{id:"wallet-1",name:"المحفظة الرئيسية",phone:"01030302038",isDefault:!0,monthlyWithdrawalLimit:2e5,monthlyTransferLimit:2e5},{id:"wallet-2",name:"محفظة احتياطية",phone:"01234567890",isDefault:!1,monthlyWithdrawalLimit:2e5,monthlyTransferLimit:2e5}]),U("wallet-1"),C("01030302038")}catch(xe){console.error("خطأ في تحميل المحافظ من Firebase:",xe);const Ve=localStorage.getItem(Br());if(Ve){const Re=JSON.parse(Ve);Q(Re);const ye=Re.find(pn=>pn.isDefault)||Re[0];ye&&(U(ye.id),C(ye.phone))}}const ke=await Pt.getUserTransactions((n==null?void 0:n.uid)||"user-1");if(ke&&ke.length>0){console.log("📊 تم تحميل المعاملات من Firebase:",ke.length);const xe=ke.map(ye=>({...ye,createdAt:new Date(ye.createdAt)})),Ve=oe.map(ye=>ye.id||ye.originalTransactionId),Re=xe.filter(ye=>!Ve.includes(ye.id));console.log("✅ تم فلترة المعاملات المحذوفة:",{total:ke.length,deleted:Ve.length,active:Re.length}),D(Re)}await iu()}catch(re){console.error("خطأ في تحميل بيانات المستخدم من Firebase:",re);const pe=localStorage.getItem(Yn());pe&&Ke(parseFloat(pe));const at=localStorage.getItem(nn());if(at)try{const Ie=JSON.parse(at);Y(Ie),console.log("📱 تم استعادة أرصدة المحافظ من localStorage:",Ie)}catch(Ie){console.error("خطأ في قراءة أرصدة المحافظ من localStorage:",Ie)}}})();const H=async()=>{try{for(const re of L)await Pk.autoResetLimitsIfNeeded(re.phone)}catch(re){console.error("خطأ في التصفير التلقائي للحدود:",re)}},ee=()=>{try{const re=ha.autoResetReportsIfNeeded(n==null?void 0:n.uid);(re.dailyReset||re.monthlyReset)&&console.log("تم التصفير التلقائي:",re)}catch(re){console.error("خطأ في التصفير التلقائي للتقارير:",re)}};H(),ee(),Rn(),console.log("🔥 useEffect loadUserData completed")},[n==null?void 0:n.uid]);const mg=O=>{U(O);const H=L.find(ee=>ee.id===O);H&&C(H.phone)},cu=O=>{P(O),R(""),S("")},go=O=>{ne(O),Ne(!0)},pg=async O=>{if(!(n!=null&&n.uid)){t({title:"خطأ في المصادقة",description:"يجب تسجيل الدخول أولاً لحذف المعاملات",variant:"destructive"});return}const H=A.find(ee=>ee.id===O);if(!H){t({title:"خطأ في الحذف",description:"لم يتم العثور على المعاملة المطلوب حذفها",variant:"destructive"});return}try{console.log("🗑️ بدء عملية حذف المعاملة:",O);const ee=[...oe,H],re=A.filter(pe=>pe.id!==O);le(ee),D(re),Ne(!1),localStorage.setItem(Gt(),JSON.stringify(ee)),localStorage.setItem(vr(),JSON.stringify(re)),console.log("✅ تم تحديث البيانات المحلية بنجاح"),t({title:"تم نقل المعاملة إلى المحذوفات",description:"تم نقل المعاملة إلى قائمة المحذوفات بنجاح. يمكنك استرجاعها لاحقاً"});try{console.log("🔄 محاولة حذف المعاملة نهائياً من Firebase...",{transactionId:H.id,userId:n.uid,transactionData:H}),await Pt.removeUserTransaction(n.uid,H.id),console.log("✅ تم حذف المعاملة نهائياً من Firebase userTransactions"),await Pt.saveDeletedTransaction({...H,userId:n.uid,originalTransactionId:H.id,deletedAt:new Date().toISOString()}),console.log("✅ تم حفظ المعاملة في سجل المحذوفات مع تاريخ الحذف")}catch(pe){console.warn("⚠️ فشل في حفظ البيانات في Firebase، لكن العملية تمت محلياً:",pe),setTimeout(async()=>{try{console.log("🔄 إعادة محاولة حذف المعاملة نهائياً من Firebase..."),await Pt.removeUserTransaction(n.uid,H.id),await Pt.saveDeletedTransaction({...H,userId:n.uid,originalTransactionId:H.id}),console.log("✅ نجحت إعادة المحاولة - تم حذف المعاملة نهائياً من Firebase")}catch(at){console.error("❌ فشلت إعادة المحاولة:",at)}},5e3)}}catch(ee){console.error("❌ خطأ عام في حذف المعاملة:",ee);const re=[...A],pe=[...oe];D(re),le(pe),localStorage.setItem(vr(),JSON.stringify(re)),localStorage.setItem(Gt(),JSON.stringify(pe)),t({title:"خطأ في الحذف",description:"حدث خطأ أثناء حذف المعاملة. يرجى المحاولة مرة أخرى",variant:"destructive"})}},Ms=O=>{const H=localStorage.getItem(Pe()),ee=H?parseFloat(H):10;return Math.ceil(O/1e3*ee)},is=()=>{const O=parseFloat(j)||0,H=Ms(O);return O+H},ci=()=>{const O=new Date().toDateString(),H=A.filter(Fe=>new Date(Fe.createdAt).toDateString()===O&&Fe.status==="completed"),ee=ha.filterVisibleTransactions(H,"daily",n==null?void 0:n.uid),re=ee.length,pe=ee.reduce((Fe,ze)=>Fe+ze.amount,0),at=ee.filter(Fe=>Fe.type==="withdraw").reduce((Fe,ze)=>{const ke=ze.withdrawnAmount!==void 0?ze.withdrawnAmount:ze.amount;return Fe+ke},0),Ie=ee.filter(Fe=>Fe.type==="send").reduce((Fe,ze)=>{const ke=ze.sentAmount!==void 0?ze.sentAmount:ze.amount;return Fe+ke},0);return{totalTransactions:re,totalAmount:pe,totalWithdrawn:at,totalSent:Ie}},Os=()=>{const O=new Date().getMonth(),H=new Date().getFullYear(),ee=A.filter(ze=>{const ke=new Date(ze.createdAt);return ke.getMonth()===O&&ke.getFullYear()===H&&ze.status==="completed"}),re=ha.filterVisibleTransactions(ee,"monthly",n==null?void 0:n.uid),pe=re.length,at=re.reduce((ze,ke)=>ze+ke.amount,0),Ie=re.filter(ze=>ze.type==="withdraw").reduce((ze,ke)=>{const xe=ke.withdrawnAmount!==void 0?ke.withdrawnAmount:ke.amount;return ze+xe},0),Fe=re.filter(ze=>ze.type==="send").reduce((ze,ke)=>{const xe=ke.sentAmount!==void 0?ke.sentAmount:ke.amount;return ze+xe},0);return{totalTransactions:pe,totalAmount:at,totalWithdrawn:Ie,totalSent:Fe}},uu=O=>{const H=new Date().getMonth(),ee=new Date().getFullYear(),re=A.filter(Ie=>{const Fe=new Date(Ie.createdAt);return Fe.getMonth()===H&&Fe.getFullYear()===ee&&Ie.status==="completed"&&Ie.fromWallet===O}),pe=re.filter(Ie=>Ie.type==="withdraw").reduce((Ie,Fe)=>{const ze=Fe.withdrawnAmount||Fe.amount;return Ie+ze},0),at=re.filter(Ie=>Ie.type==="send").reduce((Ie,Fe)=>{const ze=Fe.sentAmount||Fe.amount;return Ie+ze},0);return{totalWithdrawn:pe,totalTransferred:at}};Os(),m.useEffect(()=>{const O=localStorage.getItem(vr());if(O){const ee=JSON.parse(O).map(re=>({...re,createdAt:new Date(re.createdAt)}));D(ee)}},[]),m.useEffect(()=>{A.length>0&&localStorage.setItem(vr(),JSON.stringify(A))},[A]);const yt=async()=>{if(console.log("🔄 بدء عملية التحويل/السحب"),console.log("📊 البيانات المدخلة:",{senderPhone:v,receiverPhone:I,amount:j,transactionType:T}),!v||!j){console.log("❌ خطأ: بيانات ناقصة"),t({title:"خطأ في البيانات",description:"يرجى ملء جميع الحقول المطلوبة",variant:"destructive"});return}if(T==="transfer"&&!I){console.log("❌ خطأ: رقم المستقبل مفقود"),t({title:"خطأ في البيانات",description:"يرجى إدخال رقم المستقبل",variant:"destructive"});return}const O=parseFloat(j);if(console.log("💰 المبلغ المحول:",O),O<=0){console.log("❌ خطأ: مبلغ غير صحيح"),t({title:"خطأ في المبلغ",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}const H=L.find(ke=>ke.id===X);if(!H){t({title:"خطأ في المحفظة",description:"يرجى اختيار محفظة صحيحة",variant:"destructive"});return}const ee=uu(X);if(console.log("📈 فحص الحدود الشهرية للمحفظة المختارة"),console.log("📊 الإحصائيات الشهرية للمحفظة:",{walletId:X,walletName:H.name,currentWithdrawn:ee.totalWithdrawn,currentTransferred:ee.totalTransferred,withdrawalLimit:H.monthlyWithdrawalLimit,transferLimit:H.monthlyTransferLimit}),T==="withdraw"){if(console.log("🏧 فحص حد السحب الشهري للمحفظة"),console.log(`💸 المسحوب حالياً من المحفظة: ${ee.totalWithdrawn}, المبلغ الجديد: ${O}, الحد الأقصى: ${H.monthlyWithdrawalLimit}`),ee.totalWithdrawn+O>H.monthlyWithdrawalLimit){console.log("❌ تجاوز حد السحب الشهري للمحفظة"),t({title:"تجاوز حد السحب الشهري",description:`لا يمكن سحب أكثر من ${H.monthlyWithdrawalLimit} جنيه شهرياً من محفظة ${H.name}`,variant:"destructive"});return}}else if(console.log("💸 فحص حد التحويل الشهري للمحفظة"),console.log(`📤 المحول حالياً من المحفظة: ${ee.totalTransferred}, المبلغ الجديد: ${O}, الحد الأقصى: ${H.monthlyTransferLimit}`),ee.totalTransferred+O>H.monthlyTransferLimit){console.log("❌ تجاوز حد التحويل الشهري للمحفظة"),t({title:"تجاوز حد التحويل الشهري",description:`لا يمكن تحويل أكثر من ${H.monthlyTransferLimit} جنيه شهرياً من محفظة ${H.name}`,variant:"destructive"});return}const re=(n==null?void 0:n.displayName)||"محل كاشي لينك",pe={id:Date.now().toString(),type:T==="transfer"?"send":"withdraw",senderPhone:v,receiverPhone:T==="transfer"?I:v,amount:O,status:"completed",createdAt:new Date,withdrawnAmount:T==="withdraw"?O:void 0,sentAmount:T==="transfer"?O:void 0,fromWallet:X,senderNumber:v,senderName:v,shopName:(H==null?void 0:H.name)||"المحفظة الرئيسية",transferredAmount:T==="transfer"?O:void 0,receiverNumber:T==="transfer"?I:void 0,withdrawnAmountDetailed:T==="withdraw"?O:void 0,merchantShopName:re,transactionReference:`TXN-${Date.now()}`,commission:Math.round(O*.01),notes:T==="transfer"?`تحويل من ${v} إلى ${I}`:`سحب نقدي من محفظة ${v}`},at=A0.validateTransaction(O,T,Oe,Et);if(!at.isValid){t({title:"خطأ في العملية",description:at.error,variant:"destructive"});return}at.warning&&t({title:"تحذير",description:at.warning,variant:"destructive"});let Ie;if(T==="transfer"?Ie=A0.deductFromWalletsAddToCash(O,Oe,Et,L):Ie=A0.deductFromCashAddToWallets(O,Oe,Et,L),!Ie.success){t({title:"فشل في العملية",description:Ie.error||Ie.message,variant:"destructive"});return}const Fe=Ie.newCashBalance,ze=Ie.newWalletBalances;try{console.log("🔄 بدء حفظ المعاملة في Firebase فورًا..."),console.log("📊 البيانات المحدثة:",{cashBalance:Fe,walletBalances:ze,transactionType:T,amount:O});const ke={type:T==="transfer"?"send":"withdraw",senderPhone:v,receiverPhone:T==="transfer"?I:v,amount:O,status:"completed",userId:(n==null?void 0:n.uid)||"user-1"};await Pt.updateUserData((n==null?void 0:n.uid)||"user-1",{cashBalance:Fe,walletBalances:ze}),console.log("✅ تم حفظ البيانات المحدثة في Firebase بنجاح"),await fh.create(ke),console.log("✅ تم حفظ المعاملة في مجموعة transactions بنجاح"),await Pt.saveUserTransaction((n==null?void 0:n.uid)||"user-1",{...ke,transactionType:T,fromWallet:X,toWallet:T==="transfer"?"cash":null,description:`${T==="transfer"?"تحويل":"سحب"} ${O} من ${X} ${T==="transfer"?"إلى الدرج النقدي":""}`}),console.log("✅ تم حفظ المعاملة في مجموعة userTransactions بنجاح"),Ke(Fe),Y(ze),D(Re=>[pe,...Re]),localStorage.setItem(Yn(),Fe.toString()),localStorage.setItem(nn(),JSON.stringify(ze));const xe=`userData_${n==null?void 0:n.uid}`,Ve={cashBalance:Fe,walletBalances:ze,lastUpdated:new Date().toISOString()};localStorage.setItem(xe,JSON.stringify(Ve)),console.log("✅ تم تحديث الحالة المحلية وحفظها في localStorage والبيانات المؤقتة بعد نجاح المزامنة مع Firebase")}catch(ke){console.error("❌ خطأ في حفظ المعاملة في Firebase:",ke);let xe="حدث خطأ غير معروف";ke instanceof Error&&(xe=ke.message,console.error("تفاصيل الخطأ:",{name:ke.name,message:ke.message,stack:ke.stack})),t({title:"خطأ في الحفظ",description:`فشل في حفظ البيانات في الخادم: ${xe}. يرجى المحاولة مرة أخرى.`,variant:"destructive"}),console.log("❌ تم إلغاء العملية - لم يتم تحديث الحالة المحلية بسبب فشل المزامنة مع Firebase");return}R(""),S(""),t({title:T==="transfer"?"تم التحويل بنجاح":"تم السحب بنجاح",description:Ie.message})},Ls=O=>{switch(O){case"completed":return i.jsx(wn,{className:"h-2.5 w-2.5 text-green-500"});case"pending":return i.jsx(es,{className:"h-2.5 w-2.5 text-yellow-500"});case"failed":return i.jsx(Kd,{className:"h-2.5 w-2.5 text-red-500"});default:return i.jsx(es,{className:"h-2.5 w-2.5 text-gray-500"})}},ui=O=>{switch(O){case"completed":return"مكتمل";case"pending":return"معلق";case"failed":return"فاشل";default:return"غير معروف"}},Yi=au().filter(O=>M==="all"?!0:M==="send"?O.type==="send":M==="receive"?O.type==="receive":M==="withdraw"?O.type==="withdraw":M!=="deleted"),gg=O=>{const H=oe.find(ee=>ee.id===O);if(H){const ee=[H,...A];D(ee),localStorage.setItem(vr(),JSON.stringify(ee));const re=oe.filter(pe=>pe.id!==O);le(re),localStorage.setItem(Gt(),JSON.stringify(re)),t({title:"تم استرجاع المعاملة",description:"تم استرجاع المعاملة بنجاح إلى القائمة الرئيسية"})}},Nh=async O=>{if(!(n!=null&&n.uid)){t({title:"خطأ في المصادقة",description:"يجب تسجيل الدخول أولاً لحذف المعاملات",variant:"destructive"});return}try{const H=oe.filter(ee=>ee.id!==O);le(H),localStorage.setItem(Gt(),JSON.stringify(H)),await Pt.permanentlyDeleteTransaction(O,n.uid),t({title:"تم حذف المعاملة نهائياً",description:"تم حذف المعاملة نهائياً ولا يمكن استرجاعها"})}catch(H){console.error("خطأ في الحذف النهائي:",H),t({title:"خطأ في الحذف النهائي",description:"حدث خطأ أثناء الحذف النهائي للمعاملة. يرجى المحاولة مرة أخرى",variant:"destructive"})}},xg=()=>{if(Z==="daily"){const O=ha.resetReportsManually("daily",A,n==null?void 0:n.uid);t({title:"تم تصفير المعاملات اليومية",description:`تم إخفاء ${O.length} معاملة من تقارير اليوم (الحدود لم تتأثر)`})}else{const O=ha.resetReportsManually("monthly",A,n==null?void 0:n.uid);t({title:"تم تصفير المعاملات الشهرية",description:`تم إخفاء ${O.length} معاملة من تقارير الشهر (الحدود لم تتأثر)`})}He(!1)},yg=()=>Z==="daily"?"تصفير المعاملات اليومية":"تصفير المعاملات الشهرية",vg=()=>Z==="daily"?"أدخل الرقم السري لتصفير جميع معاملات اليوم":"أدخل الرقم السري لتصفير جميع معاملات الشهر",wg=O=>{Ke(O),localStorage.setItem(Yn(),O.toString()),ut(!1),t({title:"تم تحديث الرصيد النقدي",description:`تم تحديث الرصيد النقدي إلى ${O} جنيه`})},xo=async O=>{var H;if(console.log("💰 بدء تحديث رصيد المحفظة"),console.log("📊 معرف المحفظة المحررة:",ft),console.log("💵 المبلغ المضاف/المخصوم:",O),ft){const ee=Et[ft]||0;console.log("💰 الرصيد الحالي:",ee);const re=ee+O;console.log("💰 الرصيد الجديد:",re);const pe={...Et,[ft]:re};console.log("📊 الأرصدة المحدثة:",pe),Y(pe);const at=new Date().toISOString(),Ie={walletBalances:pe,lastUpdated:at},Fe=`userData_${n==null?void 0:n.uid}`;localStorage.setItem(Fe,JSON.stringify(Ie)),localStorage.setItem(nn(),JSON.stringify(pe)),localStorage.setItem(`walletBalances_backup_${at}`,JSON.stringify(pe));try{if(n!=null&&n.uid){console.log("🔄 حفظ البيانات في Firebase...");try{await Pt.updateUserData(n.uid,Ie),console.log("✅ تم حفظ الأرصدة في Firebase بنجاح"),setTimeout(()=>{localStorage.removeItem(Fe),console.log("🧹 تم حذف النسخة المحلية المؤقتة بعد دقيقة واحدة")},6e4)}catch(Ve){console.error("❌ فشل في حفظ البيانات في Firebase:",Ve),_l(!0)}}else console.log("⚠️ المستخدم غير مسجل دخول، حفظ في localStorage"),localStorage.setItem(nn(),JSON.stringify(pe));const ze=((H=L.find(Ve=>Ve.id===ft))==null?void 0:H.name)||"المحفظة",ke=O>0?"إضافة":"خصم",xe=Math.abs(O);t({title:`تم ${ke} مبلغ ${ke==="إضافة"?"إلى":"من"} رصيد المحفظة`,description:`تم ${ke} ${xe} جنيه ${ke==="إضافة"?"إلى":"من"} رصيد ${ze}. الرصيد الجديد: ${re.toLocaleString()} جنيه`})}catch(ze){if(console.error("❌ فشل في حفظ البيانات في Firebase:",ze),localStorage.setItem(nn(),JSON.stringify(pe)),n!=null&&n.uid){const ke=`userData_${n.uid}`,xe={walletBalances:pe,lastUpdated:new Date().toISOString()};localStorage.setItem(ke,JSON.stringify(xe)),_l(!0)}t({title:"تم حفظ البيانات محلياً",description:"تم حفظ التغييرات محلياً وسيتم مزامنتها مع الخادم لاحقاً",variant:"default"})}}else console.log("❌ لا يوجد معرف محفظة للتحرير");setTimeout(()=>{const re=Object.keys(localStorage).filter(pe=>pe.startsWith("walletBalances_backup_")).sort();re.length>5&&re.slice(0,re.length-5).forEach(at=>{localStorage.removeItem(at),console.log("🗑️ حذف النسخة الاحتياطية القديمة:",at)})},5e3),ar(!1),kn("")};return console.log("🔥 UserDashboardPage - Render conditions:",{isCheckingActivation:a,isUserActive:r,showActivationModal:l}),!a&&!r?(console.log("🔥 UserDashboardPage - Showing activation modal"),i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:i.jsx(RE,{isOpen:!0,onClose:()=>{}})})):a?(console.log("🔥 UserDashboardPage - Showing loading screen"),i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),i.jsx("p",{className:"mt-4 text-gray-600",children:"جاري التحقق من حالة الحساب..."})]})})):(console.log("🔥 UserDashboardPage - Rendering main dashboard"),i.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 relative overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[i.jsx("div",{className:"absolute top-20 left-10 w-72 h-72 bg-blue-400/10 rounded-full  "}),i.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-purple-400/10 rounded-full  ",style:{animationDelay:"2s"}}),i.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-indigo-400/5 rounded-full  ",style:{animationDelay:"4s"}})]}),i.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6 relative z-10",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-1",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 fade-in-up",children:[i.jsxs(Le,{className:"bg-purple-50 border-2 border-purple-200/50 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 group relative overflow-hidden   transform",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/10 to-purple-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-purple-300/20 to-transparent rounded-full -translate-y-16 translate-x-16 group-hover:scale-150 transition-transform duration-200"}),i.jsx(Ze,{className:"pb-1 px-2 pt-2 relative z-10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(ct,{className:"text-sm font-extrabold text-purple-800 flex items-center gap-1",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-purple-500 to-purple-600 rounded-full  shadow-lg"}),i.jsx("div",{className:"absolute inset-0 w-3 h-3 bg-purple-400 rounded-full  opacity-75"})]}),"تقارير الشهر"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(V,{size:"sm",variant:"ghost",onClick:()=>{z("monthly"),He(!0)},className:"h-6 w-6 p-0 bg-gradient-to-r from-purple-100 to-purple-200 text-purple-700 hover:from-purple-200 hover:to-purple-300 hover:text-purple-800 rounded-xl transition-all duration-300  hover:rotate-12 shadow-md hover:shadow-lg",title:"تصفير معاملات الشهر",children:i.jsx(Ws,{className:"h-2 w-2"})}),i.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-100 to-purple-200 rounded-xl",children:i.jsx(_f,{className:"h-2 w-2 text-purple-600"})})]})]})}),i.jsxs($e,{className:"space-y-0.5 pt-0 px-1 pb-1 relative z-10",children:[i.jsxs("div",{className:"flex justify-between items-center p-0.5 bg-gradient-to-r from-white/60 to-purple-50/60 rounded-md  hover:from-white/80 hover:to-purple-50/80 transition-all duration-300 border border-purple-100/50",children:[i.jsx("span",{className:"text-[10px] font-semibold text-purple-700",children:"عدد المعاملات:"}),i.jsx("span",{className:"font-extrabold text-[10px] text-purple-900 bg-gradient-to-r from-purple-100 to-purple-200 px-1 py-0.5 rounded-md shadow-sm",children:Os().totalTransactions})]}),i.jsxs("div",{className:"flex justify-between items-center p-0.5 bg-gradient-to-r from-white/60 to-purple-50/60 rounded-md  hover:from-white/80 hover:to-purple-50/80 transition-all duration-300 border border-purple-100/50",children:[i.jsx("span",{className:"text-[10px] font-semibold text-purple-700",children:"إجمالي المبالغ:"}),i.jsxs("span",{className:"font-extrabold text-[10px] text-purple-900 bg-gradient-to-r from-purple-100 to-purple-200 px-1 py-0.5 rounded-md shadow-sm",children:[Os().totalAmount.toFixed(2)," ج.م"]})]}),i.jsxs("div",{className:"flex justify-between items-center p-0.5 bg-gradient-to-r from-white/60 to-purple-50/60 rounded-md  hover:from-white/80 hover:to-purple-50/80 transition-all duration-300 border border-purple-100/50",children:[i.jsx("span",{className:"text-[10px] font-semibold text-purple-700",children:"المسحوب:"}),i.jsxs("span",{className:"font-extrabold text-[10px] text-purple-900 bg-gradient-to-r from-purple-100 to-purple-200 px-1 py-0.5 rounded-md shadow-sm",children:[Os().totalWithdrawn.toFixed(2)," ج.م"]})]}),i.jsxs("div",{className:"flex justify-between items-center p-0.5 bg-gradient-to-r from-white/60 to-purple-50/60 rounded-md  hover:from-white/80 hover:to-purple-50/80 transition-all duration-300 border border-purple-100/50",children:[i.jsx("span",{className:"text-[10px] font-semibold text-purple-700",children:"المرسل:"}),i.jsxs("span",{className:"font-extrabold text-[10px] text-purple-900 bg-gradient-to-r from-purple-100 to-purple-200 px-1 py-0.5 rounded-md shadow-sm",children:[Os().totalSent.toFixed(2)," ج.م"]})]})]})]}),i.jsxs(Le,{className:"bg-blue-50 border-2 border-blue-200/50 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 group relative overflow-hidden   transform",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-blue-600/5 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-blue-300/20 to-transparent rounded-full -translate-y-16 translate-x-16 group-hover:scale-150 transition-transform duration-200"}),i.jsx(Ze,{className:"pb-1 px-2 pt-2 relative z-10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(ct,{className:"text-sm font-extrabold text-blue-800 flex items-center gap-1",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full  shadow-lg"}),i.jsx("div",{className:"absolute inset-0 w-3 h-3 bg-blue-400 rounded-full  opacity-75"})]}),"تقارير اليوم"]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(V,{size:"sm",variant:"ghost",onClick:()=>{z("daily"),He(!0)},className:"h-6 w-6 p-0 bg-gradient-to-r from-blue-100 to-blue-200 text-blue-700 hover:from-blue-200 hover:to-blue-300 hover:text-blue-800 rounded-xl transition-all duration-300  hover:rotate-12 shadow-md hover:shadow-lg",title:"تصفير معاملات اليوم",children:i.jsx(Ws,{className:"h-2 w-2"})}),i.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-100 to-blue-200 rounded-xl",children:i.jsx(_f,{className:"h-2 w-2 text-blue-600"})})]})]})}),i.jsxs($e,{className:"space-y-0.5 pt-0 px-1 pb-1 relative z-10",children:[i.jsxs("div",{className:"flex justify-between items-center p-0.5 bg-gradient-to-r from-white/60 to-blue-50/60 rounded-md  hover:from-white/80 hover:to-blue-50/80 transition-all duration-300 border border-blue-100/50",children:[i.jsx("span",{className:"text-[10px] font-semibold text-blue-700",children:"عدد المعاملات:"}),i.jsx("span",{className:"font-extrabold text-[10px] text-blue-900 bg-gradient-to-r from-blue-100 to-blue-200 px-1 py-0.5 rounded-md shadow-sm",children:ci().totalTransactions})]}),i.jsxs("div",{className:"flex justify-between items-center p-0.5 bg-gradient-to-r from-white/60 to-blue-50/60 rounded-md  hover:from-white/80 hover:to-blue-50/80 transition-all duration-300 border border-blue-100/50",children:[i.jsx("span",{className:"text-[10px] font-semibold text-blue-700",children:"إجمالي المبالغ:"}),i.jsxs("span",{className:"font-extrabold text-[10px] text-blue-900 bg-gradient-to-r from-blue-100 to-blue-200 px-1 py-0.5 rounded-md shadow-sm",children:[ci().totalAmount.toFixed(2)," ج.م"]})]}),i.jsxs("div",{className:"flex justify-between items-center p-0.5 bg-gradient-to-r from-white/60 to-blue-50/60 rounded-md  hover:from-white/80 hover:to-blue-50/80 transition-all duration-300 border border-blue-100/50",children:[i.jsx("span",{className:"text-[10px] font-semibold text-blue-700",children:"المسحوب:"}),i.jsxs("span",{className:"font-extrabold text-[10px] text-blue-900 bg-gradient-to-r from-blue-100 to-blue-200 px-1 py-0.5 rounded-md shadow-sm",children:[ci().totalWithdrawn.toFixed(2)," ج.م"]})]}),i.jsxs("div",{className:"flex justify-between items-center p-0.5 bg-gradient-to-r from-white/60 to-blue-50/60 rounded-md  hover:from-white/80 hover:to-blue-50/80 transition-all duration-300 border border-blue-100/50",children:[i.jsx("span",{className:"text-[10px] font-semibold text-blue-700",children:"المرسل:"}),i.jsxs("span",{className:"font-extrabold text-[10px] text-blue-900 bg-gradient-to-r from-blue-100 to-blue-200 px-1 py-0.5 rounded-md shadow-sm",children:[ci().totalSent.toFixed(2)," ج.م"]})]})]})]})]}),i.jsxs(Le,{className:"bg-white border-2 border-gray-200/50 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 group relative overflow-hidden   transform fade-in-up mb-6",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-emerald-500/5 via-blue-500/5 to-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),i.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-gradient-to-br from-emerald-300/10 to-transparent rounded-full -translate-y-20 -translate-x-20 group-hover:scale-150 transition-transform duration-200"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-40 h-40 bg-gradient-to-br from-blue-300/10 to-transparent rounded-full translate-y-20 translate-x-20 group-hover:scale-150 transition-transform duration-200"}),i.jsx($e,{className:"p-3 relative z-10",children:i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"bg-emerald-50 border-2 border-emerald-200/50 p-1 rounded-xl shadow-lg hover:shadow-md transition-all duration-200 group/cash relative overflow-hidden ",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-transparent opacity-0 group-hover/cash:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-0.5",children:[i.jsx("div",{className:"p-0.5 bg-gradient-to-r from-emerald-100 to-emerald-200 rounded-lg shadow-sm",children:i.jsx(yr,{className:"h-1.5 w-1.5 text-emerald-600"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-[10px] font-bold text-emerald-800",children:"القيمة في الدرج"}),i.jsxs("span",{className:"text-[10px] font-extrabold text-emerald-700 bg-gradient-to-r from-emerald-100 to-emerald-200 px-1 py-0.5 rounded-lg shadow-sm",children:[Oe.toLocaleString("en-US")," جنيه"]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 bg-gradient-to-r from-green-100 to-green-200 text-green-700 hover:from-green-200 hover:to-green-300 hover:text-green-800 rounded-xl transition-all duration-300 hover:scale-110 shadow-md hover:shadow-lg",onClick:()=>pl(!0),children:i.jsx(dr,{className:"h-2 w-2"})}),i.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 bg-gradient-to-r from-red-100 to-red-200 text-red-700 hover:from-red-200 hover:to-red-300 hover:text-red-800 rounded-xl transition-all duration-300  hover:rotate-12 shadow-md hover:shadow-lg",onClick:()=>mo(!0),children:i.jsx(Ws,{className:"h-2 w-2"})})]})]})]}),i.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200/50 p-1 rounded-xl shadow-lg hover:shadow-md transition-all duration-200 group/wallet relative overflow-hidden ",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-transparent opacity-0 group-hover/wallet:opacity-100 transition-opacity duration-300"}),i.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[i.jsxs("div",{className:"flex items-center gap-0.5",children:[i.jsx("div",{className:"p-0.5 bg-gradient-to-r from-blue-100 to-blue-200 rounded-lg shadow-sm",children:i.jsx(bs,{className:"h-1.5 w-1.5 text-blue-600"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-[10px] font-bold text-blue-800",children:"إجمالي المحفظة"}),i.jsxs("span",{className:"text-[10px] font-extrabold text-blue-700 bg-gradient-to-r from-blue-100 to-blue-200 px-1 py-0.5 rounded-lg shadow-sm",children:[Object.values(Et).reduce((O,H)=>O+H,0).toLocaleString("en-US")," جنيه"]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 bg-gradient-to-r from-green-100 to-green-200 text-green-700 hover:from-green-200 hover:to-green-300 hover:text-green-800 rounded-xl transition-all duration-300 hover:scale-110 shadow-md hover:shadow-lg",onClick:()=>co(!0),title:"إضافة أموال لإجمالي المحفظة",children:i.jsx(dr,{className:"h-2 w-2"})}),i.jsx(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 bg-gradient-to-r from-red-100 to-red-200 text-red-700 hover:from-red-200 hover:to-red-300 hover:text-red-800 rounded-xl transition-all duration-300  hover:rotate-12 shadow-md hover:shadow-lg",onClick:()=>{Wr(!0),bl("")},title:"تصفير إجمالي المحفظة",children:i.jsx(Ws,{className:"h-2 w-2"})})]})]})]})]})})]}),i.jsxs(Le,{className:"card-modern fade-in-up",children:[i.jsxs(Ze,{className:"pb-2 px-3 pt-3",children:[i.jsx(ct,{className:"text-sm font-bold",children:"المعاملات الأخيرة"}),i.jsxs("div",{className:"flex items-center gap-1 mt-2 relative",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50/30 via-purple-50/30 to-pink-50/30 rounded-lg blur-sm opacity-0 group-hover:opacity-100 transition-all duration-200"}),i.jsxs("div",{className:"flex items-center gap-1 flex-1 bg-gradient-to-r from-gray-50 to-blue-50/50 rounded px-2 py-1 border border-gray-200/60 hover:border-blue-300/60 transition-all duration-300 hover:shadow-md hover:shadow-blue-100/50 group relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-all duration-200"}),i.jsx(DS,{className:"h-1 w-1 text-gray-400 group-hover:text-blue-600 transition-all duration-300 relative z-10"}),i.jsx(de,{placeholder:"بحث...",value:ve,onChange:O=>Ee(O.target.value),className:"h-5 text-[10px] border-0 bg-transparent focus:ring-0 focus:outline-none text-gray-700 placeholder:text-gray-400 relative z-10"}),i.jsx("div",{className:"absolute bottom-0 left-0 h-0.5 bg-gradient-to-r from-blue-500 to-purple-500 w-0 group-hover:w-full transition-all duration-200"})]}),i.jsxs(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 rounded-full bg-gradient-to-br from-gray-50 to-blue-50/50 text-gray-400 hover:from-blue-100 hover:to-purple-100 hover:text-blue-600 border border-gray-200/60 hover:border-blue-300/60 transition-all duration-300 hover:scale-105 hover:shadow-md hover:shadow-blue-100/50 group relative overflow-hidden",onClick:()=>En(!0),title:"آلة حاسبة",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-all duration-300"}),i.jsx(Sv,{className:"h-1 w-1 relative z-10 group-hover:rotate-12 transition-transform duration-300"})]}),i.jsxs(V,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 rounded-full bg-gradient-to-br from-gray-50 to-green-50/50 text-gray-400 hover:from-green-100 hover:to-emerald-100 hover:text-green-600 border border-gray-200/60 hover:border-green-300/60 transition-all duration-300 hover:scale-105 hover:shadow-md hover:shadow-green-100/50 group relative overflow-hidden",onClick:()=>ns(!0),title:"بيانات المبيعات اليومية",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-500/10 to-emerald-500/10 opacity-0 group-hover:opacity-100 transition-all duration-300"}),i.jsx(w3,{className:"h-1 w-1 relative z-10 group-hover:scale-110 transition-transform duration-300"})]}),i.jsxs(V,{variant:"ghost",size:"sm",className:`h-6 w-6 p-0 rounded-full border transition-all duration-300 hover:scale-105 hover:shadow-md group relative overflow-hidden ${Be||st?"bg-gradient-to-br from-blue-100 to-purple-100 text-blue-600 border-blue-300/60 shadow-sm shadow-blue-100/50":"bg-gradient-to-br from-gray-50 to-blue-50/50 text-gray-400 hover:from-blue-100 hover:to-purple-100 hover:text-blue-600 border-gray-200/60 hover:border-blue-300/60 hover:shadow-blue-100/50"}`,onClick:()=>Ur(!0),title:"اختيار التاريخ والوقت",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-all duration-300"}),i.jsx(Pi,{className:"h-1 w-1 relative z-10 group-hover:rotate-12 transition-transform duration-300"}),(Be||st)&&i.jsx("div",{className:"absolute -top-0.5 -right-0.5 h-1 w-1 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full "})]}),(ve||Be||st)&&i.jsxs(V,{variant:"ghost",size:"sm",className:"h-6 px-2 text-[10px] text-gray-500 hover:text-red-500 bg-gradient-to-br from-gray-50 to-red-50/50 hover:from-red-100 hover:to-pink-100 border border-gray-200/60 hover:border-red-300/60 rounded-full transition-all duration-300 hover:scale-105 hover:shadow-md hover:shadow-red-100/50 group relative overflow-hidden",onClick:()=>{Ee(""),ht(""),gt("")},children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-red-500/10 to-pink-500/10 opacity-0 group-hover:opacity-100 transition-all duration-300"}),i.jsx("span",{className:"relative z-10 group-hover:rotate-90 transition-transform duration-300",children:"×"})]})]})]}),i.jsx($e,{className:"px-3 pb-3",children:i.jsxs(Nq,{value:M,onValueChange:$,className:"w-full",children:[i.jsxs(wk,{className:"grid w-full grid-cols-5 h-10 text-sm bg-gradient-to-r from-gray-50 via-blue-50/30 to-purple-50/30 border border-gray-200/60 rounded-md p-1 shadow-sm relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/5 via-purple-500/5 to-pink-500/5 opacity-0 hover:opacity-100 transition-all duration-200"}),i.jsxs(Ll,{value:"all",className:"text-sm relative z-10 rounded transition-all duration-300  data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-blue-600 data-[state=active]:text-white data-[state=active]:shadow-md data-[state=active]:shadow-blue-200/50 hover:bg-blue-50/80 hover:text-blue-700 group",children:[i.jsx("span",{className:"relative z-10",children:"الكل"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 opacity-0 group-hover:opacity-100 transition-all duration-300 rounded"})]}),i.jsxs(Ll,{value:"send",className:"text-sm relative z-10 rounded transition-all duration-300  data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-500 data-[state=active]:to-emerald-600 data-[state=active]:text-white data-[state=active]:shadow-md data-[state=active]:shadow-green-200/50 hover:bg-green-50/80 hover:text-green-700 group",children:[i.jsx("span",{className:"relative z-10",children:"مرسل"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-green-500/10 to-emerald-500/10 opacity-0 group-hover:opacity-100 transition-all duration-300 rounded"})]}),i.jsxs(Ll,{value:"receive",className:"text-sm relative z-10 rounded transition-all duration-300  data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-500 data-[state=active]:to-violet-600 data-[state=active]:text-white data-[state=active]:shadow-md data-[state=active]:shadow-purple-200/50 hover:bg-purple-50/80 hover:text-purple-700 group",children:[i.jsx("span",{className:"relative z-10",children:"مستقبل"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/10 to-violet-500/10 opacity-0 group-hover:opacity-100 transition-all duration-300 rounded"})]}),i.jsxs(Ll,{value:"withdraw",className:"text-sm relative z-10 rounded transition-all duration-300  data-[state=active]:bg-gradient-to-r data-[state=active]:from-orange-500 data-[state=active]:to-amber-600 data-[state=active]:text-white data-[state=active]:shadow-md data-[state=active]:shadow-orange-200/50 hover:bg-orange-50/80 hover:text-orange-700 group",children:[i.jsx("span",{className:"relative z-10",children:"سحب"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500/10 to-amber-500/10 opacity-0 group-hover:opacity-100 transition-all duration-300 rounded"})]}),i.jsxs(Ll,{value:"deleted",className:"text-sm relative z-10 rounded transition-all duration-300  data-[state=active]:bg-gradient-to-r data-[state=active]:from-red-500 data-[state=active]:to-rose-600 data-[state=active]:text-white data-[state=active]:shadow-md data-[state=active]:shadow-red-200/50 hover:bg-red-50/80 hover:text-red-700 group",children:[i.jsx("span",{className:"relative z-10",children:"محذوف"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-500/10 to-rose-500/10 opacity-0 group-hover:opacity-100 transition-all duration-300 rounded"})]})]}),i.jsx(Fl,{value:"all",className:"mt-2",children:Yi.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500 fade-in-up tab-stagger-item text-[10px]",children:"لا توجد معاملات محفوظة بعد"}):i.jsx("div",{className:"space-y-1 fade-in-up tab-content-smooth",children:Yi.map((O,H)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border hover:shadow-md cursor-pointer transition-all duration-200",onClick:()=>go(O),children:[i.jsxs("div",{className:"flex items-center gap-1",children:[Ls(O.status),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm",children:O.type==="withdraw"?`سحب من المحفظة - ${O.senderPhone}`:`${O.senderPhone} → ${O.receiverPhone}`}),i.jsx("p",{className:"text-sm text-gray-500",children:O.createdAt.toLocaleString("ar-EG")})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-sm",children:[O.type==="withdraw"?"-":"",O.amount," جنيه"]}),O.withdrawnAmount&&i.jsxs("p",{className:"text-sm text-red-600",children:["مسحوب: ",O.withdrawnAmount," جنيه"]}),O.sentAmount&&i.jsxs("p",{className:"text-sm text-green-600",children:["مرسل: ",O.sentAmount," جنيه"]}),i.jsx(Xt,{variant:O.status==="completed"?"default":"secondary",className:`text-sm ${O.type==="withdraw"?"bg-green-100 text-green-800":""}`,children:O.type==="withdraw"?"سحب":ui(O.status)})]})]},O.id))})}),i.jsx(Fl,{value:"send",className:"mt-2",children:A.filter(O=>O.type==="send").length===0?i.jsx("div",{className:"text-center py-4 text-gray-500 fade-in-up tab-stagger-item text-[10px]",children:"لا توجد معاملات إرسال محفوظة بعد"}):i.jsx("div",{className:"space-y-1 fade-in-up tab-content-smooth",children:A.filter(O=>O.type==="send").map((O,H)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border hover:shadow-md cursor-pointer transition-all duration-200",onClick:()=>go(O),children:[i.jsxs("div",{className:"flex items-center gap-1",children:[Ls(O.status),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium text-sm",children:[O.senderPhone," → ",O.receiverPhone]}),i.jsx("p",{className:"text-sm text-gray-500",children:O.createdAt.toLocaleString("ar-EG")})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-sm",children:[O.amount," جنيه"]}),O.sentAmount&&i.jsxs("p",{className:"text-sm text-green-600",children:["مرسل: ",O.sentAmount," جنيه"]}),i.jsx(Xt,{variant:O.status==="completed"?"default":"secondary",className:"text-sm",children:ui(O.status)})]})]},O.id))})}),i.jsx(Fl,{value:"receive",className:"mt-2",children:A.filter(O=>O.type==="receive").length===0?i.jsx("div",{className:"text-center py-4 text-gray-500 fade-in-up tab-stagger-item text-[10px]",children:"لا توجد معاملات استقبال محفوظة بعد"}):i.jsx("div",{className:"space-y-1",children:A.filter(O=>O.type==="receive").map((O,H)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:()=>go(O),children:[i.jsxs("div",{className:"flex items-center gap-1",children:[Ls(O.status),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium text-sm",children:[O.senderPhone," → ",O.receiverPhone]}),i.jsx("p",{className:"text-sm text-gray-500",children:O.createdAt.toLocaleString("ar-EG")})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-sm",children:["+",O.amount," جنيه"]}),i.jsx(Xt,{variant:O.status==="completed"?"default":"secondary",className:"text-[10px]",children:ui(O.status)})]})]},O.id))})}),i.jsx(Fl,{value:"withdraw",className:"mt-2",children:A.filter(O=>O.type==="withdraw").length===0?i.jsx("div",{className:"text-center py-4 text-gray-500 fade-in-up tab-stagger-item text-[10px]",children:"لا توجد معاملات سحب محفوظة بعد"}):i.jsx("div",{className:"space-y-1",children:A.filter(O=>O.type==="withdraw").map((O,H)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 cursor-pointer",onClick:()=>go(O),children:[i.jsxs("div",{className:"flex items-center gap-1",children:[Ls(O.status),i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium text-sm",children:["سحب من المحفظة - ",O.senderPhone]}),i.jsx("p",{className:"text-sm text-gray-500",children:O.createdAt.toLocaleString("ar-EG")})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-sm",children:["-",O.amount," جنيه"]}),O.withdrawnAmount&&i.jsxs("p",{className:"text-sm text-red-600",children:["مسحوب: ",O.withdrawnAmount," جنيه"]}),i.jsx(Xt,{variant:"secondary",className:"text-[10px] bg-green-100 text-green-800",children:"سحب"})]})]},O.id))})}),i.jsx(Fl,{value:"deleted",className:"mt-2",children:oe.length===0?i.jsx("div",{className:"text-center py-4 text-gray-500 fade-in-up tab-stagger-item text-[10px]",children:"لا توجد معاملات محذوفة"}):i.jsx("div",{className:"space-y-1",children:oe.map((O,H)=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[Ls(O.status),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-sm text-red-700",children:O.type==="withdraw"?`سحب من المحفظة - ${O.senderPhone}`:`${O.senderPhone} → ${O.receiverPhone}`}),i.jsx("p",{className:"text-sm text-red-500",children:O.createdAt.toLocaleString("ar-EG")})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"text-right mr-2",children:[i.jsxs("p",{className:"font-bold text-sm text-red-700",children:[O.type==="withdraw"?"-":"",O.amount," جنيه"]}),i.jsx(Xt,{variant:"secondary",className:"text-[10px] bg-red-100 text-red-800",children:"محذوف"})]}),i.jsx(V,{variant:"ghost",size:"sm",className:"text-green-600 hover:bg-green-100 h-8 px-3",onClick:()=>gg(O.id),children:"استرجاع"}),i.jsx(V,{variant:"ghost",size:"sm",className:"text-red-600 hover:bg-red-100 h-8 px-3",onClick:()=>Nh(O.id),children:i.jsx(Ws,{className:"h-1 w-1"})})]})]},O.id))})})]})})]})]}),i.jsxs("div",{className:"space-y-1 fade-in-right",children:[i.jsxs(Le,{className:"bg-gradient-to-br from-white via-blue-50/30 to-indigo-50/50 border border-blue-200/40 rounded-lg shadow-lg hover:shadow-lg transition-all duration-200 group relative overflow-hidden ",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 via-indigo-500/3 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-200"}),i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-blue-400/10 to-transparent rounded-full  "}),i.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-indigo-400/10 to-transparent rounded-full  ",style:{animationDelay:"1s"}}),i.jsx(Ze,{className:"pb-3 px-6 pt-4 relative z-10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(ct,{className:"text-sm font-bold flex items-center gap-2 text-gray-800",children:[i.jsxs("div",{className:"relative",children:[i.jsx(wn,{className:"h-1 w-1 text-emerald-500 "}),i.jsx("div",{className:"absolute inset-0 h-1 w-1 bg-emerald-400 rounded-full opacity-20 "})]}),i.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"إجراء معاملة جديدة"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[u&&i.jsx("div",{className:"flex items-center gap-1 bg-gradient-to-r from-emerald-50 to-green-50 hover:from-emerald-100 hover:to-green-100 border border-emerald-200 text-emerald-800 text-sm transition-all duration-300 hover:scale-105 h-9 px-3 rounded-xl shadow-sm",children:i.jsxs("span",{className:"text-sm font-semibold whitespace-nowrap",children:["تجربة: ",f," أيام"]})}),i.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-gray-50 to-slate-50 hover:from-gray-100 hover:to-slate-100 border border-gray-200 transition-all duration-300 hover:scale-105 h-9 px-3 rounded-xl shadow-sm",children:[i.jsx(d1,{}),i.jsx("div",{className:"h-4 w-px bg-gray-300"}),i.jsx(Uq,{userId:n==null?void 0:n.uid})]})]}),ou&&i.jsxs(V,{variant:"outline",size:"sm",className:"flex items-center gap-1 bg-gradient-to-r from-cyan-50 to-blue-50 hover:from-cyan-100 hover:to-blue-100 border-cyan-200 text-cyan-800 text-xs transition-all duration-300 hover:scale-105 hover:shadow-lg h-9 px-3 rounded-xl ",onClick:iu,title:"مزامنة البيانات المحفوظة محلياً مع الخادم",children:[i.jsx(Oo,{className:"h-3 w-3 animate-spin"}),i.jsx("span",{className:"text-xs font-semibold whitespace-nowrap",children:"مزامنة"})]}),i.jsxs(V,{variant:"outline",size:"sm",className:"flex items-center gap-1 bg-gradient-to-r from-red-50 to-rose-50 hover:from-red-100 hover:to-rose-100 border-red-200 text-red-800 text-xs transition-all duration-300 hover:scale-105 hover:shadow-lg h-9 px-3 rounded-xl ",onClick:async()=>{try{await e(),t({title:"تم تسجيل الخروج بنجاح",description:"شكراً لاستخدامك النظام"})}catch{t({title:"خطأ في تسجيل الخروج",description:"حدث خطأ أثناء تسجيل الخروج",variant:"destructive"})}},children:[i.jsx(Gd,{className:"h-3 w-3"}),i.jsx("span",{className:"text-xs font-semibold whitespace-nowrap",children:"خروج"})]})]})}),i.jsxs($e,{className:"space-y-1 px-6 pb-6 relative z-10",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-1 p-1 bg-gradient-to-r from-gray-50 to-slate-50 rounded-2xl border border-gray-200/50 fade-in-up ",children:[i.jsxs(V,{variant:T==="transfer"?"default":"ghost",onClick:()=>cu("transfer"),className:`text-sm font-medium transition-all duration-300 hover:scale-105 h-10 rounded-xl ${T==="transfer"?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg hover:shadow-md hover:from-blue-600 hover:to-indigo-700":"text-gray-600 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 hover:text-blue-700 hover:border-blue-200"}`,children:[i.jsx(_f,{className:"h-1 w-1 mr-1"}),"تحويل"]}),i.jsxs(V,{variant:T==="withdraw"?"default":"ghost",onClick:()=>cu("withdraw"),className:`text-sm font-medium transition-all duration-300 hover:scale-105 h-10 rounded-xl ${T==="withdraw"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white shadow-lg hover:shadow-md hover:from-emerald-600 hover:to-green-700":"text-gray-600 hover:bg-gradient-to-r hover:from-emerald-50 hover:to-green-50 hover:text-emerald-700 hover:border-emerald-200"}`,children:[i.jsx(eN,{className:"h-1 w-1 mr-1"}),"سحب"]})]}),L.length>0&&i.jsxs("div",{className:"fade-in-up",children:[i.jsxs("label",{className:"text-sm font-semibold text-gray-700 mb-2 block flex items-center gap-2",children:[i.jsx(bs,{className:"h-1 w-1 text-blue-600"}),"اختيار المحفظة"]}),i.jsxs(lg,{value:X,onValueChange:mg,children:[i.jsx(xh,{className:"w-full h-12 text-sm bg-gradient-to-r from-white to-gray-50 border-2 border-gray-200 hover:border-blue-400 focus:border-blue-500 rounded-xl transition-all duration-300 hover:shadow-md focus:shadow-lg ",children:i.jsx(cg,{placeholder:"اختر محفظة للمعاملة",className:"text-gray-600"})}),i.jsx(yh,{className:"rounded-xl border-2 border-gray-200 shadow-md ",children:L.map(O=>i.jsx(bi,{value:O.id,className:"rounded-lg hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 transition-all duration-200",children:i.jsxs("div",{className:"flex items-center gap-1 py-1",children:[i.jsx("div",{className:"p-1 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-lg",children:i.jsx(bs,{className:"h-1 w-1 text-blue-600"})}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-sm font-medium text-gray-800",children:O.name}),i.jsxs("span",{className:"text-[10px] text-gray-500",children:["(",O.phone,")"]})]}),O.isDefault&&i.jsx(Xt,{variant:"secondary",className:"text-[10px] bg-gradient-to-r from-emerald-100 to-green-100 text-emerald-700 border-emerald-200",children:"افتراضي"})]})},O.id))})]})]}),X&&L.length>0&&(()=>{const O=L.find(ee=>ee.id===X),H=uu(X);return O?i.jsx("div",{className:"fade-in-up mb-2",children:i.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-1 rounded-md border border-gray-200 shadow-sm hover:shadow-md transition-all duration-300",children:[i.jsxs("div",{className:"text-[10px] text-gray-600 font-medium mb-1 text-center",children:["حدود المحفظة: ",O.name]}),i.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-1 overflow-hidden flex",children:[i.jsx("div",{className:"w-1/2 bg-red-200 relative",children:i.jsx("div",{className:"bg-gradient-to-r from-red-400 to-red-600 h-1 transition-all duration-200 ease-out shadow-sm",style:{width:`${Math.min(H.totalWithdrawn/O.monthlyWithdrawalLimit*100,100)}%`}})}),i.jsx("div",{className:"w-1/2 bg-blue-200 relative",children:i.jsx("div",{className:"bg-gradient-to-r from-blue-400 to-blue-600 h-1 transition-all duration-200 ease-out shadow-sm",style:{width:`${Math.min(H.totalTransferred/O.monthlyTransferLimit*100,100)}%`}})})]}),i.jsxs("div",{className:"flex justify-between items-center mt-0.5",children:[i.jsxs("div",{className:"text-[10px] text-red-600 font-medium",children:["متبقي سحب: ",Math.max(O.monthlyWithdrawalLimit-H.totalWithdrawn,0).toLocaleString("en-US")," جنيه"]}),i.jsxs("div",{className:"text-[10px] text-blue-600 font-medium",children:["متبقي تحويل: ",Math.max(O.monthlyTransferLimit-H.totalTransferred,0).toLocaleString("en-US")," جنيه"]})]})]})}):null})(),i.jsxs("div",{className:"fade-in-up",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:T==="transfer"?"رقم المرسل":"رقم المستقبل"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-1 w-1 text-gray-400"}),i.jsx(de,{value:v,onChange:O=>C(O.target.value),placeholder:"01030302038",className:"pl-10 h-10 text-sm transition-all duration-300 hover:border-blue-400 focus:border-blue-500"})]})]}),i.jsxs("div",{className:"fade-in-up",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:T==="transfer"?"رقم المستقبل":"رقم الراسل"}),i.jsxs("div",{className:"relative",children:[i.jsx(Ss,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-1 w-1 text-gray-400"}),i.jsx(de,{value:I,onChange:O=>R(O.target.value),placeholder:"أدخل رقم الراسل",className:"pl-10 h-10 text-sm transition-all duration-300 hover:border-blue-400 focus:border-blue-500"})]})]}),i.jsxs("div",{className:"fade-in-up",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:T==="transfer"?"المبلغ (جنيه)":"مبلغ السحب (جنيه)"}),i.jsxs("div",{className:"relative",children:[T==="withdraw"?i.jsx(eN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-1 w-1 text-green-500"}):i.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-1 w-1 text-gray-400"}),i.jsx(de,{value:j,onChange:O=>S(O.target.value),placeholder:T==="transfer"?"أدخل المبلغ":"أدخل مبلغ السحب",type:"number",className:"pl-10 h-10 text-sm transition-all duration-300 hover:border-blue-400 focus:border-blue-500"})]})]}),i.jsx("div",{className:`text-center text-sm p-3 rounded fade-in-up ${T==="transfer"?"text-gray-600 bg-gray-50":"text-green-600 bg-green-50 border border-green-200"}`,children:T==="transfer"?i.jsxs(i.Fragment,{children:["محفظة (اختيارية)",i.jsx("br",{}),i.jsx("span",{className:"text-sm",children:"اضغط على العلامة"})]}):i.jsxs(i.Fragment,{children:["💰 سحب من الرصيد المتاح",i.jsx("br",{}),j&&parseFloat(j)>0&&i.jsxs("div",{className:"mt-1 text-sm space-y-1",children:[i.jsxs("div",{children:["المبلغ: ",j," جنيه"]}),i.jsxs("div",{children:["العمولة: ",Ms(parseFloat(j))," جنيه"]}),i.jsxs("div",{className:"font-bold border-t pt-1",children:["الإجمالي: ",is()," جنيه"]})]}),i.jsx("span",{className:"text-sm block mt-1",children:"عمولة السحب: 10 جنيه لكل 1000 جنيه"})]})}),i.jsx(V,{onClick:yt,className:`w-full font-medium h-10 text-sm btn-bounce hover-glow transition-all duration-300 ${T==="transfer"?"bg-blue-600 hover:bg-blue-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:T==="transfer"?"تأكيد التحويل":"تأكيد السحب"})]})]}),i.jsx(Le,{className:"bg-gradient-to-br from-red-50 to-red-100 border-red-200 fade-in-up card-float",children:i.jsxs($e,{className:"p-3 text-center",children:[i.jsx("div",{className:"text-red-600 font-medium text-[10px] mb-1",children:"⚠️ تحذير من التحويل"}),i.jsx("div",{className:"text-[10px] text-red-700",children:"لا يمكن إلغاء أي عملية بعد تأكيدها للمحافظة على الأمان"})]})})]}),i.jsx("div",{className:"space-y-6",children:i.jsxs(Le,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:[i.jsxs(Ze,{className:"pb-3",children:[i.jsxs(ct,{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(Wn,{className:"h-5 w-5 text-yellow-500"}),"معلومات الاشتراك"]}),i.jsx(V,{variant:"outline",size:"sm",onClick:Rn,disabled:_,className:"w-fit text-xs",children:_?i.jsxs(i.Fragment,{children:[i.jsx(Oo,{className:"h-3 w-3 mr-1 animate-spin"}),"تحديث"]}):i.jsxs(i.Fragment,{children:[i.jsx(Oo,{className:"h-3 w-3 mr-1"}),"تحديث"]})})]}),i.jsx($e,{className:"space-y-4",children:x?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"حالة الاشتراك:"}),i.jsx(Xt,{variant:Lm(x)?"default":"destructive",className:"text-xs",children:Lm(x)?"متفعل":"منتهي"})]})}),i.jsx("div",{className:"bg-purple-50 p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"نوع الخطة:"}),i.jsx(Xt,{variant:"secondary",className:"text-xs",children:Gw(x.plan)})]})}),i.jsx("div",{className:"bg-green-50 p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"تاريخ البداية:"}),i.jsx("span",{className:"text-xs font-medium text-gray-800",children:x.startDate?Zl(x.startDate):"غير محدد"})]})}),i.jsx("div",{className:"bg-orange-50 p-3 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-sm text-gray-600",children:"تاريخ الانتهاء:"}),i.jsx("span",{className:"text-xs font-medium text-gray-800",children:x.endDate?Zl(x.endDate):"غير محدد"})]})})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Wn,{className:"h-12 w-12 text-gray-300 mx-auto mb-3"}),i.jsx("p",{className:"text-gray-500 text-sm",children:"لا توجد معلومات اشتراك"}),i.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"يرجى التواصل مع الإدارة لتفعيل الاشتراك"})]})})]})})]}),i.jsx(Lq,{isOpen:se,onClose:()=>W(!1),onWalletUpdate:async()=>{try{if(n!=null&&n.uid){const H=await mr.getWallets(n.uid);if(H&&H.length>0){const ee=H.map(re=>({...re,monthlyWithdrawalUsage:re.monthlyWithdrawalUsage||0,monthlyTransferUsage:re.monthlyTransferUsage||0,lastResetDate:re.lastResetDate||new Date().toISOString().split("T")[0]}));Q(ee);return}}}catch(H){console.error("Error loading wallets from Firebase:",H)}const O=localStorage.getItem(Br());if(O){const H=JSON.parse(O);Q(H)}}}),i.jsx(Fq,{isOpen:me,onClose:()=>Ne(!1),transaction:he,onDelete:pg}),i.jsx(Vq,{open:We,onOpenChange:He,onSuccess:xg,title:yg(),description:vg(),userId:n==null?void 0:n.uid}),i.jsx(PE,{open:we,onOpenChange:ut,onSuccess:wg,title:"تعديل الرصيد النقدي في الدرج",description:"أدخل الرقم السري والمبلغ الجديد لتعديل الرصيد النقدي في الدرج",currentBalance:Oe,balanceLabel:"الرصيد النقدي",userId:n==null?void 0:n.uid}),i.jsx(PE,{open:At,onOpenChange:Dt,onSuccess:()=>{},title:"تعديل رصيد المحفظة",description:"أدخل الرقم السري والمبلغ الجديد لتعديل رصيد المحفظة",currentBalance:ft&&Et[ft]||0,balanceLabel:`رصيد ${((as=L.find(O=>O.id===ft))==null?void 0:as.name)||"المحفظة"}`,userId:n==null?void 0:n.uid}),i.jsx($q,{open:xt,onOpenChange:ar,onSuccess:xo,title:"إضافة أو خصم مبلغ من رصيد المحفظة",description:"أدخل الرقم السري والمبلغ المراد إضافته أو خصمه من رصيد المحفظة",currentBalance:ft&&Et[ft]||0,balanceLabel:`رصيد ${((du=L.find(O=>O.id===ft))==null?void 0:du.name)||"المحفظة"}`,userId:n==null?void 0:n.uid}),i.jsx(Ik,{open:wt,onOpenChange:zr,userId:n==null?void 0:n.uid}),i.jsx(Ck,{open:cn,onOpenChange:Dn,userId:n==null?void 0:n.uid}),i.jsx(Ak,{open:hg,onOpenChange:fg}),i.jsx(Zt,{open:$r,onOpenChange:Ki,children:i.jsxs(zt,{className:"sm:max-w-md",children:[i.jsx(Wt,{children:i.jsx(Ht,{className:"text-right",children:"تعديل الدرج النقدية"})}),i.jsxs("div",{className:"space-y-1 py-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(be,{htmlFor:"amount",className:"text-right block",children:"المبلغ"}),i.jsxs("div",{className:"flex gap-2 items-center",children:[i.jsx(de,{id:"amount",type:"number",placeholder:"أدخل المبلغ",value:li,onChange:O=>Ds(O.target.value),className:"text-right flex-1",dir:"rtl",min:"0"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsxs(V,{type:"button",size:"sm",className:"bg-green-600 hover:bg-green-700 text-white px-3 py-2",onClick:()=>{if(!El(Ge)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}const O=parseFloat(li);if(isNaN(O)||O<=0){t({title:"خطأ",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}const H=Oe+O;Ke(H);const ee={cashBalance:H,lastUpdated:new Date().toISOString()},re=`userData_${n==null?void 0:n.uid}`;localStorage.setItem(re,JSON.stringify(ee)),Pt.updateUserData((n==null?void 0:n.uid)||"user-1",ee).then(()=>{console.log("✅ تم حفظ رصيد الدرج النقدي في Firebase بنجاح"),localStorage.removeItem(re)}).catch(pe=>{console.error("❌ خطأ في حفظ الرصيد في Firebase:",pe)}),t({title:"تم بنجاح",description:`تم إضافة ${O} جنيه إلى الدرج النقدية وحفظه في السحابة`}),Ki(!1),Ds(""),it("")},children:[i.jsx(dr,{className:"h-1 w-1 mr-1"}),"إضافة"]}),i.jsxs(V,{type:"button",size:"sm",className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2",onClick:()=>{if(!El(Ge)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}const O=parseFloat(li);if(isNaN(O)||O<=0){t({title:"خطأ",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}const H=Oe-O;Ke(H);const ee={cashBalance:H,lastUpdated:new Date().toISOString()},re=`userData_${n==null?void 0:n.uid}`;localStorage.setItem(re,JSON.stringify(ee)),Pt.updateUserData((n==null?void 0:n.uid)||"user-1",ee).then(()=>{console.log("✅ تم حفظ رصيد الدرج النقدي في Firebase بنجاح"),localStorage.removeItem(re)}).catch(pe=>{console.error("❌ خطأ في حفظ الرصيد في Firebase:",pe)}),t({title:"تم بنجاح",description:`تم خصم ${O} جنيه من الدرج النقدية وحفظه في السحابة`}),Ki(!1),Ds(""),it("")},children:[i.jsx(Ix,{className:"h-1 w-1 mr-1"}),"خصم"]})]})]}),i.jsxs("p",{className:"text-[10px] text-gray-500 text-right",children:["الرصيد الحالي: ",Oe.toLocaleString()," جنيه"]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(be,{htmlFor:"pin",className:"text-right block",children:"الرقم السري"}),i.jsx(de,{id:"pin",type:"password",placeholder:"أدخل الرقم السري",value:Ge,onChange:O=>it(O.target.value),className:"text-right",dir:"rtl"})]})]}),i.jsx(ia,{className:"flex gap-2",children:i.jsx(V,{variant:"outline",onClick:()=>{Ki(!1),Ds(""),it("")},children:"إلغاء"})})]})}),i.jsx(Zt,{open:fo,onOpenChange:Wr,children:i.jsxs(zt,{className:"sm:max-w-md",children:[i.jsx(Wt,{children:i.jsx(Ht,{className:"text-right text-red-600",children:"تصفير إجمالي المحفظة"})}),i.jsxs("div",{className:"space-y-1 py-4",children:[i.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg border border-red-200",children:[i.jsx("p",{className:"text-red-800 font-medium mb-2",children:"تحذير!"}),i.jsx("p",{className:"text-red-700 text-sm",children:"سيتم تصفير جميع أرصدة المحافظ إلى صفر. هذا الإجراء لا يمكن التراجع عنه."}),i.jsxs("p",{className:"text-red-600 text-sm mt-2",children:["الرصيد الحالي: ",Object.values(Et).reduce((O,H)=>O+H,0).toLocaleString()," جنيه"]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(be,{htmlFor:"resetWalletTotalPin",className:"text-right block",children:"الرقم السري للتأكيد"}),i.jsx(de,{id:"resetWalletTotalPin",type:"password",placeholder:"أدخل الرقم السري",value:wl,onChange:O=>bl(O.target.value),className:"text-right",dir:"rtl"})]})]}),i.jsxs(ia,{className:"flex gap-2",children:[i.jsx(V,{variant:"outline",onClick:()=>{Wr(!1),bl("")},children:"إلغاء"}),i.jsx(V,{variant:"destructive",onClick:async()=>{if(!lu(wl)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}try{const O={};Object.keys(Et).forEach(H=>{O[H]=0}),Y(O),localStorage.setItem(nn(),JSON.stringify(O)),await Pt.updateUserData((n==null?void 0:n.uid)||"user-1",{walletBalances:O}),setTimeout(()=>{Y({...O})},100),t({title:"تم التصفير بنجاح",description:"تم تصفير جميع أرصدة المحافظ إلى صفر"}),Wr(!1),bl("")}catch(O){console.error("خطأ في حفظ أرصدة المحافظ في Firebase:",O),t({title:"خطأ",description:"حدث خطأ أثناء حفظ البيانات",variant:"destructive"})}},children:"تصفير المحفظة"})]})]})}),i.jsx(Zt,{open:vh,onOpenChange:co,children:i.jsxs(zt,{className:"sm:max-w-md",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"text-right text-green-600 flex items-center gap-2 justify-end",children:[i.jsx(dr,{className:"h-4 w-4"}),"إضافة أموال لإجمالي المحفظة"]})}),i.jsxs("div",{className:"space-y-4 py-4",children:[i.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg border border-green-200",children:[i.jsx("p",{className:"text-green-800 font-medium mb-2",children:"إضافة أموال"}),i.jsx("p",{className:"text-green-700 text-sm",children:"سيتم إضافة المبلغ المحدد إلى إجمالي المحفظة بشكل متناسب على جميع المحافظ."}),i.jsxs("p",{className:"text-green-600 text-sm mt-2",children:["الرصيد الحالي: ",Object.values(Et).reduce((O,H)=>O+H,0).toLocaleString()," جنيه"]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"addWalletTotalAmount",className:"text-right block",children:"المبلغ المراد إضافته"}),i.jsx(de,{id:"addWalletTotalAmount",type:"number",placeholder:"أدخل المبلغ",value:yl,onChange:O=>uo(O.target.value),className:"text-right",dir:"rtl"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"addWalletTotalPin",className:"text-right block",children:"الرقم السري للتأكيد"}),i.jsx(de,{id:"addWalletTotalPin",type:"password",placeholder:"أدخل الرقم السري",value:su,onChange:O=>vl(O.target.value),className:"text-right",dir:"rtl"})]})]})]}),i.jsxs(ia,{className:"flex gap-2",children:[i.jsx(V,{variant:"outline",onClick:()=>{co(!1),uo(""),vl("")},children:"إلغاء"}),i.jsx(V,{variant:"default",className:"bg-green-600 hover:bg-green-700",disabled:wh,onClick:async()=>{const O=parseFloat(yl);if(!O||O<=0){t({title:"خطأ",description:"يرجى إدخال مبلغ صحيح",variant:"destructive"});return}if(!lu(su)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}ho(!0);try{const H=Object.values(Et).reduce((ee,re)=>ee+re,0);if(H===0){const ee=Object.keys(Et),re=O/ee.length,pe={};ee.forEach(at=>{pe[at]=re}),Y(pe),localStorage.setItem(nn(),JSON.stringify(pe)),await Pt.updateUserData((n==null?void 0:n.uid)||"user-1",{walletBalances:pe})}else{const ee={};Object.entries(Et).forEach(([re,pe])=>{const at=pe/H,Ie=O*at;ee[re]=pe+Ie}),Y(ee),localStorage.setItem(nn(),JSON.stringify(ee)),await Pt.updateUserData((n==null?void 0:n.uid)||"user-1",{walletBalances:ee})}setTimeout(()=>{Y(ee=>({...ee}))},100),t({title:"تم إضافة الأموال بنجاح",description:`تم إضافة ${O.toLocaleString()} جنيه إلى إجمالي المحفظة`}),co(!1),uo(""),vl("")}catch(H){console.error("خطأ في حفظ أرصدة المحافظ في Firebase:",H),t({title:"خطأ",description:"حدث خطأ أثناء حفظ البيانات",variant:"destructive"})}finally{ho(!1)}},children:wh?"جاري الإضافة...":"إضافة الأموال"})]})]})}),i.jsx(Zt,{open:bh,onOpenChange:mo,children:i.jsxs(zt,{className:"sm:max-w-[425px]",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"text-red-600 flex items-center gap-2",children:[i.jsx(Ws,{className:"h-1 w-1"}),"تصفير الرصيد النقدي"]})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:i.jsx("p",{className:"text-sm text-red-700",children:"⚠️ تحذير: سيتم تصفير الرصيد النقدي في الدرج إلى صفر. هذا الإجراء لا يمكن التراجع عنه."})}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(be,{htmlFor:"resetCashPin",children:"الرقم السري لدرج النقدية"}),i.jsx(de,{id:"resetCashPin",type:"password",placeholder:"أدخل الرقم السري",value:Nl,onChange:O=>po(O.target.value)})]})]}),i.jsxs(ia,{children:[i.jsx(V,{variant:"outline",onClick:()=>{mo(!1),po("")},children:"إلغاء"}),i.jsx(V,{variant:"destructive",onClick:async()=>{if(!Nl){t({title:"خطأ",description:"يرجى إدخال الرقم السري",variant:"destructive"});return}if(!El(Nl)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}try{Ke(0),await Pt.updateUserData((n==null?void 0:n.uid)||"user-1",{cashBalance:0}),t({title:"تم التصفير بنجاح",description:"تم تصفير الرصيد النقدي في الدرج إلى صفر"}),mo(!1),po("")}catch(O){console.error("خطأ في حفظ الرصيد في Firebase:",O),t({title:"خطأ",description:"حدث خطأ أثناء حفظ البيانات",variant:"destructive"})}},children:"تصفير الرصيد"})]})]})}),i.jsx(Zt,{open:Gi,onOpenChange:pl,children:i.jsxs(zt,{className:"sm:max-w-[425px]",children:[i.jsx(Wt,{children:i.jsxs(Ht,{className:"text-green-600 flex items-center gap-2",children:[i.jsx(dr,{className:"h-4 w-4"}),"إضافة أموال للدرج"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:i.jsx("p",{className:"text-sm text-green-700",children:"💰 سيتم إضافة المبلغ المحدد إلى الرصيد النقدي في الدرج"})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"addCashAmount",children:"المبلغ المراد إضافته"}),i.jsx(de,{id:"addCashAmount",type:"number",placeholder:"أدخل المبلغ",value:gl,onChange:O=>Qi(O.target.value),min:"0",step:"0.01"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"addCashPin",children:"الرقم السري لدرج النقدية"}),i.jsx(de,{id:"addCashPin",type:"password",placeholder:"أدخل الرقم السري",value:xl,onChange:O=>oo(O.target.value)})]})]}),i.jsxs(ia,{children:[i.jsx(V,{variant:"outline",onClick:()=>{pl(!1),Qi(""),oo("")},children:"إلغاء"}),i.jsx(V,{variant:"default",className:"bg-green-600 hover:bg-green-700",disabled:lo,onClick:async()=>{if(!gl||parseFloat(gl)<=0){t({title:"خطأ",description:"يرجى إدخال مبلغ صحيح أكبر من صفر",variant:"destructive"});return}if(!xl){t({title:"خطأ",description:"يرجى إدخال الرقم السري",variant:"destructive"});return}if(!El(xl)){t({title:"خطأ",description:"الرقم السري غير صحيح",variant:"destructive"});return}ss(!0);try{const O=parseFloat(gl),H=Oe+O;Ke(H),localStorage.setItem("cashBalance",H.toString()),await Pt.updateUserData((n==null?void 0:n.uid)||"user-1",{cashBalance:H}),t({title:"تم إضافة الأموال بنجاح",description:`تم إضافة ${O.toFixed(2)} جنيه إلى الدرج`}),pl(!1),Qi(""),oo("")}catch(O){console.error("خطأ في حفظ الرصيد في Firebase:",O),Ke(Oe),localStorage.setItem("cashBalance",Oe.toString()),t({title:"خطأ",description:"حدث خطأ أثناء حفظ البيانات، يرجى المحاولة مرة أخرى",variant:"destructive"})}finally{ss(!1)}},children:lo?"جاري الإضافة...":"إضافة الأموال"})]})]})}),i.jsx(Zt,{open:rs,onOpenChange:Ur,children:i.jsxs(zt,{className:"sm:max-w-md",children:[i.jsx(Wt,{children:i.jsx(Ht,{className:"text-right",children:"اختيار التاريخ والوقت للبحث"})}),i.jsxs("div",{className:"space-y-1 py-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(be,{htmlFor:"search-date",className:"text-right block",children:"التاريخ"}),i.jsx(de,{id:"search-date",type:"date",value:Be,onChange:O=>ht(O.target.value),className:"text-right"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(be,{htmlFor:"search-time",className:"text-right block",children:"الوقت (اختياري)"}),i.jsx(de,{id:"search-time",type:"time",value:st,onChange:O=>gt(O.target.value),className:"text-right",placeholder:"اختر الوقت للبحث في ساعة محددة"}),i.jsx("p",{className:"text-[10px] text-gray-500 text-right",children:"إذا لم تختر وقتاً محدداً، سيتم البحث في كامل اليوم"})]})]}),i.jsxs(ia,{className:"flex justify-between",children:[i.jsx(V,{variant:"outline",onClick:()=>{ht(""),gt(""),Ur(!1)},children:"مسح"}),i.jsx(V,{onClick:()=>Ur(!1),children:"تطبيق"})]})]})}),i.jsx(RE,{isOpen:l&&!a,onClose:()=>c(!1),onTrialStarted:qi}),i.jsx(Bq,{isOpen:Ct,onClose:()=>En(!1)}),i.jsx(zq,{isOpen:Qn,onClose:()=>ns(!1)})]}))},Hq=()=>{const t=Gn(),{user:e,profile:n,loading:r,refreshProfile:s}=Kt(),[a,o]=m.useState(!1);return _n(),m.useEffect(()=>{if(console.log("ProtectedUserDashboard - useEffect triggered",{loading:r,user:e?"exists":"null",profile:n?{role:n.role,approved:n.approved}:"null"}),!r){if(!e)console.log("ProtectedUserDashboard - No user, redirecting to login"),t("/user/login");else if(n){if(console.log("ProtectedUserDashboard - Profile found:",{role:n.role,approved:n.approved}),n.role==="user"&&n.approved===!1){console.log("ProtectedUserDashboard - User not approved, redirecting to pending approval"),t("/pending-approval");return}console.log("ProtectedUserDashboard - User approved, setting authenticated"),o(!0)}}},[e,n,r,t]),r?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"جاري التحقق من صلاحية الدخول..."})]})}):a?(console.log("ProtectedUserDashboard - Render state:",{isAuthenticated:a,profileRole:n==null?void 0:n.role,profileApproved:n==null?void 0:n.approved}),console.log("🔥 ProtectedUserDashboard - user:",e?{uid:e.uid,email:e.email}:"null"),console.log("🔥 ProtectedUserDashboard - profile:",n?{userId:n.userId,role:n.role}:"null"),console.log("🔥 ProtectedUserDashboard - loading:",r),console.log("🔥 ProtectedUserDashboard - About to render UserDashboardPage"),i.jsx("div",{className:"relative",children:i.jsx(Wq,{})})):null};function qq(){const{profile:t,signOut:e}=Kt(),n=s=>{switch(s){case"staff":return"موظف";case"merchant":return"تاجر";case"user":return"مستخدم";default:return s}},r=s=>{switch(s){case"staff":return"bg-secondary text-secondary-foreground";case"merchant":return"bg-success text-success-foreground";case"user":return"bg-blue-500 text-white";default:return"bg-muted text-muted-foreground"}};return i.jsx("header",{className:"h-16 border-b border-border bg-card/50 backdrop-blur-sm",children:i.jsxs("div",{className:"flex h-full items-center justify-between px-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h1",{className:"text-xl font-bold text-foreground",children:"منصة إدارة المحول"}),t&&i.jsx(Xt,{className:r(t.role),children:n(t.role)})]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs(s1,{children:[i.jsx(i1,{asChild:!0,children:i.jsxs(V,{variant:"ghost",className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:i.jsx(ki,{className:"h-4 w-4 text-primary"})}),i.jsx("span",{className:"text-sm",children:(t==null?void 0:t.fullName)||"المستخدم"})]})}),i.jsxs(eg,{align:"end",className:"w-56",children:[i.jsx(a1,{children:"حسابي"}),i.jsx(Md,{}),i.jsxs(Gs,{children:[i.jsx(Ua,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"الإعدادات"})]}),i.jsx(Md,{}),i.jsxs(Gs,{onClick:()=>e(),className:"text-destructive",children:[i.jsx(Gd,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"تسجيل الخروج"})]})]})]})})]})})}function Kq({open:t,onOpenChange:e,wallet:n,onSuccess:r}){const[s,a]=m.useState({provider:(n==null?void 0:n.provider)||"",msisdn:(n==null?void 0:n.msisdn)||"",dailyLimit:(n==null?void 0:n.dailyLimit)||0,monthlyLimit:(n==null?void 0:n.monthlyLimit)||0,transferLimit:(n==null?void 0:n.transferLimit)||2e5,withdrawLimit:(n==null?void 0:n.withdrawLimit)||2e5}),[o,l]=m.useState(!1),[c,u]=m.useState(null),{user:h}=Kt(),{toast:f}=_n(),p=(x,b)=>{const _=x.slice(0,3);return b==="vodafone_cash"&&_==="010"||b==="orange_cash"&&_==="012"||b==="etisalat_cash"&&_==="011"||b==="instapay"&&_==="015"},g=x=>{switch(x){case"INVALID_MSISDN":return"رقم المحفظة غير صالح.";case"PROVIDER_MISMATCH":return"المزوّد لا يطابق مقدمة الرقم.";case"ALREADY_EXISTS":return"المحفظة مضافة قبل كده.";case"RLS_DENIED":return"ليست لديك صلاحية لإضافة المحفظة.";default:return"خطأ غير متوقع."}},N=async x=>{if(x.preventDefault(),u(null),!/^01\d{9}$/.test(s.msisdn)){u("اكتب رقم 11 رقم يبدأ بـ 01.");return}if(!p(s.msisdn,s.provider)){u("مقدم الخدمة لا يتطابق مع مقدمة الرقم.");return}l(!0);try{const b={...s,merchantUserId:h==null?void 0:h.uid,isActive:!0,provider:s.provider};if(console.log("Saving wallet data:",b),n!=null&&n.id)await mr.update(n.id,b),console.log("Wallet updated successfully"),r();else{console.log("Creating new wallet...");const _=await mr.create(b);console.log("Wallet created with ID:",_);const w={id:_,...b,dailyUsage:0,monthlyUsage:0};console.log("Final wallet object:",w),r(w)}f({title:"تم إضافة المحفظة",description:`تم ${n!=null&&n.id?"تحديث":"إضافة"} المحفظة بنجاح`}),e(!1)}catch(b){console.error("Error saving wallet:",b);let _="حصل خطأ أثناء الإضافة";b.code?_=g(b.code):b.message&&(_=b.message),f({title:"خطأ",description:_,variant:"destructive"})}finally{l(!1)}};return i.jsx(Zt,{open:t,onOpenChange:e,children:i.jsxs(zt,{className:"sm:max-w-md",children:[i.jsx(Wt,{children:i.jsx(Ht,{children:n!=null&&n.id?"تعديل المحفظة":"إضافة محفظة جديدة"})}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"provider",children:"المزود"}),i.jsxs(lg,{value:s.provider,onValueChange:x=>a({...s,provider:x}),disabled:o,children:[i.jsx(xh,{children:i.jsx(cg,{placeholder:"اختر المزود"})}),i.jsxs(yh,{children:[i.jsx(bi,{value:"vodafone_cash",children:"Vodafone Cash"}),i.jsx(bi,{value:"etisalat_cash",children:"Etisalat Cash"}),i.jsx(bi,{value:"orange_cash",children:"Orange Cash"}),i.jsx(bi,{value:"instapay",children:"InstaPay"})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"msisdn",children:"رقم الهاتف"}),i.jsx(de,{id:"msisdn",placeholder:"01xxxxxxxxx",value:s.msisdn,onChange:x=>a({...s,msisdn:x.target.value}),disabled:o,required:!0})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"dailyLimit",children:"الحد اليومي (ج.م)"}),i.jsx(de,{id:"dailyLimit",type:"number",min:"0",step:"0.01",value:s.dailyLimit,onChange:x=>a({...s,dailyLimit:parseFloat(x.target.value)||0}),disabled:o})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"monthlyLimit",children:"الحد الشهري (ج.م)"}),i.jsx(de,{id:"monthlyLimit",type:"number",min:"0",step:"0.01",value:s.monthlyLimit,onChange:x=>a({...s,monthlyLimit:parseFloat(x.target.value)||0}),disabled:o})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"transferLimit",children:"حد التحويل (ج.م)"}),i.jsx(de,{id:"transferLimit",type:"number",min:"0",step:"0.01",value:s.transferLimit,onChange:x=>a({...s,transferLimit:parseFloat(x.target.value)||2e5}),disabled:o,placeholder:"200000"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"withdrawLimit",children:"حد السحب (ج.م)"}),i.jsx(de,{id:"withdrawLimit",type:"number",min:"0",step:"0.01",value:s.withdrawLimit,onChange:x=>a({...s,withdrawLimit:parseFloat(x.target.value)||2e5}),disabled:o,placeholder:"200000"})]})]}),c&&i.jsx("div",{className:"text-red-600 text-sm mt-2",children:c}),i.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[i.jsx(V,{type:"button",variant:"outline",onClick:()=>e(!1),disabled:o,children:"إلغاء"}),i.jsx(V,{type:"submit",disabled:o,className:"btn-primary",children:o?i.jsxs(i.Fragment,{children:[i.jsx(PS,{className:"mr-2 h-4 w-4 animate-spin"}),"جارِ الإضافة…"]}):n!=null&&n.id?"تحديث المحفظة":"إضافة المحفظة"})]})]})]})})}function Gq(){const[t,e]=m.useState([]),[n,r]=m.useState(!0),[s,a]=m.useState(!1),[o,l]=m.useState(null),[c,u]=m.useState(!0),{user:h}=Kt(),{toast:f}=_n();m.useEffect(()=>{h!=null&&h.uid&&p()},[h==null?void 0:h.uid]);const p=async()=>{try{if(!(h!=null&&h.uid)){e([]),r(!1);return}r(!0);const v=await mr.getByMerchantId(h.uid),C=await Promise.all(v.map(async I=>{try{const R=await Pk.getUsage(I.id);return{...I,dailyUsage:I.dailyUsage||0,monthlyUsage:I.monthlyUsage||0,transferUsage:(R==null?void 0:R.transferUsage)||0,withdrawUsage:(R==null?void 0:R.withdrawUsage)||0}}catch(R){return console.error(`Error loading usage for wallet ${I.id}:`,R),{...I,dailyUsage:I.dailyUsage||0,monthlyUsage:I.monthlyUsage||0,transferUsage:0,withdrawUsage:0}}}));e(C)}catch(v){console.error("Error fetching wallets from Firebase:",v),f({title:"خطأ",description:"فشل في تحميل المحافظ من الخادم. يرجى المحاولة مرة أخرى.",variant:"destructive"}),e([])}finally{r(!1)}},g=async(v,C)=>{try{await mr.update(v,{isActive:!C});const I=t.map(R=>R.id===v?{...R,isActive:!R.isActive}:R);e(I),f({title:"تم التحديث",description:`تم ${C?"إلغاء تفعيل":"تفعيل"} المحفظة بنجاح`})}catch(I){console.error("Error toggling wallet status:",I),f({title:"خطأ",description:"فشل في تحديث حالة المحفظة",variant:"destructive"})}},N=async(v,C)=>{if(window.confirm(`هل أنت متأكد من حذف المحفظة ${C}؟

هذا الإجراء لا يمكن التراجع عنه.`))try{await mr.delete(v);const R=t.filter(j=>j.id!==v);e(R),f({title:"تم الحذف",description:"تم حذف المحفظة بنجاح"})}catch(R){console.error("Error deleting wallet:",R),f({title:"خطأ",description:"فشل في حذف المحفظة",variant:"destructive"})}},x=(v,C)=>{if(C===0)return"bg-muted";const I=v/C*100;return I>=100?"bg-destructive":I>=80?"bg-warning":"bg-success"},b=v=>{switch(v){case"vodafone_cash":return"bg-red-600";case"etisalat_cash":return"bg-green-600";case"orange_cash":return"bg-orange-600";case"instapay":return"bg-blue-600";default:return"bg-gray-600"}},_=v=>{switch(v){case"vodafone_cash":return"#dc2626";case"etisalat_cash":return"#16a34a";case"orange_cash":return"#ea580c";case"instapay":return"#2563eb";default:return"#6b7280"}},w=v=>{switch(v){case"vodafone_cash":return"فودافون كاش";case"etisalat_cash":return"اتصالات كاش";case"orange_cash":return"أورانج كاش";case"instapay":return"إنستاباي";default:return v.replace("_"," ")}};return n?i.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary border-t-transparent"}),i.jsx("p",{className:"text-muted-foreground animate-pulse",children:"جاري تحميل المحافظ..."})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"محافظي"}),i.jsxs(V,{variant:"outline",size:"sm",onClick:p,disabled:n,className:"flex items-center gap-2",children:[i.jsx("svg",{className:`w-4 h-4 ${n?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"تحديث"]})]}),c&&i.jsxs(V,{onClick:()=>{a(!0),u(!1)},className:"btn-primary",children:[i.jsx(dr,{className:"ml-2 h-4 w-4"}),"إضافة محفظة جديدة"]})]}),i.jsxs("div",{className:"grid gap-6",children:[t.map(v=>{var C,I,R,j,S,T;return i.jsxs(Le,{className:"card-glass hover:shadow-lg transition-all duration-300 border-l-4",style:{borderLeftColor:_(v.provider)},children:[i.jsx(Ze,{className:"pb-4",children:i.jsxs("div",{className:"flex justify-between items-start",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Xt,{className:`${b(v.provider)} text-white font-medium px-3 py-1`,children:w(v.provider)}),i.jsx("div",{className:`w-3 h-3 rounded-full ${v.isActive?"bg-green-500":"bg-gray-400"}`,title:v.isActive?"نشط":"غير نشط"})]}),i.jsx(ct,{className:"text-xl font-bold text-primary",children:v.msisdn}),v.label&&i.jsxs("span",{className:"text-sm text-muted-foreground font-medium",children:["(",v.label,")"]})]})}),i.jsxs("div",{className:"flex items-center gap-2 bg-muted/50 rounded-lg p-2",children:[i.jsx(V,{variant:"ghost",size:"sm",onClick:()=>{l(v),a(!0)},children:i.jsx(MS,{className:"h-4 w-4"})}),i.jsx(V,{variant:"ghost",size:"sm",onClick:()=>g(v.id,v.isActive),children:v.isActive?i.jsx(D3,{className:"h-5 w-5 text-success"}):i.jsx(k3,{className:"h-5 w-5 text-muted-foreground"})}),i.jsx(V,{variant:"ghost",size:"sm",onClick:()=>N(v.id,v.msisdn),className:"text-destructive hover:text-destructive",children:i.jsx(Ws,{className:"h-4 w-4"})})]})]})}),i.jsx($e,{className:"pt-4",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[i.jsx("span",{className:"font-medium text-muted-foreground",children:"الاستخدام اليومي"}),i.jsxs("span",{className:"font-bold",children:[(C=v.dailyUsage)==null?void 0:C.toLocaleString()," / ",v.dailyLimit>0?v.dailyLimit.toLocaleString():"∞"," جنيه"]})]}),i.jsx(Ni,{value:v.dailyLimit>0?Math.min((v.dailyUsage||0)/v.dailyLimit*100,100):0,className:`h-3 ${x(v.dailyUsage||0,v.dailyLimit)}`}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[v.dailyLimit>0?((v.dailyUsage||0)/v.dailyLimit*100).toFixed(1):0,"% مستخدم"]})]}),i.jsxs("div",{className:"bg-muted/30 rounded-lg p-4",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[i.jsx("span",{className:"font-medium text-muted-foreground",children:"الاستخدام الشهري"}),i.jsxs("span",{className:"font-bold",children:[(I=v.monthlyUsage)==null?void 0:I.toLocaleString()," / ",v.monthlyLimit>0?v.monthlyLimit.toLocaleString():"∞"," جنيه"]})]}),i.jsx(Ni,{value:v.monthlyLimit>0?Math.min((v.monthlyUsage||0)/v.monthlyLimit*100,100):0,className:`h-3 ${x(v.monthlyUsage||0,v.monthlyLimit)}`}),i.jsxs("div",{className:"text-xs text-muted-foreground mt-1 text-right",children:[v.monthlyLimit>0?((v.monthlyUsage||0)/v.monthlyLimit*100).toFixed(1):0,"% مستخدم"]})]}),i.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[i.jsx("span",{className:"font-medium text-blue-700",children:"حد التحويل"}),i.jsxs("span",{className:"font-bold text-blue-900",children:[((R=v.transferUsage)==null?void 0:R.toLocaleString())||0," / ",((j=v.transferLimit)==null?void 0:j.toLocaleString())||2e5," جنيه"]})]}),i.jsx(Ni,{value:v.transferLimit?Math.min((v.transferUsage||0)/v.transferLimit*100,100):0,className:"h-3 bg-blue-100"}),i.jsxs("div",{className:"text-xs text-blue-600 mt-1 text-right",children:[v.transferLimit?((v.transferUsage||0)/v.transferLimit*100).toFixed(1):0,"% مستخدم"]})]}),i.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[i.jsxs("div",{className:"flex justify-between items-center text-sm mb-3",children:[i.jsx("span",{className:"font-medium text-green-700",children:"حد السحب"}),i.jsxs("span",{className:"font-bold text-green-900",children:[((S=v.withdrawUsage)==null?void 0:S.toLocaleString())||0," / ",((T=v.withdrawLimit)==null?void 0:T.toLocaleString())||2e5," جنيه"]})]}),i.jsx(Ni,{value:v.withdrawLimit?Math.min((v.withdrawUsage||0)/v.withdrawLimit*100,100):0,className:"h-3 bg-green-100"}),i.jsxs("div",{className:"text-xs text-green-600 mt-1 text-right",children:[v.withdrawLimit?((v.withdrawUsage||0)/v.withdrawLimit*100).toFixed(1):0,"% مستخدم"]})]})]})})]},v.id)}),t.length===0&&i.jsx(Le,{className:"card-glass",children:i.jsxs($e,{className:"text-center py-16",children:[i.jsx("div",{className:"bg-muted/30 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:i.jsx(dr,{className:"w-12 h-12 text-muted-foreground"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"لا توجد محافظ"}),i.jsx("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"ابدأ بإضافة محفظتك الأولى لتتمكن من استقبال المدفوعات من عملائك"}),c&&i.jsxs(V,{onClick:()=>{a(!0),u(!1)},size:"lg",className:"btn-primary px-8",children:[i.jsx(dr,{className:"w-5 h-5 ml-2"}),"إضافة محفظة جديدة"]})]})})]}),i.jsx(Kq,{open:s,onOpenChange:v=>{a(v),v||(l(null),u(!0))},wallet:o,onSuccess:v=>{console.log("onSuccess called with:",v),console.log("editingWallet:",o),v&&!o?(console.log("Adding new wallet to list"),e(C=>{const I=[...C,v];return console.log("Updated wallets list:",I),I})):(console.log("Refreshing wallets from Firebase"),p()),a(!1),l(null),u(!0)}})]})}function Qq(){const{user:t,profile:e,loading:n}=Kt();return m.useEffect(()=>{!n&&(!t||!e||e.role!=="merchant")&&(window.location.href="/auth")},[t,e,n]),n?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"h-8 w-8 animate-spin border-4 border-primary border-r-transparent rounded-full mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"جاري التحميل..."})]})}):!t||!e||e.role!=="merchant"?null:e&&!e.approved?(window.location.href="/pending-approval",null):i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(qq,{}),i.jsx("main",{className:"container mx-auto p-6",children:i.jsxs(UT,{children:[i.jsx(Qt,{path:"/",element:i.jsx(VT,{to:"/merchant/wallets",replace:!0})}),i.jsx(Qt,{path:"/wallets",element:i.jsx(Gq,{})})]})})]})}function Yq(){const{user:t,signOut:e}=Kt(),n=Gn(),[r,s]=m.useState(!1),a=async()=>{await e(),n("/auth")},o=async()=>{Nr.error("التجربة المجانية غير متاحة حالياً")};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 via-background to-yellow-50 flex items-center justify-center p-4",children:i.jsxs(Le,{className:"w-full max-w-md shadow-lg",children:[i.jsxs(Ze,{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:i.jsx("div",{className:"h-12 w-12 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center",children:i.jsx(es,{className:"h-6 w-6 text-white"})})}),i.jsx(ct,{className:"text-2xl font-bold text-gray-800",children:"في انتظار الموافقة"}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"حسابك قيد المراجعة من قبل الإدارة"})]}),i.jsxs($e,{className:"space-y-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Bi,{className:"h-5 w-5 text-orange-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-orange-800 mb-1",children:"حالة الحساب: في انتظار الموافقة"}),i.jsx("p",{className:"text-sm text-orange-700",children:"تم إنشاء حسابك بنجاح ولكنه يحتاج إلى موافقة من الإدارة قبل أن تتمكن من الوصول إلى لوحة التحكم."})]})]})}),i.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Ri,{className:"h-5 w-5 text-blue-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"معلومات الحساب"}),i.jsxs("p",{className:"text-sm text-blue-700 mb-2",children:["البريد الإلكتروني: ",t==null?void 0:t.email]}),i.jsxs("p",{className:"text-sm text-blue-700",children:["تاريخ التسجيل: ",new Date().toLocaleDateString("ar-EG")]})]})]})}),i.jsx("div",{className:"p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(Wo,{className:"h-6 w-6 text-green-600 mt-0.5"}),i.jsxs("div",{className:"space-y-3 flex-1",children:[i.jsx("h3",{className:"font-medium text-green-800",children:"🎉 تجربة مجانية لمدة 7 أيام!"}),i.jsx("p",{className:"text-sm text-green-700 leading-relaxed",children:"لا تنتظر الموافقة! ابدأ فوراً بتجربة مجانية لمدة 7 أيام كاملة مع الوصول إلى جميع الميزات."}),i.jsxs("ul",{className:"text-xs text-green-600 space-y-1",children:[i.jsx("li",{children:"• إدارة المحافظ والمعاملات"}),i.jsx("li",{children:"• تقارير مفصلة"}),i.jsx("li",{children:"• دعم فني كامل"}),i.jsx("li",{children:"• جميع الميزات المتقدمة"})]}),i.jsx(V,{onClick:o,disabled:r,className:"w-full bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 shadow-md hover:shadow-lg mt-3",children:r?i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),i.jsx("span",{children:"جاري التفعيل..."})]}):i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Wo,{className:"w-4 h-4"}),i.jsx("span",{children:"ابدأ التجربة المجانية الآن"})]})})]})]})}),i.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(wn,{className:"h-5 w-5 text-blue-600 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-blue-800 mb-1",children:"أو انتظر الموافقة الكاملة"}),i.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[i.jsx("li",{children:"• سيتم مراجعة حسابك من قبل فريق الإدارة"}),i.jsx("li",{children:"• ستتلقى إشعاراً عند الموافقة على حسابك"}),i.jsx("li",{children:"• يمكنك تسجيل الدخول مرة أخرى بعد الموافقة"})]})]})]})})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(V,{onClick:()=>window.location.reload(),className:"w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700",children:"تحديث الصفحة"}),i.jsx(V,{variant:"outline",onClick:a,className:"w-full border-gray-300 text-gray-700 hover:bg-gray-50",children:"تسجيل الخروج"})]}),i.jsxs("div",{className:"text-center pt-4 border-t border-gray-200",children:[i.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"هل تحتاج مساعدة؟"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"تواصل مع الدعم الفني للحصول على المساعدة"})]})]})]})})}const Xq=()=>{const[t,e]=m.useState(""),[n,r]=m.useState(""),[s,a]=m.useState(!1),[o,l]=m.useState(!1),c=Gn(),u=async h=>{if(h.preventDefault(),t!=="alkaptin7878@mail.ru"||n!=="01123456"){Nr.error("بيانات الدخول غير صحيحة");return}l(!0);try{await lw(bt,t,n),Nr.success("تم تسجيل الدخول بنجاح"),c("/admin/dashboard")}catch(f){console.error("خطأ في تسجيل الدخول:",f),Nr.error("فشل في تسجيل الدخول")}finally{l(!1)}};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/10"}),i.jsxs("div",{className:"relative w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full mb-4 shadow-2xl",children:i.jsx(Ri,{className:"w-10 h-10 text-white"})}),i.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"لوحة التحكم الإدارية"}),i.jsx("p",{className:"text-gray-300",children:"تسجيل دخول المدير"})]}),i.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 shadow-2xl border border-white/20",children:[i.jsxs("form",{onSubmit:u,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-200",children:"البريد الإلكتروني"}),i.jsxs("div",{className:"relative",children:[i.jsx(dp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{id:"email",type:"email",value:t,onChange:h=>e(h.target.value),className:"w-full pl-12 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"أدخل البريد الإلكتروني",required:!0,dir:"ltr"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-200",children:"كلمة المرور"}),i.jsxs("div",{className:"relative",children:[i.jsx(si,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),i.jsx("input",{id:"password",type:s?"text":"password",value:n,onChange:h=>r(h.target.value),className:"w-full pl-12 pr-12 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200",placeholder:"أدخل كلمة المرور",required:!0,dir:"ltr"}),i.jsx("button",{type:"button",onClick:()=>a(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:s?i.jsx(en,{className:"w-5 h-5"}):i.jsx(qt,{className:"w-5 h-5"})})]})]}),i.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-transparent transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:o?i.jsxs("div",{className:"flex items-center justify-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white ml-2"}),"جاري تسجيل الدخول..."]}):"تسجيل الدخول"})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-xs text-gray-400",children:"مخصص للمديرين المعتمدين فقط"})})]}),i.jsx("div",{className:"mt-6 text-center",children:i.jsx("p",{className:"text-xs text-gray-500",children:"🔒 جلسة آمنة ومشفرة"})})]})]})},Rk=m.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:Se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Rk.displayName="Textarea";var dg="Switch",[Jq,WK]=Fr(dg),[Zq,eK]=Jq(dg),kk=m.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:l,value:c="on",onCheckedChange:u,form:h,...f}=t,[p,g]=m.useState(null),N=rt(e,v=>g(v)),x=m.useRef(!1),b=p?h||!!p.closest("form"):!0,[_,w]=Va({prop:s,defaultProp:a??!1,onChange:u,caller:dg});return i.jsxs(Zq,{scope:n,checked:_,disabled:l,children:[i.jsx(je.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":Lk(_),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:N,onClick:ce(t.onClick,v=>{w(C=>!C),b&&(x.current=v.isPropagationStopped(),x.current||v.stopPropagation())})}),b&&i.jsx(Ok,{control:p,bubbles:!x.current,name:r,value:c,checked:_,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});kk.displayName=dg;var Dk="SwitchThumb",Mk=m.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=eK(Dk,n);return i.jsx(je.span,{"data-state":Lk(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});Mk.displayName=Dk;var tK="SwitchBubbleInput",Ok=m.forwardRef(({__scopeSwitch:t,control:e,checked:n,bubbles:r=!0,...s},a)=>{const o=m.useRef(null),l=rt(o,a),c=_R(n),u=sT(e);return m.useEffect(()=>{const h=o.current;if(!h)return;const f=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(f,"checked").set;if(c!==n&&g){const N=new Event("click",{bubbles:r});g.call(h,n),h.dispatchEvent(N)}},[c,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ok.displayName=tK;function Lk(t){return t?"checked":"unchecked"}var Fk=kk,nK=Mk;const Vk=m.forwardRef(({className:t,...e},n)=>i.jsx(Fk,{className:Se("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:i.jsx(nK,{className:Se("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Vk.displayName=Fk.displayName;const rK=()=>{const{settings:t,loading:e,error:n,updateSettings:r,refreshSettings:s}=ng(),{toast:a}=_n(),[o,l]=m.useState({phoneNumber:"",defaultMessage:"",isEnabled:!0}),[c,u]=m.useState(!1),[h,f]=m.useState(!1),[p,g]=m.useState(""),[N,x]=m.useState({});m.useEffect(()=>{t&&l({phoneNumber:t.phoneNumber,defaultMessage:t.defaultMessage,isEnabled:t.isEnabled})},[t]);const b=()=>{var R,j;const I={};return(R=o.phoneNumber)!=null&&R.trim()?PH(o.phoneNumber)||(I.phoneNumber="رقم الواتساب غير صحيح (يجب أن يحتوي على 10-15 رقم)"):I.phoneNumber="رقم الواتساب مطلوب",(j=o.defaultMessage)!=null&&j.trim()?o.defaultMessage.length<10&&(I.defaultMessage="الرسالة يجب أن تحتوي على 10 أحرف على الأقل"):I.defaultMessage="الرسالة الافتراضية مطلوبة",x(I),Object.keys(I).length===0},_=async()=>{if(!b()){a({title:"خطأ في البيانات",description:"يرجى تصحيح الأخطاء قبل الحفظ",variant:"destructive"});return}u(!0);try{if(await r(o))a({title:"تم الحفظ بنجاح",description:"تم تحديث إعدادات الواتساب بنجاح",variant:"default"});else throw new Error("فشل في الحفظ")}catch{a({title:"خطأ في الحفظ",description:"حدث خطأ أثناء حفظ الإعدادات",variant:"destructive"})}finally{u(!1)}},w=()=>{if(o.phoneNumber&&o.defaultMessage)try{const I=h1(o.phoneNumber,o.defaultMessage);g(I),f(!0)}catch{a({title:"خطأ في المعاينة",description:"تأكد من صحة رقم الواتساب",variant:"destructive"})}},v=async()=>{try{await navigator.clipboard.writeText(p),a({title:"تم النسخ",description:"تم نسخ الرابط إلى الحافظة",variant:"default"})}catch{a({title:"خطأ في النسخ",description:"فشل في نسخ الرابط",variant:"destructive"})}},C=I=>{const R=I.replace(/[^\d+]/g,"");l(j=>({...j,phoneNumber:R})),N.phoneNumber&&x(j=>({...j,phoneNumber:""}))};return e?i.jsxs(Le,{children:[i.jsx(Ze,{children:i.jsxs(ct,{className:"flex items-center gap-2",children:[i.jsx(Ho,{className:"h-5 w-5"}),"إدارة الواتساب"]})}),i.jsx($e,{children:i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx(Oo,{className:"h-6 w-6 animate-spin"}),i.jsx("span",{className:"mr-2",children:"جاري التحميل..."})]})})]}):i.jsx("div",{className:"space-y-6",children:i.jsxs(Le,{children:[i.jsxs(Ze,{children:[i.jsxs(ct,{className:"flex items-center gap-2",children:[i.jsx(Ho,{className:"h-5 w-5"}),"إدارة الواتساب"]}),i.jsx(Hp,{children:"إدارة رقم الواتساب والرسائل الافتراضية المعروضة في جميع أنحاء الموقع"})]}),i.jsxs($e,{className:"space-y-6",children:[n&&i.jsxs(rg,{variant:"destructive",children:[i.jsx(Bi,{className:"h-4 w-4"}),i.jsx(sg,{children:n})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`h-3 w-3 rounded-full ${o.isEnabled?"bg-green-500":"bg-red-500"}`}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium",children:"حالة خدمة الواتساب"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:o.isEnabled?"مفعلة":"معطلة"})]})]}),i.jsx(Vk,{checked:o.isEnabled,onCheckedChange:I=>l(R=>({...R,isEnabled:I}))})]}),i.jsx(x1,{}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(be,{htmlFor:"phoneNumber",className:"flex items-center gap-2",children:[i.jsx(Ss,{className:"h-4 w-4"}),"رقم الواتساب"]}),i.jsx(de,{id:"phoneNumber",type:"tel",placeholder:"مثال: 201000392539",value:o.phoneNumber,onChange:I=>C(I.target.value),className:N.phoneNumber?"border-red-500":"",dir:"ltr"}),N.phoneNumber&&i.jsx("p",{className:"text-sm text-red-500",children:N.phoneNumber}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"أدخل رقم الواتساب مع رمز الدولة (مثال: 201000392539 لمصر)"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"defaultMessage",children:"الرسالة الافتراضية"}),i.jsx(Rk,{id:"defaultMessage",placeholder:"مرحباً، أريد الاستفسار عن خدماتكم",value:o.defaultMessage,onChange:I=>{l(R=>({...R,defaultMessage:I.target.value})),N.defaultMessage&&x(R=>({...R,defaultMessage:""}))},className:N.defaultMessage?"border-red-500":"",rows:4}),N.defaultMessage&&i.jsx("p",{className:"text-sm text-red-500",children:N.defaultMessage}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"هذه الرسالة ستظهر افتراضياً عند النقر على أزرار الواتساب"})]}),i.jsxs("div",{className:"flex gap-3 pt-4",children:[i.jsxs(V,{onClick:_,disabled:c,className:"flex items-center gap-2",children:[c?i.jsx(Oo,{className:"h-4 w-4 animate-spin"}):i.jsx(hp,{className:"h-4 w-4"}),c?"جاري الحفظ...":"حفظ التغييرات"]}),i.jsxs(V,{variant:"outline",onClick:w,disabled:!o.phoneNumber||!o.defaultMessage,className:"flex items-center gap-2",children:[h?i.jsx(en,{className:"h-4 w-4"}):i.jsx(qt,{className:"h-4 w-4"}),"معاينة الرابط"]}),i.jsxs(V,{variant:"outline",onClick:s,className:"flex items-center gap-2",children:[i.jsx(Oo,{className:"h-4 w-4"}),"تحديث"]})]}),h&&p&&i.jsxs(Le,{className:"bg-muted/50",children:[i.jsx(Ze,{children:i.jsx(ct,{className:"text-lg",children:"معاينة رابط الواتساب"})}),i.jsxs($e,{className:"space-y-4",children:[i.jsx("div",{className:"p-3 bg-background rounded border font-mono text-sm break-all",children:p}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(V,{variant:"outline",size:"sm",onClick:v,className:"flex items-center gap-2",children:[i.jsx(E3,{className:"h-4 w-4"}),"نسخ الرابط"]}),i.jsxs(V,{variant:"outline",size:"sm",onClick:()=>window.open(p,"_blank"),className:"flex items-center gap-2",children:[i.jsx(j3,{className:"h-4 w-4"}),"فتح في الواتساب"]})]})]})]}),t&&i.jsxs("div",{className:"pt-4 border-t",children:[i.jsx("h4",{className:"font-medium mb-3",children:"معلومات الإعدادات"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"آخر تحديث:"}),i.jsxs(Xt,{variant:"outline",className:"mr-2",children:[t.lastUpdated.toLocaleDateString("ar-EG")," - ",t.lastUpdated.toLocaleTimeString("ar-EG")]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-muted-foreground",children:"الحالة:"}),i.jsx(Xt,{variant:t.isEnabled?"default":"secondary",className:"mr-2",children:t.isEnabled?"مفعل":"معطل"})]})]})]})]})]})})},zm={enableVisualAlerts:!0,enableAudioAlerts:!0,criticalDays:1,warningDays:3,infoDays:7},sK=t=>{const e=new Date,r=new Date(t).getTime()-e.getTime();return Math.ceil(r/(1e3*60*60*24))},iK=(t,e=zm)=>t<0?"expired":t<=e.criticalDays?"critical":t<=e.warningDays?"warning":(t<=e.infoDays,"info"),aK=(t,e,n)=>{const r=oK(n);return e<0?`انتهت صلاحية اشتراك ${r} للمستخدم ${t}`:e===0?`ينتهي اشتراك ${r} للمستخدم ${t} اليوم!`:e===1?`ينتهي اشتراك ${r} للمستخدم ${t} غداً`:`ينتهي اشتراك ${r} للمستخدم ${t} خلال ${e} أيام`},oK=t=>{switch(t){case In.MONTHLY:return"الشهري";case In.YEARLY:return"السنوي";case In.LIFETIME:return"مدى الحياة";default:return"غير محدد"}},lK=async()=>{try{const t=vn(Te,"users"),e=Pr(t,er("subscription","!=",null)),n=await Rr(e),r=[];return n.forEach(s=>{var o,l,c,u;const a=s.data();a.subscription&&a.subscription.plan&&r.push({id:s.id,...a,subscription:{...a.subscription,startDate:((l=(o=a.subscription.startDate)==null?void 0:o.toDate)==null?void 0:l.call(o))||new Date(a.subscription.startDate),endDate:((u=(c=a.subscription.endDate)==null?void 0:c.toDate)==null?void 0:u.call(c))||new Date(a.subscription.endDate)}})}),r}catch(t){return console.error("خطأ في جلب الاشتراكات النشطة:",t),[]}},cK=async(t=zm)=>{try{const e=await lK(),n=[];return e.forEach(r=>{if(!r.subscription||!r.subscription.endDate)return;const s=sK(r.subscription.endDate),a=iK(s,t);if(s<=t.infoDays||s<0){const o={id:`${r.id}_${Date.now()}`,userId:r.id,userName:r.displayName||r.email||"مستخدم غير معروف",userEmail:r.email||"",subscriptionPlan:r.subscription.plan,expiryDate:r.subscription.endDate,daysRemaining:s,type:a,message:aK(r.displayName||r.email||"مستخدم غير معروف",s,r.subscription.plan),isRead:!1,createdAt:new Date};n.push(o)}}),n.sort((r,s)=>{const a={expired:0,critical:1,warning:2,info:3};return a[r.type]!==a[s.type]?a[r.type]-a[s.type]:r.daysRemaining-s.daysRemaining}),n}catch(e){return console.error("خطأ في إنشاء إشعارات الاشتراك:",e),[]}},uK=(t,e)=>e?t.filter(n=>n.type===e):t,dK=t=>{localStorage.setItem("notificationSettings",JSON.stringify(t))},hK=()=>{try{const t=localStorage.getItem("notificationSettings");if(t)return{...zm,...JSON.parse(t)}}catch(t){console.error("خطأ في تحميل إعدادات الإشعارات:",t)}return zm},fK=({isOpen:t,onClose:e})=>{const[n,r]=m.useState([]),[s,a]=m.useState([]),[o,l]=m.useState("all"),[c,u]=m.useState(!0),[h,f]=m.useState(hK());m.useEffect(()=>{t&&p()},[t]),m.useEffect(()=>{a(o==="all"?n:uK(n,o))},[n,o]);const p=async()=>{u(!0);try{const w=await cK(h);r(w)}catch(w){console.error("خطأ في تحميل الإشعارات:",w)}finally{u(!1)}},g=w=>{switch(w){case"urgent":return i.jsx(Av,{className:"w-5 h-5 text-red-500"});case"warning":return i.jsx(es,{className:"w-5 h-5 text-yellow-500"});case"info":return i.jsx(wa,{className:"w-5 h-5 text-blue-500"});default:return i.jsx(wa,{className:"w-5 h-5 text-gray-500"})}},N=w=>{switch(w){case"urgent":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-gray-50 border-gray-200"}},x=w=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(w),b=w=>{switch(w){case"all":return"جميع الإشعارات";case"urgent":return"عاجل (يوم واحد)";case"warning":return"تحذير (3 أيام)";case"info":return"معلومات (7 أيام)";default:return"غير محدد"}},_=w=>{const v={...h,[w]:!h[w]};f(v),dK(v)};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(wa,{className:"w-6 h-6"}),i.jsx("h2",{className:"text-xl font-bold",children:"مركز الإشعارات"}),n.length>0&&i.jsx("span",{className:"bg-white text-blue-600 px-2 py-1 rounded-full text-sm font-medium",children:n.length})]}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-white hover:bg-opacity-20 rounded-lg transition-colors",children:i.jsx($a,{className:"w-5 h-5"})})]})}),i.jsxs("div",{className:"p-4 border-b bg-gray-50",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(T3,{className:"w-4 h-4 text-gray-600"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"تصفية حسب:"})]}),["all","urgent","warning","info"].map(w=>i.jsx("button",{onClick:()=>l(w),className:`px-3 py-1 rounded-full text-sm font-medium transition-colors ${o===w?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:b(w)},w))]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"الإعدادات:"}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:h.visualAlerts,onChange:()=>_("visualAlerts"),className:"rounded"}),i.jsx("span",{className:"text-sm",children:"التنبيهات المرئية"})]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:h.soundAlerts,onChange:()=>_("soundAlerts"),className:"rounded"}),i.jsx("span",{className:"text-sm",children:"التنبيهات الصوتية"})]}),i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:h.autoRefresh,onChange:()=>_("autoRefresh"),className:"rounded"}),i.jsx("span",{className:"text-sm",children:"التحديث التلقائي"})]})]})]}),i.jsx("div",{className:"flex-1 overflow-y-auto max-h-96",children:c?i.jsxs("div",{className:"flex items-center justify-center p-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),i.jsx("span",{className:"mr-3 text-gray-600",children:"جاري تحميل الإشعارات..."})]}):s.length===0?i.jsxs("div",{className:"text-center p-8",children:[i.jsx(wa,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد إشعارات"}),i.jsx("p",{className:"text-gray-500",children:o==="all"?"لا توجد إشعارات حاليًا":`لا توجد إشعارات من نوع "${b(o)}"`})]}):i.jsx("div",{className:"p-4 space-y-3",children:s.map(w=>i.jsx("div",{className:`p-4 rounded-lg border-r-4 ${N(w.type)}`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[g(w.type),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h4",{className:"font-medium text-gray-900",children:w.message}),i.jsx("span",{className:"text-xs text-gray-500",children:x(w.createdAt)})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ki,{className:"w-4 h-4 text-gray-400"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("strong",{children:"المستخدم:"})," ",w.userName]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pi,{className:"w-4 h-4 text-gray-400"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("strong",{children:"تاريخ الانتهاء:"})," ",x(w.expiryDate)]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(es,{className:"w-4 h-4 text-gray-400"}),i.jsxs("span",{className:"text-gray-700",children:[i.jsx("strong",{children:"الأيام المتبقية:"})," ",w.daysRemaining]})]})]})]})]})},w.id))})}),i.jsx("div",{className:"p-4 border-t bg-gray-50",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["آخر تحديث: ",x(new Date)]}),i.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"تحديث الإشعارات"})]})})]})}):null},mK=({notification:t,onClose:e,soundEnabled:n,onToggleSound:r})=>{const[s,a]=m.useState(!1),[o,l]=m.useState(null);m.useEffect(()=>{if(t&&(a(!0),n&&c(t.type),t.type!=="urgent")){const g=setTimeout(()=>{u()},1e4);return()=>clearTimeout(g)}},[t,n]),m.useEffect(()=>{typeof window<"u"&&window.AudioContext&&l(new AudioContext)},[]);const c=g=>{if(!(!o||!n))try{const N=o.createOscillator(),x=o.createGain();switch(N.connect(x),x.connect(o.destination),g){case"urgent":N.frequency.setValueAtTime(800,o.currentTime),N.frequency.setValueAtTime(1e3,o.currentTime+.1),N.frequency.setValueAtTime(800,o.currentTime+.2),x.gain.setValueAtTime(.3,o.currentTime),x.gain.exponentialRampToValueAtTime(.01,o.currentTime+.5),N.start(o.currentTime),N.stop(o.currentTime+.5);break;case"warning":N.frequency.setValueAtTime(600,o.currentTime),N.frequency.setValueAtTime(700,o.currentTime+.15),x.gain.setValueAtTime(.2,o.currentTime),x.gain.exponentialRampToValueAtTime(.01,o.currentTime+.3),N.start(o.currentTime),N.stop(o.currentTime+.3);break;case"info":N.frequency.setValueAtTime(400,o.currentTime),x.gain.setValueAtTime(.1,o.currentTime),x.gain.exponentialRampToValueAtTime(.01,o.currentTime+.2),N.start(o.currentTime),N.stop(o.currentTime+.2);break}}catch(N){console.error("خطأ في تشغيل الصوت:",N)}},u=()=>{a(!1),setTimeout(()=>{e()},300)},h=g=>{switch(g){case"urgent":return{bg:"bg-red-500",border:"border-red-600",text:"text-white",icon:i.jsx(Av,{className:"w-6 h-6"}),pulse:"animate-pulse"};case"warning":return{bg:"bg-yellow-500",border:"border-yellow-600",text:"text-white",icon:i.jsx(es,{className:"w-6 h-6"}),pulse:""};case"info":return{bg:"bg-blue-500",border:"border-blue-600",text:"text-white",icon:i.jsx(wa,{className:"w-6 h-6"}),pulse:""};default:return{bg:"bg-gray-500",border:"border-gray-600",text:"text-white",icon:i.jsx(wa,{className:"w-6 h-6"}),pulse:""}}},f=g=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"long",day:"numeric"}).format(g);if(!t)return null;const p=h(t.type);return i.jsxs("div",{className:"fixed top-4 right-4 z-[9999]",children:[i.jsxs("div",{className:`
          transform transition-all duration-300 ease-in-out
          ${s?"translate-x-0 opacity-100":"translate-x-full opacity-0"}
          ${p.bg} ${p.border} ${p.text} ${p.pulse}
          border-2 rounded-lg shadow-2xl max-w-md min-w-80
          backdrop-blur-sm
        `,children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white border-opacity-20",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[p.icon,i.jsxs("h3",{className:"font-bold text-lg",children:[t.type==="urgent"&&"تنبيه عاجل!",t.type==="warning"&&"تحذير",t.type==="info"&&"إشعار"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:r,className:"p-1 hover:bg-white hover:bg-opacity-20 rounded transition-colors",title:n?"إيقاف الصوت":"تشغيل الصوت",children:n?i.jsx(F3,{className:"w-4 h-4"}):i.jsx(V3,{className:"w-4 h-4"})}),i.jsx("button",{onClick:u,className:"p-1 hover:bg-white hover:bg-opacity-20 rounded transition-colors",children:i.jsx($a,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("p",{className:"text-lg font-medium mb-3",children:t.message}),i.jsxs("div",{className:"space-y-2 text-sm opacity-90",children:[i.jsxs("div",{children:[i.jsx("strong",{children:"المستخدم:"})," ",t.userName]}),i.jsxs("div",{children:[i.jsx("strong",{children:"تاريخ انتهاء الاشتراك:"})," ",f(t.expiryDate)]}),i.jsxs("div",{children:[i.jsx("strong",{children:"الأيام المتبقية:"})," ",t.daysRemaining," يوم"]})]})]}),t.type==="urgent"&&i.jsx("div",{className:"h-1 bg-white bg-opacity-20",children:i.jsx("div",{className:"h-full bg-white animate-pulse",style:{animation:"progress 10s linear forwards"}})})]}),i.jsx("style",{jsx:!0,children:`
        @keyframes progress {
          from { width: 100%; }
          to { width: 0%; }
        }
      `})]})},pK=({user:t,onActivateSubscription:e,onDeactivateSubscription:n,onDeleteUser:r})=>{const s=l=>{switch(l){case In.LIFETIME:return i.jsx(Wn,{className:"w-4 h-4 text-yellow-500"});case In.YEARLY:return i.jsx(Wo,{className:"w-4 h-4 text-blue-500"});case In.MONTHLY:return i.jsx(Lo,{className:"w-4 h-4 text-green-500"});default:return null}},a=l=>{switch(l){case In.MONTHLY:return"شهرية";case In.YEARLY:return"سنوية";case In.LIFETIME:return"مدى الحياة";default:return"غير محدد"}},o=l=>l?(l.toDate?l.toDate():new Date(l)).toLocaleDateString("ar-EG"):"غير محدد";return i.jsx(Le,{className:"hover:shadow-lg transition-shadow",children:i.jsxs($e,{className:"p-6",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:i.jsx(ki,{className:"w-5 h-5 text-blue-600"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:t.displayName||"غير محدد"}),i.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[i.jsx(dp,{className:"w-3 h-3 ml-1"}),t.email]})]})]}),i.jsx(Xt,{variant:t.isActive?"default":"secondary",children:t.isActive?"نشط":"غير نشط"})]}),t.subscription&&i.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[s(t.subscription.planType),i.jsx("span",{className:"text-sm font-medium",children:a(t.subscription.planType)})]}),i.jsx(Xt,{variant:t.subscription.isActive?"default":"destructive",children:t.subscription.isActive?"مفعل":"منتهي"})]}),i.jsxs("div",{className:"text-xs text-gray-600",children:[i.jsxs("div",{className:"flex items-center mb-1",children:[i.jsx(Pi,{className:"w-3 h-3 ml-1"}),"البداية: ",o(t.subscription.startDate)]}),t.subscription.endDate&&i.jsxs("div",{className:"flex items-center",children:[i.jsx(Pi,{className:"w-3 h-3 ml-1"}),"النهاية: ",o(t.subscription.endDate)]})]})]}),i.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[e&&i.jsx(V,{size:"sm",variant:"outline",onClick:()=>e(t.id),className:"flex-1",children:"تفعيل الاشتراك"}),n&&i.jsx(V,{size:"sm",variant:"outline",onClick:()=>n(t.id),className:"flex-1",children:"إلغاء الاشتراك"}),r&&i.jsx(V,{size:"sm",variant:"destructive",onClick:()=>r(t.id),children:i.jsx(Ua,{className:"w-4 h-4"})})]})]})})},gK={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEV_MODE:"true",VITE_FIREBASE_API_KEY:"AIzaSyBRYf_nDTQC-wzWZWjFyWjUKKWc5UHOe-I",VITE_FIREBASE_APP_ID:"1:522881129909:web:19e0984be3f2e73533cdfc",VITE_FIREBASE_AUTH_DOMAIN:"voda-45a7f.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-31XWYDVG3Y",VITE_FIREBASE_MESSAGING_SENDER_ID:"522881129909",VITE_FIREBASE_PROJECT_ID:"voda-45a7f",VITE_FIREBASE_STORAGE_BUCKET:"voda-45a7f.firebasestorage.app",VITE_SHOP_ID:"demo-shop-001",VITE_SHOP_NAME:"محل كاشي لينك التجريبي",VITE_USE_EMULATORS:"false"},xK=({navigate:t,auth:e,devMode:n,setDevMode:r,error:s,setError:a,authLoading:o,setAuthLoading:l,activeTab:c,setActiveTab:u,setNotificationCenterOpen:h,setNotificationSettings:f,setNotifications:p,notificationCount:g,setNotificationCount:N,users:x,setUsers:b,filteredUsers:_,setFilteredUsers:w,setLoading:v,setEditingPlan:C,isSavingContent:I,setIsSavingContent:R,lastUpdateInfo:j,loadContentFromFirebase:S,saveContentToFirebase:T})=>{const[P,A]=m.useState(!0),[D,M]=m.useState(""),[$,se]=m.useState(!1),[W,X]=m.useState(null),[U,L]=m.useState({}),[Q,he]=m.useState(!1),[ne,me]=m.useState(null),[Ne,We]=m.useState(!1),[He,Z]=m.useState({sound:!0}),[z,oe]=m.useState(!1),[le,ve]=m.useState(null),Ee=()=>{e!=null&&e.signOut&&e.signOut(),t("/admin/login")},Be=()=>{oe(Y=>!Y)},ht=Y=>{console.log("Activating subscription for user:",Y)},st=Y=>{console.log("Deactivating subscription for user:",Y)},gt=Y=>{console.log("Deleting user:",Y)},Ct=async()=>{console.log("Saving content changes")},En=(Y,we)=>{L(ut=>({...ut,[Y]:we}))},Qn=()=>{console.log("Adding feature")},ns=(Y,we)=>{console.log("Changing feature:",Y,we)},Vr=Y=>{console.log("Removing feature:",Y)},qi=()=>{he(Y=>!Y)},Rn=()=>{We(!0),setTimeout(()=>We(!1),2e3)},rs=()=>Q?"مفعل":"معطل",Ur=()=>{Z(Y=>({...Y,sound:!Y.sound}))},Oe=()=>{ve(null)},Ke=(Y,we)=>{console.log("Toggling user status:",Y,we)},Et=[{id:"users",label:"المستخدمين",icon:tN},{id:"subscriptions",label:"مواعيد الاشتراكات",icon:Pi},{id:"content",label:"إدارة المحتوى",icon:S3},{id:"whatsapp",label:"إدارة الواتساب",icon:Ho},{id:"analytics",label:"الإحصائيات",icon:Hu},{id:"settings",label:"الإعدادات",icon:Ua}];return o?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"جاري التحقق من المصادقة..."}),!1]})}):s?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[i.jsx("div",{className:"text-red-600 mb-4",children:i.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),i.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"حدث خطأ في لوحة التحكم"}),i.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:i.jsx("p",{className:"text-red-700 text-sm font-medium",children:s})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>{a(null),l(!0),window.location.reload()},className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"🔄 إعادة تحميل الصفحة"}),i.jsx("button",{onClick:()=>{a(null),t("/admin/login")},className:"w-full bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:"🔑 العودة لتسجيل الدخول"}),!1,i.jsx("button",{onClick:()=>{console.log("🔍 Current error details:",s),console.log("🔍 Auth state:",e.currentUser),console.log("🔍 Dev mode:",n),console.log("🔍 Environment:",gK)},className:"w-full bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"🐛 طباعة تفاصيل الخطأ في وحدة التحكم"})]})]})}):!n&&!e.currentUser?i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"text-center bg-white p-8 rounded-lg shadow-lg max-w-md w-full",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"لوحة تحكم المدير"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"يجب تسجيل الدخول للوصول إلى لوحة التحكم"}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:()=>t("/admin/login"),className:"w-full bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"🔑 تسجيل الدخول"}),!1]})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[i.jsxs("div",{className:`${P?"w-64":"w-16"} bg-white shadow-lg transition-all duration-300 flex flex-col`,children:[i.jsx("div",{className:"p-4 border-b border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[P&&i.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:i.jsx(Ri,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"لوحة الإدارة"}),i.jsx("p",{className:"text-sm text-gray-500",children:"نظام التحكم"})]})]}),i.jsx("button",{onClick:()=>A(!P),className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:P?i.jsx($a,{className:"w-5 h-5"}):i.jsx(RS,{className:"w-5 h-5"})})]})}),i.jsx("nav",{className:"flex-1 p-4",children:i.jsx("ul",{className:"space-y-2",children:Et.map(Y=>{const we=Y.icon;return i.jsx("li",{children:i.jsxs("button",{onClick:()=>u(Y.id),className:`w-full flex items-center space-x-3 space-x-reverse p-3 rounded-lg transition-colors ${c===Y.id?"bg-gradient-to-r from-purple-600 to-blue-600 text-white":"text-gray-600 hover:bg-gray-100"}`,children:[i.jsx(we,{className:"w-5 h-5"}),P&&i.jsx("span",{className:"font-medium",children:Y.label})]})},Y.id)})})}),i.jsx("div",{className:"p-4 border-t border-gray-200",children:i.jsxs("button",{onClick:Ee,className:"w-full flex items-center space-x-3 space-x-reverse p-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[i.jsx(Gd,{className:"w-5 h-5"}),P&&i.jsx("span",{className:"font-medium",children:"تسجيل الخروج"})]})})]}),i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[i.jsxs("h1",{className:"text-2xl font-bold text-gray-800",children:[c==="users"&&"إدارة المستخدمين",c==="subscriptions"&&"مواعيد الاشتراكات",c==="trials"&&"إدارة التجارب المجانية",c==="analytics"&&"الإحصائيات",c==="settings"&&"الإعدادات"]}),n&&i.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-800 text-xs rounded-full",children:"🔧 وضع التطوير"})]}),i.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[i.jsxs("button",{onClick:Be,className:"relative p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"مركز الإشعارات",children:[i.jsx(wa,{className:"w-6 h-6"}),g>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center animate-pulse",children:g>99?"99+":g})]}),i.jsxs("div",{className:"text-sm text-gray-500",children:["مرحباً، ",n?"المطور":"المدير"]}),i.jsx(d1,{})]})]})}),i.jsxs("main",{className:"flex-1 p-6",children:[c==="users"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[i.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"إجمالي المستخدمين"}),i.jsx("p",{className:"text-2xl font-bold text-gray-800",children:x.length})]}),i.jsx(tN,{className:"w-8 h-8 text-blue-600"})]})}),i.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"المستخدمين النشطين"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.filter(Y=>Y.isActive).length})]}),i.jsx(M3,{className:"w-8 h-8 text-green-600"})]})}),i.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"المستخدمين المعطلين"}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:x.filter(Y=>!Y.isActive).length})]}),i.jsx(L3,{className:"w-8 h-8 text-red-600"})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"قائمة المستخدمين"}),i.jsxs("div",{className:"relative",children:[i.jsx(DS,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),i.jsx("input",{type:"text",placeholder:"البحث عن مستخدم...",value:D,onChange:Y=>M(Y.target.value),className:"pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"})]})]}),D&&i.jsxs("div",{className:"text-sm text-gray-600",children:["عرض ",_.length," من أصل ",x.length," مستخدم",D&&i.jsx("button",{onClick:()=>M(""),className:"mr-2 text-purple-600 hover:text-purple-800 underline",children:"مسح البحث"})]})]}),i.jsx("div",{className:"overflow-x-auto",children:$?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),i.jsx("p",{className:"mt-2 text-gray-500",children:"جاري تحميل البيانات..."})]}):_.length===0?i.jsx("div",{className:"p-8 text-center text-gray-500",children:D?"لا توجد نتائج للبحث":"لا توجد بيانات مستخدمين"}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(Y=>i.jsx(pK,{user:Y,onActivateSubscription:ht,onToggleUserStatus:Ke,onDeactivateSubscription:st,onDeleteUser:gt},Y.id))})})]})]}),c==="subscriptions"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"إجمالي الاشتراكات النشطة"}),i.jsx("p",{className:"text-2xl font-bold text-green-600",children:x.filter(Y=>{var we;return(we=Y.subscription)==null?void 0:we.isActive}).length})]}),i.jsx(wn,{className:"w-8 h-8 text-green-600"})]})}),i.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"تنتهي خلال 7 أيام"}),i.jsx("p",{className:"text-2xl font-bold text-orange-600",children:x.filter(Y=>{var xt,ar;if(!((xt=Y.subscription)!=null&&xt.endDate)||!((ar=Y.subscription)!=null&&ar.isActive))return!1;const we=Y.subscription.endDate.toDate?Y.subscription.endDate.toDate():new Date(Y.subscription.endDate),ut=new Date,At=we.getTime()-ut.getTime(),Dt=Math.ceil(At/(1e3*60*60*24));return Dt<=7&&Dt>0}).length})]}),i.jsx(Av,{className:"w-8 h-8 text-orange-600"})]})}),i.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"منتهية الصلاحية"}),i.jsx("p",{className:"text-2xl font-bold text-red-600",children:x.filter(Y=>{var ut;return(ut=Y.subscription)!=null&&ut.endDate?(Y.subscription.endDate.toDate?Y.subscription.endDate.toDate():new Date(Y.subscription.endDate))<new Date:!1}).length})]}),i.jsx(es,{className:"w-8 h-8 text-red-600"})]})}),i.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-500",children:"اشتراكات مدى الحياة"}),i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:x.filter(Y=>{var we;return((we=Y.subscription)==null?void 0:we.planType)===In.LIFETIME}).length})]}),i.jsx(Wn,{className:"w-8 h-8 text-yellow-600"})]})})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[i.jsxs("div",{className:"p-6 border-b border-gray-200",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"جدول مواعيد الاشتراكات"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"عرض جميع الاشتراكات مع تواريخ البداية والانتهاء"})]}),i.jsx("div",{className:"overflow-x-auto",children:$?i.jsxs("div",{className:"p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),i.jsx("p",{className:"mt-2 text-gray-500",children:"جاري تحميل البيانات..."})]}):i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المستخدم"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"نوع الاشتراك"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"تاريخ البداية"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"تاريخ الانتهاء"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),i.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الأيام المتبقية"})]})}),i.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.filter(Y=>{var we;return(we=Y.subscription)==null?void 0:we.planType}).sort((Y,we)=>{var Dt,xt;if(!((Dt=Y.subscription)!=null&&Dt.endDate)||!((xt=we.subscription)!=null&&xt.endDate))return 0;const ut=Y.subscription.endDate.toDate?Y.subscription.endDate.toDate():new Date(Y.subscription.endDate),At=we.subscription.endDate.toDate?we.subscription.endDate.toDate():new Date(we.subscription.endDate);return ut.getTime()-At.getTime()}).map(Y=>{const we=Y.subscription;if(!we)return null;const ut=we.startDate?we.startDate.toDate?we.startDate.toDate():new Date(we.startDate):null,At=we.endDate?we.endDate.toDate?we.endDate.toDate():new Date(we.endDate):null;let Dt=null,xt="غير محدد";if(we.planType===In.LIFETIME)xt="مدى الحياة";else if(At){const ar=new Date,$r=At.getTime()-ar.getTime();Dt=Math.ceil($r/(1e3*60*60*24)),Dt<0?xt="منتهي":Dt<=7?xt="ينتهي قريباً":xt="نشط"}return i.jsxs("tr",{className:"hover:bg-gray-50",children:[i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-white font-medium text-sm",children:Y.displayName?Y.displayName.charAt(0):Y.email?Y.email.charAt(0).toUpperCase():"?"})}),i.jsxs("div",{className:"mr-4",children:[i.jsx("div",{className:"text-sm font-medium text-gray-900",children:Y.displayName||"غير محدد"}),i.jsx("div",{className:"text-sm text-gray-500",children:Y.email})]})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsxs("div",{className:"flex items-center",children:[we.planType===In.LIFETIME&&i.jsx(Wn,{className:"w-4 h-4 text-yellow-500 ml-2"}),we.planType===In.YEARLY&&i.jsx(Wo,{className:"w-4 h-4 text-blue-500 ml-2"}),we.planType===In.MONTHLY&&i.jsx(Lo,{className:"w-4 h-4 text-green-500 ml-2"}),i.jsx("span",{className:"text-sm font-medium text-gray-900",children:Gw(we.planType)})]})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:ut?ut.toLocaleDateString("ar-EG"):"غير محدد"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:we.planType===In.LIFETIME?"مدى الحياة":At?At.toLocaleDateString("ar-EG"):"غير محدد"}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:i.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${xt==="نشط"?"bg-green-100 text-green-800":xt==="ينتهي قريباً"?"bg-orange-100 text-orange-800":xt==="منتهي"?"bg-red-100 text-red-800":xt==="مدى الحياة"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:xt})}),i.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:we.planType===In.LIFETIME?"∞":Dt!==null?Dt<0?"منتهي":`${Dt} يوم`:"غير محدد"})]},Y.id)}).filter(Boolean)})]})})]})]}),c==="content"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"إدارة محتوى خطط الاشتراك"}),j&&j.timestamp&&i.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["آخر تحديث: ",new Date(j.timestamp).toLocaleString("ar-SA"),j.updatedBy&&` بواسطة: ${j.updatedBy}`]})]}),i.jsxs("button",{onClick:Ct,disabled:I,className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[i.jsx(hp,{className:"w-4 h-4"}),I?"جاري الحفظ...":"حفظ جميع التغييرات"]})]}),i.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:Object.entries(U).map(([Y,we])=>i.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h4",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[Y==="monthly"&&i.jsx(Lo,{className:"w-4 h-4 text-green-500"}),Y==="yearly"&&i.jsx(Wo,{className:"w-4 h-4 text-blue-500"}),Y==="lifetime"&&i.jsx(Wn,{className:"w-4 h-4 text-yellow-500"}),we.name]}),i.jsx("button",{onClick:()=>C(W===Y?null:Y),className:"text-purple-600 hover:text-purple-800",children:i.jsx(kS,{className:"w-4 h-4"})})]}),W===Y?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الباقة"}),i.jsx("input",{type:"text",value:we.name,onChange:ut=>En(Y,"name",ut.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر"}),i.jsx("input",{type:"text",value:we.price,onChange:ut=>En(Y,"price",ut.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المدة"}),i.jsx("input",{type:"text",value:we.period,onChange:ut=>En(Y,"period",ut.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),i.jsx("textarea",{value:we.description,onChange:ut=>En(Y,"description",ut.target.value),rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المميزات"}),i.jsx("button",{onClick:()=>Qn(),className:"text-sm text-purple-600 hover:text-purple-800",children:"+ إضافة ميزة"})]}),i.jsx("div",{className:"space-y-2",children:we.features.map((ut,At)=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"text",value:ut,onChange:Dt=>ns(Y,At,Dt.target.value),className:"flex-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent text-sm"}),i.jsx("button",{onClick:()=>Vr(Y),className:"text-red-500 hover:text-red-700",children:i.jsx($a,{className:"w-4 h-4"})})]},At))})]})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"text-2xl font-bold text-purple-600",children:we.price}),i.jsx("div",{className:"text-sm text-gray-600",children:we.period}),i.jsx("div",{className:"text-sm text-gray-700",children:we.description}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-sm font-medium text-gray-700",children:"المميزات:"}),we.features.map((ut,At)=>i.jsxs("div",{className:"text-xs text-gray-600 flex items-center gap-1",children:[i.jsx(wn,{className:"w-3 h-3 text-green-500"}),ut]},At))]})]})]},Y))})]})}),c==="whatsapp"&&i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Ho,{className:"w-6 h-6 text-green-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"إدارة الواتساب"})]}),i.jsx(rK,{})]}),c==="analytics"&&i.jsxs("div",{className:"bg-white rounded-lg p-8 shadow-sm border border-gray-200 text-center",children:[i.jsx(Hu,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"الإحصائيات"}),i.jsx("p",{className:"text-gray-500",children:"سيتم إضافة الإحصائيات قريباً"})]}),c==="settings"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(Ua,{className:"w-6 h-6 text-blue-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"إعدادات التحديث التلقائي"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-800",children:"التحديث التلقائي للاشتراكات"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"تحديث حالة الاشتراكات المنتهية الصلاحية تلقائياً كل ساعة"})]}),i.jsx("button",{onClick:qi,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${Q?"bg-blue-600":"bg-gray-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${Q?"translate-x-6":"translate-x-1"}`})})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-800",children:"تحديث يدوي"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"تشغيل التحديث فوراً للاشتراكات المنتهية الصلاحية"}),ne&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["آخر تحديث: ",ne.toLocaleString("ar-SA")]})]}),i.jsx("button",{onClick:Rn,disabled:Ne,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Ne?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري التحديث..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Lo,{className:"w-4 h-4"}),"تحديث الآن"]})})]}),i.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(wn,{className:"w-5 h-5 text-blue-600"}),i.jsx("h4",{className:"font-medium text-blue-800",children:"حالة النظام"})]}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-blue-700",children:"التحديث التلقائي:"}),i.jsx("span",{className:`font-medium ${Q?"text-green-600":"text-red-600"}`,children:Q?"مفعل":"معطل"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-blue-700",children:"فترة التحديث:"}),i.jsxs("span",{className:"text-blue-800 font-medium",children:[rs().intervalMinutes," دقيقة"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-blue-700",children:"حالة الخدمة:"}),i.jsx("span",{className:`font-medium ${rs().isRunning?"text-green-600":"text-gray-600"}`,children:rs().isRunning?"يعمل":"متوقف"})]})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx(wa,{className:"w-6 h-6 text-blue-600"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"إعدادات الإشعارات"})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-gray-800",children:"التنبيهات الصوتية"}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"تشغيل صوت عند وصول إشعارات جديدة"})]}),i.jsx("button",{onClick:Ur,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${He.soundAlerts?"bg-blue-600":"bg-gray-300"}`,children:i.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${He.soundAlerts?"translate-x-6":"translate-x-1"}`})})]})})]})]})]})]}),i.jsx(fK,{isOpen:z,onClose:()=>h(!1)}),i.jsx(mK,{notification:le,onClose:Oe,soundEnabled:He.soundAlerts,onToggleSound:Ur})]})},yK=()=>{const t=Gn(),{user:e,loading:n}=Kt(),[r,s]=m.useState(!1),[a,o]=m.useState(null),[l,c]=m.useState(!1),[u,h]=m.useState("users"),[f,p]=m.useState(0),[g,N]=m.useState([]),[x,b]=m.useState([]),[_,w]=m.useState(!1),[v,C]=m.useState(null);m.useEffect(()=>{const A=localStorage.getItem("admin_dev_mode")==="true";s(A)},[]),m.useEffect(()=>{if(!(!r&&!e)){c(!0);try{const A=Pr(vn(Te,"users")),D=vA(A,M=>{const $=M.docs.map(se=>({id:se.id,...se.data()}));N($),b($),c(!1)},M=>{console.error("Error loading users:",M),o("فشل في تحميل بيانات المستخدمين"),c(!1)});return()=>D()}catch(A){console.error("Error setting up users listener:",A),o("فشل في إعداد مراقب البيانات"),c(!1)}}},[e,r]);const I=A=>{console.log("Notification center:",A)},R=A=>{console.log("Notification settings:",A)},j=A=>{console.log("Notifications:",A)},S=A=>{console.log("Editing plan:",A)},T=async()=>(console.log("Loading content from Firebase"),{}),P=async A=>(console.log("Saving content to Firebase:",A),!0);return n?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"جاري التحقق من صلاحية الدخول..."})]})}):i.jsx(xK,{navigate:t,auth:bt,devMode:r,setDevMode:s,error:a,setError:o,authLoading:n,setAuthLoading:()=>{},activeTab:u,setActiveTab:h,setNotificationCenterOpen:I,setNotificationSettings:R,setNotifications:j,notificationCount:f,setNotificationCount:p,users:g,setUsers:N,filteredUsers:x,setFilteredUsers:b,setLoading:c,setEditingPlan:S,isSavingContent:_,setIsSavingContent:w,lastUpdateInfo:v,loadContentFromFirebase:T,saveContentToFirebase:P})};function vK(){const{user:t,profile:e,loading:n,signIn:r}=Kt(),[s,a]=m.useState(null),[o,l]=m.useState("alkaptin7878@mail.ru"),[c,u]=m.useState("01123456");m.useEffect(()=>{const p=()=>{a({contextUser:t?{uid:t.uid,email:t.email,emailVerified:t.emailVerified}:null,contextProfile:e,contextLoading:n,firebaseCurrentUser:bt.currentUser?{uid:bt.currentUser.uid,email:bt.currentUser.email,emailVerified:bt.currentUser.emailVerified}:null,timestamp:new Date().toISOString()})};p();const g=setInterval(p,2e3);return()=>clearInterval(g)},[t,e,n]);const h=async()=>{console.log("🧪 Testing login with:",{email:o,password:"***"});try{const p=await r(o,c);console.log("🧪 Login result:",p)}catch(p){console.error("🧪 Login error:",p)}},f=async()=>{console.log("🔥 Testing Firestore connection..."),console.log("🔍 Current auth state:",{user:t?{uid:t.uid,email:t.email}:null,firebaseCurrentUser:bt.currentUser?{uid:bt.currentUser.uid,email:bt.currentUser.email}:null});try{if(!t&&!bt.currentUser){console.log("❌ No user logged in - please login first"),alert("يرجى تسجيل الدخول أولاً لاختبار الاتصال مع Firestore");return}const p=t||bt.currentUser;console.log("✅ Using user:",p==null?void 0:p.email),console.log("📖 Testing user document read...");const g=tt(Te,"users",p.uid),N=await mn(g);N.exists()?console.log("✅ User document exists:",N.data()):(console.log("⚠️ User document does not exist, creating..."),await Ir(g,{email:p.email,uid:p.uid,createdAt:new Date,role:"user",isActive:!0}),console.log("✅ User document created")),console.log("📖 Testing merchant wallet read...");const x=tt(Te,"merchantWallets",`test_${p.uid}`),b=await mn(x);b.exists()?console.log("✅ Wallet document exists:",b.data()):(console.log("⚠️ Wallet document does not exist, creating test wallet..."),await Ir(x,{merchantUserId:p.uid,walletName:"محفظة تجريبية",balance:0,createdAt:new Date}),console.log("✅ Test wallet created")),console.log("🎉 Firestore connection test completed successfully!"),alert("تم اختبار الاتصال مع Firestore بنجاح! تحقق من وحدة التحكم للتفاصيل")}catch(p){console.error("❌ Firestore connection error:",p),alert(`خطأ في الاتصال مع Firestore: ${p.message}`)}};return i.jsx("div",{className:"min-h-screen bg-background p-6",children:i.jsx("div",{className:"max-w-4xl mx-auto space-y-6",children:i.jsxs(Le,{children:[i.jsx(Ze,{children:i.jsx(ct,{children:"🔐 اختبار حالة المصادقة"})}),i.jsxs($e,{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"email",children:"البريد الإلكتروني"}),i.jsx(de,{id:"email",type:"email",value:o,onChange:p=>l(p.target.value),placeholder:"أدخل البريد الإلكتروني"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"password",children:"كلمة المرور"}),i.jsx(de,{id:"password",type:"password",value:c,onChange:p=>u(p.target.value),placeholder:"أدخل كلمة المرور"})]}),i.jsx(V,{onClick:h,className:"w-full",disabled:n,children:n?"جاري تسجيل الدخول...":"تسجيل دخول تجريبي"}),t&&i.jsx(V,{onClick:f,className:"w-full",variant:"outline",children:"اختبار الاتصال مع Firestore"}),i.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg",children:[i.jsx("h3",{className:"font-bold mb-2",children:"حالة المصادقة الحالية:"}),i.jsx("pre",{className:"text-sm overflow-auto",children:JSON.stringify(s,null,2)})]})]})]})})})}const wK=({selectedAvatarId:t,onAvatarSelect:e,className:n=""})=>{const[r,s]=m.useState(!1),a=by.find(o=>o.id===t);return i.jsxs("div",{className:`relative ${n}`,children:[i.jsx("button",{onClick:()=>s(!r),className:"w-20 h-20 rounded-full border-4 border-blue-500 hover:border-blue-600 transition-colors duration-200 bg-white shadow-lg overflow-hidden",type:"button",children:a?i.jsx("div",{className:"w-full h-full",children:a.component}):i.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:i.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})})}),i.jsx("p",{className:"text-sm text-gray-600 mt-2 text-center",children:"اختر صورة البروفيل"}),r&&i.jsxs("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 bg-white rounded-lg shadow-xl border border-gray-200 p-4 z-50 min-w-max",children:[i.jsx("div",{className:"grid grid-cols-5 gap-3",children:by.map(o=>i.jsx("button",{onClick:()=>{e(o.id),s(!1)},className:`w-16 h-16 rounded-full border-2 transition-all duration-200 hover:scale-105 overflow-hidden ${t===o.id?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-blue-400"}`,type:"button",title:o.name,children:i.jsx("div",{className:"w-full h-full",children:o.component})},o.id))}),i.jsx("button",{onClick:()=>s(!1),className:"mt-3 w-full py-2 text-sm text-gray-500 hover:text-gray-700 transition-colors",type:"button",children:"إغلاق"})]}),r&&i.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>s(!1)})]})},bK=()=>{const t=Gn(),{toast:e}=_n(),{profile:n,updateUserProfile:r,updateAvatarId:s,refreshProfile:a,userSubscription:o,isSubscriptionActive:l,checkSubscriptionStatus:c}=Kt(),[u,h]=m.useState({fullName:(n==null?void 0:n.fullName)||"",phone:(n==null?void 0:n.phone)||"",avatarId:(n==null?void 0:n.avatarId)||""}),[f,p]=m.useState(!1),[g,N]=m.useState(!1);m.useEffect(()=>{(async()=>{try{await c(),console.log("تم تحديث بيانات الاشتراك عند تحميل صفحة البروفايل")}catch(C){console.error("خطأ في تحديث بيانات الاشتراك:",C)}})()},[c]);const x=v=>{const{name:C,value:I}=v.target;h(R=>({...R,[C]:I}))},b=v=>{h(C=>({...C,avatarId:v}))},_=async v=>{v.preventDefault(),p(!0);try{await r({fullName:u.fullName,phone:u.phone}),u.avatarId!==(n==null?void 0:n.avatarId)&&await s(u.avatarId),await a(),e({title:"تم التحديث بنجاح",description:"تم حفظ إعدادات البروفيل بنجاح"}),setTimeout(()=>{t(-1)},500)}catch(C){console.error("Error updating profile:",C),e({title:"خطأ في التحديث",description:"حدث خطأ أثناء حفظ الإعدادات",variant:"destructive"})}finally{p(!1)}},w=async()=>{N(!0);try{await a(),await c(),console.log("تم تحديث بيانات الاشتراك يدوياً:",{userSubscription:o,isSubscriptionActive:l}),e({title:"تم تحديث بيانات الاشتراك",description:"تم تحديث معلومات اشتراكك بنجاح"})}catch(v){console.error("Error refreshing subscription:",v),e({title:"خطأ في التحديث",description:"حدث خطأ أثناء تحديث بيانات الاشتراك",variant:"destructive"})}finally{N(!1)}};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsxs(V,{variant:"outline",size:"sm",onClick:()=>t(-1),className:"flex items-center gap-2",children:[i.jsx(Mo,{className:"h-4 w-4"}),"العودة"]}),i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"إعدادات البروفيل"})]}),i.jsxs(Le,{className:"shadow-lg mb-6",children:[i.jsx(Ze,{children:i.jsxs(ct,{className:"flex items-center gap-2",children:[i.jsx(ki,{className:"h-5 w-5"}),"تحديث بيانات البروفيل"]})}),i.jsx($e,{children:i.jsxs("form",{onSubmit:_,className:"space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{children:"صورة البروفيل"}),i.jsx("div",{className:"flex justify-center",children:i.jsx(wK,{selectedAvatarId:u.avatarId,onAvatarSelect:b})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"fullName",children:"الاسم الكامل"}),i.jsx(de,{id:"fullName",name:"fullName",type:"text",value:u.fullName,onChange:x,placeholder:"أدخل اسمك الكامل",className:"text-right"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(be,{htmlFor:"phone",children:"رقم الهاتف"}),i.jsx(de,{id:"phone",name:"phone",type:"tel",value:u.phone,onChange:x,placeholder:"أدخل رقم هاتفك",className:"text-right"})]}),i.jsx(V,{type:"submit",disabled:f,className:"w-full h-12 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-medium transition-all duration-300",children:f?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"جاري الحفظ..."]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hp,{className:"h-4 w-4"}),"حفظ التغييرات"]})})]})})]}),i.jsxs(Le,{className:"shadow-lg",children:[i.jsx(Ze,{children:i.jsxs(ct,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Wn,{className:"h-5 w-5 text-yellow-500"}),"معلومات الاشتراك"]}),i.jsxs(V,{onClick:w,disabled:g,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[i.jsx(Oo,{className:`w-4 h-4 ${g?"animate-spin":""}`}),g?"جاري التحديث...":"تحديث"]})]})}),i.jsx($e,{children:l&&o?i.jsx("div",{children:i.jsxs("div",{className:"p-6 rounded-lg bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Wn,{className:"h-6 w-6 text-green-500"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"حالة الاشتراك"})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-green-100 px-3 py-1 rounded-full",children:[i.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),i.jsx("span",{className:"text-green-700 font-medium text-sm",children:"نشط"})]})]}),i.jsx("div",{className:"mb-4 p-4 bg-white/70 rounded-lg border border-green-100",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600 font-medium",children:"نوع الباقة:"}),i.jsx("span",{className:`font-bold text-lg ${PB(o)}`,children:Gw(o.planType)})]})}),i.jsxs("div",{className:"text-lg font-medium text-gray-700 leading-relaxed",children:[o.planType==="monthly"&&i.jsxs("p",{children:["اشتراكك الشهري يبدأ يوم ",i.jsx("span",{className:"font-bold text-green-600",children:Zl(o.startDate)})," وينتهي يوم ",i.jsx("span",{className:"font-bold text-green-600",children:Zl(o.endDate)})]}),o.planType==="yearly"&&i.jsxs("p",{children:["اشتراكك السنوي يبدأ يوم ",i.jsx("span",{className:"font-bold text-green-600",children:Zl(o.startDate)})," وينتهي يوم ",i.jsx("span",{className:"font-bold text-green-600",children:Zl(o.endDate)})]}),o.planType==="lifetime"&&i.jsx("p",{className:"text-yellow-600 font-bold",children:"🎉 اشتراكك مدى الحياة - لا ينتهي أبداً"})]}),l&&o.planType!=="lifetime"&&i.jsx("div",{className:"mt-4 p-3 bg-white/50 rounded-lg border border-green-100",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["متبقي ",i.jsx("span",{className:"font-semibold text-green-600",children:EA(o)})," يوم على انتهاء الاشتراك"]})})]})}):i.jsx("div",{className:"text-center py-8",children:i.jsxs("div",{className:"p-6 rounded-lg bg-gradient-to-r from-red-50 to-orange-50 border border-red-200",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Wn,{className:"h-6 w-6 text-red-500"}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"حالة الاشتراك"})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-red-100 px-3 py-1 rounded-full",children:[i.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),i.jsx("span",{className:"text-red-700 font-medium text-sm",children:"غير نشط"})]})]}),i.jsx("div",{className:"mb-4 p-4 bg-white/70 rounded-lg border border-red-100",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-600 font-medium",children:"نوع الباقة:"}),i.jsx("span",{className:"font-bold text-lg text-gray-500",children:"لا يوجد اشتراك"})]})}),i.jsx("p",{className:"text-gray-600 text-lg font-medium",children:"لا يوجد اشتراك مفعل"}),i.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"تواصل مع الإدارة لتفعيل اشتراكك"})]})})})]})]})})},NK=()=>{const t=ol();return m.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),i.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),i.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},_K=({message:t="مرحباً، أريد الاستفسار عن خدماتكم"})=>{const{settings:e}=ng(),n=()=>{if(!e)return;const r=encodeURIComponent(t),s=`https://wa.me/${e.phoneNumber}?text=${r}`;window.open(s,"_blank")};return i.jsxs(i.Fragment,{children:[i.jsx("style",{children:`
          @keyframes pulse {
            0% {
              transform: scale(1);
              box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7);
            }
            70% {
              transform: scale(1.05);
              box-shadow: 0 0 0 10px rgba(37, 211, 102, 0);
            }
            100% {
              transform: scale(1);
              box-shadow: 0 0 0 0 rgba(37, 211, 102, 0);
            }
          }

          @keyframes ripple {
            0% {
              transform: scale(0.8);
              opacity: 1;
            }
            100% {
              transform: scale(2.4);
              opacity: 0;
            }
          }

          @keyframes slideIn {
            0% {
              transform: translateX(-100%);
              opacity: 0;
            }
            100% {
              transform: translateX(0);
              opacity: 1;
            }
          }

          .whatsapp-container {
            position: fixed;
            bottom: 40px;
            left: 40px;
            z-index: 100;
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideIn 0.8s ease-out;
          }

          .whatsapp-text {
            background: linear-gradient(135deg, #25d366, #128c7e);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            white-space: nowrap;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            cursor: pointer;
            user-select: none;
          }

          .whatsapp-text:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
            background: linear-gradient(135deg, #128c7e, #25d366);
          }

          .whatsapp-float {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, rgba(37, 211, 102, 0.6), rgba(18, 140, 126, 0.6));
            color: #FFF;
            border-radius: 50px;
            text-align: center;
            font-size: 30px;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.2);
            cursor: pointer;
            animation: pulse 2s infinite;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255, 255, 255, 0.3);
            outline: none;
            position: relative;
            backdrop-filter: blur(10px);
            opacity: 0.7;
          }

          .whatsapp-float:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.5);
          }

          .whatsapp-float::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background-color: rgba(37, 211, 102, 0.3);
            transform: translate(-50%, -50%);
            animation: ripple 1.5s infinite;
            z-index: -1;
          }

          .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 1s infinite;
            border: 2px solid white;
          }

          @media (max-width: 768px) {
            .whatsapp-container {
              bottom: 20px;
              left: 20px;
            }
            
            .whatsapp-text {
              font-size: 14px;
              padding: 10px 16px;
            }
            
            .whatsapp-float {
              width: 50px;
              height: 50px;
              font-size: 24px;
            }
          }
        `}),i.jsx("div",{className:"whatsapp-container",onClick:n,children:i.jsxs("button",{className:"whatsapp-float",children:[i.jsx("svg",{width:"30",height:"30",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.488"})}),i.jsx("div",{className:"notification-badge",children:"!"})]})})]})},EK=new oL,jK=()=>i.jsx(cL,{client:EK,children:i.jsx(kB,{children:i.jsx(CB,{children:i.jsxs(LO,{children:[i.jsx(bM,{}),i.jsx(ZM,{}),i.jsxs(iF,{children:[i.jsxs(UT,{children:[i.jsx(Qt,{path:"/",element:i.jsx(SE,{})}),i.jsx(Qt,{path:"/dashboard-redirect",element:i.jsx(DB,{})}),i.jsx(Qt,{path:"/landing",element:i.jsx(SE,{})}),i.jsx(Qt,{path:"/subscriptions",element:i.jsx(RH,{})}),i.jsx(Qt,{path:"/auth",element:i.jsx(kH,{})}),i.jsx(Qt,{path:"/user/login",element:i.jsx(DH,{})}),i.jsx(Qt,{path:"/user/register",element:i.jsx(LH,{})}),i.jsx(Qt,{path:"/user/account-setup",element:i.jsx(FH,{})}),i.jsx(Qt,{path:"/user/pending-approval",element:i.jsx(Yq,{})}),i.jsx(Qt,{path:"/user/dashboard",element:i.jsx(Hq,{})}),i.jsx(Qt,{path:"/admin/login",element:i.jsx(Xq,{})}),i.jsx(Qt,{path:"/admin/dashboard",element:i.jsx(yK,{})}),i.jsx(Qt,{path:"/profile-settings",element:i.jsx(bK,{})}),i.jsx(Qt,{path:"/auth-test",element:i.jsx(vK,{})}),i.jsx(Qt,{path:"/merchant/*",element:i.jsx(Qq,{})}),i.jsx(Qt,{path:"/dashboard/login",element:i.jsx(VH,{})}),i.jsx(Qt,{path:"/dashboard",element:i.jsx(yq,{})}),i.jsx(Qt,{path:"*",element:i.jsx(NK,{})})]}),i.jsx(_K,{message:"مرحباً، أحتاج مساعدة في موقع Cashy Link"})]})]})})})});tS(document.getElementById("root")).render(i.jsx(jK,{}));
